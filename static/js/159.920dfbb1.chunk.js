"use strict";(self.webpackChunkoctoprint=self.webpackChunkoctoprint||[]).push([[159],{4159:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});var n=t(5043),l=t(3402),i=t(579);const c=new l.qw({id:"application-0-lpfzcpx"}),r=()=>{const[e,s]=(0,n.useState)(null),[t,l]=(0,n.useState)(0),[r,o]=(0,n.useState)(""),[a,d]=(0,n.useState)(!1);return(0,i.jsxs)("div",{className:"upload-container",children:[(0,i.jsx)("h2",{children:"Upload G-code File"}),(0,i.jsx)("input",{type:"file",accept:".gcode",onChange:e=>{const t=e.target.files[0];if(t){const e=(t.size/1048576).toFixed(2);e>5?(o("File size exceeds 5MB limit. Please select a smaller file."),s(null),l(0)):(s(t),l(parseFloat(e)),o(""))}}}),e&&(0,i.jsxs)("p",{children:["File size: ",t," MB"]}),(0,i.jsx)("button",{onClick:async()=>{if(e){d(!0);try{const s=c.currentUser;if(!s)return o("User not authenticated"),void d(!1);const n=new FileReader;n.onload=async n=>{const l=n.target.result,i=l.split("\n");let c="Unknown";if(i.length>1){const e=i[1].match(/;TIME:(\d+)/);e&&(c=parseInt(e[1],10))}const r={fileName:e.name,userId:s.id,fileSize:parseFloat(t),fileContent:l,printTime:c},a=await s.functions.uploadGcodeFile(r);a.success?o("File uploaded successfully"):o("Error uploading file: "+a.message),d(!1)},n.readAsText(e)}catch(s){console.error("Error uploading file:",s),o("Error uploading file"),d(!1)}}else o("No file selected")},className:"btn btn-info",disabled:a||!e,children:a?"Uploading...":"Upload"}),r&&(0,i.jsx)("p",{children:r})]})},o=new l.qw({id:"application-0-lpfzcpx"}),a=()=>{(0,n.useEffect)((()=>{e()}),[]);const e=async()=>{if(o.currentUser&&""!==o.currentUser.accessToken)try{await o.currentUser.refreshAccessToken()}catch(e){console.log(e.error)}else window.location.href="/octoprint/login"};return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{children:"Home Page"}),(0,i.jsx)(r,{})]})}}}]);
//# sourceMappingURL=159.920dfbb1.chunk.js.map