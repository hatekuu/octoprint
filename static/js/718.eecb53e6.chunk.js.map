{"version":3,"file":"static/js/718.eecb53e6.chunk.js","mappings":"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","sources":["../node_modules/nanoid/index.browser.js","../node_modules/@rjsf/core/src/components/fields/ArrayField.tsx","../node_modules/@rjsf/core/src/components/fields/BooleanField.tsx","../node_modules/@rjsf/core/src/components/fields/MultiSchemaField.tsx","../node_modules/@rjsf/core/src/components/fields/NumberField.tsx","../node_modules/markdown-to-jsx/index.tsx","../node_modules/@rjsf/core/src/components/fields/ObjectField.tsx","../node_modules/@rjsf/core/src/components/fields/SchemaField.tsx","../node_modules/@rjsf/core/src/components/fields/StringField.tsx","../node_modules/@rjsf/core/src/components/fields/NullField.tsx","../node_modules/@rjsf/core/src/components/fields/index.ts","../node_modules/@rjsf/core/src/components/templates/ArrayFieldDescriptionTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/ArrayFieldItemTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/ArrayFieldTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/ArrayFieldTitleTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/BaseInputTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/ButtonTemplates/SubmitButton.tsx","../node_modules/@rjsf/core/src/components/templates/ButtonTemplates/IconButton.tsx","../node_modules/@rjsf/core/src/components/templates/ButtonTemplates/AddButton.tsx","../node_modules/@rjsf/core/src/components/templates/ButtonTemplates/index.ts","../node_modules/@rjsf/core/src/components/templates/DescriptionField.tsx","../node_modules/@rjsf/core/src/components/templates/ErrorList.tsx","../node_modules/@rjsf/core/src/components/templates/FieldTemplate/Label.tsx","../node_modules/@rjsf/core/src/components/templates/FieldTemplate/index.ts","../node_modules/@rjsf/core/src/components/templates/FieldTemplate/FieldTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/FieldErrorTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/FieldHelpTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/ObjectFieldTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/TitleField.tsx","../node_modules/@rjsf/core/src/components/templates/UnsupportedField.tsx","../node_modules/@rjsf/core/src/components/templates/WrapIfAdditionalTemplate.tsx","../node_modules/@rjsf/core/src/components/templates/index.ts","../node_modules/@rjsf/core/src/components/widgets/AltDateWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/AltDateTimeWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/CheckboxWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/CheckboxesWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/ColorWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/DateWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/DateTimeWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/EmailWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/FileWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/HiddenWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/PasswordWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/RadioWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/RangeWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/SelectWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/TextareaWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/TextWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/TimeWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/URLWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/UpDownWidget.tsx","../node_modules/@rjsf/core/src/components/widgets/index.ts","../node_modules/@rjsf/core/src/components/Form.tsx","../node_modules/@rjsf/core/src/getDefaultRegistry.ts","../node_modules/@rjsf/core/src/index.ts","../node_modules/@rjsf/utils/src/isObject.ts","../node_modules/@rjsf/utils/src/allowAdditionalItems.ts","../node_modules/@rjsf/utils/src/asNumber.ts","../node_modules/@rjsf/utils/src/constants.ts","../node_modules/@rjsf/utils/src/getUiOptions.ts","../node_modules/@rjsf/utils/src/canExpand.ts","../node_modules/@rjsf/utils/src/createErrorHandler.ts","../node_modules/@rjsf/utils/src/deepEquals.ts","../node_modules/@rjsf/utils/src/findSchemaDefinition.ts","../node_modules/@rjsf/utils/src/getOptionMatchingSimpleDiscriminator.ts","../node_modules/@rjsf/utils/src/schema/getMatchingOption.ts","../node_modules/@rjsf/utils/src/schema/getFirstMatchingOption.ts","../node_modules/@rjsf/utils/src/getDiscriminatorFieldFromSchema.ts","../node_modules/@rjsf/utils/src/guessType.ts","../node_modules/@rjsf/utils/src/getSchemaType.ts","../node_modules/@rjsf/utils/src/mergeSchemas.ts","../node_modules/@rjsf/utils/src/schema/retrieveSchema.ts","../node_modules/@rjsf/utils/src/schema/getClosestMatchingOption.ts","../node_modules/@rjsf/utils/src/isFixedItems.ts","../node_modules/@rjsf/utils/src/mergeDefaultsWithFormData.ts","../node_modules/@rjsf/utils/src/mergeObjects.ts","../node_modules/@rjsf/utils/src/schema/isSelect.ts","../node_modules/@rjsf/utils/src/isConstant.ts","../node_modules/@rjsf/utils/src/schema/isMultiSelect.ts","../node_modules/@rjsf/utils/src/schema/getDefaultFormState.ts","../node_modules/@rjsf/utils/src/isCustomWidget.ts","../node_modules/@rjsf/utils/src/schema/isFilesArray.ts","../node_modules/@rjsf/utils/src/schema/sanitizeDataForNewSchema.ts","../node_modules/@rjsf/utils/src/schema/toIdSchema.ts","../node_modules/@rjsf/utils/src/schema/toPathSchema.ts","../node_modules/@rjsf/utils/src/createSchemaUtils.ts","../node_modules/@rjsf/utils/src/schema/getDisplayLabel.ts","../node_modules/@rjsf/utils/src/schema/mergeValidationData.ts","../node_modules/@rjsf/utils/src/dataURItoBlob.ts","../node_modules/@rjsf/utils/src/pad.ts","../node_modules/@rjsf/utils/src/dateRangeOptions.ts","../node_modules/@rjsf/utils/src/englishStringTranslator.ts","../node_modules/@rjsf/utils/src/replaceStringParameters.ts","../node_modules/@rjsf/utils/src/enumOptionsValueForIndex.ts","../node_modules/@rjsf/utils/src/enumOptionsDeselectValue.ts","../node_modules/@rjsf/utils/src/enumOptionsIsSelected.ts","../node_modules/@rjsf/utils/src/enumOptionsIndexForValue.ts","../node_modules/@rjsf/utils/src/enumOptionsSelectValue.ts","../node_modules/@rjsf/utils/src/ErrorSchemaBuilder.ts","../node_modules/@rjsf/utils/src/getDateElementProps.ts","../node_modules/@rjsf/utils/src/rangeSpec.ts","../node_modules/@rjsf/utils/src/getInputProps.ts","../node_modules/@rjsf/utils/src/getSubmitButtonOptions.ts","../node_modules/@rjsf/utils/src/getTemplate.ts","../node_modules/@rjsf/utils/src/getWidget.tsx","../node_modules/@rjsf/utils/src/hashForSchema.ts","../node_modules/@rjsf/utils/src/hasWidget.ts","../node_modules/@rjsf/utils/src/idGenerators.ts","../node_modules/@rjsf/utils/src/labelValue.ts","../node_modules/@rjsf/utils/src/localToUTC.ts","../node_modules/@rjsf/utils/src/optionsList.ts","../node_modules/@rjsf/utils/src/toConstant.ts","../node_modules/@rjsf/utils/src/orderProperties.ts","../node_modules/@rjsf/utils/src/parseDateString.ts","../node_modules/@rjsf/utils/src/schemaRequiresTrueValue.ts","../node_modules/@rjsf/utils/src/shouldRender.ts","../node_modules/@rjsf/utils/src/toDateString.ts","../node_modules/@rjsf/utils/src/toErrorList.ts","../node_modules/@rjsf/utils/src/enums.ts","../node_modules/@rjsf/utils/src/toErrorSchema.ts","../node_modules/@rjsf/utils/src/unwrapErrorHandler.ts","../node_modules/@rjsf/utils/src/utcToLocal.ts","../node_modules/@rjsf/utils/src/validationDataMerge.ts","../node_modules/@rjsf/utils/src/withIdRefPrefix.ts","../node_modules/@rjsf/utils/node_modules/react-is/cjs/react-is.production.min.js","../node_modules/@rjsf/utils/node_modules/react-is/index.js","../node_modules/@rjsf/validator-ajv8/src/createAjvInstance.ts","../node_modules/@rjsf/validator-ajv8/src/processRawValidationErrors.ts","../node_modules/@rjsf/validator-ajv8/src/validator.ts","../node_modules/@rjsf/validator-ajv8/src/index.ts","../node_modules/@rjsf/validator-ajv8/src/customizeValidator.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/ajv.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/codegen/code.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/codegen/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/codegen/scope.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/errors.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/names.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/ref_error.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/resolve.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/rules.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/util.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/applicability.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/boolSchema.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/dataType.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/defaults.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/keyword.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/compile/validate/subschema.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/core.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/runtime/equal.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/runtime/ucs2length.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/runtime/uri.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/runtime/validation_error.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/additionalItems.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/additionalProperties.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/allOf.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/anyOf.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/contains.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/dependencies.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/if.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/items.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/items2020.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/not.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/oneOf.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/patternProperties.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/prefixItems.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/properties.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/propertyNames.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/applicator/thenElse.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/code.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/core/id.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/core/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/core/ref.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/discriminator/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/discriminator/types.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/draft7.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/format/format.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/format/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/metadata.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/const.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/enum.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/index.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/limitItems.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/limitLength.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/limitNumber.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/limitProperties.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/multipleOf.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/pattern.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/required.ts","../node_modules/@rjsf/validator-ajv8/node_modules/ajv/lib/vocabularies/validation/uniqueItems.ts","../node_modules/@rjsf/validator-ajv8/node_modules/json-schema-traverse/index.js","../node_modules/ajv-formats/src/formats.ts","../node_modules/ajv-formats/src/index.ts","../node_modules/ajv-formats/src/limit.ts","../node_modules/ajv-formats/node_modules/ajv/lib/ajv.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/codegen/code.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/codegen/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/codegen/scope.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/errors.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/names.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/ref_error.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/resolve.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/rules.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/util.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/applicability.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/boolSchema.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/dataType.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/defaults.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/keyword.ts","../node_modules/ajv-formats/node_modules/ajv/lib/compile/validate/subschema.ts","../node_modules/ajv-formats/node_modules/ajv/lib/core.ts","../node_modules/ajv-formats/node_modules/ajv/lib/runtime/equal.ts","../node_modules/ajv-formats/node_modules/ajv/lib/runtime/ucs2length.ts","../node_modules/ajv-formats/node_modules/ajv/lib/runtime/uri.ts","../node_modules/ajv-formats/node_modules/ajv/lib/runtime/validation_error.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/additionalItems.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/additionalProperties.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/allOf.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/anyOf.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/contains.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/dependencies.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/if.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/items.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/items2020.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/not.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/oneOf.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/patternProperties.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/prefixItems.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/properties.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/propertyNames.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/applicator/thenElse.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/code.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/core/id.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/core/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/core/ref.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/discriminator/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/discriminator/types.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/draft7.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/format/format.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/format/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/metadata.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/const.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/enum.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/index.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitItems.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitLength.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitNumber.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/limitProperties.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/multipleOf.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/pattern.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/required.ts","../node_modules/ajv-formats/node_modules/ajv/lib/vocabularies/validation/uniqueItems.ts","../node_modules/ajv-formats/node_modules/json-schema-traverse/index.js","../node_modules/compute-gcd/lib/index.js","../node_modules/compute-lcm/lib/index.js","../node_modules/fast-deep-equal/index.js","../node_modules/json-schema-compare/src/index.js","../node_modules/json-schema-merge-allof/src/common.js","../node_modules/json-schema-merge-allof/src/complex-resolvers/items.js","../node_modules/json-schema-merge-allof/src/complex-resolvers/properties.js","../node_modules/json-schema-merge-allof/src/index.js","../node_modules/jsonpointer/jsonpointer.js","../node_modules/lodash/_DataView.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_Promise.js","../node_modules/lodash/_Set.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_Stack.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_Uint8Array.js","../node_modules/lodash/_WeakMap.js","../node_modules/lodash/_apply.js","../node_modules/lodash/_arrayEach.js","../node_modules/lodash/_arrayFilter.js","../node_modules/lodash/_arrayIncludes.js","../node_modules/lodash/_arrayIncludesWith.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_arrayMap.js","../node_modules/lodash/_arrayPush.js","../node_modules/lodash/_arrayReduce.js","../node_modules/lodash/_arraySome.js","../node_modules/lodash/_assignMergeValue.js","../node_modules/lodash/_assignValue.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_baseAssign.js","../node_modules/lodash/_baseAssignIn.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/_baseClone.js","../node_modules/lodash/_baseCreate.js","../node_modules/lodash/_baseDifference.js","../node_modules/lodash/_baseEach.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/_baseFlatten.js","../node_modules/lodash/_baseFor.js","../node_modules/lodash/_baseForOwn.js","../node_modules/lodash/_baseGet.js","../node_modules/lodash/_baseGetAllKeys.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/_baseHas.js","../node_modules/lodash/_baseHasIn.js","../node_modules/lodash/_baseIndexOf.js","../node_modules/lodash/_baseIndexOfWith.js","../node_modules/lodash/_baseIntersection.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/_baseIsEqual.js","../node_modules/lodash/_baseIsEqualDeep.js","../node_modules/lodash/_baseIsMap.js","../node_modules/lodash/_baseIsMatch.js","../node_modules/lodash/_baseIsNaN.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_baseIsSet.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseIteratee.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/_baseKeysIn.js","../node_modules/lodash/_baseMap.js","../node_modules/lodash/_baseMatches.js","../node_modules/lodash/_baseMatchesProperty.js","../node_modules/lodash/_baseMerge.js","../node_modules/lodash/_baseMergeDeep.js","../node_modules/lodash/_baseOrderBy.js","../node_modules/lodash/_basePick.js","../node_modules/lodash/_basePickBy.js","../node_modules/lodash/_baseProperty.js","../node_modules/lodash/_basePropertyDeep.js","../node_modules/lodash/_basePullAll.js","../node_modules/lodash/_baseReduce.js","../node_modules/lodash/_baseRest.js","../node_modules/lodash/_baseSet.js","../node_modules/lodash/_baseSetToString.js","../node_modules/lodash/_baseSlice.js","../node_modules/lodash/_baseSortBy.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseToString.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_baseUniq.js","../node_modules/lodash/_baseUnset.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_castArrayLikeObject.js","../node_modules/lodash/_castFunction.js","../node_modules/lodash/_castPath.js","../node_modules/lodash/_cloneArrayBuffer.js","../node_modules/lodash/_cloneBuffer.js","../node_modules/lodash/_cloneDataView.js","../node_modules/lodash/_cloneRegExp.js","../node_modules/lodash/_cloneSymbol.js","../node_modules/lodash/_cloneTypedArray.js","../node_modules/lodash/_compareAscending.js","../node_modules/lodash/_compareMultiple.js","../node_modules/lodash/_copyArray.js","../node_modules/lodash/_copyObject.js","../node_modules/lodash/_copySymbols.js","../node_modules/lodash/_copySymbolsIn.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_createAssigner.js","../node_modules/lodash/_createBaseEach.js","../node_modules/lodash/_createBaseFor.js","../node_modules/lodash/_createSet.js","../node_modules/lodash/_customDefaultsMerge.js","../node_modules/lodash/_customOmitClone.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_equalArrays.js","../node_modules/lodash/_equalByTag.js","../node_modules/lodash/_equalObjects.js","../node_modules/lodash/_flatRest.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_getAllKeys.js","../node_modules/lodash/_getAllKeysIn.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_getMatchData.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_getPrototype.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_getSymbols.js","../node_modules/lodash/_getSymbolsIn.js","../node_modules/lodash/_getTag.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_hasPath.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_initCloneArray.js","../node_modules/lodash/_initCloneByTag.js","../node_modules/lodash/_initCloneObject.js","../node_modules/lodash/_isFlattenable.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/_isIterateeCall.js","../node_modules/lodash/_isKey.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_isStrictComparable.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_mapToArray.js","../node_modules/lodash/_matchesStrictComparable.js","../node_modules/lodash/_memoizeCapped.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_nativeKeysIn.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_overRest.js","../node_modules/lodash/_parent.js","../node_modules/lodash/_root.js","../node_modules/lodash/_safeGet.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_setToString.js","../node_modules/lodash/_shortOut.js","../node_modules/lodash/_stackClear.js","../node_modules/lodash/_stackDelete.js","../node_modules/lodash/_stackGet.js","../node_modules/lodash/_stackHas.js","../node_modules/lodash/_stackSet.js","../node_modules/lodash/_strictIndexOf.js","../node_modules/lodash/_stringToPath.js","../node_modules/lodash/_toKey.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/cloneDeep.js","../node_modules/lodash/constant.js","../node_modules/lodash/defaults.js","../node_modules/lodash/defaultsDeep.js","../node_modules/lodash/eq.js","../node_modules/lodash/flatten.js","../node_modules/lodash/flattenDeep.js","../node_modules/lodash/forEach.js","../node_modules/lodash/get.js","../node_modules/lodash/has.js","../node_modules/lodash/hasIn.js","../node_modules/lodash/identity.js","../node_modules/lodash/intersection.js","../node_modules/lodash/intersectionWith.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isArray.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/isArrayLikeObject.js","../node_modules/lodash/isBoolean.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/isEmpty.js","../node_modules/lodash/isEqual.js","../node_modules/lodash/isEqualWith.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/isLength.js","../node_modules/lodash/isMap.js","../node_modules/lodash/isNil.js","../node_modules/lodash/isNumber.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isPlainObject.js","../node_modules/lodash/isSet.js","../node_modules/lodash/isString.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/keys.js","../node_modules/lodash/keysIn.js","../node_modules/lodash/last.js","../node_modules/lodash/memoize.js","../node_modules/lodash/merge.js","../node_modules/lodash/mergeWith.js","../node_modules/lodash/noop.js","../node_modules/lodash/omit.js","../node_modules/lodash/pick.js","../node_modules/lodash/property.js","../node_modules/lodash/pullAll.js","../node_modules/lodash/reduce.js","../node_modules/lodash/set.js","../node_modules/lodash/sortBy.js","../node_modules/lodash/stubArray.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/times.js","../node_modules/lodash/toFinite.js","../node_modules/lodash/toInteger.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/toPath.js","../node_modules/lodash/toPlainObject.js","../node_modules/lodash/toString.js","../node_modules/lodash/transform.js","../node_modules/lodash/union.js","../node_modules/lodash/uniq.js","../node_modules/lodash/uniqWith.js","../node_modules/lodash/unset.js","../node_modules/lodash/without.js","../node_modules/validate.io-array/lib/index.js","../node_modules/validate.io-function/lib/index.js","../node_modules/validate.io-integer-array/lib/index.js","../node_modules/validate.io-integer/lib/index.js","../node_modules/validate.io-number/lib/index.js","../node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js","../node_modules/fast-uri/index.js","../node_modules/fast-uri/lib/schemes.js","../node_modules/fast-uri/lib/scopedChars.js","../node_modules/fast-uri/lib/utils.js"],"sourcesContent":["import { urlAlphabet } from './url-alphabet/index.js'\nlet random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nlet customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nlet customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nlet nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\nexport { nanoid, customAlphabet, customRandom, urlAlphabet, random }\n","import { Component, MouseEvent } from 'react';\nimport {\n  getTemplate,\n  getWidget,\n  getUiOptions,\n  isFixedItems,\n  allowAdditionalItems,\n  isCustomWidget,\n  optionsList,\n  ArrayFieldTemplateProps,\n  ErrorSchema,\n  FieldProps,\n  FormContextType,\n  IdSchema,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  UiSchema,\n  ITEMS_KEY,\n} from '@rjsf/utils';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport isObject from 'lodash/isObject';\nimport set from 'lodash/set';\nimport { nanoid } from 'nanoid';\n\n/** Type used to represent the keyed form data used in the state */\ntype KeyedFormDataType<T> = { key: string; item: T };\n\n/** Type used for the state of the `ArrayField` component */\ntype ArrayFieldState<T> = {\n  /** The keyed form data elements */\n  keyedFormData: KeyedFormDataType<T>[];\n  /** Flag indicating whether any of the keyed form data has been updated */\n  updatedKeyedFormData: boolean;\n};\n\n/** Used to generate a unique ID for an element in a row */\nfunction generateRowId() {\n  return nanoid();\n}\n\n/** Converts the `formData` into `KeyedFormDataType` data, using the `generateRowId()` function to create the key\n *\n * @param formData - The data for the form\n * @returns - The `formData` converted into a `KeyedFormDataType` element\n */\nfunction generateKeyedFormData<T>(formData: T[]): KeyedFormDataType<T>[] {\n  return !Array.isArray(formData)\n    ? []\n    : formData.map((item) => {\n        return {\n          key: generateRowId(),\n          item,\n        };\n      });\n}\n\n/** Converts `KeyedFormDataType` data into the inner `formData`\n *\n * @param keyedFormData - The `KeyedFormDataType` to be converted\n * @returns - The inner `formData` item(s) in the `keyedFormData`\n */\nfunction keyedToPlainFormData<T>(keyedFormData: KeyedFormDataType<T> | KeyedFormDataType<T>[]): T[] {\n  if (Array.isArray(keyedFormData)) {\n    return keyedFormData.map((keyedItem) => keyedItem.item);\n  }\n  return [];\n}\n\n/** The `ArrayField` component is used to render a field in the schema that is of type `array`. It supports both normal\n * and fixed array, allowing user to add and remove elements from the array data.\n */\nclass ArrayField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> extends Component<\n  FieldProps<T[], S, F>,\n  ArrayFieldState<T>\n> {\n  /** Constructs an `ArrayField` from the `props`, generating the initial keyed data from the `formData`\n   *\n   * @param props - The `FieldProps` for this template\n   */\n  constructor(props: FieldProps<T[], S, F>) {\n    super(props);\n    const { formData = [] } = props;\n    const keyedFormData = generateKeyedFormData<T>(formData);\n    this.state = {\n      keyedFormData,\n      updatedKeyedFormData: false,\n    };\n  }\n\n  /** React lifecycle method that is called when the props are about to change allowing the state to be updated. It\n   * regenerates the keyed form data and returns it\n   *\n   * @param nextProps - The next set of props data\n   * @param prevState - The previous set of state data\n   */\n  static getDerivedStateFromProps<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n    nextProps: Readonly<FieldProps<T[], S, F>>,\n    prevState: Readonly<ArrayFieldState<T>>\n  ) {\n    // Don't call getDerivedStateFromProps if keyed formdata was just updated.\n    if (prevState.updatedKeyedFormData) {\n      return {\n        updatedKeyedFormData: false,\n      };\n    }\n    const nextFormData = Array.isArray(nextProps.formData) ? nextProps.formData : [];\n    const previousKeyedFormData = prevState.keyedFormData || [];\n    const newKeyedFormData =\n      nextFormData.length === previousKeyedFormData.length\n        ? previousKeyedFormData.map((previousKeyedFormDatum, index) => {\n            return {\n              key: previousKeyedFormDatum.key,\n              item: nextFormData[index],\n            };\n          })\n        : generateKeyedFormData<T>(nextFormData);\n    return {\n      keyedFormData: newKeyedFormData,\n    };\n  }\n\n  /** Returns the appropriate title for an item by getting first the title from the schema.items, then falling back to\n   * the description from the schema.items, and finally the string \"Item\"\n   */\n  get itemTitle() {\n    const { schema, registry } = this.props;\n    const { translateString } = registry;\n    return get(\n      schema,\n      [ITEMS_KEY, 'title'],\n      get(schema, [ITEMS_KEY, 'description'], translateString(TranslatableString.ArrayItemTitle))\n    );\n  }\n\n  /** Determines whether the item described in the schema is always required, which is determined by whether any item\n   * may be null.\n   *\n   * @param itemSchema - The schema for the item\n   * @return - True if the item schema type does not contain the \"null\" type\n   */\n  isItemRequired(itemSchema: S) {\n    if (Array.isArray(itemSchema.type)) {\n      // While we don't yet support composite/nullable jsonschema types, it's\n      // future-proof to check for requirement against these.\n      return !itemSchema.type.includes('null');\n    }\n    // All non-null array item types are inherently required by design\n    return itemSchema.type !== 'null';\n  }\n\n  /** Determines whether more items can be added to the array. If the uiSchema indicates the array doesn't allow adding\n   * then false is returned. Otherwise, if the schema indicates that there are a maximum number of items and the\n   * `formData` matches that value, then false is returned, otherwise true is returned.\n   *\n   * @param formItems - The list of items in the form\n   * @returns - True if the item is addable otherwise false\n   */\n  canAddItem(formItems: any[]) {\n    const { schema, uiSchema, registry } = this.props;\n    let { addable } = getUiOptions<T[], S, F>(uiSchema, registry.globalUiOptions);\n    if (addable !== false) {\n      // if ui:options.addable was not explicitly set to false, we can add\n      // another item if we have not exceeded maxItems yet\n      if (schema.maxItems !== undefined) {\n        addable = formItems.length < schema.maxItems;\n      } else {\n        addable = true;\n      }\n    }\n    return addable;\n  }\n\n  /** Returns the default form information for an item based on the schema for that item. Deals with the possibility\n   * that the schema is fixed and allows additional items.\n   */\n  _getNewFormDataRow = (): T => {\n    const { schema, registry } = this.props;\n    const { schemaUtils } = registry;\n    let itemSchema = schema.items as S;\n    if (isFixedItems(schema) && allowAdditionalItems(schema)) {\n      itemSchema = schema.additionalItems as S;\n    }\n    // Cast this as a T to work around schema utils being for T[] caused by the FieldProps<T[], S, F> call on the class\n    return schemaUtils.getDefaultFormState(itemSchema) as unknown as T;\n  };\n\n  /** Callback handler for when the user clicks on the add or add at index buttons. Creates a new row of keyed form data\n   * either at the end of the list (when index is not specified) or inserted at the `index` when it is, adding it into\n   * the state, and then returning `onChange()` with the plain form data converted from the keyed data\n   *\n   * @param event - The event for the click\n   * @param [index] - The optional index at which to add the new data\n   */\n  _handleAddClick(event: MouseEvent, index?: number) {\n    if (event) {\n      event.preventDefault();\n    }\n\n    const { onChange, errorSchema } = this.props;\n    const { keyedFormData } = this.state;\n    // refs #195: revalidate to ensure properly reindexing errors\n    let newErrorSchema: ErrorSchema<T>;\n    if (errorSchema) {\n      newErrorSchema = {};\n      for (const idx in errorSchema) {\n        const i = parseInt(idx);\n        if (index === undefined || i < index) {\n          set(newErrorSchema, [i], errorSchema[idx]);\n        } else if (i >= index) {\n          set(newErrorSchema, [i + 1], errorSchema[idx]);\n        }\n      }\n    }\n\n    const newKeyedFormDataRow: KeyedFormDataType<T> = {\n      key: generateRowId(),\n      item: this._getNewFormDataRow(),\n    };\n    const newKeyedFormData = [...keyedFormData];\n    if (index !== undefined) {\n      newKeyedFormData.splice(index, 0, newKeyedFormDataRow);\n    } else {\n      newKeyedFormData.push(newKeyedFormDataRow);\n    }\n    this.setState(\n      {\n        keyedFormData: newKeyedFormData,\n        updatedKeyedFormData: true,\n      },\n      () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema as ErrorSchema<T[]>)\n    );\n  }\n\n  /** Callback handler for when the user clicks on the add button. Creates a new row of keyed form data at the end of\n   * the list, adding it into the state, and then returning `onChange()` with the plain form data converted from the\n   * keyed data\n   *\n   * @param event - The event for the click\n   */\n  onAddClick = (event: MouseEvent) => {\n    this._handleAddClick(event);\n  };\n\n  /** Callback handler for when the user clicks on the add button on an existing array element. Creates a new row of\n   * keyed form data inserted at the `index`, adding it into the state, and then returning `onChange()` with the plain\n   * form data converted from the keyed data\n   *\n   * @param index - The index at which the add button is clicked\n   */\n  onAddIndexClick = (index: number) => {\n    return (event: MouseEvent) => {\n      this._handleAddClick(event, index);\n    };\n  };\n\n  /** Callback handler for when the user clicks on the copy button on an existing array element. Clones the row of\n   * keyed form data at the `index` into the next position in the state, and then returning `onChange()` with the plain\n   * form data converted from the keyed data\n   *\n   * @param index - The index at which the copy button is clicked\n   */\n  onCopyIndexClick = (index: number) => {\n    return (event: MouseEvent) => {\n      if (event) {\n        event.preventDefault();\n      }\n\n      const { onChange, errorSchema } = this.props;\n      const { keyedFormData } = this.state;\n      // refs #195: revalidate to ensure properly reindexing errors\n      let newErrorSchema: ErrorSchema<T>;\n      if (errorSchema) {\n        newErrorSchema = {};\n        for (const idx in errorSchema) {\n          const i = parseInt(idx);\n          if (i <= index) {\n            set(newErrorSchema, [i], errorSchema[idx]);\n          } else if (i > index) {\n            set(newErrorSchema, [i + 1], errorSchema[idx]);\n          }\n        }\n      }\n\n      const newKeyedFormDataRow: KeyedFormDataType<T> = {\n        key: generateRowId(),\n        item: cloneDeep(keyedFormData[index].item),\n      };\n      const newKeyedFormData = [...keyedFormData];\n      if (index !== undefined) {\n        newKeyedFormData.splice(index + 1, 0, newKeyedFormDataRow);\n      } else {\n        newKeyedFormData.push(newKeyedFormDataRow);\n      }\n      this.setState(\n        {\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true,\n        },\n        () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema as ErrorSchema<T[]>)\n      );\n    };\n  };\n\n  /** Callback handler for when the user clicks on the remove button on an existing array element. Removes the row of\n   * keyed form data at the `index` in the state, and then returning `onChange()` with the plain form data converted\n   * from the keyed data\n   *\n   * @param index - The index at which the remove button is clicked\n   */\n  onDropIndexClick = (index: number) => {\n    return (event: MouseEvent) => {\n      if (event) {\n        event.preventDefault();\n      }\n      const { onChange, errorSchema } = this.props;\n      const { keyedFormData } = this.state;\n      // refs #195: revalidate to ensure properly reindexing errors\n      let newErrorSchema: ErrorSchema<T>;\n      if (errorSchema) {\n        newErrorSchema = {};\n        for (const idx in errorSchema) {\n          const i = parseInt(idx);\n          if (i < index) {\n            set(newErrorSchema, [i], errorSchema[idx]);\n          } else if (i > index) {\n            set(newErrorSchema, [i - 1], errorSchema[idx]);\n          }\n        }\n      }\n      const newKeyedFormData = keyedFormData.filter((_, i) => i !== index);\n      this.setState(\n        {\n          keyedFormData: newKeyedFormData,\n          updatedKeyedFormData: true,\n        },\n        () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema as ErrorSchema<T[]>)\n      );\n    };\n  };\n\n  /** Callback handler for when the user clicks on one of the move item buttons on an existing array element. Moves the\n   * row of keyed form data at the `index` to the `newIndex` in the state, and then returning `onChange()` with the\n   * plain form data converted from the keyed data\n   *\n   * @param index - The index of the item to move\n   * @param newIndex - The index to where the item is to be moved\n   */\n  onReorderClick = (index: number, newIndex: number) => {\n    return (event: MouseEvent<HTMLButtonElement>) => {\n      if (event) {\n        event.preventDefault();\n        event.currentTarget.blur();\n      }\n      const { onChange, errorSchema } = this.props;\n      let newErrorSchema: ErrorSchema<T>;\n      if (errorSchema) {\n        newErrorSchema = {};\n        for (const idx in errorSchema) {\n          const i = parseInt(idx);\n          if (i == index) {\n            set(newErrorSchema, [newIndex], errorSchema[index]);\n          } else if (i == newIndex) {\n            set(newErrorSchema, [index], errorSchema[newIndex]);\n          } else {\n            set(newErrorSchema, [idx], errorSchema[i]);\n          }\n        }\n      }\n\n      const { keyedFormData } = this.state;\n      function reOrderArray() {\n        // Copy item\n        const _newKeyedFormData = keyedFormData.slice();\n\n        // Moves item from index to newIndex\n        _newKeyedFormData.splice(index, 1);\n        _newKeyedFormData.splice(newIndex, 0, keyedFormData[index]);\n\n        return _newKeyedFormData;\n      }\n      const newKeyedFormData = reOrderArray();\n      this.setState(\n        {\n          keyedFormData: newKeyedFormData,\n        },\n        () => onChange(keyedToPlainFormData(newKeyedFormData), newErrorSchema as ErrorSchema<T[]>)\n      );\n    };\n  };\n\n  /** Callback handler used to deal with changing the value of the data in the array at the `index`. Calls the\n   * `onChange` callback with the updated form data\n   *\n   * @param index - The index of the item being changed\n   */\n  onChangeForIndex = (index: number) => {\n    return (value: any, newErrorSchema?: ErrorSchema<T>, id?: string) => {\n      const { formData, onChange, errorSchema } = this.props;\n      const arrayData = Array.isArray(formData) ? formData : [];\n      const newFormData = arrayData.map((item: T, i: number) => {\n        // We need to treat undefined items as nulls to have validation.\n        // See https://github.com/tdegrunt/jsonschema/issues/206\n        const jsonValue = typeof value === 'undefined' ? null : value;\n        return index === i ? jsonValue : item;\n      });\n      onChange(\n        newFormData,\n        errorSchema &&\n          errorSchema && {\n            ...errorSchema,\n            [index]: newErrorSchema,\n          },\n        id\n      );\n    };\n  };\n\n  /** Callback handler used to change the value for a checkbox */\n  onSelectChange = (value: any) => {\n    const { onChange, idSchema } = this.props;\n    onChange(value, undefined, idSchema && idSchema.$id);\n  };\n\n  /** Renders the `ArrayField` depending on the specific needs of the schema and uischema elements\n   */\n  render() {\n    const { schema, uiSchema, idSchema, registry } = this.props;\n    const { schemaUtils, translateString } = registry;\n    if (!(ITEMS_KEY in schema)) {\n      const uiOptions = getUiOptions<T[], S, F>(uiSchema);\n      const UnsupportedFieldTemplate = getTemplate<'UnsupportedFieldTemplate', T[], S, F>(\n        'UnsupportedFieldTemplate',\n        registry,\n        uiOptions\n      );\n\n      return (\n        <UnsupportedFieldTemplate\n          schema={schema}\n          idSchema={idSchema}\n          reason={translateString(TranslatableString.MissingItems)}\n          registry={registry}\n        />\n      );\n    }\n    if (schemaUtils.isMultiSelect(schema)) {\n      // If array has enum or uniqueItems set to true, call renderMultiSelect() to render the default multiselect widget or a custom widget, if specified.\n      return this.renderMultiSelect();\n    }\n    if (isCustomWidget<T[], S, F>(uiSchema)) {\n      return this.renderCustomWidget();\n    }\n    if (isFixedItems(schema)) {\n      return this.renderFixedArray();\n    }\n    if (schemaUtils.isFilesArray(schema, uiSchema)) {\n      return this.renderFiles();\n    }\n    return this.renderNormalArray();\n  }\n\n  /** Renders a normal array without any limitations of length\n   */\n  renderNormalArray() {\n    const {\n      schema,\n      uiSchema = {},\n      errorSchema,\n      idSchema,\n      name,\n      title,\n      disabled = false,\n      readonly = false,\n      autofocus = false,\n      required = false,\n      registry,\n      onBlur,\n      onFocus,\n      idPrefix,\n      idSeparator = '_',\n      rawErrors,\n    } = this.props;\n    const { keyedFormData } = this.state;\n    const fieldTitle = schema.title || title || name;\n    const { schemaUtils, formContext } = registry;\n    const uiOptions = getUiOptions<T[], S, F>(uiSchema);\n    const _schemaItems: S = isObject(schema.items) ? (schema.items as S) : ({} as S);\n    const itemsSchema: S = schemaUtils.retrieveSchema(_schemaItems);\n    const formData = keyedToPlainFormData(this.state.keyedFormData);\n    const canAdd = this.canAddItem(formData);\n    const arrayProps: ArrayFieldTemplateProps<T[], S, F> = {\n      canAdd,\n      items: keyedFormData.map((keyedItem, index) => {\n        const { key, item } = keyedItem;\n        // While we are actually dealing with a single item of type T, the types require a T[], so cast\n        const itemCast = item as unknown as T[];\n        const itemSchema = schemaUtils.retrieveSchema(_schemaItems, itemCast);\n        const itemErrorSchema = errorSchema ? (errorSchema[index] as ErrorSchema<T[]>) : undefined;\n        const itemIdPrefix = idSchema.$id + idSeparator + index;\n        const itemIdSchema = schemaUtils.toIdSchema(itemSchema, itemIdPrefix, itemCast, idPrefix, idSeparator);\n        return this.renderArrayFieldItem({\n          key,\n          index,\n          name: name && `${name}-${index}`,\n          title: fieldTitle ? `${fieldTitle}-${index + 1}` : undefined,\n          canAdd,\n          canMoveUp: index > 0,\n          canMoveDown: index < formData.length - 1,\n          itemSchema,\n          itemIdSchema,\n          itemErrorSchema,\n          itemData: itemCast,\n          itemUiSchema: uiSchema.items,\n          autofocus: autofocus && index === 0,\n          onBlur,\n          onFocus,\n          rawErrors,\n          totalItems: keyedFormData.length,\n        });\n      }),\n      className: `field field-array field-array-of-${itemsSchema.type}`,\n      disabled,\n      idSchema,\n      uiSchema,\n      onAddClick: this.onAddClick,\n      readonly,\n      required,\n      schema,\n      title: fieldTitle,\n      formContext,\n      formData,\n      rawErrors,\n      registry,\n    };\n\n    const Template = getTemplate<'ArrayFieldTemplate', T[], S, F>('ArrayFieldTemplate', registry, uiOptions);\n    return <Template {...arrayProps} />;\n  }\n\n  /** Renders an array using the custom widget provided by the user in the `uiSchema`\n   */\n  renderCustomWidget() {\n    const {\n      schema,\n      idSchema,\n      uiSchema,\n      disabled = false,\n      readonly = false,\n      autofocus = false,\n      required = false,\n      hideError,\n      placeholder,\n      onBlur,\n      onFocus,\n      formData: items = [],\n      registry,\n      rawErrors,\n      name,\n    } = this.props;\n    const { widgets, formContext, globalUiOptions, schemaUtils } = registry;\n    const { widget, title: uiTitle, ...options } = getUiOptions<T[], S, F>(uiSchema, globalUiOptions);\n    const Widget = getWidget<T[], S, F>(schema, widget, widgets);\n    const label = uiTitle ?? schema.title ?? name;\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n    return (\n      <Widget\n        id={idSchema.$id}\n        name={name}\n        multiple\n        onChange={this.onSelectChange}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        options={options}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n        value={items}\n        disabled={disabled}\n        readonly={readonly}\n        hideError={hideError}\n        required={required}\n        label={label}\n        hideLabel={!displayLabel}\n        placeholder={placeholder}\n        formContext={formContext}\n        autofocus={autofocus}\n        rawErrors={rawErrors}\n      />\n    );\n  }\n\n  /** Renders an array as a set of checkboxes\n   */\n  renderMultiSelect() {\n    const {\n      schema,\n      idSchema,\n      uiSchema,\n      formData: items = [],\n      disabled = false,\n      readonly = false,\n      autofocus = false,\n      required = false,\n      placeholder,\n      onBlur,\n      onFocus,\n      registry,\n      rawErrors,\n      name,\n    } = this.props;\n    const { widgets, schemaUtils, formContext, globalUiOptions } = registry;\n    const itemsSchema = schemaUtils.retrieveSchema(schema.items as S, items);\n    const enumOptions = optionsList(itemsSchema);\n    const { widget = 'select', title: uiTitle, ...options } = getUiOptions<T[], S, F>(uiSchema, globalUiOptions);\n    const Widget = getWidget<T[], S, F>(schema, widget, widgets);\n    const label = uiTitle ?? schema.title ?? name;\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n    return (\n      <Widget\n        id={idSchema.$id}\n        name={name}\n        multiple\n        onChange={this.onSelectChange}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        options={{ ...options, enumOptions }}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n        value={items}\n        disabled={disabled}\n        readonly={readonly}\n        required={required}\n        label={label}\n        hideLabel={!displayLabel}\n        placeholder={placeholder}\n        formContext={formContext}\n        autofocus={autofocus}\n        rawErrors={rawErrors}\n      />\n    );\n  }\n\n  /** Renders an array of files using the `FileWidget`\n   */\n  renderFiles() {\n    const {\n      schema,\n      uiSchema,\n      idSchema,\n      name,\n      disabled = false,\n      readonly = false,\n      autofocus = false,\n      required = false,\n      onBlur,\n      onFocus,\n      registry,\n      formData: items = [],\n      rawErrors,\n    } = this.props;\n    const { widgets, formContext, globalUiOptions, schemaUtils } = registry;\n    const { widget = 'files', title: uiTitle, ...options } = getUiOptions<T[], S, F>(uiSchema, globalUiOptions);\n    const Widget = getWidget<T[], S, F>(schema, widget, widgets);\n    const label = uiTitle ?? schema.title ?? name;\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n    return (\n      <Widget\n        options={options}\n        id={idSchema.$id}\n        name={name}\n        multiple\n        onChange={this.onSelectChange}\n        onBlur={onBlur}\n        onFocus={onFocus}\n        schema={schema}\n        uiSchema={uiSchema}\n        value={items}\n        disabled={disabled}\n        readonly={readonly}\n        required={required}\n        registry={registry}\n        formContext={formContext}\n        autofocus={autofocus}\n        rawErrors={rawErrors}\n        label={label}\n        hideLabel={!displayLabel}\n      />\n    );\n  }\n\n  /** Renders an array that has a maximum limit of items\n   */\n  renderFixedArray() {\n    const {\n      schema,\n      uiSchema = {},\n      formData = [],\n      errorSchema,\n      idPrefix,\n      idSeparator = '_',\n      idSchema,\n      name,\n      title,\n      disabled = false,\n      readonly = false,\n      autofocus = false,\n      required = false,\n      registry,\n      onBlur,\n      onFocus,\n      rawErrors,\n    } = this.props;\n    const { keyedFormData } = this.state;\n    let { formData: items = [] } = this.props;\n    const fieldTitle = schema.title || title || name;\n    const uiOptions = getUiOptions<T[], S, F>(uiSchema);\n    const { schemaUtils, formContext } = registry;\n    const _schemaItems: S[] = isObject(schema.items) ? (schema.items as S[]) : ([] as S[]);\n    const itemSchemas = _schemaItems.map((item: S, index: number) =>\n      schemaUtils.retrieveSchema(item, formData[index] as unknown as T[])\n    );\n    const additionalSchema = isObject(schema.additionalItems)\n      ? schemaUtils.retrieveSchema(schema.additionalItems as S, formData)\n      : null;\n\n    if (!items || items.length < itemSchemas.length) {\n      // to make sure at least all fixed items are generated\n      items = items || [];\n      items = items.concat(new Array(itemSchemas.length - items.length));\n    }\n\n    // These are the props passed into the render function\n    const canAdd = this.canAddItem(items) && !!additionalSchema;\n    const arrayProps: ArrayFieldTemplateProps<T[], S, F> = {\n      canAdd,\n      className: 'field field-array field-array-fixed-items',\n      disabled,\n      idSchema,\n      formData,\n      items: keyedFormData.map((keyedItem, index) => {\n        const { key, item } = keyedItem;\n        // While we are actually dealing with a single item of type T, the types require a T[], so cast\n        const itemCast = item as unknown as T[];\n        const additional = index >= itemSchemas.length;\n        const itemSchema =\n          (additional && isObject(schema.additionalItems)\n            ? schemaUtils.retrieveSchema(schema.additionalItems as S, itemCast)\n            : itemSchemas[index]) || {};\n        const itemIdPrefix = idSchema.$id + idSeparator + index;\n        const itemIdSchema = schemaUtils.toIdSchema(itemSchema, itemIdPrefix, itemCast, idPrefix, idSeparator);\n        const itemUiSchema = additional\n          ? uiSchema.additionalItems || {}\n          : Array.isArray(uiSchema.items)\n          ? uiSchema.items[index]\n          : uiSchema.items || {};\n        const itemErrorSchema = errorSchema ? (errorSchema[index] as ErrorSchema<T[]>) : undefined;\n\n        return this.renderArrayFieldItem({\n          key,\n          index,\n          name: name && `${name}-${index}`,\n          title: fieldTitle ? `${fieldTitle}-${index + 1}` : undefined,\n          canAdd,\n          canRemove: additional,\n          canMoveUp: index >= itemSchemas.length + 1,\n          canMoveDown: additional && index < items.length - 1,\n          itemSchema,\n          itemData: itemCast,\n          itemUiSchema,\n          itemIdSchema,\n          itemErrorSchema,\n          autofocus: autofocus && index === 0,\n          onBlur,\n          onFocus,\n          rawErrors,\n          totalItems: keyedFormData.length,\n        });\n      }),\n      onAddClick: this.onAddClick,\n      readonly,\n      required,\n      registry,\n      schema,\n      uiSchema,\n      title: fieldTitle,\n      formContext,\n      errorSchema,\n      rawErrors,\n    };\n\n    const Template = getTemplate<'ArrayFieldTemplate', T[], S, F>('ArrayFieldTemplate', registry, uiOptions);\n    return <Template {...arrayProps} />;\n  }\n\n  /** Renders the individual array item using a `SchemaField` along with the additional properties required to be send\n   * back to the `ArrayFieldItemTemplate`.\n   *\n   * @param props - The props for the individual array item to be rendered\n   */\n  renderArrayFieldItem(props: {\n    key: string;\n    index: number;\n    name: string;\n    title: string | undefined;\n    canAdd: boolean;\n    canRemove?: boolean;\n    canMoveUp: boolean;\n    canMoveDown: boolean;\n    itemSchema: S;\n    itemData: T[];\n    itemUiSchema: UiSchema<T[], S, F>;\n    itemIdSchema: IdSchema<T[]>;\n    itemErrorSchema?: ErrorSchema<T[]>;\n    autofocus?: boolean;\n    onBlur: FieldProps<T[], S, F>['onBlur'];\n    onFocus: FieldProps<T[], S, F>['onFocus'];\n    rawErrors?: string[];\n    totalItems: number;\n  }) {\n    const {\n      key,\n      index,\n      name,\n      canAdd,\n      canRemove = true,\n      canMoveUp,\n      canMoveDown,\n      itemSchema,\n      itemData,\n      itemUiSchema,\n      itemIdSchema,\n      itemErrorSchema,\n      autofocus,\n      onBlur,\n      onFocus,\n      rawErrors,\n      totalItems,\n      title,\n    } = props;\n    const { disabled, hideError, idPrefix, idSeparator, readonly, uiSchema, registry, formContext } = this.props;\n    const {\n      fields: { ArraySchemaField, SchemaField },\n      globalUiOptions,\n    } = registry;\n    const ItemSchemaField = ArraySchemaField || SchemaField;\n    const { orderable = true, removable = true, copyable = false } = getUiOptions<T[], S, F>(uiSchema, globalUiOptions);\n    const has: { [key: string]: boolean } = {\n      moveUp: orderable && canMoveUp,\n      moveDown: orderable && canMoveDown,\n      copy: copyable && canAdd,\n      remove: removable && canRemove,\n      toolbar: false,\n    };\n    has.toolbar = Object.keys(has).some((key: keyof typeof has) => has[key]);\n\n    return {\n      children: (\n        <ItemSchemaField\n          name={name}\n          title={title}\n          index={index}\n          schema={itemSchema}\n          uiSchema={itemUiSchema}\n          formData={itemData}\n          formContext={formContext}\n          errorSchema={itemErrorSchema}\n          idPrefix={idPrefix}\n          idSeparator={idSeparator}\n          idSchema={itemIdSchema}\n          required={this.isItemRequired(itemSchema)}\n          onChange={this.onChangeForIndex(index)}\n          onBlur={onBlur}\n          onFocus={onFocus}\n          registry={registry}\n          disabled={disabled}\n          readonly={readonly}\n          hideError={hideError}\n          autofocus={autofocus}\n          rawErrors={rawErrors}\n        />\n      ),\n      className: 'array-item',\n      disabled,\n      canAdd,\n      hasCopy: has.copy,\n      hasToolbar: has.toolbar,\n      hasMoveUp: has.moveUp,\n      hasMoveDown: has.moveDown,\n      hasRemove: has.remove,\n      index,\n      totalItems,\n      key,\n      onAddIndexClick: this.onAddIndexClick,\n      onCopyIndexClick: this.onCopyIndexClick,\n      onDropIndexClick: this.onDropIndexClick,\n      onReorderClick: this.onReorderClick,\n      readonly,\n      registry,\n      schema: itemSchema,\n      uiSchema: itemUiSchema,\n    };\n  }\n}\n\n/** `ArrayField` is `React.ComponentType<FieldProps<T[], S, F>>` (necessarily) but the `registry` requires things to be a\n * `Field` which is defined as `React.ComponentType<FieldProps<T, S, F>>`, so cast it to make `registry` happy.\n */\nexport default ArrayField;\n","import {\n  getWidget,\n  getUiOptions,\n  optionsList,\n  FieldProps,\n  FormContextType,\n  EnumOptionsType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n} from '@rjsf/utils';\nimport isObject from 'lodash/isObject';\n\n/** The `BooleanField` component is used to render a field in the schema is boolean. It constructs `enumOptions` for the\n * two boolean values based on the various alternatives in the schema.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction BooleanField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: FieldProps<T, S, F>\n) {\n  const {\n    schema,\n    name,\n    uiSchema,\n    idSchema,\n    formData,\n    registry,\n    required,\n    disabled,\n    readonly,\n    hideError,\n    autofocus,\n    title,\n    onChange,\n    onFocus,\n    onBlur,\n    rawErrors,\n  } = props;\n  const { title: schemaTitle } = schema;\n  const { widgets, formContext, translateString, globalUiOptions } = registry;\n  const {\n    widget = 'checkbox',\n    title: uiTitle,\n    // Unlike the other fields, don't use `getDisplayLabel()` since it always returns false for the boolean type\n    label: displayLabel = true,\n    ...options\n  } = getUiOptions<T, S, F>(uiSchema, globalUiOptions);\n  const Widget = getWidget(schema, widget, widgets);\n  const yes = translateString(TranslatableString.YesLabel);\n  const no = translateString(TranslatableString.NoLabel);\n  let enumOptions: EnumOptionsType<S>[] | undefined;\n  const label = uiTitle ?? schemaTitle ?? title ?? name;\n  if (Array.isArray(schema.oneOf)) {\n    enumOptions = optionsList<S>({\n      oneOf: schema.oneOf\n        .map((option) => {\n          if (isObject(option)) {\n            return {\n              ...option,\n              title: option.title || (option.const === true ? yes : no),\n            };\n          }\n          return undefined;\n        })\n        .filter((o: any) => o) as S[], // cast away the error that typescript can't grok is fixed\n    } as unknown as S);\n  } else {\n    // We deprecated enumNames in v5. It's intentionally omitted from RSJFSchema type, so we need to cast here.\n    const schemaWithEnumNames = schema as S & { enumNames?: string[] };\n    const enums = schema.enum ?? [true, false];\n    if (!schemaWithEnumNames.enumNames && enums.length === 2 && enums.every((v: any) => typeof v === 'boolean')) {\n      enumOptions = [\n        {\n          value: enums[0],\n          label: enums[0] ? yes : no,\n        },\n        {\n          value: enums[1],\n          label: enums[1] ? yes : no,\n        },\n      ];\n    } else {\n      enumOptions = optionsList<S>({\n        enum: enums,\n        // NOTE: enumNames is deprecated, but still supported for now.\n        enumNames: schemaWithEnumNames.enumNames,\n      } as unknown as S);\n    }\n  }\n\n  return (\n    <Widget\n      options={{ ...options, enumOptions }}\n      schema={schema}\n      uiSchema={uiSchema}\n      id={idSchema.$id}\n      name={name}\n      onChange={onChange}\n      onFocus={onFocus}\n      onBlur={onBlur}\n      label={label}\n      hideLabel={!displayLabel}\n      value={formData}\n      required={required}\n      disabled={disabled}\n      readonly={readonly}\n      hideError={hideError}\n      registry={registry}\n      formContext={formContext}\n      autofocus={autofocus}\n      rawErrors={rawErrors}\n    />\n  );\n}\n\nexport default BooleanField;\n","import { Component } from 'react';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport omit from 'lodash/omit';\nimport {\n  ANY_OF_KEY,\n  deepEquals,\n  ERRORS_KEY,\n  FieldProps,\n  FormContextType,\n  getDiscriminatorFieldFromSchema,\n  getUiOptions,\n  getWidget,\n  mergeSchemas,\n  ONE_OF_KEY,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  UiSchema,\n} from '@rjsf/utils';\n\n/** Type used for the state of the `AnyOfField` component */\ntype AnyOfFieldState<S extends StrictRJSFSchema = RJSFSchema> = {\n  /** The currently selected option */\n  selectedOption: number;\n  /** The option schemas after retrieving all $refs */\n  retrievedOptions: S[];\n};\n\n/** The `AnyOfField` component is used to render a field in the schema that is an `anyOf`, `allOf` or `oneOf`. It tracks\n * the currently selected option and cleans up any irrelevant data in `formData`.\n *\n * @param props - The `FieldProps` for this template\n */\nclass AnyOfField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> extends Component<\n  FieldProps<T, S, F>,\n  AnyOfFieldState<S>\n> {\n  /** Constructs an `AnyOfField` with the given `props` to initialize the initially selected option in state\n   *\n   * @param props - The `FieldProps` for this template\n   */\n  constructor(props: FieldProps<T, S, F>) {\n    super(props);\n\n    const {\n      formData,\n      options,\n      registry: { schemaUtils },\n    } = this.props;\n    // cache the retrieved options in state in case they have $refs to save doing it later\n    const retrievedOptions = options.map((opt: S) => schemaUtils.retrieveSchema(opt, formData));\n\n    this.state = {\n      retrievedOptions,\n      selectedOption: this.getMatchingOption(0, formData, retrievedOptions),\n    };\n  }\n\n  /** React lifecycle method that is called when the props and/or state for this component is updated. It recomputes the\n   * currently selected option based on the overall `formData`\n   *\n   * @param prevProps - The previous `FieldProps` for this template\n   * @param prevState - The previous `AnyOfFieldState` for this template\n   */\n  componentDidUpdate(prevProps: Readonly<FieldProps<T, S, F>>, prevState: Readonly<AnyOfFieldState>) {\n    const { formData, options, idSchema } = this.props;\n    const { selectedOption } = this.state;\n    let newState = this.state;\n    if (!deepEquals(prevProps.options, options)) {\n      const {\n        registry: { schemaUtils },\n      } = this.props;\n      // re-cache the retrieved options in state in case they have $refs to save doing it later\n      const retrievedOptions = options.map((opt: S) => schemaUtils.retrieveSchema(opt, formData));\n      newState = { selectedOption, retrievedOptions };\n    }\n    if (!deepEquals(formData, prevProps.formData) && idSchema.$id === prevProps.idSchema.$id) {\n      const { retrievedOptions } = newState;\n      const matchingOption = this.getMatchingOption(selectedOption, formData, retrievedOptions);\n\n      if (prevState && matchingOption !== selectedOption) {\n        newState = { selectedOption: matchingOption, retrievedOptions };\n      }\n    }\n    if (newState !== this.state) {\n      this.setState(newState);\n    }\n  }\n\n  /** Determines the best matching option for the given `formData` and `options`.\n   *\n   * @param formData - The new formData\n   * @param options - The list of options to choose from\n   * @return - The index of the `option` that best matches the `formData`\n   */\n  getMatchingOption(selectedOption: number, formData: T | undefined, options: S[]) {\n    const {\n      schema,\n      registry: { schemaUtils },\n    } = this.props;\n\n    const discriminator = getDiscriminatorFieldFromSchema<S>(schema);\n    const option = schemaUtils.getClosestMatchingOption(formData, options, selectedOption, discriminator);\n    return option;\n  }\n\n  /** Callback handler to remember what the currently selected option is. In addition to that the `formData` is updated\n   * to remove properties that are not part of the newly selected option schema, and then the updated data is passed to\n   * the `onChange` handler.\n   *\n   * @param option - The new option value being selected\n   */\n  onOptionChange = (option?: string) => {\n    const { selectedOption, retrievedOptions } = this.state;\n    const { formData, onChange, registry } = this.props;\n    const { schemaUtils } = registry;\n    const intOption = option !== undefined ? parseInt(option, 10) : -1;\n    if (intOption === selectedOption) {\n      return;\n    }\n    const newOption = intOption >= 0 ? retrievedOptions[intOption] : undefined;\n    const oldOption = selectedOption >= 0 ? retrievedOptions[selectedOption] : undefined;\n\n    let newFormData = schemaUtils.sanitizeDataForNewSchema(newOption, oldOption, formData);\n    if (newFormData && newOption) {\n      // Call getDefaultFormState to make sure defaults are populated on change. Pass \"excludeObjectChildren\"\n      // so that only the root objects themselves are created without adding undefined children properties\n      newFormData = schemaUtils.getDefaultFormState(newOption, newFormData, 'excludeObjectChildren') as T;\n    }\n    onChange(newFormData, undefined, this.getFieldId());\n\n    this.setState({ selectedOption: intOption });\n  };\n\n  getFieldId() {\n    const { idSchema, schema } = this.props;\n    return `${idSchema.$id}${schema.oneOf ? '__oneof_select' : '__anyof_select'}`;\n  }\n\n  /** Renders the `AnyOfField` selector along with a `SchemaField` for the value of the `formData`\n   */\n  render() {\n    const {\n      name,\n      disabled = false,\n      errorSchema = {},\n      formContext,\n      onBlur,\n      onFocus,\n      registry,\n      schema,\n      uiSchema,\n    } = this.props;\n\n    const { widgets, fields, translateString, globalUiOptions, schemaUtils } = registry;\n    const { SchemaField: _SchemaField } = fields;\n    const { selectedOption, retrievedOptions } = this.state;\n    const {\n      widget = 'select',\n      placeholder,\n      autofocus,\n      autocomplete,\n      title = schema.title,\n      ...uiOptions\n    } = getUiOptions<T, S, F>(uiSchema, globalUiOptions);\n    const Widget = getWidget<T, S, F>({ type: 'number' }, widget, widgets);\n    const rawErrors = get(errorSchema, ERRORS_KEY, []);\n    const fieldErrorSchema = omit(errorSchema, [ERRORS_KEY]);\n    const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n\n    const option = selectedOption >= 0 ? retrievedOptions[selectedOption] || null : null;\n    let optionSchema: S | undefined | null;\n\n    if (option) {\n      // merge top level required field\n      const { required } = schema;\n      // Merge in all the non-oneOf/anyOf properties and also skip the special ADDITIONAL_PROPERTY_FLAG property\n      optionSchema = required ? (mergeSchemas({ required }, option) as S) : option;\n    }\n\n    // First we will check to see if there is an anyOf/oneOf override for the UI schema\n    let optionsUiSchema: UiSchema<T, S, F>[] = [];\n    if (ONE_OF_KEY in schema && uiSchema && ONE_OF_KEY in uiSchema) {\n      if (Array.isArray(uiSchema[ONE_OF_KEY])) {\n        optionsUiSchema = uiSchema[ONE_OF_KEY];\n      } else {\n        console.warn(`uiSchema.oneOf is not an array for \"${title || name}\"`);\n      }\n    } else if (ANY_OF_KEY in schema && uiSchema && ANY_OF_KEY in uiSchema) {\n      if (Array.isArray(uiSchema[ANY_OF_KEY])) {\n        optionsUiSchema = uiSchema[ANY_OF_KEY];\n      } else {\n        console.warn(`uiSchema.anyOf is not an array for \"${title || name}\"`);\n      }\n    }\n    // Then we pick the one that matches the selected option index, if one exists otherwise default to the main uiSchema\n    let optionUiSchema = uiSchema;\n    if (selectedOption >= 0 && optionsUiSchema.length > selectedOption) {\n      optionUiSchema = optionsUiSchema[selectedOption];\n    }\n\n    const translateEnum: TranslatableString = title\n      ? TranslatableString.TitleOptionPrefix\n      : TranslatableString.OptionPrefix;\n    const translateParams = title ? [title] : [];\n    const enumOptions = retrievedOptions.map((opt: { title?: string }, index: number) => {\n      // Also see if there is an override title in the uiSchema for each option, otherwise use the title from the option\n      const { title: uiTitle = opt.title } = getUiOptions<T, S, F>(optionsUiSchema[index]);\n      return {\n        label: uiTitle || translateString(translateEnum, translateParams.concat(String(index + 1))),\n        value: index,\n      };\n    });\n\n    return (\n      <div className='panel panel-default panel-body'>\n        <div className='form-group'>\n          <Widget\n            id={this.getFieldId()}\n            name={`${name}${schema.oneOf ? '__oneof_select' : '__anyof_select'}`}\n            schema={{ type: 'number', default: 0 } as S}\n            onChange={this.onOptionChange}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            disabled={disabled || isEmpty(enumOptions)}\n            multiple={false}\n            rawErrors={rawErrors}\n            errorSchema={fieldErrorSchema}\n            value={selectedOption >= 0 ? selectedOption : undefined}\n            options={{ enumOptions, ...uiOptions }}\n            registry={registry}\n            formContext={formContext}\n            placeholder={placeholder}\n            autocomplete={autocomplete}\n            autofocus={autofocus}\n            label={title ?? name}\n            hideLabel={!displayLabel}\n          />\n        </div>\n        {optionSchema && <_SchemaField {...this.props} schema={optionSchema} uiSchema={optionUiSchema} />}\n      </div>\n    );\n  }\n}\n\nexport default AnyOfField;\n","import { useState, useCallback } from 'react';\nimport { asNumber, FieldProps, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n// Matches a string that ends in a . character, optionally followed by a sequence of\n// digits followed by any number of 0 characters up until the end of the line.\n// Ensuring that there is at least one prefixed character is important so that\n// you don't incorrectly match against \"0\".\nconst trailingCharMatcherWithPrefix = /\\.([0-9]*0)*$/;\n\n// This is used for trimming the trailing 0 and . characters without affecting\n// the rest of the string. Its possible to use one RegEx with groups for this\n// functionality, but it is fairly complex compared to simply defining two\n// different matchers.\nconst trailingCharMatcher = /[0.]0*$/;\n\n/**\n * The NumberField class has some special handling for dealing with trailing\n * decimal points and/or zeroes. This logic is designed to allow trailing values\n * to be visible in the input element, but not be represented in the\n * corresponding form data.\n *\n * The algorithm is as follows:\n *\n * 1. When the input value changes the value is cached in the component state\n *\n * 2. The value is then normalized, removing trailing decimal points and zeros,\n *    then passed to the \"onChange\" callback\n *\n * 3. When the component is rendered, the formData value is checked against the\n *    value cached in the state. If it matches the cached value, the cached\n *    value is passed to the input instead of the formData value\n */\nfunction NumberField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: FieldProps<T, S, F>\n) {\n  const { registry, onChange, formData, value: initialValue } = props;\n  const [lastValue, setLastValue] = useState(initialValue);\n  const { StringField } = registry.fields;\n\n  let value = formData;\n\n  /** Handle the change from the `StringField` to properly convert to a number\n   *\n   * @param value - The current value for the change occurring\n   */\n  const handleChange = useCallback(\n    (value: FieldProps<T, S, F>['value']) => {\n      // Cache the original value in component state\n      setLastValue(value);\n\n      // Normalize decimals that don't start with a zero character in advance so\n      // that the rest of the normalization logic is simpler\n      if (`${value}`.charAt(0) === '.') {\n        value = `0${value}`;\n      }\n\n      // Check that the value is a string (this can happen if the widget used is a\n      // <select>, due to an enum declaration etc) then, if the value ends in a\n      // trailing decimal point or multiple zeroes, strip the trailing values\n      const processed =\n        typeof value === 'string' && value.match(trailingCharMatcherWithPrefix)\n          ? asNumber(value.replace(trailingCharMatcher, ''))\n          : asNumber(value);\n\n      onChange(processed as unknown as T);\n    },\n    [onChange]\n  );\n\n  if (typeof lastValue === 'string' && typeof value === 'number') {\n    // Construct a regular expression that checks for a string that consists\n    // of the formData value suffixed with zero or one '.' characters and zero\n    // or more '0' characters\n    const re = new RegExp(`^(${String(value).replace('.', '\\\\.')})?\\\\.?0*$`);\n\n    // If the cached \"lastValue\" is a match, use that instead of the formData\n    // value to prevent the input value from changing in the UI\n    if (lastValue.match(re)) {\n      value = lastValue as unknown as T;\n    }\n  }\n\n  return <StringField {...props} formData={value} onChange={handleChange} />;\n}\n\nexport default NumberField;\n","/* @jsx h */\n/**\n * markdown-to-jsx is a fork of\n * [simple-markdown v0.2.2](https://github.com/Khan/simple-markdown)\n * from Khan Academy. Thank you Khan devs for making such an awesome\n * and extensible parsing infra... without it, half of the\n * optimizations here wouldn't be feasible. 🙏🏼\n */\nimport * as React from 'react'\n\n/**\n * Analogous to `node.type`. Please note that the values here may change at any time,\n * so do not hard code against the value directly.\n */\nexport const enum RuleType {\n  blockQuote = '0',\n  breakLine = '1',\n  breakThematic = '2',\n  codeBlock = '3',\n  codeFenced = '4',\n  codeInline = '5',\n  footnote = '6',\n  footnoteReference = '7',\n  gfmTask = '8',\n  heading = '9',\n  headingSetext = '10',\n  /** only available if not `disableHTMLParsing` */\n  htmlBlock = '11',\n  htmlComment = '12',\n  /** only available if not `disableHTMLParsing` */\n  htmlSelfClosing = '13',\n  image = '14',\n  link = '15',\n  /** emits a `link` 'node', does not render directly */\n  linkAngleBraceStyleDetector = '16',\n  /** emits a `link` 'node', does not render directly */\n  linkBareUrlDetector = '17',\n  /** emits a `link` 'node', does not render directly */\n  linkMailtoDetector = '18',\n  newlineCoalescer = '19',\n  orderedList = '20',\n  paragraph = '21',\n  ref = '22',\n  refImage = '23',\n  refLink = '24',\n  table = '25',\n  tableSeparator = '26',\n  text = '27',\n  textBolded = '28',\n  textEmphasized = '29',\n  textEscaped = '30',\n  textMarked = '31',\n  textStrikethroughed = '32',\n  unorderedList = '33',\n}\n\nconst enum Priority {\n  /**\n   * anything that must scan the tree before everything else\n   */\n  MAX,\n  /**\n   * scans for block-level constructs\n   */\n  HIGH,\n  /**\n   * inline w/ more priority than other inline\n   */\n  MED,\n  /**\n   * inline elements\n   */\n  LOW,\n  /**\n   * bare text and stuff that is considered leftovers\n   */\n  MIN,\n}\n\n/** TODO: Drop for React 16? */\nconst ATTRIBUTE_TO_JSX_PROP_MAP = [\n  'allowFullScreen',\n  'allowTransparency',\n  'autoComplete',\n  'autoFocus',\n  'autoPlay',\n  'cellPadding',\n  'cellSpacing',\n  'charSet',\n  'className',\n  'classId',\n  'colSpan',\n  'contentEditable',\n  'contextMenu',\n  'crossOrigin',\n  'encType',\n  'formAction',\n  'formEncType',\n  'formMethod',\n  'formNoValidate',\n  'formTarget',\n  'frameBorder',\n  'hrefLang',\n  'inputMode',\n  'keyParams',\n  'keyType',\n  'marginHeight',\n  'marginWidth',\n  'maxLength',\n  'mediaGroup',\n  'minLength',\n  'noValidate',\n  'radioGroup',\n  'readOnly',\n  'rowSpan',\n  'spellCheck',\n  'srcDoc',\n  'srcLang',\n  'srcSet',\n  'tabIndex',\n  'useMap',\n].reduce(\n  (obj, x) => {\n    obj[x.toLowerCase()] = x\n    return obj\n  },\n  { for: 'htmlFor' }\n)\n\nconst namedCodesToUnicode = {\n  amp: '\\u0026',\n  apos: '\\u0027',\n  gt: '\\u003e',\n  lt: '\\u003c',\n  nbsp: '\\u00a0',\n  quot: '\\u201c',\n} as const\n\nconst DO_NOT_PROCESS_HTML_ELEMENTS = ['style', 'script']\n\n/**\n * the attribute extractor regex looks for a valid attribute name,\n * followed by an equal sign (whitespace around the equal sign is allowed), followed\n * by one of the following:\n *\n * 1. a single quote-bounded string, e.g. 'foo'\n * 2. a double quote-bounded string, e.g. \"bar\"\n * 3. an interpolation, e.g. {something}\n *\n * JSX can be be interpolated into itself and is passed through the compiler using\n * the same options and setup as the current run.\n *\n * <Something children={<SomeOtherThing />} />\n *                      ==================\n *                              ↳ children: [<SomeOtherThing />]\n *\n * Otherwise, interpolations are handled as strings or simple booleans\n * unless HTML syntax is detected.\n *\n * <Something color={green} disabled={true} />\n *                   =====            ====\n *                     ↓                ↳ disabled: true\n *                     ↳ color: \"green\"\n *\n * Numbers are not parsed at this time due to complexities around int, float,\n * and the upcoming bigint functionality that would make handling it unwieldy.\n * Parse the string in your component as desired.\n *\n * <Something someBigNumber={123456789123456789} />\n *                           ==================\n *                                   ↳ someBigNumber: \"123456789123456789\"\n */\nconst ATTR_EXTRACTOR_R =\n  /([-A-Z0-9_:]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|(?:\\{((?:\\\\.|{[^}]*?}|[^}])*)\\})))?/gi\n\n/** TODO: Write explainers for each of these */\n\nconst AUTOLINK_MAILTO_CHECK_R = /mailto:/i\nconst BLOCK_END_R = /\\n{2,}$/\nconst BLOCKQUOTE_R = /^(\\s*>[\\s\\S]*?)(?=\\n{2,})/\nconst BLOCKQUOTE_TRIM_LEFT_MULTILINE_R = /^ *> ?/gm\nconst BREAK_LINE_R = /^ {2,}\\n/\nconst BREAK_THEMATIC_R = /^(?:( *[-*_])){3,} *(?:\\n *)+\\n/\nconst CODE_BLOCK_FENCED_R =\n  /^\\s*(`{3,}|~{3,}) *(\\S+)?([^\\n]*?)?\\n([\\s\\S]+?)\\s*\\1 *(?:\\n *)*\\n?/\nconst CODE_BLOCK_R = /^(?: {4}[^\\n]+\\n*)+(?:\\n *)+\\n?/\nconst CODE_INLINE_R = /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/\nconst CONSECUTIVE_NEWLINE_R = /^(?:\\n *)*\\n/\nconst CR_NEWLINE_R = /\\r\\n?/g\n\n/**\n * Matches footnotes on the format:\n *\n * [^key]: value\n *\n * Matches multiline footnotes\n *\n * [^key]: row\n * row\n * row\n *\n * And empty lines in indented multiline footnotes\n *\n * [^key]: indented with\n *     row\n *\n *     row\n *\n * Explanation:\n *\n * 1. Look for the starting tag, eg: [^key]\n *    ^\\[\\^([^\\]]+)]\n *\n * 2. The first line starts with a colon, and continues for the rest of the line\n *   :(.*)\n *\n * 3. Parse as many additional lines as possible. Matches new non-empty lines that doesn't begin with a new footnote definition.\n *    (\\n(?!\\[\\^).+)\n *\n * 4. ...or allows for repeated newlines if the next line begins with at least four whitespaces.\n *    (\\n+ {4,}.*)\n */\nconst FOOTNOTE_R = /^\\[\\^([^\\]]+)](:(.*)((\\n+ {4,}.*)|(\\n(?!\\[\\^).+))*)/\n\nconst FOOTNOTE_REFERENCE_R = /^\\[\\^([^\\]]+)]/\nconst FORMFEED_R = /\\f/g\nconst FRONT_MATTER_R = /^---[ \\t]*\\n(.|\\n)*\\n---[ \\t]*\\n/\nconst GFM_TASK_R = /^\\s*?\\[(x|\\s)\\]/\nconst HEADING_R = /^ *(#{1,6}) *([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/\nconst HEADING_ATX_COMPLIANT_R =\n  /^ *(#{1,6}) +([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/\nconst HEADING_SETEXT_R = /^([^\\n]+)\\n *(=|-){3,} *(?:\\n *)+\\n/\n\n/**\n * Explanation:\n *\n * 1. Look for a starting tag, preceded by any amount of spaces\n *    ^ *<\n *\n * 2. Capture the tag name (capture 1)\n *    ([^ >/]+)\n *\n * 3. Ignore a space after the starting tag and capture the attribute portion of the tag (capture 2)\n *     ?([^>]*)>\n *\n * 4. Ensure a matching closing tag is present in the rest of the input string\n *    (?=[\\s\\S]*<\\/\\1>)\n *\n * 5. Capture everything until the matching closing tag -- this might include additional pairs\n *    of the same tag type found in step 2 (capture 3)\n *    ((?:[\\s\\S]*?(?:<\\1[^>]*>[\\s\\S]*?<\\/\\1>)*[\\s\\S]*?)*?)<\\/\\1>\n *\n * 6. Capture excess newlines afterward\n *    \\n*\n */\nconst HTML_BLOCK_ELEMENT_R =\n  /^ *(?!<[a-z][^ >/]* ?\\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\\n?(\\s*(?:<\\1[^>]*?>[\\s\\S]*?<\\/\\1>|(?!<\\1\\b)[\\s\\S])*?)<\\/\\1>(?!<\\/\\1>)\\n*/i\n\nconst HTML_CHAR_CODE_R = /&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi\n\nconst HTML_COMMENT_R = /^<!--[\\s\\S]*?(?:-->)/\n\n/**\n * borrowed from React 15(https://github.com/facebook/react/blob/894d20744cba99383ffd847dbd5b6e0800355a5c/src/renderers/dom/shared/HTMLDOMPropertyConfig.js)\n */\nconst HTML_CUSTOM_ATTR_R = /^(data|aria|x)-[a-z_][a-z\\d_.-]*$/\n\nconst HTML_SELF_CLOSING_ELEMENT_R =\n  /^ *<([a-z][a-z0-9:]*)(?:\\s+((?:<.*?>|[^>])*))?\\/?>(?!<\\/\\1>)(\\s*\\n)?/i\nconst INTERPOLATION_R = /^\\{.*\\}$/\nconst LINK_AUTOLINK_BARE_URL_R = /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/\nconst LINK_AUTOLINK_MAILTO_R = /^<([^ >]+@[^ >]+)>/\nconst LINK_AUTOLINK_R = /^<([^ >]+:\\/[^ >]+)>/\nconst CAPTURE_LETTER_AFTER_HYPHEN = /-([a-z])?/gi\nconst NP_TABLE_R =\n  /^(.*\\|.*)\\n(?: *(\\|? *[-:]+ *\\|[-| :]*)\\n((?:.*\\|.*\\n)*))?\\n?/\nconst PARAGRAPH_R = /^[^\\n]+(?:  \\n|\\n{2,})/\nconst REFERENCE_IMAGE_OR_LINK = /^\\[([^\\]]*)\\]:\\s+<?([^\\s>]+)>?\\s*(\"([^\"]*)\")?/\nconst REFERENCE_IMAGE_R = /^!\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/\nconst REFERENCE_LINK_R = /^\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/\nconst SQUARE_BRACKETS_R = /(\\[|\\])/g\nconst SHOULD_RENDER_AS_BLOCK_R = /(\\n|^[-*]\\s|^#|^ {2,}|^-{2,}|^>\\s)/\nconst TAB_R = /\\t/g\nconst TABLE_TRIM_PIPES = /(^ *\\||\\| *$)/g\nconst TABLE_CENTER_ALIGN = /^ *:-+: *$/\nconst TABLE_LEFT_ALIGN = /^ *:-+ *$/\nconst TABLE_RIGHT_ALIGN = /^ *-+: *$/\n\n/**\n * For inline formatting, this partial attempts to ignore characters that\n * may appear in nested formatting that could prematurely trigger detection\n * and therefore miss content that should have been included.\n */\nconst INLINE_SKIP_R =\n  '((?:\\\\[.*?\\\\][([].*?[)\\\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\\\n)*?)'\n\n/**\n * Detect a sequence like **foo** or __foo__. Note that bold has a higher priority\n * than emphasized to support nesting of both since they share a delimiter.\n */\nconst TEXT_BOLD_R = new RegExp(`^([*_])\\\\1${INLINE_SKIP_R}\\\\1\\\\1(?!\\\\1)`)\n\n/**\n * Detect a sequence like *foo* or _foo_.\n */\nconst TEXT_EMPHASIZED_R = new RegExp(`^([*_])${INLINE_SKIP_R}\\\\1(?!\\\\1|\\\\w)`)\n\n/**\n * Detect a sequence like ==foo==.\n */\nconst TEXT_MARKED_R = new RegExp(`^==${INLINE_SKIP_R}==`)\n\n/**\n * Detect a sequence like ~~foo~~.\n */\nconst TEXT_STRIKETHROUGHED_R = new RegExp(`^~~${INLINE_SKIP_R}~~`)\n\nconst TEXT_ESCAPED_R = /^\\\\([^0-9A-Za-z\\s])/\n\nconst TEXT_PLAIN_R =\n  /^[\\s\\S]+?(?=[^0-9A-Z\\s\\u00c0-\\uffff&#;.()'\"]|\\d+\\.|\\n\\n| {2,}\\n|\\w+:\\S|$)/i\n\nconst TRIM_STARTING_NEWLINES = /^\\n+/\n\nconst HTML_LEFT_TRIM_AMOUNT_R = /^([ \\t]*)/\n\nconst UNESCAPE_URL_R = /\\\\([^\\\\])/g\n\ntype LIST_TYPE = 1 | 2\nconst ORDERED: LIST_TYPE = 1\nconst UNORDERED: LIST_TYPE = 2\n\nconst LIST_ITEM_END_R = / *\\n+$/\nconst LIST_LOOKBEHIND_R = /(?:^|\\n)( *)$/\n\n// recognize a `*` `-`, `+`, `1.`, `2.`... list bullet\nconst ORDERED_LIST_BULLET = '(?:\\\\d+\\\\.)'\nconst UNORDERED_LIST_BULLET = '(?:[*+-])'\n\nfunction generateListItemPrefix(type: LIST_TYPE) {\n  return (\n    '( *)(' +\n    (type === ORDERED ? ORDERED_LIST_BULLET : UNORDERED_LIST_BULLET) +\n    ') +'\n  )\n}\n\n// recognize the start of a list item:\n// leading space plus a bullet plus a space (`   * `)\nconst ORDERED_LIST_ITEM_PREFIX = generateListItemPrefix(ORDERED)\nconst UNORDERED_LIST_ITEM_PREFIX = generateListItemPrefix(UNORDERED)\n\nfunction generateListItemPrefixRegex(type: LIST_TYPE) {\n  return new RegExp(\n    '^' +\n      (type === ORDERED ? ORDERED_LIST_ITEM_PREFIX : UNORDERED_LIST_ITEM_PREFIX)\n  )\n}\n\nconst ORDERED_LIST_ITEM_PREFIX_R = generateListItemPrefixRegex(ORDERED)\nconst UNORDERED_LIST_ITEM_PREFIX_R = generateListItemPrefixRegex(UNORDERED)\n\nfunction generateListItemRegex(type: LIST_TYPE) {\n  // recognize an individual list item:\n  //  * hi\n  //    this is part of the same item\n  //\n  //    as is this, which is a new paragraph in the same item\n  //\n  //  * but this is not part of the same item\n  return new RegExp(\n    '^' +\n      (type === ORDERED\n        ? ORDERED_LIST_ITEM_PREFIX\n        : UNORDERED_LIST_ITEM_PREFIX) +\n      '[^\\\\n]*(?:\\\\n' +\n      '(?!\\\\1' +\n      (type === ORDERED ? ORDERED_LIST_BULLET : UNORDERED_LIST_BULLET) +\n      ' )[^\\\\n]*)*(\\\\n|$)',\n    'gm'\n  )\n}\n\nconst ORDERED_LIST_ITEM_R = generateListItemRegex(ORDERED)\nconst UNORDERED_LIST_ITEM_R = generateListItemRegex(UNORDERED)\n\n// check whether a list item has paragraphs: if it does,\n// we leave the newlines at the end\nfunction generateListRegex(type: LIST_TYPE) {\n  const bullet = type === ORDERED ? ORDERED_LIST_BULLET : UNORDERED_LIST_BULLET\n\n  return new RegExp(\n    '^( *)(' +\n      bullet +\n      ') ' +\n      '[\\\\s\\\\S]+?(?:\\\\n{2,}(?! )' +\n      '(?!\\\\1' +\n      bullet +\n      ' (?!' +\n      bullet +\n      ' ))\\\\n*' +\n      // the \\\\s*$ here is so that we can parse the inside of nested\n      // lists, where our content might end before we receive two `\\n`s\n      '|\\\\s*\\\\n*$)'\n  )\n}\n\nconst ORDERED_LIST_R = generateListRegex(ORDERED)\nconst UNORDERED_LIST_R = generateListRegex(UNORDERED)\n\nfunction generateListRule(\n  h: any,\n  type: LIST_TYPE\n): MarkdownToJSX.Rule<\n  MarkdownToJSX.OrderedListNode | MarkdownToJSX.UnorderedListNode\n> {\n  const ordered = type === ORDERED\n  const LIST_R = ordered ? ORDERED_LIST_R : UNORDERED_LIST_R\n  const LIST_ITEM_R = ordered ? ORDERED_LIST_ITEM_R : UNORDERED_LIST_ITEM_R\n  const LIST_ITEM_PREFIX_R = ordered\n    ? ORDERED_LIST_ITEM_PREFIX_R\n    : UNORDERED_LIST_ITEM_PREFIX_R\n\n  return {\n    match(source, state, prevCapture) {\n      // We only want to break into a list if we are at the start of a\n      // line. This is to avoid parsing \"hi * there\" with \"* there\"\n      // becoming a part of a list.\n      // You might wonder, \"but that's inline, so of course it wouldn't\n      // start a list?\". You would be correct! Except that some of our\n      // lists can be inline, because they might be inside another list,\n      // in which case we can parse with inline scope, but need to allow\n      // nested lists inside this inline scope.\n      const isStartOfLine = LIST_LOOKBEHIND_R.exec(prevCapture)\n      const isListBlock = state.list || (!state.inline && !state.simple)\n\n      if (isStartOfLine && isListBlock) {\n        source = isStartOfLine[1] + source\n\n        return LIST_R.exec(source)\n      } else {\n        return null\n      }\n    },\n    order: Priority.HIGH,\n    parse(capture, parse, state) {\n      const bullet = capture[2]\n      const start = ordered ? +bullet : undefined\n      const items = capture[0]\n        // recognize the end of a paragraph block inside a list item:\n        // two or more newlines at end end of the item\n        .replace(BLOCK_END_R, '\\n')\n        .match(LIST_ITEM_R)\n\n      let lastItemWasAParagraph = false\n      const itemContent = items.map(function (item, i) {\n        // We need to see how far indented the item is:\n        const space = LIST_ITEM_PREFIX_R.exec(item)[0].length\n\n        // And then we construct a regex to \"unindent\" the subsequent\n        // lines of the items by that amount:\n        const spaceRegex = new RegExp('^ {1,' + space + '}', 'gm')\n\n        // Before processing the item, we need a couple things\n        const content = item\n          // remove indents on trailing lines:\n          .replace(spaceRegex, '')\n          // remove the bullet:\n          .replace(LIST_ITEM_PREFIX_R, '')\n\n        // Handling \"loose\" lists, like:\n        //\n        //  * this is wrapped in a paragraph\n        //\n        //  * as is this\n        //\n        //  * as is this\n        const isLastItem = i === items.length - 1\n        const containsBlocks = content.indexOf('\\n\\n') !== -1\n\n        // Any element in a list is a block if it contains multiple\n        // newlines. The last element in the list can also be a block\n        // if the previous item in the list was a block (this is\n        // because non-last items in the list can end with \\n\\n, but\n        // the last item can't, so we just \"inherit\" this property\n        // from our previous element).\n        const thisItemIsAParagraph =\n          containsBlocks || (isLastItem && lastItemWasAParagraph)\n        lastItemWasAParagraph = thisItemIsAParagraph\n\n        // backup our state for restoration afterwards. We're going to\n        // want to set state.list to true, and state.inline depending\n        // on our list's looseness.\n        const oldStateInline = state.inline\n        const oldStateList = state.list\n        state.list = true\n\n        // Parse inline if we're in a tight list, or block if we're in\n        // a loose list.\n        let adjustedContent\n        if (thisItemIsAParagraph) {\n          state.inline = false\n          adjustedContent = content.replace(LIST_ITEM_END_R, '\\n\\n')\n        } else {\n          state.inline = true\n          adjustedContent = content.replace(LIST_ITEM_END_R, '')\n        }\n\n        const result = parse(adjustedContent, state)\n\n        // Restore our state before returning\n        state.inline = oldStateInline\n        state.list = oldStateList\n\n        return result\n      })\n\n      return {\n        items: itemContent,\n        ordered: ordered,\n        start: start,\n      }\n    },\n    render(node, output, state) {\n      const Tag = node.ordered ? 'ol' : 'ul'\n\n      return (\n        <Tag\n          key={state.key}\n          start={node.type === RuleType.orderedList ? node.start : undefined}\n        >\n          {node.items.map(function generateListItem(item, i) {\n            return <li key={i}>{output(item, state)}</li>\n          })}\n        </Tag>\n      )\n    },\n  }\n}\n\nconst LINK_INSIDE = '(?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*'\nconst LINK_HREF_AND_TITLE =\n  '\\\\s*<?((?:\\\\([^)]*\\\\)|[^\\\\s\\\\\\\\]|\\\\\\\\.)*?)>?(?:\\\\s+[\\'\"]([\\\\s\\\\S]*?)[\\'\"])?\\\\s*'\nconst LINK_R = new RegExp(\n  '^\\\\[(' + LINK_INSIDE + ')\\\\]\\\\(' + LINK_HREF_AND_TITLE + '\\\\)'\n)\nconst IMAGE_R = /^!\\[(.*?)\\]\\( *((?:\\([^)]*\\)|[^() ])*) *\"?([^)\"]*)?\"?\\)/\n\nconst NON_PARAGRAPH_BLOCK_SYNTAXES = [\n  BLOCKQUOTE_R,\n  CODE_BLOCK_FENCED_R,\n  CODE_BLOCK_R,\n  HEADING_R,\n  HEADING_SETEXT_R,\n  HEADING_ATX_COMPLIANT_R,\n  HTML_COMMENT_R,\n  NP_TABLE_R,\n  ORDERED_LIST_ITEM_R,\n  ORDERED_LIST_R,\n  UNORDERED_LIST_ITEM_R,\n  UNORDERED_LIST_R,\n]\n\nconst BLOCK_SYNTAXES = [\n  ...NON_PARAGRAPH_BLOCK_SYNTAXES,\n  PARAGRAPH_R,\n  HTML_BLOCK_ELEMENT_R,\n  HTML_SELF_CLOSING_ELEMENT_R,\n]\n\nfunction containsBlockSyntax(input: string) {\n  return BLOCK_SYNTAXES.some(r => r.test(input))\n}\n\n/** Remove symmetrical leading and trailing quotes */\nfunction unquote(str: string) {\n  const first = str[0]\n  if (\n    (first === '\"' || first === \"'\") &&\n    str.length >= 2 &&\n    str[str.length - 1] === first\n  ) {\n    return str.slice(1, -1)\n  }\n  return str\n}\n\n// based on https://stackoverflow.com/a/18123682/1141611\n// not complete, but probably good enough\nexport function slugify(str: string) {\n  return str\n    .replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g, 'a')\n    .replace(/[çÇ]/g, 'c')\n    .replace(/[ðÐ]/g, 'd')\n    .replace(/[ÈÉÊËéèêë]/g, 'e')\n    .replace(/[ÏïÎîÍíÌì]/g, 'i')\n    .replace(/[Ññ]/g, 'n')\n    .replace(/[øØœŒÕõÔôÓóÒò]/g, 'o')\n    .replace(/[ÜüÛûÚúÙù]/g, 'u')\n    .replace(/[ŸÿÝý]/g, 'y')\n    .replace(/[^a-z0-9- ]/gi, '')\n    .replace(/ /gi, '-')\n    .toLowerCase()\n}\n\nfunction parseTableAlignCapture(alignCapture: string) {\n  if (TABLE_RIGHT_ALIGN.test(alignCapture)) {\n    return 'right'\n  } else if (TABLE_CENTER_ALIGN.test(alignCapture)) {\n    return 'center'\n  } else if (TABLE_LEFT_ALIGN.test(alignCapture)) {\n    return 'left'\n  }\n\n  return null\n}\n\nfunction parseTableRow(\n  source: string,\n  parse: MarkdownToJSX.NestedParser,\n  state: MarkdownToJSX.State,\n  tableOutput: boolean\n): MarkdownToJSX.ParserResult[][] {\n  const prevInTable = state.inTable\n  state.inTable = true\n  let tableRow = source\n    .trim()\n    // isolate situations where a pipe should be ignored (inline code, HTML)\n    .split(/( *(?:`[^`]*`|<.*?>.*?<\\/.*?>(?!<\\/.*?>)|\\\\\\||\\|) *)/)\n    .reduce((nodes, fragment) => {\n      if (fragment.trim() === '|')\n        nodes.push(\n          tableOutput\n            ? { type: RuleType.tableSeparator }\n            : { type: RuleType.text, text: fragment }\n        )\n      else if (fragment !== '') nodes.push.apply(nodes, parse(fragment, state))\n      return nodes\n    }, [] as MarkdownToJSX.ParserResult[])\n  state.inTable = prevInTable\n\n  let cells = [[]]\n  tableRow.forEach(function (node, i) {\n    if (node.type === RuleType.tableSeparator) {\n      // Filter out empty table separators at the start/end:\n      if (i !== 0 && i !== tableRow.length - 1) {\n        // Split the current row:\n        cells.push([])\n      }\n    } else {\n      if (\n        node.type === RuleType.text &&\n        (tableRow[i + 1] == null ||\n          tableRow[i + 1].type === RuleType.tableSeparator)\n      ) {\n        node.text = node.text.trimEnd()\n      }\n      cells[cells.length - 1].push(node)\n    }\n  })\n  return cells\n}\n\nfunction parseTableAlign(source: string /*, parse, state*/) {\n  const alignText = source.replace(TABLE_TRIM_PIPES, '').split('|')\n\n  return alignText.map(parseTableAlignCapture)\n}\n\nfunction parseTableCells(\n  source: string,\n  parse: MarkdownToJSX.NestedParser,\n  state: MarkdownToJSX.State\n) {\n  const rowsText = source.trim().split('\\n')\n\n  return rowsText.map(function (rowText) {\n    return parseTableRow(rowText, parse, state, true)\n  })\n}\n\nfunction parseTable(\n  capture: RegExpMatchArray,\n  parse: MarkdownToJSX.NestedParser,\n  state: MarkdownToJSX.State\n) {\n  /**\n   * The table syntax makes some other parsing angry so as a bit of a hack even if alignment and/or cell rows are missing,\n   * we'll still run a detected first row through the parser and then just emit a paragraph.\n   */\n  state.inline = true\n  const align = capture[2] ? parseTableAlign(capture[2]) : []\n  const cells = capture[3] ? parseTableCells(capture[3], parse, state) : []\n  const header = parseTableRow(capture[1], parse, state, !!cells.length)\n  state.inline = false\n\n  return cells.length\n    ? {\n        align: align,\n        cells: cells,\n        header: header,\n        type: RuleType.table,\n      }\n    : {\n        children: header,\n        type: RuleType.paragraph,\n      }\n}\n\nfunction getTableStyle(node, colIndex) {\n  return node.align[colIndex] == null\n    ? {}\n    : {\n        textAlign: node.align[colIndex],\n      }\n}\n\n/** TODO: remove for react 16 */\nfunction normalizeAttributeKey(key) {\n  const hyphenIndex = key.indexOf('-')\n\n  if (hyphenIndex !== -1 && key.match(HTML_CUSTOM_ATTR_R) === null) {\n    key = key.replace(CAPTURE_LETTER_AFTER_HYPHEN, function (_, letter) {\n      return letter.toUpperCase()\n    })\n  }\n\n  return key\n}\n\nfunction attributeValueToJSXPropValue(\n  key: keyof React.AllHTMLAttributes<Element>,\n  value: string\n): any {\n  if (key === 'style') {\n    return value.split(/;\\s?/).reduce(function (styles, kvPair) {\n      const key = kvPair.slice(0, kvPair.indexOf(':'))\n\n      // snake-case to camelCase\n      // also handles PascalCasing vendor prefixes\n      const camelCasedKey = key\n        .trim()\n        .replace(/(-[a-z])/g, substr => substr[1].toUpperCase())\n\n      // key.length + 1 to skip over the colon\n      styles[camelCasedKey] = kvPair.slice(key.length + 1).trim()\n\n      return styles\n    }, {})\n  } else if (key === 'href' || key === 'src') {\n    return sanitizeUrl(value)\n  } else if (value.match(INTERPOLATION_R)) {\n    // return as a string and let the consumer decide what to do with it\n    value = value.slice(1, value.length - 1)\n  }\n\n  if (value === 'true') {\n    return true\n  } else if (value === 'false') {\n    return false\n  }\n\n  return value\n}\n\nfunction normalizeWhitespace(source: string): string {\n  return source\n    .replace(CR_NEWLINE_R, '\\n')\n    .replace(FORMFEED_R, '')\n    .replace(TAB_R, '    ')\n}\n\n/**\n * Creates a parser for a given set of rules, with the precedence\n * specified as a list of rules.\n *\n * @rules: an object containing\n * rule type -> {match, order, parse} objects\n * (lower order is higher precedence)\n * (Note: `order` is added to defaultRules after creation so that\n *  the `order` of defaultRules in the source matches the `order`\n *  of defaultRules in terms of `order` fields.)\n *\n * @returns The resulting parse function, with the following parameters:\n *   @source: the input source string to be parsed\n *   @state: an optional object to be threaded through parse\n *     calls. Allows clients to add stateful operations to\n *     parsing, such as keeping track of how many levels deep\n *     some nesting is. For an example use-case, see passage-ref\n *     parsing in src/widgets/passage/passage-markdown.jsx\n */\nfunction parserFor(\n  rules: MarkdownToJSX.Rules\n): (\n  source: string,\n  state: MarkdownToJSX.State\n) => ReturnType<MarkdownToJSX.NestedParser> {\n  // Sorts rules in order of increasing order, then\n  // ascending rule name in case of ties.\n  let ruleList = Object.keys(rules)\n\n  if (process.env.NODE_ENV !== 'production') {\n    ruleList.forEach(function (type) {\n      let order = rules[type].order\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        (typeof order !== 'number' || !isFinite(order))\n      ) {\n        console.warn(\n          'markdown-to-jsx: Invalid order for rule `' + type + '`: ' + order\n        )\n      }\n    })\n  }\n\n  ruleList.sort(function (typeA, typeB) {\n    let orderA = rules[typeA].order\n    let orderB = rules[typeB].order\n\n    // Sort based on increasing order\n    if (orderA !== orderB) {\n      return orderA - orderB\n    } else if (typeA < typeB) {\n      return -1\n    }\n\n    return 1\n  })\n\n  function nestedParse(\n    source: string,\n    state: MarkdownToJSX.State\n  ): MarkdownToJSX.ParserResult[] {\n    let result = []\n\n    // We store the previous capture so that match functions can\n    // use some limited amount of lookbehind. Lists use this to\n    // ensure they don't match arbitrary '- ' or '* ' in inline\n    // text (see the list rule for more information).\n    let prevCapture = ''\n    while (source) {\n      let i = 0\n      while (i < ruleList.length) {\n        const ruleType = ruleList[i]\n        const rule = rules[ruleType]\n        const capture = rule.match(source, state, prevCapture)\n\n        if (capture) {\n          const currCaptureString = capture[0]\n          source = source.substring(currCaptureString.length)\n          const parsed = rule.parse(capture, nestedParse, state)\n\n          // We also let rules override the default type of\n          // their parsed node if they would like to, so that\n          // there can be a single output function for all links,\n          // even if there are several rules to parse them.\n          if (parsed.type == null) {\n            parsed.type = ruleType as unknown as RuleType\n          }\n\n          result.push(parsed)\n\n          prevCapture = currCaptureString\n          break\n        }\n\n        i++\n      }\n    }\n\n    return result\n  }\n\n  return function outerParse(source, state) {\n    return nestedParse(normalizeWhitespace(source), state)\n  }\n}\n\n// Creates a match function for an inline scoped or simple element from a regex\nfunction inlineRegex(regex: RegExp) {\n  return function match(source, state: MarkdownToJSX.State) {\n    if (state.inline) {\n      return regex.exec(source)\n    } else {\n      return null\n    }\n  }\n}\n\n// basically any inline element except links\nfunction simpleInlineRegex(regex: RegExp) {\n  return function match(source: string, state: MarkdownToJSX.State) {\n    if (state.inline || state.simple) {\n      return regex.exec(source)\n    } else {\n      return null\n    }\n  }\n}\n\n// Creates a match function for a block scoped element from a regex\nfunction blockRegex(regex: RegExp) {\n  return function match(source: string, state: MarkdownToJSX.State) {\n    if (state.inline || state.simple) {\n      return null\n    } else {\n      return regex.exec(source)\n    }\n  }\n}\n\n// Creates a match function from a regex, ignoring block/inline scope\nfunction anyScopeRegex(regex: RegExp) {\n  return function match(source: string /*, state*/) {\n    return regex.exec(source)\n  }\n}\n\nfunction matchParagraph(\n  source: string,\n  state: MarkdownToJSX.State,\n  prevCapturedString?: string\n) {\n  if (state.inline || state.simple) {\n    return null\n  }\n\n  if (prevCapturedString && !prevCapturedString.endsWith('\\n')) {\n    // don't match continuation of a line\n    return null\n  }\n\n  let match = ''\n\n  source.split('\\n').every(line => {\n    // bail out on first sign of non-paragraph block\n    if (NON_PARAGRAPH_BLOCK_SYNTAXES.some(regex => regex.test(line))) {\n      return false\n    }\n    match += line + '\\n'\n    return line.trim()\n  })\n\n  const captured = match.trimEnd()\n  if (captured == '') {\n    return null\n  }\n\n  return [match, captured]\n}\n\nfunction sanitizeUrl(url: string): string | undefined {\n  try {\n    const decoded = decodeURIComponent(url).replace(/[^A-Za-z0-9/:]/g, '')\n\n    if (decoded.match(/^\\s*(javascript|vbscript|data(?!:image)):/i)) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\n          'Anchor URL contains an unsafe JavaScript/VBScript/data expression, it will not be rendered.',\n          decoded\n        )\n      }\n\n      return undefined\n    }\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\n        'Anchor URL could not be decoded due to malformed syntax or characters, it will not be rendered.',\n        url\n      )\n    }\n\n    // decodeURIComponent sometimes throws a URIError\n    // See `decodeURIComponent('a%AFc');`\n    // http://stackoverflow.com/questions/9064536/javascript-decodeuricomponent-malformed-uri-exception\n    return null\n  }\n\n  return url\n}\n\nfunction unescapeUrl(rawUrlString: string): string {\n  return rawUrlString.replace(UNESCAPE_URL_R, '$1')\n}\n\n/**\n * Everything inline, including links.\n */\nfunction parseInline(\n  parse: MarkdownToJSX.NestedParser,\n  children: string,\n  state: MarkdownToJSX.State\n): MarkdownToJSX.ParserResult[] {\n  const isCurrentlyInline = state.inline || false\n  const isCurrentlySimple = state.simple || false\n  state.inline = true\n  state.simple = true\n  const result = parse(children, state)\n  state.inline = isCurrentlyInline\n  state.simple = isCurrentlySimple\n  return result\n}\n\n/**\n * Anything inline that isn't a link.\n */\nfunction parseSimpleInline(\n  parse: MarkdownToJSX.NestedParser,\n  children: string,\n  state: MarkdownToJSX.State\n): MarkdownToJSX.ParserResult[] {\n  const isCurrentlyInline = state.inline || false\n  const isCurrentlySimple = state.simple || false\n  state.inline = false\n  state.simple = true\n  const result = parse(children, state)\n  state.inline = isCurrentlyInline\n  state.simple = isCurrentlySimple\n  return result\n}\n\nfunction parseBlock(\n  parse,\n  children,\n  state: MarkdownToJSX.State\n): MarkdownToJSX.ParserResult[] {\n  const isCurrentlyInline = state.inline || false\n  state.inline = false\n  const result = parse(children, state)\n  state.inline = isCurrentlyInline\n  return result\n}\n\nconst parseCaptureInline: MarkdownToJSX.Parser<{\n  children: MarkdownToJSX.ParserResult[]\n}> = (capture, parse, state: MarkdownToJSX.State) => {\n  return {\n    children: parseInline(parse, capture[1], state),\n  }\n}\n\nfunction captureNothing() {\n  return {}\n}\n\nfunction renderNothing() {\n  return null\n}\n\nfunction reactFor(render) {\n  return function patchedRender(\n    ast: MarkdownToJSX.ParserResult | MarkdownToJSX.ParserResult[],\n    state: MarkdownToJSX.State = {}\n  ): React.ReactChild[] {\n    if (Array.isArray(ast)) {\n      const oldKey = state.key\n      const result = []\n\n      // map nestedOutput over the ast, except group any text\n      // nodes together into a single string output.\n      let lastWasString = false\n\n      for (let i = 0; i < ast.length; i++) {\n        state.key = i\n\n        const nodeOut = patchedRender(ast[i], state)\n        const isString = typeof nodeOut === 'string'\n\n        if (isString && lastWasString) {\n          result[result.length - 1] += nodeOut\n        } else if (nodeOut !== null) {\n          result.push(nodeOut)\n        }\n\n        lastWasString = isString\n      }\n\n      state.key = oldKey\n\n      return result\n    }\n\n    return render(ast, patchedRender, state)\n  }\n}\n\nfunction createRenderer(\n  rules: MarkdownToJSX.Rules,\n  userRender?: MarkdownToJSX.Options['renderRule']\n) {\n  return function renderRule(\n    ast: MarkdownToJSX.ParserResult,\n    render: MarkdownToJSX.RuleOutput,\n    state: MarkdownToJSX.State\n  ): React.ReactChild {\n    const renderer = rules[ast.type].render as MarkdownToJSX.Rule['render']\n\n    return userRender\n      ? userRender(() => renderer(ast, render, state), ast, render, state)\n      : renderer(ast, render, state)\n  }\n}\n\nfunction cx(...args) {\n  return args.filter(Boolean).join(' ')\n}\n\nfunction get(src: Object, path: string, fb?: any) {\n  let ptr = src\n  const frags = path.split('.')\n\n  while (frags.length) {\n    ptr = ptr[frags[0]]\n\n    if (ptr === undefined) break\n    else frags.shift()\n  }\n\n  return ptr || fb\n}\n\nfunction getTag(tag: string, overrides: MarkdownToJSX.Overrides) {\n  const override = get(overrides, tag)\n\n  if (!override) return tag\n\n  return typeof override === 'function' ||\n    (typeof override === 'object' && 'render' in override)\n    ? override\n    : get(overrides, `${tag}.component`, tag)\n}\n\nexport function compiler(\n  markdown: string = '',\n  options: MarkdownToJSX.Options = {}\n) {\n  options.overrides = options.overrides || {}\n  options.slugify = options.slugify || slugify\n  options.namedCodesToUnicode = options.namedCodesToUnicode\n    ? { ...namedCodesToUnicode, ...options.namedCodesToUnicode }\n    : namedCodesToUnicode\n\n  const createElementFn = options.createElement || React.createElement\n\n  // JSX custom pragma\n  // eslint-disable-next-line no-unused-vars\n  function h(\n    // locally we always will render a known string tag\n    tag: MarkdownToJSX.HTMLTags,\n    props: Parameters<MarkdownToJSX.CreateElement>[1] & {\n      className?: string\n      id?: string\n    },\n    ...children\n  ) {\n    const overrideProps = get(options.overrides, `${tag}.props`, {})\n\n    return createElementFn(\n      getTag(tag, options.overrides),\n      {\n        ...props,\n        ...overrideProps,\n        className: cx(props?.className, overrideProps.className) || undefined,\n      },\n      ...children\n    )\n  }\n\n  function compile(input: string): JSX.Element {\n    input = input.replace(FRONT_MATTER_R, '')\n\n    let inline = false\n\n    if (options.forceInline) {\n      inline = true\n    } else if (!options.forceBlock) {\n      /**\n       * should not contain any block-level markdown like newlines, lists, headings,\n       * thematic breaks, blockquotes, tables, etc\n       */\n      inline = SHOULD_RENDER_AS_BLOCK_R.test(input) === false\n    }\n\n    const arr = emitter(\n      parser(\n        inline\n          ? input\n          : `${input.trimEnd().replace(TRIM_STARTING_NEWLINES, '')}\\n\\n`,\n        {\n          inline,\n        }\n      )\n    )\n\n    while (\n      typeof arr[arr.length - 1] === 'string' &&\n      !arr[arr.length - 1].trim()\n    ) {\n      arr.pop()\n    }\n\n    if (options.wrapper === null) {\n      return arr\n    }\n\n    const wrapper = options.wrapper || (inline ? 'span' : 'div')\n    let jsx\n\n    if (arr.length > 1 || options.forceWrapper) {\n      jsx = arr\n    } else if (arr.length === 1) {\n      jsx = arr[0]\n\n      // TODO: remove this for React 16\n      if (typeof jsx === 'string') {\n        return <span key=\"outer\">{jsx}</span>\n      } else {\n        return jsx\n      }\n    } else {\n      // TODO: return null for React 16\n      jsx = null\n    }\n\n    return React.createElement(wrapper, { key: 'outer' }, jsx)\n  }\n\n  function attrStringToMap(str: string): JSX.IntrinsicAttributes {\n    const attributes = str.match(ATTR_EXTRACTOR_R)\n    if (!attributes) {\n      return null\n    }\n\n    return attributes.reduce(function (map, raw, index) {\n      const delimiterIdx = raw.indexOf('=')\n\n      if (delimiterIdx !== -1) {\n        const key = normalizeAttributeKey(raw.slice(0, delimiterIdx)).trim()\n        const value = unquote(raw.slice(delimiterIdx + 1).trim())\n\n        const mappedKey = ATTRIBUTE_TO_JSX_PROP_MAP[key] || key\n        const normalizedValue = (map[mappedKey] = attributeValueToJSXPropValue(\n          key,\n          value\n        ))\n\n        if (\n          typeof normalizedValue === 'string' &&\n          (HTML_BLOCK_ELEMENT_R.test(normalizedValue) ||\n            HTML_SELF_CLOSING_ELEMENT_R.test(normalizedValue))\n        ) {\n          map[mappedKey] = React.cloneElement(compile(normalizedValue.trim()), {\n            key: index,\n          })\n        }\n      } else if (raw !== 'style') {\n        map[ATTRIBUTE_TO_JSX_PROP_MAP[raw] || raw] = true\n      }\n\n      return map\n    }, {})\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof markdown !== 'string') {\n      throw new Error(`markdown-to-jsx: the first argument must be\n                             a string`)\n    }\n\n    if (\n      Object.prototype.toString.call(options.overrides) !== '[object Object]'\n    ) {\n      throw new Error(`markdown-to-jsx: options.overrides (second argument property) must be\n                             undefined or an object literal with shape:\n                             {\n                                htmltagname: {\n                                    component: string|ReactComponent(optional),\n                                    props: object(optional)\n                                }\n                             }`)\n    }\n  }\n\n  const footnotes: { footnote: string; identifier: string }[] = []\n  const refs: { [key: string]: { target: string; title: string } } = {}\n\n  /**\n   * each rule's react() output function goes through our custom\n   * h() JSX pragma; this allows the override functionality to be\n   * automatically applied\n   */\n  // @ts-ignore\n  const rules: MarkdownToJSX.Rules = {\n    [RuleType.blockQuote]: {\n      match: blockRegex(BLOCKQUOTE_R),\n      order: Priority.HIGH,\n      parse(capture, parse, state) {\n        return {\n          children: parse(\n            capture[0].replace(BLOCKQUOTE_TRIM_LEFT_MULTILINE_R, ''),\n            state\n          ),\n        }\n      },\n      render(node, output, state) {\n        return (\n          <blockquote key={state.key}>\n            {output(node.children, state)}\n          </blockquote>\n        )\n      },\n    },\n\n    [RuleType.breakLine]: {\n      match: anyScopeRegex(BREAK_LINE_R),\n      order: Priority.HIGH,\n      parse: captureNothing,\n      render(_, __, state) {\n        return <br key={state.key} />\n      },\n    },\n\n    [RuleType.breakThematic]: {\n      match: blockRegex(BREAK_THEMATIC_R),\n      order: Priority.HIGH,\n      parse: captureNothing,\n      render(_, __, state) {\n        return <hr key={state.key} />\n      },\n    },\n\n    [RuleType.codeBlock]: {\n      match: blockRegex(CODE_BLOCK_R),\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        return {\n          lang: undefined,\n          text: capture[0].replace(/^ {4}/gm, '').replace(/\\n+$/, ''),\n        }\n      },\n\n      render(node, output, state) {\n        return (\n          <pre key={state.key}>\n            <code\n              {...node.attrs}\n              className={node.lang ? `lang-${node.lang}` : ''}\n            >\n              {node.text}\n            </code>\n          </pre>\n        )\n      },\n    } as MarkdownToJSX.Rule<{\n      attrs?: ReturnType<typeof attrStringToMap>\n      lang?: string\n      text: string\n    }>,\n\n    [RuleType.codeFenced]: {\n      match: blockRegex(CODE_BLOCK_FENCED_R),\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        return {\n          // if capture[3] it's additional metadata\n          attrs: attrStringToMap(capture[3] || ''),\n          lang: capture[2] || undefined,\n          text: capture[4],\n          type: RuleType.codeBlock,\n        }\n      },\n    },\n\n    [RuleType.codeInline]: {\n      match: simpleInlineRegex(CODE_INLINE_R),\n      order: Priority.LOW,\n      parse(capture /*, parse, state*/) {\n        return {\n          text: capture[2],\n        }\n      },\n      render(node, output, state) {\n        return <code key={state.key}>{node.text}</code>\n      },\n    },\n\n    /**\n     * footnotes are emitted at the end of compilation in a special <footer> block\n     */\n    [RuleType.footnote]: {\n      match: blockRegex(FOOTNOTE_R),\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        footnotes.push({\n          footnote: capture[2],\n          identifier: capture[1],\n        })\n\n        return {}\n      },\n      render: renderNothing,\n    },\n\n    [RuleType.footnoteReference]: {\n      match: inlineRegex(FOOTNOTE_REFERENCE_R),\n      order: Priority.HIGH,\n      parse(capture /*, parse*/) {\n        return {\n          target: `#${options.slugify(capture[1])}`,\n          text: capture[1],\n        }\n      },\n      render(node, output, state) {\n        return (\n          <a key={state.key} href={sanitizeUrl(node.target)}>\n            <sup key={state.key}>{node.text}</sup>\n          </a>\n        )\n      },\n    } as MarkdownToJSX.Rule<{ target: string; text: string }>,\n\n    [RuleType.gfmTask]: {\n      match: inlineRegex(GFM_TASK_R),\n      order: Priority.HIGH,\n      parse(capture /*, parse, state*/) {\n        return {\n          completed: capture[1].toLowerCase() === 'x',\n        }\n      },\n      render(node, output, state) {\n        return (\n          <input\n            checked={node.completed}\n            key={state.key}\n            readOnly\n            type=\"checkbox\"\n          />\n        )\n      },\n    } as MarkdownToJSX.Rule<{ completed: boolean }>,\n\n    [RuleType.heading]: {\n      match: blockRegex(\n        options.enforceAtxHeadings ? HEADING_ATX_COMPLIANT_R : HEADING_R\n      ),\n      order: Priority.HIGH,\n      parse(capture, parse, state) {\n        return {\n          children: parseInline(parse, capture[2], state),\n          id: options.slugify(capture[2]),\n          level: capture[1].length as MarkdownToJSX.HeadingNode['level'],\n        }\n      },\n      render(node, output, state) {\n        return h(\n          `h${node.level}`,\n          { id: node.id, key: state.key },\n          output(node.children, state)\n        )\n      },\n    },\n\n    [RuleType.headingSetext]: {\n      match: blockRegex(HEADING_SETEXT_R),\n      order: Priority.MAX,\n      parse(capture, parse, state) {\n        return {\n          children: parseInline(parse, capture[1], state),\n          level: capture[2] === '=' ? 1 : 2,\n          type: RuleType.heading,\n        }\n      },\n    },\n\n    [RuleType.htmlBlock]: {\n      /**\n       * find the first matching end tag and process the interior\n       */\n      match: anyScopeRegex(HTML_BLOCK_ELEMENT_R),\n      order: Priority.HIGH,\n      parse(capture, parse, state) {\n        const [, whitespace] = capture[3].match(HTML_LEFT_TRIM_AMOUNT_R)\n\n        const trimmer = new RegExp(`^${whitespace}`, 'gm')\n        const trimmed = capture[3].replace(trimmer, '')\n\n        const parseFunc = containsBlockSyntax(trimmed)\n          ? parseBlock\n          : parseInline\n\n        const tagName = capture[1].toLowerCase() as MarkdownToJSX.HTMLTags\n        const noInnerParse =\n          DO_NOT_PROCESS_HTML_ELEMENTS.indexOf(tagName) !== -1\n\n        const ast = {\n          attrs: attrStringToMap(capture[2]),\n          noInnerParse: noInnerParse,\n          tag: (noInnerParse ? tagName : capture[1]).trim(),\n        } as {\n          attrs: ReturnType<typeof attrStringToMap>\n          children?: ReturnType<MarkdownToJSX.NestedParser> | undefined\n          noInnerParse: Boolean\n          tag: MarkdownToJSX.HTMLTags\n          text?: string | undefined\n        }\n\n        state.inAnchor = state.inAnchor || tagName === 'a'\n\n        if (noInnerParse) {\n          ast.text = capture[3]\n        } else {\n          ast.children = parseFunc(parse, trimmed, state)\n        }\n\n        /**\n         * if another html block is detected within, parse as block,\n         * otherwise parse as inline to pick up any further markdown\n         */\n        state.inAnchor = false\n\n        return ast\n      },\n      render(node, output, state) {\n        return (\n          <node.tag key={state.key} {...node.attrs}>\n            {node.text || output(node.children, state)}\n          </node.tag>\n        )\n      },\n    },\n\n    [RuleType.htmlSelfClosing]: {\n      /**\n       * find the first matching end tag and process the interior\n       */\n      match: anyScopeRegex(HTML_SELF_CLOSING_ELEMENT_R),\n      order: Priority.HIGH,\n      parse(capture /*, parse, state*/) {\n        return {\n          attrs: attrStringToMap(capture[2] || ''),\n          tag: capture[1].trim(),\n        }\n      },\n      render(node, output, state) {\n        return <node.tag {...node.attrs} key={state.key} />\n      },\n    },\n\n    [RuleType.htmlComment]: {\n      match: anyScopeRegex(HTML_COMMENT_R),\n      order: Priority.HIGH,\n      parse() {\n        return {}\n      },\n      render: renderNothing,\n    },\n\n    [RuleType.image]: {\n      match: simpleInlineRegex(IMAGE_R),\n      order: Priority.HIGH,\n      parse(capture /*, parse, state*/) {\n        return {\n          alt: capture[1],\n          target: unescapeUrl(capture[2]),\n          title: capture[3],\n        }\n      },\n      render(node, output, state) {\n        return (\n          <img\n            key={state.key}\n            alt={node.alt || undefined}\n            title={node.title || undefined}\n            src={sanitizeUrl(node.target)}\n          />\n        )\n      },\n    } as MarkdownToJSX.Rule<{\n      alt?: string\n      target: string\n      title?: string\n    }>,\n\n    [RuleType.link]: {\n      match: inlineRegex(LINK_R),\n      order: Priority.LOW,\n      parse(capture, parse, state) {\n        return {\n          children: parseSimpleInline(parse, capture[1], state),\n          target: unescapeUrl(capture[2]),\n          title: capture[3],\n        }\n      },\n      render(node, output, state) {\n        return (\n          <a key={state.key} href={sanitizeUrl(node.target)} title={node.title}>\n            {output(node.children, state)}\n          </a>\n        )\n      },\n    },\n\n    // https://daringfireball.net/projects/markdown/syntax#autolink\n    [RuleType.linkAngleBraceStyleDetector]: {\n      match: inlineRegex(LINK_AUTOLINK_R),\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        return {\n          children: [\n            {\n              text: capture[1],\n              type: RuleType.text,\n            },\n          ],\n          target: capture[1],\n          type: RuleType.link,\n        }\n      },\n    },\n\n    [RuleType.linkBareUrlDetector]: {\n      match: (source, state) => {\n        if (state.inAnchor) {\n          return null\n        }\n        return inlineRegex(LINK_AUTOLINK_BARE_URL_R)(source, state)\n      },\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        return {\n          children: [\n            {\n              text: capture[1],\n              type: RuleType.text,\n            },\n          ],\n          target: capture[1],\n          title: undefined,\n          type: RuleType.link,\n        }\n      },\n    },\n\n    [RuleType.linkMailtoDetector]: {\n      match: inlineRegex(LINK_AUTOLINK_MAILTO_R),\n      order: Priority.MAX,\n      parse(capture /*, parse, state*/) {\n        let address = capture[1]\n        let target = capture[1]\n\n        // Check for a `mailto:` already existing in the link:\n        if (!AUTOLINK_MAILTO_CHECK_R.test(target)) {\n          target = 'mailto:' + target\n        }\n\n        return {\n          children: [\n            {\n              text: address.replace('mailto:', ''),\n              type: RuleType.text,\n            },\n          ],\n          target: target,\n          type: RuleType.link,\n        }\n      },\n    },\n\n    [RuleType.orderedList]: generateListRule(\n      h,\n      ORDERED\n    ) as MarkdownToJSX.Rule<MarkdownToJSX.OrderedListNode>,\n\n    [RuleType.unorderedList]: generateListRule(\n      h,\n      UNORDERED\n    ) as MarkdownToJSX.Rule<MarkdownToJSX.UnorderedListNode>,\n\n    [RuleType.newlineCoalescer]: {\n      match: blockRegex(CONSECUTIVE_NEWLINE_R),\n      order: Priority.LOW,\n      parse: captureNothing,\n      render(/*node, output, state*/) {\n        return '\\n'\n      },\n    },\n\n    [RuleType.paragraph]: {\n      match: matchParagraph,\n      order: Priority.LOW,\n      parse: parseCaptureInline,\n      render(node, output, state) {\n        return <p key={state.key}>{output(node.children, state)}</p>\n      },\n    } as MarkdownToJSX.Rule<ReturnType<typeof parseCaptureInline>>,\n\n    [RuleType.ref]: {\n      match: inlineRegex(REFERENCE_IMAGE_OR_LINK),\n      order: Priority.MAX,\n      parse(capture /*, parse*/) {\n        refs[capture[1]] = {\n          target: capture[2],\n          title: capture[4],\n        }\n\n        return {}\n      },\n      render: renderNothing,\n    },\n\n    [RuleType.refImage]: {\n      match: simpleInlineRegex(REFERENCE_IMAGE_R),\n      order: Priority.MAX,\n      parse(capture) {\n        return {\n          alt: capture[1] || undefined,\n          ref: capture[2],\n        }\n      },\n      render(node, output, state) {\n        return refs[node.ref] ? (\n          <img\n            key={state.key}\n            alt={node.alt}\n            src={sanitizeUrl(refs[node.ref].target)}\n            title={refs[node.ref].title}\n          />\n        ) : null\n      },\n    } as MarkdownToJSX.Rule<{ alt?: string; ref: string }>,\n\n    [RuleType.refLink]: {\n      match: inlineRegex(REFERENCE_LINK_R),\n      order: Priority.MAX,\n      parse(capture, parse, state) {\n        return {\n          children: parse(capture[1], state),\n          fallbackChildren: parse(\n            capture[0].replace(SQUARE_BRACKETS_R, '\\\\$1'),\n            state\n          ),\n          ref: capture[2],\n        }\n      },\n      render(node, output, state) {\n        return refs[node.ref] ? (\n          <a\n            key={state.key}\n            href={sanitizeUrl(refs[node.ref].target)}\n            title={refs[node.ref].title}\n          >\n            {output(node.children, state)}\n          </a>\n        ) : (\n          <span key={state.key}>{output(node.fallbackChildren, state)}</span>\n        )\n      },\n    },\n\n    [RuleType.table]: {\n      match: blockRegex(NP_TABLE_R),\n      order: Priority.HIGH,\n      parse: parseTable,\n      render(node, output, state) {\n        const table = node as MarkdownToJSX.TableNode\n        return (\n          <table key={state.key}>\n            <thead>\n              <tr>\n                {table.header.map(function generateHeaderCell(content, i) {\n                  return (\n                    <th key={i} style={getTableStyle(table, i)}>\n                      {output(content, state)}\n                    </th>\n                  )\n                })}\n              </tr>\n            </thead>\n\n            <tbody>\n              {table.cells.map(function generateTableRow(row, i) {\n                return (\n                  <tr key={i}>\n                    {row.map(function generateTableCell(content, c) {\n                      return (\n                        <td key={c} style={getTableStyle(table, c)}>\n                          {output(content, state)}\n                        </td>\n                      )\n                    })}\n                  </tr>\n                )\n              })}\n            </tbody>\n          </table>\n        )\n      },\n    },\n\n    [RuleType.text]: {\n      // Here we look for anything followed by non-symbols,\n      // double newlines, or double-space-newlines\n      // We break on any symbol characters so that this grammar\n      // is easy to extend without needing to modify this regex\n      match: anyScopeRegex(TEXT_PLAIN_R),\n      order: Priority.MIN,\n      parse(capture /*, parse, state*/) {\n        return {\n          text: capture[0]\n            // nbsp -> unicode equivalent for named chars\n            .replace(HTML_CHAR_CODE_R, (full, inner) => {\n              return options.namedCodesToUnicode[inner]\n                ? options.namedCodesToUnicode[inner]\n                : full\n            }),\n        }\n      },\n      render(node /*, output, state*/) {\n        return node.text\n      },\n    },\n\n    [RuleType.textBolded]: {\n      match: simpleInlineRegex(TEXT_BOLD_R),\n      order: Priority.MED,\n      parse(capture, parse, state) {\n        return {\n          // capture[1] -> the syntax control character\n          // capture[2] -> inner content\n          children: parse(capture[2], state),\n        }\n      },\n      render(node, output, state) {\n        return <strong key={state.key}>{output(node.children, state)}</strong>\n      },\n    },\n\n    [RuleType.textEmphasized]: {\n      match: simpleInlineRegex(TEXT_EMPHASIZED_R),\n      order: Priority.LOW,\n      parse(capture, parse, state) {\n        return {\n          // capture[1] -> opening * or _\n          // capture[2] -> inner content\n          children: parse(capture[2], state),\n        }\n      },\n      render(node, output, state) {\n        return <em key={state.key}>{output(node.children, state)}</em>\n      },\n    },\n\n    [RuleType.textEscaped]: {\n      // We don't allow escaping numbers, letters, or spaces here so that\n      // backslashes used in plain text still get rendered. But allowing\n      // escaping anything else provides a very flexible escape mechanism,\n      // regardless of how this grammar is extended.\n      match: simpleInlineRegex(TEXT_ESCAPED_R),\n      order: Priority.HIGH,\n      parse(capture /*, parse, state*/) {\n        return {\n          text: capture[1],\n          type: RuleType.text,\n        }\n      },\n    },\n\n    [RuleType.textMarked]: {\n      match: simpleInlineRegex(TEXT_MARKED_R),\n      order: Priority.LOW,\n      parse: parseCaptureInline,\n      render(node, output, state) {\n        return <mark key={state.key}>{output(node.children, state)}</mark>\n      },\n    },\n\n    [RuleType.textStrikethroughed]: {\n      match: simpleInlineRegex(TEXT_STRIKETHROUGHED_R),\n      order: Priority.LOW,\n      parse: parseCaptureInline,\n      render(node, output, state) {\n        return <del key={state.key}>{output(node.children, state)}</del>\n      },\n    },\n  }\n\n  // Object.keys(rules).forEach(key => {\n  //   let { match: match, parse: parse } = rules[key]\n\n  //   rules[key].match = (...args) => {\n  //     const start = performance.now()\n  //     const result = match(...args)\n  //     const delta = performance.now() - start\n\n  //     if (delta > 5)\n  //       console.warn(\n  //         `Slow match for ${key}: ${delta.toFixed(3)}ms, input: ${args[0]}`\n  //       )\n\n  //     return result\n  //   }\n\n  //   rules[key].parse = (...args) => {\n  //     const start = performance.now()\n  //     const result = parse(...args)\n  //     const delta = performance.now() - start\n\n  //     if (delta > 5)\n  //       console.warn(`Slow parse for ${key}: ${delta.toFixed(3)}ms`)\n\n  //     console.log(`${key}:parse`, `${delta.toFixed(3)}ms`, args[0])\n\n  //     return result\n  //   }\n  // })\n\n  if (options.disableParsingRawHTML === true) {\n    delete rules[RuleType.htmlBlock]\n    delete rules[RuleType.htmlSelfClosing]\n  }\n\n  const parser = parserFor(rules)\n  const emitter: Function = reactFor(createRenderer(rules, options.renderRule))\n\n  const jsx = compile(markdown)\n\n  if (footnotes.length) {\n    return (\n      <div>\n        {jsx}\n        <footer key=\"footer\">\n          {footnotes.map(function createFootnote(def) {\n            return (\n              <div id={options.slugify(def.identifier)} key={def.identifier}>\n                {def.identifier}\n                {emitter(parser(def.footnote, { inline: true }))}\n              </div>\n            )\n          })}\n        </footer>\n      </div>\n    )\n  }\n\n  return jsx\n}\n\n/**\n * A simple HOC for easy React use. Feed the markdown content as a direct child\n * and the rest is taken care of automatically.\n */\nconst Markdown: React.FC<{\n  [key: string]: any\n  children: string\n  options?: MarkdownToJSX.Options\n}> = ({ children = '', options, ...props }) => {\n  if (process.env.NODE_ENV !== 'production' && typeof children !== 'string') {\n    console.error(\n      'markdown-to-jsx: <Markdown> component only accepts a single string as a child, received:',\n      children\n    )\n  }\n\n  return React.cloneElement(\n    compiler(children, options),\n    props as JSX.IntrinsicAttributes\n  )\n}\n\nexport namespace MarkdownToJSX {\n  /**\n   * RequireAtLeastOne<{ ... }> <- only requires at least one key\n   */\n  type RequireAtLeastOne<T, Keys extends keyof T = keyof T> = Pick<\n    T,\n    Exclude<keyof T, Keys>\n  > &\n    {\n      [K in Keys]-?: Required<Pick<T, K>> & Partial<Pick<T, Exclude<Keys, K>>>\n    }[Keys]\n\n  export type CreateElement = typeof React.createElement\n\n  export type HTMLTags = keyof JSX.IntrinsicElements\n\n  export type State = {\n    /** true if the current content is inside anchor link grammar */\n    inAnchor?: boolean\n    /** true if parsing in an inline context (subset of rules around formatting and links) */\n    inline?: boolean\n    /** true if in a table */\n    inTable?: boolean\n    /** use this for the `key` prop */\n    key?: React.Key\n    /** true if in a list */\n    list?: boolean\n    /** true if parsing in inline context w/o links */\n    simple?: boolean\n  }\n\n  export interface BlockQuoteNode {\n    children: MarkdownToJSX.ParserResult[]\n    type: RuleType.blockQuote\n  }\n\n  export interface BreakLineNode {\n    type: RuleType.breakLine\n  }\n\n  export interface BreakThematicNode {\n    type: RuleType.breakThematic\n  }\n\n  export interface CodeBlockNode {\n    type: RuleType.codeBlock\n    attrs?: JSX.IntrinsicAttributes\n    lang?: string\n    text: string\n  }\n\n  export interface CodeFencedNode {\n    type: RuleType.codeFenced\n  }\n\n  export interface CodeInlineNode {\n    type: RuleType.codeInline\n    text: string\n  }\n\n  export interface FootnoteNode {\n    type: RuleType.footnote\n  }\n\n  export interface FootnoteReferenceNode {\n    type: RuleType.footnoteReference\n    target: string\n    text: string\n  }\n\n  export interface GFMTaskNode {\n    type: RuleType.gfmTask\n    completed: boolean\n  }\n\n  export interface HeadingNode {\n    type: RuleType.heading\n    children: MarkdownToJSX.ParserResult[]\n    id: string\n    level: 1 | 2 | 3 | 4 | 5 | 6\n  }\n\n  export interface HeadingSetextNode {\n    type: RuleType.headingSetext\n  }\n\n  export interface HTMLCommentNode {\n    type: RuleType.htmlComment\n  }\n\n  export interface ImageNode {\n    type: RuleType.image\n    alt?: string\n    target: string\n    title?: string\n  }\n\n  export interface LinkNode {\n    type: RuleType.link\n    children: MarkdownToJSX.ParserResult[]\n    target: string\n    title?: string\n  }\n\n  export interface LinkAngleBraceNode {\n    type: RuleType.linkAngleBraceStyleDetector\n  }\n\n  export interface LinkBareURLNode {\n    type: RuleType.linkBareUrlDetector\n  }\n\n  export interface LinkMailtoNode {\n    type: RuleType.linkMailtoDetector\n  }\n\n  export interface OrderedListNode {\n    type: RuleType.orderedList\n    items: MarkdownToJSX.ParserResult[][]\n    ordered: true\n    start?: number\n  }\n\n  export interface UnorderedListNode {\n    type: RuleType.unorderedList\n    items: MarkdownToJSX.ParserResult[][]\n    ordered: false\n  }\n\n  export interface NewlineNode {\n    type: RuleType.newlineCoalescer\n  }\n\n  export interface ParagraphNode {\n    type: RuleType.paragraph\n    children: MarkdownToJSX.ParserResult[]\n  }\n\n  export interface ReferenceNode {\n    type: RuleType.ref\n  }\n\n  export interface ReferenceImageNode {\n    type: RuleType.refImage\n    alt?: string\n    ref: string\n  }\n\n  export interface ReferenceLinkNode {\n    type: RuleType.refLink\n    children: MarkdownToJSX.ParserResult[]\n    fallbackChildren: MarkdownToJSX.ParserResult[]\n    ref: string\n  }\n\n  export interface TableNode {\n    type: RuleType.table\n    /**\n     * alignment for each table column\n     */\n    align: ('left' | 'right' | 'center')[]\n    cells: MarkdownToJSX.ParserResult[][][]\n    header: MarkdownToJSX.ParserResult[][]\n  }\n\n  export interface TableSeparatorNode {\n    type: RuleType.tableSeparator\n  }\n\n  export interface TextNode {\n    type: RuleType.text\n    text: string\n  }\n\n  export interface BoldTextNode {\n    type: RuleType.textBolded\n    children: MarkdownToJSX.ParserResult[]\n  }\n\n  export interface ItalicTextNode {\n    type: RuleType.textEmphasized\n    children: MarkdownToJSX.ParserResult[]\n  }\n\n  export interface EscapedTextNode {\n    type: RuleType.textEscaped\n  }\n\n  export interface MarkedTextNode {\n    type: RuleType.textMarked\n    children: MarkdownToJSX.ParserResult[]\n  }\n\n  export interface StrikethroughTextNode {\n    type: RuleType.textStrikethroughed\n    children: MarkdownToJSX.ParserResult[]\n  }\n\n  export interface HTMLNode {\n    type: RuleType.htmlBlock\n    attrs: JSX.IntrinsicAttributes\n    children?: ReturnType<MarkdownToJSX.NestedParser> | undefined\n    noInnerParse: Boolean\n    tag: MarkdownToJSX.HTMLTags\n    text?: string | undefined\n  }\n\n  export interface HTMLSelfClosingNode {\n    type: RuleType.htmlSelfClosing\n    attrs: JSX.IntrinsicAttributes\n    tag: string\n  }\n\n  export type ParserResult =\n    | BlockQuoteNode\n    | BreakLineNode\n    | BreakThematicNode\n    | CodeBlockNode\n    | CodeFencedNode\n    | CodeInlineNode\n    | FootnoteNode\n    | FootnoteReferenceNode\n    | GFMTaskNode\n    | HeadingNode\n    | HeadingSetextNode\n    | HTMLCommentNode\n    | ImageNode\n    | LinkNode\n    | LinkAngleBraceNode\n    | LinkBareURLNode\n    | LinkMailtoNode\n    | OrderedListNode\n    | UnorderedListNode\n    | NewlineNode\n    | ParagraphNode\n    | ReferenceNode\n    | ReferenceImageNode\n    | ReferenceLinkNode\n    | TableNode\n    | TableSeparatorNode\n    | TextNode\n    | BoldTextNode\n    | ItalicTextNode\n    | EscapedTextNode\n    | MarkedTextNode\n    | StrikethroughTextNode\n    | HTMLNode\n    | HTMLSelfClosingNode\n\n  export type NestedParser = (\n    input: string,\n    state?: MarkdownToJSX.State\n  ) => MarkdownToJSX.ParserResult[]\n\n  export type Parser<ParserOutput> = (\n    capture: RegExpMatchArray,\n    nestedParse: NestedParser,\n    state?: MarkdownToJSX.State\n  ) => ParserOutput\n\n  export type RuleOutput = (\n    ast: MarkdownToJSX.ParserResult | MarkdownToJSX.ParserResult[],\n    state: MarkdownToJSX.State\n  ) => JSX.Element\n\n  export type Rule<ParserOutput = MarkdownToJSX.ParserResult> = {\n    match: (\n      source: string,\n      state: MarkdownToJSX.State,\n      prevCapturedString?: string\n    ) => RegExpMatchArray\n    order: Priority\n    parse: MarkdownToJSX.Parser<Omit<ParserOutput, 'type'>>\n    render?: (\n      node: ParserOutput,\n      /**\n       * Continue rendering AST nodes if applicable.\n       */\n      render: RuleOutput,\n      state?: MarkdownToJSX.State\n    ) => React.ReactChild\n  }\n\n  export type Rules = {\n    [K in ParserResult['type']]: K extends RuleType.table\n      ? Rule<Extract<ParserResult, { type: K | RuleType.paragraph }>>\n      : Rule<Extract<ParserResult, { type: K }>>\n  }\n\n  export type Override =\n    | RequireAtLeastOne<{\n        component: React.ElementType\n        props: Object\n      }>\n    | React.ElementType\n\n  export type Overrides = {\n    [tag in HTMLTags]?: Override\n  } & {\n    [customComponent: string]: Override\n  }\n\n  export type Options = Partial<{\n    /**\n     * Ultimate control over the output of all rendered JSX.\n     */\n    createElement: (\n      tag: Parameters<CreateElement>[0],\n      props: JSX.IntrinsicAttributes,\n      ...children: React.ReactChild[]\n    ) => React.ReactChild\n\n    /**\n     * Disable the compiler's best-effort transcription of provided raw HTML\n     * into JSX-equivalent. This is the functionality that prevents the need to\n     * use `dangerouslySetInnerHTML` in React.\n     */\n    disableParsingRawHTML: boolean\n\n    /**\n     * Forces the compiler to have space between hash sign and the header text which\n     * is explicitly stated in the most of the markdown specs.\n     * https://github.github.com/gfm/#atx-heading\n     * `The opening sequence of # characters must be followed by a space or by the end of line.`\n     */\n    enforceAtxHeadings: boolean\n\n    /**\n     * Forces the compiler to always output content with a block-level wrapper\n     * (`<p>` or any block-level syntax your markdown already contains.)\n     */\n    forceBlock: boolean\n\n    /**\n     * Forces the compiler to always output content with an inline wrapper (`<span>`)\n     */\n    forceInline: boolean\n\n    /**\n     * Forces the compiler to wrap results, even if there is only a single\n     * child or no children.\n     */\n    forceWrapper: boolean\n\n    /**\n     * Supply additional HTML entity: unicode replacement mappings.\n     *\n     * Pass only the inner part of the entity as the key,\n     * e.g. `&le;` -> `{ \"le\": \"\\u2264\" }`\n     *\n     * By default\n     * the following entities are replaced with their unicode equivalents:\n     *\n     * ```\n     * &amp;\n     * &apos;\n     * &gt;\n     * &lt;\n     * &nbsp;\n     * &quot;\n     * ```\n     */\n    namedCodesToUnicode: {\n      [key: string]: string\n    }\n\n    /**\n     * Selectively control the output of particular HTML tags as they would be\n     * emitted by the compiler.\n     */\n    overrides: Overrides\n\n    /**\n     * Allows for full control over rendering of particular rules.\n     * For example, to implement a LaTeX renderer such as `react-katex`:\n     *\n     * ```\n     * renderRule(next, node, renderChildren, state) {\n     *   if (node.type === RuleType.codeBlock && node.lang === 'latex') {\n     *     return (\n     *       <TeX as=\"div\" key={state.key}>\n     *         {String.raw`${node.text}`}\n     *       </TeX>\n     *     )\n     *   }\n     *\n     *   return next();\n     * }\n     * ```\n     *\n     * Thar be dragons obviously, but you can do a lot with this\n     * (have fun!) To see how things work internally, check the `render`\n     * method in source for a particular rule.\n     */\n    renderRule: (\n      /** Resume normal processing, call this function as a fallback if you are not returning custom JSX. */\n      next: () => React.ReactChild,\n      /** the current AST node, use `RuleType` against `node.type` for identification */\n      node: ParserResult,\n      /** use as `renderChildren(node.children)` for block nodes */\n      renderChildren: RuleOutput,\n      /** contains `key` which should be supplied to the topmost JSX element */\n      state: State\n    ) => React.ReactChild\n\n    /**\n     * Override normalization of non-URI-safe characters for use in generating\n     * HTML IDs for anchor linking purposes.\n     */\n    slugify: (source: string) => string\n\n    /**\n     * Declare the type of the wrapper to be used when there are multiple\n     * children to render. Set to `null` to get an array of children back\n     * without any wrapper, or use `React.Fragment` to get a React element\n     * that won't show up in the DOM.\n     */\n    wrapper: React.ElementType | null\n  }>\n}\n\nexport default Markdown\n","import { Component } from 'react';\nimport {\n  getTemplate,\n  getUiOptions,\n  orderProperties,\n  ErrorSchema,\n  FieldProps,\n  FormContextType,\n  GenericObjectType,\n  IdSchema,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  ADDITIONAL_PROPERTY_FLAG,\n  PROPERTIES_KEY,\n  REF_KEY,\n  ANY_OF_KEY,\n  ONE_OF_KEY,\n} from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\nimport get from 'lodash/get';\nimport has from 'lodash/has';\nimport isObject from 'lodash/isObject';\nimport set from 'lodash/set';\nimport unset from 'lodash/unset';\n\n/** Type used for the state of the `ObjectField` component */\ntype ObjectFieldState = {\n  /** Flag indicating whether an additional property key was modified */\n  wasPropertyKeyModified: boolean;\n  /** The set of additional properties */\n  additionalProperties: object;\n};\n\n/** The `ObjectField` component is used to render a field in the schema that is of type `object`. It tracks whether an\n * additional property key was modified and what it was modified to\n *\n * @param props - The `FieldProps` for this template\n */\nclass ObjectField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> extends Component<\n  FieldProps<T, S, F>,\n  ObjectFieldState\n> {\n  /** Set up the initial state */\n  state = {\n    wasPropertyKeyModified: false,\n    additionalProperties: {},\n  };\n\n  /** Returns a flag indicating whether the `name` field is required in the object schema\n   *\n   * @param name - The name of the field to check for required-ness\n   * @returns - True if the field `name` is required, false otherwise\n   */\n  isRequired(name: string) {\n    const { schema } = this.props;\n    return Array.isArray(schema.required) && schema.required.indexOf(name) !== -1;\n  }\n\n  /** Returns the `onPropertyChange` handler for the `name` field. Handles the special case where a user is attempting\n   * to clear the data for a field added as an additional property. Calls the `onChange()` handler with the updated\n   * formData.\n   *\n   * @param name - The name of the property\n   * @param addedByAdditionalProperties - Flag indicating whether this property is an additional property\n   * @returns - The onPropertyChange callback for the `name` property\n   */\n  onPropertyChange = (name: string, addedByAdditionalProperties = false) => {\n    return (value: T | undefined, newErrorSchema?: ErrorSchema<T>, id?: string) => {\n      const { formData, onChange, errorSchema } = this.props;\n      if (value === undefined && addedByAdditionalProperties) {\n        // Don't set value = undefined for fields added by\n        // additionalProperties. Doing so removes them from the\n        // formData, which causes them to completely disappear\n        // (including the input field for the property name). Unlike\n        // fields which are \"mandated\" by the schema, these fields can\n        // be set to undefined by clicking a \"delete field\" button, so\n        // set empty values to the empty string.\n        value = '' as unknown as T;\n      }\n      const newFormData = { ...formData, [name]: value } as unknown as T;\n      onChange(\n        newFormData,\n        errorSchema &&\n          errorSchema && {\n            ...errorSchema,\n            [name]: newErrorSchema,\n          },\n        id\n      );\n    };\n  };\n\n  /** Returns a callback to handle the onDropPropertyClick event for the given `key` which removes the old `key` data\n   * and calls the `onChange` callback with it\n   *\n   * @param key - The key for which the drop callback is desired\n   * @returns - The drop property click callback\n   */\n  onDropPropertyClick = (key: string) => {\n    return (event: DragEvent) => {\n      event.preventDefault();\n      const { onChange, formData } = this.props;\n      const copiedFormData = { ...formData } as T;\n      unset(copiedFormData, key);\n      onChange(copiedFormData);\n    };\n  };\n\n  /** Computes the next available key name from the `preferredKey`, indexing through the already existing keys until one\n   * that is already not assigned is found.\n   *\n   * @param preferredKey - The preferred name of a new key\n   * @param [formData] - The form data in which to check if the desired key already exists\n   * @returns - The name of the next available key from `preferredKey`\n   */\n  getAvailableKey = (preferredKey: string, formData?: T) => {\n    const { uiSchema, registry } = this.props;\n    const { duplicateKeySuffixSeparator = '-' } = getUiOptions<T, S, F>(uiSchema, registry.globalUiOptions);\n\n    let index = 0;\n    let newKey = preferredKey;\n    while (has(formData, newKey)) {\n      newKey = `${preferredKey}${duplicateKeySuffixSeparator}${++index}`;\n    }\n    return newKey;\n  };\n\n  /** Returns a callback function that deals with the rename of a key for an additional property for a schema. That\n   * callback will attempt to rename the key and move the existing data to that key, calling `onChange` when it does.\n   *\n   * @param oldValue - The old value of a field\n   * @returns - The key change callback function\n   */\n  onKeyChange = (oldValue: any) => {\n    return (value: any, newErrorSchema: ErrorSchema<T>) => {\n      if (oldValue === value) {\n        return;\n      }\n      const { formData, onChange, errorSchema } = this.props;\n\n      value = this.getAvailableKey(value, formData);\n      const newFormData: GenericObjectType = {\n        ...(formData as GenericObjectType),\n      };\n      const newKeys: GenericObjectType = { [oldValue]: value };\n      const keyValues = Object.keys(newFormData).map((key) => {\n        const newKey = newKeys[key] || key;\n        return { [newKey]: newFormData[key] };\n      });\n      const renamedObj = Object.assign({}, ...keyValues);\n\n      this.setState({ wasPropertyKeyModified: true });\n\n      onChange(\n        renamedObj,\n        errorSchema &&\n          errorSchema && {\n            ...errorSchema,\n            [value]: newErrorSchema,\n          }\n      );\n    };\n  };\n\n  /** Returns a default value to be used for a new additional schema property of the given `type`\n   *\n   * @param type - The type of the new additional schema property\n   */\n  getDefaultValue(type?: RJSFSchema['type']) {\n    const {\n      registry: { translateString },\n    } = this.props;\n    switch (type) {\n      case 'array':\n        return [];\n      case 'boolean':\n        return false;\n      case 'null':\n        return null;\n      case 'number':\n        return 0;\n      case 'object':\n        return {};\n      case 'string':\n      default:\n        // We don't have a datatype for some reason (perhaps additionalProperties was true)\n        return translateString(TranslatableString.NewStringDefault);\n    }\n  }\n\n  /** Handles the adding of a new additional property on the given `schema`. Calls the `onChange` callback once the new\n   * default data for that field has been added to the formData.\n   *\n   * @param schema - The schema element to which the new property is being added\n   */\n  handleAddClick = (schema: S) => () => {\n    if (!schema.additionalProperties) {\n      return;\n    }\n    const { formData, onChange, registry } = this.props;\n    const newFormData = { ...formData } as T;\n\n    let type: RJSFSchema['type'] = undefined;\n    let defaultValue: RJSFSchema['default'] = undefined;\n    if (isObject(schema.additionalProperties)) {\n      type = schema.additionalProperties.type;\n      defaultValue = schema.additionalProperties.default;\n      let apSchema = schema.additionalProperties;\n      if (REF_KEY in apSchema) {\n        const { schemaUtils } = registry;\n        apSchema = schemaUtils.retrieveSchema({ $ref: apSchema[REF_KEY] } as S, formData);\n        type = apSchema.type;\n        defaultValue = apSchema.default;\n      }\n      if (!type && (ANY_OF_KEY in apSchema || ONE_OF_KEY in apSchema)) {\n        type = 'object';\n      }\n    }\n\n    const newKey = this.getAvailableKey('newKey', newFormData);\n    // Cast this to make the `set` work properly\n    set(newFormData as GenericObjectType, newKey, defaultValue ?? this.getDefaultValue(type));\n\n    onChange(newFormData);\n  };\n\n  /** Renders the `ObjectField` from the given props\n   */\n  render() {\n    const {\n      schema: rawSchema,\n      uiSchema = {},\n      formData,\n      errorSchema,\n      idSchema,\n      name,\n      required = false,\n      disabled,\n      readonly,\n      hideError,\n      idPrefix,\n      idSeparator,\n      onBlur,\n      onFocus,\n      registry,\n      title,\n    } = this.props;\n\n    const { fields, formContext, schemaUtils, translateString, globalUiOptions } = registry;\n    const { SchemaField } = fields;\n    const schema: S = schemaUtils.retrieveSchema(rawSchema, formData);\n    const uiOptions = getUiOptions<T, S, F>(uiSchema, globalUiOptions);\n    const { properties: schemaProperties = {} } = schema;\n\n    const templateTitle = uiOptions.title ?? schema.title ?? title ?? name;\n    const description = uiOptions.description ?? schema.description;\n    let orderedProperties: string[];\n    try {\n      const properties = Object.keys(schemaProperties);\n      orderedProperties = orderProperties(properties, uiOptions.order);\n    } catch (err) {\n      return (\n        <div>\n          <p className='config-error' style={{ color: 'red' }}>\n            <Markdown options={{ disableParsingRawHTML: true }}>\n              {translateString(TranslatableString.InvalidObjectField, [name || 'root', (err as Error).message])}\n            </Markdown>\n          </p>\n          <pre>{JSON.stringify(schema)}</pre>\n        </div>\n      );\n    }\n\n    const Template = getTemplate<'ObjectFieldTemplate', T, S, F>('ObjectFieldTemplate', registry, uiOptions);\n\n    const templateProps = {\n      // getDisplayLabel() always returns false for object types, so just check the `uiOptions.label`\n      title: uiOptions.label === false ? '' : templateTitle,\n      description: uiOptions.label === false ? undefined : description,\n      properties: orderedProperties.map((name) => {\n        const addedByAdditionalProperties = has(schema, [PROPERTIES_KEY, name, ADDITIONAL_PROPERTY_FLAG]);\n        const fieldUiSchema = addedByAdditionalProperties ? uiSchema.additionalProperties : uiSchema[name];\n        const hidden = getUiOptions<T, S, F>(fieldUiSchema).widget === 'hidden';\n        const fieldIdSchema: IdSchema<T> = get(idSchema, [name], {});\n\n        return {\n          content: (\n            <SchemaField\n              key={name}\n              name={name}\n              required={this.isRequired(name)}\n              schema={get(schema, [PROPERTIES_KEY, name], {})}\n              uiSchema={fieldUiSchema}\n              errorSchema={get(errorSchema, name)}\n              idSchema={fieldIdSchema}\n              idPrefix={idPrefix}\n              idSeparator={idSeparator}\n              formData={get(formData, name)}\n              formContext={formContext}\n              wasPropertyKeyModified={this.state.wasPropertyKeyModified}\n              onKeyChange={this.onKeyChange(name)}\n              onChange={this.onPropertyChange(name, addedByAdditionalProperties)}\n              onBlur={onBlur}\n              onFocus={onFocus}\n              registry={registry}\n              disabled={disabled}\n              readonly={readonly}\n              hideError={hideError}\n              onDropPropertyClick={this.onDropPropertyClick}\n            />\n          ),\n          name,\n          readonly,\n          disabled,\n          required,\n          hidden,\n        };\n      }),\n      readonly,\n      disabled,\n      required,\n      idSchema,\n      uiSchema,\n      errorSchema,\n      schema,\n      formData,\n      formContext,\n      registry,\n    };\n    return <Template {...templateProps} onAddClick={this.handleAddClick} />;\n  }\n}\n\nexport default ObjectField;\n","import { useCallback, Component } from 'react';\nimport {\n  ADDITIONAL_PROPERTY_FLAG,\n  deepEquals,\n  descriptionId,\n  ErrorSchema,\n  FieldProps,\n  FieldTemplateProps,\n  FormContextType,\n  getSchemaType,\n  getTemplate,\n  getUiOptions,\n  ID_KEY,\n  IdSchema,\n  mergeObjects,\n  Registry,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  UI_OPTIONS_KEY,\n  UIOptionsType,\n} from '@rjsf/utils';\nimport isObject from 'lodash/isObject';\nimport omit from 'lodash/omit';\nimport Markdown from 'markdown-to-jsx';\n\n/** The map of component type to FieldName */\nconst COMPONENT_TYPES: { [key: string]: string } = {\n  array: 'ArrayField',\n  boolean: 'BooleanField',\n  integer: 'NumberField',\n  number: 'NumberField',\n  object: 'ObjectField',\n  string: 'StringField',\n  null: 'NullField',\n};\n\n/** Computes and returns which `Field` implementation to return in order to render the field represented by the\n * `schema`. The `uiOptions` are used to alter what potential `Field` implementation is actually returned. If no\n * appropriate `Field` implementation can be found then a wrapper around `UnsupportedFieldTemplate` is used.\n *\n * @param schema - The schema from which to obtain the type\n * @param uiOptions - The UI Options that may affect the component decision\n * @param idSchema - The id that is passed to the `UnsupportedFieldTemplate`\n * @param registry - The registry from which fields and templates are obtained\n * @returns - The `Field` component that is used to render the actual field data\n */\nfunction getFieldComponent<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  schema: S,\n  uiOptions: UIOptionsType<T, S, F>,\n  idSchema: IdSchema<T>,\n  registry: Registry<T, S, F>\n) {\n  const field = uiOptions.field;\n  const { fields, translateString } = registry;\n  if (typeof field === 'function') {\n    return field;\n  }\n  if (typeof field === 'string' && field in fields) {\n    return fields[field];\n  }\n\n  const schemaType = getSchemaType(schema);\n  const type: string = Array.isArray(schemaType) ? schemaType[0] : schemaType || '';\n\n  const schemaId = schema.$id;\n\n  let componentName = COMPONENT_TYPES[type];\n  if (schemaId && schemaId in fields) {\n    componentName = schemaId;\n  }\n\n  // If the type is not defined and the schema uses 'anyOf' or 'oneOf', don't\n  // render a field and let the MultiSchemaField component handle the form display\n  if (!componentName && (schema.anyOf || schema.oneOf)) {\n    return () => null;\n  }\n\n  return componentName in fields\n    ? fields[componentName]\n    : () => {\n        const UnsupportedFieldTemplate = getTemplate<'UnsupportedFieldTemplate', T, S, F>(\n          'UnsupportedFieldTemplate',\n          registry,\n          uiOptions\n        );\n\n        return (\n          <UnsupportedFieldTemplate\n            schema={schema}\n            idSchema={idSchema}\n            reason={translateString(TranslatableString.UnknownFieldType, [String(schema.type)])}\n            registry={registry}\n          />\n        );\n      };\n}\n\n/** The `SchemaFieldRender` component is the work-horse of react-jsonschema-form, determining what kind of real field to\n * render based on the `schema`, `uiSchema` and all the other props. It also deals with rendering the `anyOf` and\n * `oneOf` fields.\n *\n * @param props - The `FieldProps` for this component\n */\nfunction SchemaFieldRender<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: FieldProps<T, S, F>\n) {\n  const {\n    schema: _schema,\n    idSchema: _idSchema,\n    uiSchema,\n    formData,\n    errorSchema,\n    idPrefix,\n    idSeparator,\n    name,\n    onChange,\n    onKeyChange,\n    onDropPropertyClick,\n    required,\n    registry,\n    wasPropertyKeyModified = false,\n  } = props;\n  const { formContext, schemaUtils, globalUiOptions } = registry;\n  const uiOptions = getUiOptions<T, S, F>(uiSchema, globalUiOptions);\n  const FieldTemplate = getTemplate<'FieldTemplate', T, S, F>('FieldTemplate', registry, uiOptions);\n  const DescriptionFieldTemplate = getTemplate<'DescriptionFieldTemplate', T, S, F>(\n    'DescriptionFieldTemplate',\n    registry,\n    uiOptions\n  );\n  const FieldHelpTemplate = getTemplate<'FieldHelpTemplate', T, S, F>('FieldHelpTemplate', registry, uiOptions);\n  const FieldErrorTemplate = getTemplate<'FieldErrorTemplate', T, S, F>('FieldErrorTemplate', registry, uiOptions);\n  const schema = schemaUtils.retrieveSchema(_schema, formData);\n  const fieldId = _idSchema[ID_KEY];\n  const idSchema = mergeObjects(\n    schemaUtils.toIdSchema(schema, fieldId, formData, idPrefix, idSeparator),\n    _idSchema\n  ) as IdSchema<T>;\n\n  /** Intermediary `onChange` handler for field components that will inject the `id` of the current field into the\n   * `onChange` chain if it is not already being provided from a deeper level in the hierarchy\n   */\n  const handleFieldComponentChange = useCallback(\n    (formData: T | undefined, newErrorSchema?: ErrorSchema<T>, id?: string) => {\n      const theId = id || fieldId;\n      return onChange(formData, newErrorSchema, theId);\n    },\n    [fieldId, onChange]\n  );\n\n  const FieldComponent = getFieldComponent<T, S, F>(schema, uiOptions, idSchema, registry);\n  const disabled = Boolean(uiOptions.disabled ?? props.disabled);\n  const readonly = Boolean(uiOptions.readonly ?? (props.readonly || props.schema.readOnly || schema.readOnly));\n  const uiSchemaHideError = uiOptions.hideError;\n  // Set hideError to the value provided in the uiSchema, otherwise stick with the prop to propagate to children\n  const hideError = uiSchemaHideError === undefined ? props.hideError : Boolean(uiSchemaHideError);\n  const autofocus = Boolean(uiOptions.autofocus ?? props.autofocus);\n  if (Object.keys(schema).length === 0) {\n    return null;\n  }\n\n  const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n\n  const { __errors, ...fieldErrorSchema } = errorSchema || {};\n  // See #439: uiSchema: Don't pass consumed class names or style to child components\n  const fieldUiSchema = omit(uiSchema, ['ui:classNames', 'classNames', 'ui:style']);\n  if (UI_OPTIONS_KEY in fieldUiSchema) {\n    fieldUiSchema[UI_OPTIONS_KEY] = omit(fieldUiSchema[UI_OPTIONS_KEY], ['classNames', 'style']);\n  }\n\n  const field = (\n    <FieldComponent\n      {...props}\n      onChange={handleFieldComponentChange}\n      idSchema={idSchema}\n      schema={schema}\n      uiSchema={fieldUiSchema}\n      disabled={disabled}\n      readonly={readonly}\n      hideError={hideError}\n      autofocus={autofocus}\n      errorSchema={fieldErrorSchema}\n      formContext={formContext}\n      rawErrors={__errors}\n    />\n  );\n\n  const id = idSchema[ID_KEY];\n\n  // If this schema has a title defined, but the user has set a new key/label, retain their input.\n  let label;\n  if (wasPropertyKeyModified) {\n    label = name;\n  } else {\n    label =\n      ADDITIONAL_PROPERTY_FLAG in schema\n        ? name\n        : uiOptions.title || props.schema.title || schema.title || props.title || name;\n  }\n\n  const description = uiOptions.description || props.schema.description || schema.description || '';\n\n  const richDescription = uiOptions.enableMarkdownInDescription ? (\n    <Markdown options={{ disableParsingRawHTML: true }}>{description}</Markdown>\n  ) : (\n    description\n  );\n  const help = uiOptions.help;\n  const hidden = uiOptions.widget === 'hidden';\n\n  const classNames = ['form-group', 'field', `field-${getSchemaType(schema)}`];\n  if (!hideError && __errors && __errors.length > 0) {\n    classNames.push('field-error has-error has-danger');\n  }\n  if (uiSchema?.classNames) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(\n        \"'uiSchema.classNames' is deprecated and may be removed in a major release; Use 'ui:classNames' instead.\"\n      );\n    }\n    classNames.push(uiSchema.classNames);\n  }\n  if (uiOptions.classNames) {\n    classNames.push(uiOptions.classNames);\n  }\n\n  const helpComponent = (\n    <FieldHelpTemplate\n      help={help}\n      idSchema={idSchema}\n      schema={schema}\n      uiSchema={uiSchema}\n      hasErrors={!hideError && __errors && __errors.length > 0}\n      registry={registry}\n    />\n  );\n  /*\n   * AnyOf/OneOf errors handled by child schema\n   * unless it can be rendered as select control\n   */\n  const errorsComponent =\n    hideError || ((schema.anyOf || schema.oneOf) && !schemaUtils.isSelect(schema)) ? undefined : (\n      <FieldErrorTemplate\n        errors={__errors}\n        errorSchema={errorSchema}\n        idSchema={idSchema}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n      />\n    );\n  const fieldProps: Omit<FieldTemplateProps<T, S, F>, 'children'> = {\n    description: (\n      <DescriptionFieldTemplate\n        id={descriptionId<T>(id)}\n        description={richDescription}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n      />\n    ),\n    rawDescription: description,\n    help: helpComponent,\n    rawHelp: typeof help === 'string' ? help : undefined,\n    errors: errorsComponent,\n    rawErrors: hideError ? undefined : __errors,\n    id,\n    label,\n    hidden,\n    onChange,\n    onKeyChange,\n    onDropPropertyClick,\n    required,\n    disabled,\n    readonly,\n    hideError,\n    displayLabel,\n    classNames: classNames.join(' ').trim(),\n    style: uiOptions.style,\n    formContext,\n    formData,\n    schema,\n    uiSchema,\n    registry,\n  };\n\n  const _AnyOfField = registry.fields.AnyOfField;\n  const _OneOfField = registry.fields.OneOfField;\n  const isReplacingAnyOrOneOf = uiSchema?.['ui:field'] && uiSchema?.['ui:fieldReplacesAnyOrOneOf'] === true;\n\n  return (\n    <FieldTemplate {...fieldProps}>\n      <>\n        {field}\n        {/*\n        If the schema `anyOf` or 'oneOf' can be rendered as a select control, don't\n        render the selection and let `StringField` component handle\n        rendering\n      */}\n        {schema.anyOf && !isReplacingAnyOrOneOf && !schemaUtils.isSelect(schema) && (\n          <_AnyOfField\n            name={name}\n            disabled={disabled}\n            readonly={readonly}\n            hideError={hideError}\n            errorSchema={errorSchema}\n            formData={formData}\n            formContext={formContext}\n            idPrefix={idPrefix}\n            idSchema={idSchema}\n            idSeparator={idSeparator}\n            onBlur={props.onBlur}\n            onChange={props.onChange}\n            onFocus={props.onFocus}\n            options={schema.anyOf.map((_schema) =>\n              schemaUtils.retrieveSchema(isObject(_schema) ? (_schema as S) : ({} as S), formData)\n            )}\n            registry={registry}\n            schema={schema}\n            uiSchema={uiSchema}\n          />\n        )}\n        {schema.oneOf && !isReplacingAnyOrOneOf && !schemaUtils.isSelect(schema) && (\n          <_OneOfField\n            name={name}\n            disabled={disabled}\n            readonly={readonly}\n            hideError={hideError}\n            errorSchema={errorSchema}\n            formData={formData}\n            formContext={formContext}\n            idPrefix={idPrefix}\n            idSchema={idSchema}\n            idSeparator={idSeparator}\n            onBlur={props.onBlur}\n            onChange={props.onChange}\n            onFocus={props.onFocus}\n            options={schema.oneOf.map((_schema) =>\n              schemaUtils.retrieveSchema(isObject(_schema) ? (_schema as S) : ({} as S), formData)\n            )}\n            registry={registry}\n            schema={schema}\n            uiSchema={uiSchema}\n          />\n        )}\n      </>\n    </FieldTemplate>\n  );\n}\n\n/** The `SchemaField` component determines whether it is necessary to rerender the component based on any props changes\n * and if so, calls the `SchemaFieldRender` component with the props.\n */\nclass SchemaField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> extends Component<\n  FieldProps<T, S, F>\n> {\n  shouldComponentUpdate(nextProps: Readonly<FieldProps<T, S, F>>) {\n    return !deepEquals(this.props, nextProps);\n  }\n\n  render() {\n    return <SchemaFieldRender<T, S, F> {...this.props} />;\n  }\n}\n\nexport default SchemaField;\n","import {\n  getWidget,\n  getUiOptions,\n  optionsList,\n  hasWidget,\n  FieldProps,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n} from '@rjsf/utils';\n\n/** The `StringField` component is used to render a schema field that represents a string type\n *\n * @param props - The `FieldProps` for this template\n */\nfunction StringField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: FieldProps<T, S, F>\n) {\n  const {\n    schema,\n    name,\n    uiSchema,\n    idSchema,\n    formData,\n    required,\n    disabled = false,\n    readonly = false,\n    autofocus = false,\n    onChange,\n    onBlur,\n    onFocus,\n    registry,\n    rawErrors,\n    hideError,\n  } = props;\n  const { title, format } = schema;\n  const { widgets, formContext, schemaUtils, globalUiOptions } = registry;\n  const enumOptions = schemaUtils.isSelect(schema) ? optionsList(schema) : undefined;\n  let defaultWidget = enumOptions ? 'select' : 'text';\n  if (format && hasWidget<T, S, F>(schema, format, widgets)) {\n    defaultWidget = format;\n  }\n  const { widget = defaultWidget, placeholder = '', title: uiTitle, ...options } = getUiOptions<T, S, F>(uiSchema);\n  const displayLabel = schemaUtils.getDisplayLabel(schema, uiSchema, globalUiOptions);\n  const label = uiTitle ?? title ?? name;\n  const Widget = getWidget<T, S, F>(schema, widget, widgets);\n  return (\n    <Widget\n      options={{ ...options, enumOptions }}\n      schema={schema}\n      uiSchema={uiSchema}\n      id={idSchema.$id}\n      name={name}\n      label={label}\n      hideLabel={!displayLabel}\n      hideError={hideError}\n      value={formData}\n      onChange={onChange}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      required={required}\n      disabled={disabled}\n      readonly={readonly}\n      formContext={formContext}\n      autofocus={autofocus}\n      registry={registry}\n      placeholder={placeholder}\n      rawErrors={rawErrors}\n    />\n  );\n}\n\nexport default StringField;\n","import { useEffect } from 'react';\nimport { FieldProps, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n/** The `NullField` component is used to render a field in the schema is null. It also ensures that the `formData` is\n * also set to null if it has no value.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction NullField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: FieldProps<T, S, F>\n) {\n  const { formData, onChange } = props;\n  useEffect(() => {\n    if (formData === undefined) {\n      onChange(null as unknown as T);\n    }\n  }, [formData, onChange]);\n\n  return null;\n}\n\nexport default NullField;\n","import { Field, FormContextType, RegistryFieldsType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\nimport ArrayField from './ArrayField';\nimport BooleanField from './BooleanField';\nimport MultiSchemaField from './MultiSchemaField';\nimport NumberField from './NumberField';\nimport ObjectField from './ObjectField';\nimport SchemaField from './SchemaField';\nimport StringField from './StringField';\nimport NullField from './NullField';\n\nfunction fields<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(): RegistryFieldsType<T, S, F> {\n  return {\n    AnyOfField: MultiSchemaField,\n    ArrayField: ArrayField as unknown as Field<T, S, F>,\n    // ArrayField falls back to SchemaField if ArraySchemaField is not defined, which it isn't by default\n    BooleanField,\n    NumberField,\n    ObjectField,\n    OneOfField: MultiSchemaField,\n    SchemaField,\n    StringField,\n    NullField,\n  };\n}\n\nexport default fields;\n","import {\n  descriptionId,\n  getTemplate,\n  getUiOptions,\n  ArrayFieldDescriptionProps,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n} from '@rjsf/utils';\n\n/** The `ArrayFieldDescriptionTemplate` component renders a `DescriptionFieldTemplate` with an `id` derived from\n * the `idSchema`.\n *\n * @param props - The `ArrayFieldDescriptionProps` for the component\n */\nexport default function ArrayFieldDescriptionTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: ArrayFieldDescriptionProps<T, S, F>) {\n  const { idSchema, description, registry, schema, uiSchema } = props;\n  const options = getUiOptions<T, S, F>(uiSchema, registry.globalUiOptions);\n  const { label: displayLabel = true } = options;\n  if (!description || !displayLabel) {\n    return null;\n  }\n  const DescriptionFieldTemplate = getTemplate<'DescriptionFieldTemplate', T, S, F>(\n    'DescriptionFieldTemplate',\n    registry,\n    options\n  );\n  return (\n    <DescriptionFieldTemplate\n      id={descriptionId<T>(idSchema)}\n      description={description}\n      schema={schema}\n      uiSchema={uiSchema}\n      registry={registry}\n    />\n  );\n}\n","import { CSSProperties } from 'react';\nimport { ArrayFieldTemplateItemType, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n/** The `ArrayFieldItemTemplate` component is the template used to render an items of an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldItemTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: ArrayFieldTemplateItemType<T, S, F>) {\n  const {\n    children,\n    className,\n    disabled,\n    hasToolbar,\n    hasMoveDown,\n    hasMoveUp,\n    hasRemove,\n    hasCopy,\n    index,\n    onCopyIndexClick,\n    onDropIndexClick,\n    onReorderClick,\n    readonly,\n    registry,\n    uiSchema,\n  } = props;\n  const { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } = registry.templates.ButtonTemplates;\n  const btnStyle: CSSProperties = {\n    flex: 1,\n    paddingLeft: 6,\n    paddingRight: 6,\n    fontWeight: 'bold',\n  };\n  return (\n    <div className={className}>\n      <div className={hasToolbar ? 'col-xs-9' : 'col-xs-12'}>{children}</div>\n      {hasToolbar && (\n        <div className='col-xs-3 array-item-toolbox'>\n          <div\n            className='btn-group'\n            style={{\n              display: 'flex',\n              justifyContent: 'space-around',\n            }}\n          >\n            {(hasMoveUp || hasMoveDown) && (\n              <MoveUpButton\n                style={btnStyle}\n                disabled={disabled || readonly || !hasMoveUp}\n                onClick={onReorderClick(index, index - 1)}\n                uiSchema={uiSchema}\n                registry={registry}\n              />\n            )}\n            {(hasMoveUp || hasMoveDown) && (\n              <MoveDownButton\n                style={btnStyle}\n                disabled={disabled || readonly || !hasMoveDown}\n                onClick={onReorderClick(index, index + 1)}\n                uiSchema={uiSchema}\n                registry={registry}\n              />\n            )}\n            {hasCopy && (\n              <CopyButton\n                style={btnStyle}\n                disabled={disabled || readonly}\n                onClick={onCopyIndexClick(index)}\n                uiSchema={uiSchema}\n                registry={registry}\n              />\n            )}\n            {hasRemove && (\n              <RemoveButton\n                style={btnStyle}\n                disabled={disabled || readonly}\n                onClick={onDropIndexClick(index)}\n                uiSchema={uiSchema}\n                registry={registry}\n              />\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import {\n  getTemplate,\n  getUiOptions,\n  ArrayFieldTemplateProps,\n  ArrayFieldTemplateItemType,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n} from '@rjsf/utils';\n\n/** The `ArrayFieldTemplate` component is the template used to render all items in an array.\n *\n * @param props - The `ArrayFieldTemplateItemType` props for the component\n */\nexport default function ArrayFieldTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: ArrayFieldTemplateProps<T, S, F>) {\n  const {\n    canAdd,\n    className,\n    disabled,\n    idSchema,\n    uiSchema,\n    items,\n    onAddClick,\n    readonly,\n    registry,\n    required,\n    schema,\n    title,\n  } = props;\n  const uiOptions = getUiOptions<T, S, F>(uiSchema);\n  const ArrayFieldDescriptionTemplate = getTemplate<'ArrayFieldDescriptionTemplate', T, S, F>(\n    'ArrayFieldDescriptionTemplate',\n    registry,\n    uiOptions\n  );\n  const ArrayFieldItemTemplate = getTemplate<'ArrayFieldItemTemplate', T, S, F>(\n    'ArrayFieldItemTemplate',\n    registry,\n    uiOptions\n  );\n  const ArrayFieldTitleTemplate = getTemplate<'ArrayFieldTitleTemplate', T, S, F>(\n    'ArrayFieldTitleTemplate',\n    registry,\n    uiOptions\n  );\n  // Button templates are not overridden in the uiSchema\n  const {\n    ButtonTemplates: { AddButton },\n  } = registry.templates;\n  return (\n    <fieldset className={className} id={idSchema.$id}>\n      <ArrayFieldTitleTemplate\n        idSchema={idSchema}\n        title={uiOptions.title || title}\n        required={required}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n      />\n      <ArrayFieldDescriptionTemplate\n        idSchema={idSchema}\n        description={uiOptions.description || schema.description}\n        schema={schema}\n        uiSchema={uiSchema}\n        registry={registry}\n      />\n      <div className='row array-item-list'>\n        {items &&\n          items.map(({ key, ...itemProps }: ArrayFieldTemplateItemType<T, S, F>) => (\n            <ArrayFieldItemTemplate key={key} {...itemProps} />\n          ))}\n      </div>\n      {canAdd && (\n        <AddButton\n          className='array-item-add'\n          onClick={onAddClick}\n          disabled={disabled || readonly}\n          uiSchema={uiSchema}\n          registry={registry}\n        />\n      )}\n    </fieldset>\n  );\n}\n","import {\n  getTemplate,\n  getUiOptions,\n  titleId,\n  ArrayFieldTitleProps,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TemplatesType,\n} from '@rjsf/utils';\n\n/** The `ArrayFieldTitleTemplate` component renders a `TitleFieldTemplate` with an `id` derived from\n * the `idSchema`.\n *\n * @param props - The `ArrayFieldTitleProps` for the component\n */\nexport default function ArrayFieldTitleTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: ArrayFieldTitleProps<T, S, F>) {\n  const { idSchema, title, schema, uiSchema, required, registry } = props;\n  const options = getUiOptions<T, S, F>(uiSchema, registry.globalUiOptions);\n  const { label: displayLabel = true } = options;\n  if (!title || !displayLabel) {\n    return null;\n  }\n  const TitleFieldTemplate: TemplatesType<T, S, F>['TitleFieldTemplate'] = getTemplate<'TitleFieldTemplate', T, S, F>(\n    'TitleFieldTemplate',\n    registry,\n    options\n  );\n  return (\n    <TitleFieldTemplate\n      id={titleId<T>(idSchema)}\n      title={title}\n      required={required}\n      schema={schema}\n      uiSchema={uiSchema}\n      registry={registry}\n    />\n  );\n}\n","import { ChangeEvent, FocusEvent, useCallback } from 'react';\nimport {\n  ariaDescribedByIds,\n  BaseInputTemplateProps,\n  examplesId,\n  getInputProps,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n} from '@rjsf/utils';\n\n/** The `BaseInputTemplate` is the template to use to render the basic `<input>` component for the `core` theme.\n * It is used as the template for rendering many of the <input> based widgets that differ by `type` and callbacks only.\n * It can be customized/overridden for other themes or individual implementations as needed.\n *\n * @param props - The `WidgetProps` for this template\n */\nexport default function BaseInputTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: BaseInputTemplateProps<T, S, F>) {\n  const {\n    id,\n    name, // remove this from ...rest\n    value,\n    readonly,\n    disabled,\n    autofocus,\n    onBlur,\n    onFocus,\n    onChange,\n    onChangeOverride,\n    options,\n    schema,\n    uiSchema,\n    formContext,\n    registry,\n    rawErrors,\n    type,\n    hideLabel, // remove this from ...rest\n    hideError, // remove this from ...rest\n    ...rest\n  } = props;\n\n  // Note: since React 15.2.0 we can't forward unknown element attributes, so we\n  // exclude the \"options\" and \"schema\" ones here.\n  if (!id) {\n    console.log('No id for', props);\n    throw new Error(`no id for props ${JSON.stringify(props)}`);\n  }\n  const inputProps = {\n    ...rest,\n    ...getInputProps<T, S, F>(schema, type, options),\n  };\n\n  let inputValue;\n  if (inputProps.type === 'number' || inputProps.type === 'integer') {\n    inputValue = value || value === 0 ? value : '';\n  } else {\n    inputValue = value == null ? '' : value;\n  }\n\n  const _onChange = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLInputElement>) => onChange(value === '' ? options.emptyValue : value),\n    [onChange, options]\n  );\n  const _onBlur = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) => onBlur(id, target && target.value),\n    [onBlur, id]\n  );\n  const _onFocus = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) => onFocus(id, target && target.value),\n    [onFocus, id]\n  );\n\n  return (\n    <>\n      <input\n        id={id}\n        name={id}\n        className='form-control'\n        readOnly={readonly}\n        disabled={disabled}\n        autoFocus={autofocus}\n        value={inputValue}\n        {...inputProps}\n        list={schema.examples ? examplesId<T>(id) : undefined}\n        onChange={onChangeOverride || _onChange}\n        onBlur={_onBlur}\n        onFocus={_onFocus}\n        aria-describedby={ariaDescribedByIds<T>(id, !!schema.examples)}\n      />\n      {Array.isArray(schema.examples) && (\n        <datalist key={`datalist_${id}`} id={examplesId<T>(id)}>\n          {(schema.examples as string[])\n            .concat(schema.default && !schema.examples.includes(schema.default) ? ([schema.default] as string[]) : [])\n            .map((example: any) => {\n              return <option key={example} value={example} />;\n            })}\n        </datalist>\n      )}\n    </>\n  );\n}\n","import { getSubmitButtonOptions, FormContextType, RJSFSchema, StrictRJSFSchema, SubmitButtonProps } from '@rjsf/utils';\n\n/** The `SubmitButton` renders a button that represent the `Submit` action on a form\n */\nexport default function SubmitButton<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>({ uiSchema }: SubmitButtonProps<T, S, F>) {\n  const { submitText, norender, props: submitButtonProps = {} } = getSubmitButtonOptions<T, S, F>(uiSchema);\n  if (norender) {\n    return null;\n  }\n  return (\n    <div>\n      <button type='submit' {...submitButtonProps} className={`btn btn-info ${submitButtonProps.className || ''}`}>\n        {submitText}\n      </button>\n    </div>\n  );\n}\n","import { FormContextType, IconButtonProps, RJSFSchema, StrictRJSFSchema, TranslatableString } from '@rjsf/utils';\n\nexport default function IconButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: IconButtonProps<T, S, F>\n) {\n  const { iconType = 'default', icon, className, uiSchema, registry, ...otherProps } = props;\n  return (\n    <button type='button' className={`btn btn-${iconType} ${className}`} {...otherProps}>\n      <i className={`glyphicon glyphicon-${icon}`} />\n    </button>\n  );\n}\n\nexport function CopyButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: IconButtonProps<T, S, F>\n) {\n  const {\n    registry: { translateString },\n  } = props;\n  return (\n    <IconButton\n      title={translateString(TranslatableString.CopyButton)}\n      className='array-item-copy'\n      {...props}\n      icon='copy'\n    />\n  );\n}\n\nexport function MoveDownButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: IconButtonProps<T, S, F>\n) {\n  const {\n    registry: { translateString },\n  } = props;\n  return (\n    <IconButton\n      title={translateString(TranslatableString.MoveDownButton)}\n      className='array-item-move-down'\n      {...props}\n      icon='arrow-down'\n    />\n  );\n}\n\nexport function MoveUpButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: IconButtonProps<T, S, F>\n) {\n  const {\n    registry: { translateString },\n  } = props;\n  return (\n    <IconButton\n      title={translateString(TranslatableString.MoveUpButton)}\n      className='array-item-move-up'\n      {...props}\n      icon='arrow-up'\n    />\n  );\n}\n\nexport function RemoveButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: IconButtonProps<T, S, F>\n) {\n  const {\n    registry: { translateString },\n  } = props;\n  return (\n    <IconButton\n      title={translateString(TranslatableString.RemoveButton)}\n      className='array-item-remove'\n      {...props}\n      iconType='danger'\n      icon='remove'\n    />\n  );\n}\n","import { FormContextType, IconButtonProps, RJSFSchema, StrictRJSFSchema, TranslatableString } from '@rjsf/utils';\n\nimport IconButton from './IconButton';\n\n/** The `AddButton` renders a button that represent the `Add` action on a form\n */\nexport default function AddButton<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  className,\n  onClick,\n  disabled,\n  registry,\n}: IconButtonProps<T, S, F>) {\n  const { translateString } = registry;\n  return (\n    <div className='row'>\n      <p className={`col-xs-3 col-xs-offset-9 text-right ${className}`}>\n        <IconButton\n          iconType='info'\n          icon='plus'\n          className='btn-add col-xs-12'\n          title={translateString(TranslatableString.AddButton)}\n          onClick={onClick}\n          disabled={disabled}\n          registry={registry}\n        />\n      </p>\n    </div>\n  );\n}\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, TemplatesType } from '@rjsf/utils';\n\nimport SubmitButton from './SubmitButton';\nimport AddButton from './AddButton';\nimport { CopyButton, MoveDownButton, MoveUpButton, RemoveButton } from './IconButton';\n\nfunction buttonTemplates<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(): TemplatesType<T, S, F>['ButtonTemplates'] {\n  return {\n    SubmitButton,\n    AddButton,\n    CopyButton,\n    MoveDownButton,\n    MoveUpButton,\n    RemoveButton,\n  };\n}\n\nexport default buttonTemplates;\n","import { DescriptionFieldProps, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n/** The `DescriptionField` is the template to use to render the description of a field\n *\n * @param props - The `DescriptionFieldProps` for this component\n */\nexport default function DescriptionField<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: DescriptionFieldProps<T, S, F>) {\n  const { id, description } = props;\n  if (!description) {\n    return null;\n  }\n  if (typeof description === 'string') {\n    return (\n      <p id={id} className='field-description'>\n        {description}\n      </p>\n    );\n  } else {\n    return (\n      <div id={id} className='field-description'>\n        {description}\n      </div>\n    );\n  }\n}\n","import {\n  ErrorListProps,\n  FormContextType,\n  RJSFValidationError,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n} from '@rjsf/utils';\n\n/** The `ErrorList` component is the template that renders the all the errors associated with the fields in the `Form`\n *\n * @param props - The `ErrorListProps` for this component\n */\nexport default function ErrorList<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  errors,\n  registry,\n}: ErrorListProps<T, S, F>) {\n  const { translateString } = registry;\n  return (\n    <div className='panel panel-danger errors'>\n      <div className='panel-heading'>\n        <h3 className='panel-title'>{translateString(TranslatableString.ErrorsLabel)}</h3>\n      </div>\n      <ul className='list-group'>\n        {errors.map((error: RJSFValidationError, i: number) => {\n          return (\n            <li key={i} className='list-group-item text-danger'>\n              {error.stack}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","const REQUIRED_FIELD_SYMBOL = '*';\n\nexport type LabelProps = {\n  /** The label for the field */\n  label?: string;\n  /** A boolean value stating if the field is required */\n  required?: boolean;\n  /** The id of the input field being labeled */\n  id?: string;\n};\n\n/** Renders a label for a field\n *\n * @param props - The `LabelProps` for this component\n */\nexport default function Label(props: LabelProps) {\n  const { label, required, id } = props;\n  if (!label) {\n    return null;\n  }\n  return (\n    <label className='control-label' htmlFor={id}>\n      {label}\n      {required && <span className='required'>{REQUIRED_FIELD_SYMBOL}</span>}\n    </label>\n  );\n}\n","import FieldTemplate from './FieldTemplate';\n\nexport default FieldTemplate;\n","import {\n  FieldTemplateProps,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  getTemplate,\n  getUiOptions,\n} from '@rjsf/utils';\n\nimport Label from './Label';\n\n/** The `FieldTemplate` component is the template used by `SchemaField` to render any field. It renders the field\n * content, (label, description, children, errors and help) inside of a `WrapIfAdditional` component.\n *\n * @param props - The `FieldTemplateProps` for this component\n */\nexport default function FieldTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: FieldTemplateProps<T, S, F>) {\n  const { id, label, children, errors, help, description, hidden, required, displayLabel, registry, uiSchema } = props;\n  const uiOptions = getUiOptions(uiSchema);\n  const WrapIfAdditionalTemplate = getTemplate<'WrapIfAdditionalTemplate', T, S, F>(\n    'WrapIfAdditionalTemplate',\n    registry,\n    uiOptions\n  );\n  if (hidden) {\n    return <div className='hidden'>{children}</div>;\n  }\n  return (\n    <WrapIfAdditionalTemplate {...props}>\n      {displayLabel && <Label label={label} required={required} id={id} />}\n      {displayLabel && description ? description : null}\n      {children}\n      {errors}\n      {help}\n    </WrapIfAdditionalTemplate>\n  );\n}\n","import { errorId, FieldErrorProps, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n/** The `FieldErrorTemplate` component renders the errors local to the particular field\n *\n * @param props - The `FieldErrorProps` for the errors being rendered\n */\nexport default function FieldErrorTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: FieldErrorProps<T, S, F>) {\n  const { errors = [], idSchema } = props;\n  if (errors.length === 0) {\n    return null;\n  }\n  const id = errorId<T>(idSchema);\n\n  return (\n    <div>\n      <ul id={id} className='error-detail bs-callout bs-callout-info'>\n        {errors\n          .filter((elem) => !!elem)\n          .map((error, index: number) => {\n            return (\n              <li className='text-danger' key={index}>\n                {error}\n              </li>\n            );\n          })}\n      </ul>\n    </div>\n  );\n}\n","import { helpId, FieldHelpProps, FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\n/** The `FieldHelpTemplate` component renders any help desired for a field\n *\n * @param props - The `FieldHelpProps` to be rendered\n */\nexport default function FieldHelpTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: FieldHelpProps<T, S, F>) {\n  const { idSchema, help } = props;\n  if (!help) {\n    return null;\n  }\n  const id = helpId<T>(idSchema);\n  if (typeof help === 'string') {\n    return (\n      <p id={id} className='help-block'>\n        {help}\n      </p>\n    );\n  }\n  return (\n    <div id={id} className='help-block'>\n      {help}\n    </div>\n  );\n}\n","import {\n  FormContextType,\n  ObjectFieldTemplatePropertyType,\n  ObjectFieldTemplateProps,\n  RJSFSchema,\n  StrictRJSFSchema,\n  canExpand,\n  descriptionId,\n  getTemplate,\n  getUiOptions,\n  titleId,\n} from '@rjsf/utils';\n\n/** The `ObjectFieldTemplate` is the template to use to render all the inner properties of an object along with the\n * title and description if available. If the object is expandable, then an `AddButton` is also rendered after all\n * the properties.\n *\n * @param props - The `ObjectFieldTemplateProps` for this component\n */\nexport default function ObjectFieldTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: ObjectFieldTemplateProps<T, S, F>) {\n  const {\n    description,\n    disabled,\n    formData,\n    idSchema,\n    onAddClick,\n    properties,\n    readonly,\n    registry,\n    required,\n    schema,\n    title,\n    uiSchema,\n  } = props;\n  const options = getUiOptions<T, S, F>(uiSchema);\n  const TitleFieldTemplate = getTemplate<'TitleFieldTemplate', T, S, F>('TitleFieldTemplate', registry, options);\n  const DescriptionFieldTemplate = getTemplate<'DescriptionFieldTemplate', T, S, F>(\n    'DescriptionFieldTemplate',\n    registry,\n    options\n  );\n  // Button templates are not overridden in the uiSchema\n  const {\n    ButtonTemplates: { AddButton },\n  } = registry.templates;\n  return (\n    <fieldset id={idSchema.$id}>\n      {title && (\n        <TitleFieldTemplate\n          id={titleId<T>(idSchema)}\n          title={title}\n          required={required}\n          schema={schema}\n          uiSchema={uiSchema}\n          registry={registry}\n        />\n      )}\n      {description && (\n        <DescriptionFieldTemplate\n          id={descriptionId<T>(idSchema)}\n          description={description}\n          schema={schema}\n          uiSchema={uiSchema}\n          registry={registry}\n        />\n      )}\n      {properties.map((prop: ObjectFieldTemplatePropertyType) => prop.content)}\n      {canExpand<T, S, F>(schema, uiSchema, formData) && (\n        <AddButton\n          className='object-property-expand'\n          onClick={onAddClick(schema)}\n          disabled={disabled || readonly}\n          uiSchema={uiSchema}\n          registry={registry}\n        />\n      )}\n    </fieldset>\n  );\n}\n","import { FormContextType, TitleFieldProps, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\nconst REQUIRED_FIELD_SYMBOL = '*';\n\n/** The `TitleField` is the template to use to render the title of a field\n *\n * @param props - The `TitleFieldProps` for this component\n */\nexport default function TitleField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: TitleFieldProps<T, S, F>\n) {\n  const { id, title, required } = props;\n  return (\n    <legend id={id}>\n      {title}\n      {required && <span className='required'>{REQUIRED_FIELD_SYMBOL}</span>}\n    </legend>\n  );\n}\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, TranslatableString, UnsupportedFieldProps } from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\n\n/** The `UnsupportedField` component is used to render a field in the schema is one that is not supported by\n * react-jsonschema-form.\n *\n * @param props - The `FieldProps` for this template\n */\nfunction UnsupportedField<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: UnsupportedFieldProps<T, S, F>\n) {\n  const { schema, idSchema, reason, registry } = props;\n  const { translateString } = registry;\n  let translateEnum: TranslatableString = TranslatableString.UnsupportedField;\n  const translateParams: string[] = [];\n  if (idSchema && idSchema.$id) {\n    translateEnum = TranslatableString.UnsupportedFieldWithId;\n    translateParams.push(idSchema.$id);\n  }\n  if (reason) {\n    translateEnum =\n      translateEnum === TranslatableString.UnsupportedField\n        ? TranslatableString.UnsupportedFieldWithReason\n        : TranslatableString.UnsupportedFieldWithIdAndReason;\n    translateParams.push(reason);\n  }\n  return (\n    <div className='unsupported-field'>\n      <p>\n        <Markdown options={{ disableParsingRawHTML: true }}>{translateString(translateEnum, translateParams)}</Markdown>\n      </p>\n      {schema && <pre>{JSON.stringify(schema, null, 2)}</pre>}\n    </div>\n  );\n}\n\nexport default UnsupportedField;\n","import {\n  ADDITIONAL_PROPERTY_FLAG,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  WrapIfAdditionalTemplateProps,\n} from '@rjsf/utils';\n\nimport Label from './FieldTemplate/Label';\n\n/** The `WrapIfAdditional` component is used by the `FieldTemplate` to rename, or remove properties that are\n * part of an `additionalProperties` part of a schema.\n *\n * @param props - The `WrapIfAdditionalProps` for this component\n */\nexport default function WrapIfAdditionalTemplate<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: WrapIfAdditionalTemplateProps<T, S, F>) {\n  const {\n    id,\n    classNames,\n    style,\n    disabled,\n    label,\n    onKeyChange,\n    onDropPropertyClick,\n    readonly,\n    required,\n    schema,\n    children,\n    uiSchema,\n    registry,\n  } = props;\n  const { templates, translateString } = registry;\n  // Button templates are not overridden in the uiSchema\n  const { RemoveButton } = templates.ButtonTemplates;\n  const keyLabel = translateString(TranslatableString.KeyLabel, [label]);\n  const additional = ADDITIONAL_PROPERTY_FLAG in schema;\n\n  if (!additional) {\n    return (\n      <div className={classNames} style={style}>\n        {children}\n      </div>\n    );\n  }\n\n  return (\n    <div className={classNames} style={style}>\n      <div className='row'>\n        <div className='col-xs-5 form-additional'>\n          <div className='form-group'>\n            <Label label={keyLabel} required={required} id={`${id}-key`} />\n            <input\n              className='form-control'\n              type='text'\n              id={`${id}-key`}\n              onBlur={({ target }) => onKeyChange(target && target.value)}\n              defaultValue={label}\n            />\n          </div>\n        </div>\n        <div className='form-additional form-group col-xs-5'>{children}</div>\n        <div className='col-xs-2'>\n          <RemoveButton\n            className='array-item-remove btn-block'\n            style={{ border: '0' }}\n            disabled={disabled || readonly}\n            onClick={onDropPropertyClick(label)}\n            uiSchema={uiSchema}\n            registry={registry}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, TemplatesType } from '@rjsf/utils';\n\nimport ArrayFieldDescriptionTemplate from './ArrayFieldDescriptionTemplate';\nimport ArrayFieldItemTemplate from './ArrayFieldItemTemplate';\nimport ArrayFieldTemplate from './ArrayFieldTemplate';\nimport ArrayFieldTitleTemplate from './ArrayFieldTitleTemplate';\nimport BaseInputTemplate from './BaseInputTemplate';\nimport ButtonTemplates from './ButtonTemplates';\nimport DescriptionField from './DescriptionField';\nimport ErrorList from './ErrorList';\nimport FieldTemplate from './FieldTemplate';\nimport FieldErrorTemplate from './FieldErrorTemplate';\nimport FieldHelpTemplate from './FieldHelpTemplate';\nimport ObjectFieldTemplate from './ObjectFieldTemplate';\nimport TitleField from './TitleField';\nimport UnsupportedField from './UnsupportedField';\nimport WrapIfAdditionalTemplate from './WrapIfAdditionalTemplate';\n\nfunction templates<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(): TemplatesType<\n  T,\n  S,\n  F\n> {\n  return {\n    ArrayFieldDescriptionTemplate,\n    ArrayFieldItemTemplate,\n    ArrayFieldTemplate,\n    ArrayFieldTitleTemplate,\n    ButtonTemplates: ButtonTemplates<T, S, F>(),\n    BaseInputTemplate,\n    DescriptionFieldTemplate: DescriptionField,\n    ErrorListTemplate: ErrorList,\n    FieldTemplate,\n    FieldErrorTemplate,\n    FieldHelpTemplate,\n    ObjectFieldTemplate,\n    TitleFieldTemplate: TitleField,\n    UnsupportedFieldTemplate: UnsupportedField,\n    WrapIfAdditionalTemplate,\n  };\n}\n\nexport default templates;\n","import { MouseEvent, useCallback, useEffect, useReducer, useState } from 'react';\nimport {\n  ariaDescribedByIds,\n  dateRangeOptions,\n  parseDateString,\n  toDateString,\n  DateObject,\n  type DateElementFormat,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  WidgetProps,\n  getDateElementProps,\n} from '@rjsf/utils';\n\nfunction readyForChange(state: DateObject) {\n  return Object.values(state).every((value) => value !== -1);\n}\n\ntype DateElementProps<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> = Pick<\n  WidgetProps<T, S, F>,\n  'value' | 'name' | 'disabled' | 'readonly' | 'autofocus' | 'registry' | 'onBlur' | 'onFocus'\n> & {\n  rootId: string;\n  select: (property: keyof DateObject, value: any) => void;\n  type: string;\n  range: [number, number];\n};\n\nfunction DateElement<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  type,\n  range,\n  value,\n  select,\n  rootId,\n  name,\n  disabled,\n  readonly,\n  autofocus,\n  registry,\n  onBlur,\n  onFocus,\n}: DateElementProps<T, S, F>) {\n  const id = rootId + '_' + type;\n  const { SelectWidget } = registry.widgets;\n  return (\n    <SelectWidget\n      schema={{ type: 'integer' } as S}\n      id={id}\n      name={name}\n      className='form-control'\n      options={{ enumOptions: dateRangeOptions<S>(range[0], range[1]) }}\n      placeholder={type}\n      value={value}\n      disabled={disabled}\n      readonly={readonly}\n      autofocus={autofocus}\n      onChange={(value: any) => select(type as keyof DateObject, value)}\n      onBlur={onBlur}\n      onFocus={onFocus}\n      registry={registry}\n      label=''\n      aria-describedby={ariaDescribedByIds<T>(rootId)}\n    />\n  );\n}\n\n/** The `AltDateWidget` is an alternative widget for rendering date properties.\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  time = false,\n  disabled = false,\n  readonly = false,\n  autofocus = false,\n  options,\n  id,\n  name,\n  registry,\n  onBlur,\n  onFocus,\n  onChange,\n  value,\n}: WidgetProps<T, S, F>) {\n  const { translateString } = registry;\n  const [lastValue, setLastValue] = useState(value);\n  const [state, setState] = useReducer((state: DateObject, action: Partial<DateObject>) => {\n    return { ...state, ...action };\n  }, parseDateString(value, time));\n\n  useEffect(() => {\n    const stateValue = toDateString(state, time);\n    if (readyForChange(state) && stateValue !== value) {\n      // The user changed the date to a new valid data via the comboboxes, so call onChange\n      onChange(stateValue);\n    } else if (lastValue !== value) {\n      // We got a new value in the props\n      setLastValue(value);\n      setState(parseDateString(value, time));\n    }\n  }, [time, value, onChange, state, lastValue]);\n\n  const handleChange = useCallback((property: keyof DateObject, value: string) => {\n    setState({ [property]: value });\n  }, []);\n\n  const handleSetNow = useCallback(\n    (event: MouseEvent<HTMLAnchorElement>) => {\n      event.preventDefault();\n      if (disabled || readonly) {\n        return;\n      }\n      const nextState = parseDateString(new Date().toJSON(), time);\n      onChange(toDateString(nextState, time));\n    },\n    [disabled, readonly, time]\n  );\n\n  const handleClear = useCallback(\n    (event: MouseEvent<HTMLAnchorElement>) => {\n      event.preventDefault();\n      if (disabled || readonly) {\n        return;\n      }\n      onChange(undefined);\n    },\n    [disabled, readonly, onChange]\n  );\n\n  return (\n    <ul className='list-inline'>\n      {getDateElementProps(\n        state,\n        time,\n        options.yearsRange as [number, number] | undefined,\n        options.format as DateElementFormat | undefined\n      ).map((elemProps, i) => (\n        <li className='list-inline-item' key={i}>\n          <DateElement\n            rootId={id}\n            name={name}\n            select={handleChange}\n            {...elemProps}\n            disabled={disabled}\n            readonly={readonly}\n            registry={registry}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            autofocus={autofocus && i === 0}\n          />\n        </li>\n      ))}\n      {(options.hideNowButton !== 'undefined' ? !options.hideNowButton : true) && (\n        <li className='list-inline-item'>\n          <a href='#' className='btn btn-info btn-now' onClick={handleSetNow}>\n            {translateString(TranslatableString.NowLabel)}\n          </a>\n        </li>\n      )}\n      {(options.hideClearButton !== 'undefined' ? !options.hideClearButton : true) && (\n        <li className='list-inline-item'>\n          <a href='#' className='btn btn-warning btn-clear' onClick={handleClear}>\n            {translateString(TranslatableString.ClearLabel)}\n          </a>\n        </li>\n      )}\n    </ul>\n  );\n}\n\nexport default AltDateWidget;\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `AltDateTimeWidget` is an alternative widget for rendering datetime properties.\n *  It uses the AltDateWidget for rendering, with the `time` prop set to true by default.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction AltDateTimeWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  time = true,\n  ...props\n}: WidgetProps<T, S, F>) {\n  const { AltDateWidget } = props.registry.widgets;\n  return <AltDateWidget time={time} {...props} />;\n}\n\nexport default AltDateTimeWidget;\n","import { ChangeEvent, FocusEvent, useCallback } from 'react';\nimport {\n  ariaDescribedByIds,\n  descriptionId,\n  getTemplate,\n  labelValue,\n  schemaRequiresTrueValue,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  WidgetProps,\n} from '@rjsf/utils';\n\n/** The `CheckBoxWidget` is a widget for rendering boolean properties.\n *  It is typically used to represent a boolean.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction CheckboxWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  schema,\n  uiSchema,\n  options,\n  id,\n  value,\n  disabled,\n  readonly,\n  label,\n  hideLabel,\n  autofocus = false,\n  onBlur,\n  onFocus,\n  onChange,\n  registry,\n}: WidgetProps<T, S, F>) {\n  const DescriptionFieldTemplate = getTemplate<'DescriptionFieldTemplate', T, S, F>(\n    'DescriptionFieldTemplate',\n    registry,\n    options\n  );\n  // Because an unchecked checkbox will cause html5 validation to fail, only add\n  // the \"required\" attribute if the field value must be \"true\", due to the\n  // \"const\" or \"enum\" keywords\n  const required = schemaRequiresTrueValue<S>(schema);\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => onChange(event.target.checked),\n    [onChange]\n  );\n\n  const handleBlur = useCallback(\n    (event: FocusEvent<HTMLInputElement>) => onBlur(id, event.target.checked),\n    [onBlur, id]\n  );\n\n  const handleFocus = useCallback(\n    (event: FocusEvent<HTMLInputElement>) => onFocus(id, event.target.checked),\n    [onFocus, id]\n  );\n  const description = options.description ?? schema.description;\n\n  return (\n    <div className={`checkbox ${disabled || readonly ? 'disabled' : ''}`}>\n      {!hideLabel && !!description && (\n        <DescriptionFieldTemplate\n          id={descriptionId<T>(id)}\n          description={description}\n          schema={schema}\n          uiSchema={uiSchema}\n          registry={registry}\n        />\n      )}\n      <label>\n        <input\n          type='checkbox'\n          id={id}\n          name={id}\n          checked={typeof value === 'undefined' ? false : value}\n          required={required}\n          disabled={disabled || readonly}\n          autoFocus={autofocus}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          onFocus={handleFocus}\n          aria-describedby={ariaDescribedByIds<T>(id)}\n        />\n        {labelValue(<span>{label}</span>, hideLabel)}\n      </label>\n    </div>\n  );\n}\n\nexport default CheckboxWidget;\n","import { ChangeEvent, FocusEvent, useCallback } from 'react';\nimport {\n  ariaDescribedByIds,\n  enumOptionsDeselectValue,\n  enumOptionsIsSelected,\n  enumOptionsSelectValue,\n  enumOptionsValueForIndex,\n  optionId,\n  FormContextType,\n  WidgetProps,\n  RJSFSchema,\n  StrictRJSFSchema,\n} from '@rjsf/utils';\n\n/** The `CheckboxesWidget` is a widget for rendering checkbox groups.\n *  It is typically used to represent an array of enums.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction CheckboxesWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  id,\n  disabled,\n  options: { inline = false, enumOptions, enumDisabled, emptyValue },\n  value,\n  autofocus = false,\n  readonly,\n  onChange,\n  onBlur,\n  onFocus,\n}: WidgetProps<T, S, F>) {\n  const checkboxesValues = Array.isArray(value) ? value : [value];\n\n  const handleBlur = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) =>\n      onBlur(id, enumOptionsValueForIndex<S>(target && target.value, enumOptions, emptyValue)),\n    [onBlur, id]\n  );\n\n  const handleFocus = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) =>\n      onFocus(id, enumOptionsValueForIndex<S>(target && target.value, enumOptions, emptyValue)),\n    [onFocus, id]\n  );\n  return (\n    <div className='checkboxes' id={id}>\n      {Array.isArray(enumOptions) &&\n        enumOptions.map((option, index) => {\n          const checked = enumOptionsIsSelected<S>(option.value, checkboxesValues);\n          const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n          const disabledCls = disabled || itemDisabled || readonly ? 'disabled' : '';\n\n          const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n            if (event.target.checked) {\n              onChange(enumOptionsSelectValue<S>(index, checkboxesValues, enumOptions));\n            } else {\n              onChange(enumOptionsDeselectValue<S>(index, checkboxesValues, enumOptions));\n            }\n          };\n\n          const checkbox = (\n            <span>\n              <input\n                type='checkbox'\n                id={optionId(id, index)}\n                name={id}\n                checked={checked}\n                value={String(index)}\n                disabled={disabled || itemDisabled || readonly}\n                autoFocus={autofocus && index === 0}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                onFocus={handleFocus}\n                aria-describedby={ariaDescribedByIds<T>(id)}\n              />\n              <span>{option.label}</span>\n            </span>\n          );\n          return inline ? (\n            <label key={index} className={`checkbox-inline ${disabledCls}`}>\n              {checkbox}\n            </label>\n          ) : (\n            <div key={index} className={`checkbox ${disabledCls}`}>\n              <label>{checkbox}</label>\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n\nexport default CheckboxesWidget;\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `ColorWidget` component uses the `BaseInputTemplate` changing the type to `color` and disables it when it is\n * either disabled or readonly.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function ColorWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { disabled, readonly, options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate type='color' {...props} disabled={disabled || readonly} />;\n}\n","import { useCallback } from 'react';\nimport { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `DateWidget` component uses the `BaseInputTemplate` changing the type to `date` and transforms\n * the value to undefined when it is falsy during the `onChange` handling.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function DateWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { onChange, options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  const handleChange = useCallback((value: any) => onChange(value || undefined), [onChange]);\n\n  return <BaseInputTemplate type='date' {...props} onChange={handleChange} />;\n}\n","import {\n  getTemplate,\n  localToUTC,\n  utcToLocal,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  WidgetProps,\n} from '@rjsf/utils';\n\n/** The `DateTimeWidget` component uses the `BaseInputTemplate` changing the type to `datetime-local` and transforms\n * the value to/from utc using the appropriate utility functions.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function DateTimeWidget<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: WidgetProps<T, S, F>) {\n  const { onChange, value, options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return (\n    <BaseInputTemplate\n      type='datetime-local'\n      {...props}\n      value={utcToLocal(value)}\n      onChange={(value) => onChange(localToUTC(value))}\n    />\n  );\n}\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `EmailWidget` component uses the `BaseInputTemplate` changing the type to `email`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function EmailWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate type='email' {...props} />;\n}\n","import { ChangeEvent, useCallback, useMemo } from 'react';\nimport {\n  dataURItoBlob,\n  FormContextType,\n  getTemplate,\n  Registry,\n  RJSFSchema,\n  StrictRJSFSchema,\n  TranslatableString,\n  UIOptionsType,\n  WidgetProps,\n} from '@rjsf/utils';\nimport Markdown from 'markdown-to-jsx';\n\nfunction addNameToDataURL(dataURL: string, name: string) {\n  if (dataURL === null) {\n    return null;\n  }\n  return dataURL.replace(';base64', `;name=${encodeURIComponent(name)};base64`);\n}\n\ntype FileInfoType = {\n  dataURL?: string | null;\n  name: string;\n  size: number;\n  type: string;\n};\n\nfunction processFile(file: File): Promise<FileInfoType> {\n  const { name, size, type } = file;\n  return new Promise((resolve, reject) => {\n    const reader = new window.FileReader();\n    reader.onerror = reject;\n    reader.onload = (event) => {\n      if (typeof event.target?.result === 'string') {\n        resolve({\n          dataURL: addNameToDataURL(event.target.result, name),\n          name,\n          size,\n          type,\n        });\n      } else {\n        resolve({\n          dataURL: null,\n          name,\n          size,\n          type,\n        });\n      }\n    };\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction processFiles(files: FileList) {\n  return Promise.all(Array.from(files).map(processFile));\n}\n\nfunction FileInfoPreview<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  fileInfo,\n  registry,\n}: {\n  fileInfo: FileInfoType;\n  registry: Registry<T, S, F>;\n}) {\n  const { translateString } = registry;\n  const { dataURL, type, name } = fileInfo;\n  if (!dataURL) {\n    return null;\n  }\n\n  // If type is JPEG or PNG then show image preview.\n  // Originally, any type of image was supported, but this was changed into a whitelist\n  // since SVGs and animated GIFs are also images, which are generally considered a security risk.\n  if (['image/jpeg', 'image/png'].includes(type)) {\n    return <img src={dataURL} style={{ maxWidth: '100%' }} className='file-preview' />;\n  }\n\n  // otherwise, let users download file\n\n  return (\n    <>\n      {' '}\n      <a download={`preview-${name}`} href={dataURL} className='file-download'>\n        {translateString(TranslatableString.PreviewLabel)}\n      </a>\n    </>\n  );\n}\n\nfunction FilesInfo<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  filesInfo,\n  registry,\n  preview,\n  onRemove,\n  options,\n}: {\n  filesInfo: FileInfoType[];\n  registry: Registry<T, S, F>;\n  preview?: boolean;\n  onRemove: (index: number) => void;\n  options: UIOptionsType<T, S, F>;\n}) {\n  if (filesInfo.length === 0) {\n    return null;\n  }\n  const { translateString } = registry;\n\n  const { RemoveButton } = getTemplate<'ButtonTemplates', T, S, F>('ButtonTemplates', registry, options);\n\n  return (\n    <ul className='file-info'>\n      {filesInfo.map((fileInfo, key) => {\n        const { name, size, type } = fileInfo;\n        const handleRemove = () => onRemove(key);\n        return (\n          <li key={key}>\n            <Markdown>{translateString(TranslatableString.FilesInfo, [name, type, String(size)])}</Markdown>\n            {preview && <FileInfoPreview<T, S, F> fileInfo={fileInfo} registry={registry} />}\n            <RemoveButton onClick={handleRemove} registry={registry} />\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nfunction extractFileInfo(dataURLs: string[]): FileInfoType[] {\n  return dataURLs.reduce((acc, dataURL) => {\n    if (!dataURL) {\n      return acc;\n    }\n    try {\n      const { blob, name } = dataURItoBlob(dataURL);\n      return [\n        ...acc,\n        {\n          dataURL,\n          name: name,\n          size: blob.size,\n          type: blob.type,\n        },\n      ];\n    } catch (e) {\n      // Invalid dataURI, so just ignore it.\n      return acc;\n    }\n  }, [] as FileInfoType[]);\n}\n\n/**\n *  The `FileWidget` is a widget for rendering file upload fields.\n *  It is typically used with a string property with data-url format.\n */\nfunction FileWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { disabled, readonly, required, multiple, onChange, value, options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLInputElement>) => {\n      if (!event.target.files) {\n        return;\n      }\n      // Due to variances in themes, dealing with multiple files for the array case now happens one file at a time.\n      // This is because we don't pass `multiple` into the `BaseInputTemplate` anymore. Instead, we deal with the single\n      // file in each event and concatenate them together ourselves\n      processFiles(event.target.files).then((filesInfoEvent) => {\n        const newValue = filesInfoEvent.map((fileInfo) => fileInfo.dataURL);\n        if (multiple) {\n          onChange(value.concat(newValue[0]));\n        } else {\n          onChange(newValue[0]);\n        }\n      });\n    },\n    [multiple, value, onChange]\n  );\n\n  const filesInfo = useMemo(() => extractFileInfo(Array.isArray(value) ? value : [value]), [value]);\n  const rmFile = useCallback(\n    (index: number) => {\n      if (multiple) {\n        const newValue = value.filter((_: any, i: number) => i !== index);\n        onChange(newValue);\n      } else {\n        onChange(undefined);\n      }\n    },\n    [multiple, value, onChange]\n  );\n  return (\n    <div>\n      <BaseInputTemplate\n        {...props}\n        disabled={disabled || readonly}\n        type='file'\n        required={value ? false : required} // this turns off HTML required validation when a value exists\n        onChangeOverride={handleChange}\n        value=''\n        accept={options.accept ? String(options.accept) : undefined}\n      />\n      <FilesInfo<T, S, F>\n        filesInfo={filesInfo}\n        onRemove={rmFile}\n        registry={registry}\n        preview={options.filePreview}\n        options={options}\n      />\n    </div>\n  );\n}\n\nexport default FileWidget;\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `HiddenWidget` is a widget for rendering a hidden input field.\n *  It is typically used by setting type to \"hidden\".\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction HiddenWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  id,\n  value,\n}: WidgetProps<T, S, F>) {\n  return <input type='hidden' id={id} name={id} value={typeof value === 'undefined' ? '' : value} />;\n}\n\nexport default HiddenWidget;\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `PasswordWidget` component uses the `BaseInputTemplate` changing the type to `password`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function PasswordWidget<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(props: WidgetProps<T, S, F>) {\n  const { options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate type='password' {...props} />;\n}\n","import { FocusEvent, useCallback } from 'react';\nimport {\n  ariaDescribedByIds,\n  enumOptionsIsSelected,\n  enumOptionsValueForIndex,\n  optionId,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  WidgetProps,\n} from '@rjsf/utils';\n\n/** The `RadioWidget` is a widget for rendering a radio group.\n *  It is typically used with a string property constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction RadioWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  options,\n  value,\n  required,\n  disabled,\n  readonly,\n  autofocus = false,\n  onBlur,\n  onFocus,\n  onChange,\n  id,\n}: WidgetProps<T, S, F>) {\n  const { enumOptions, enumDisabled, inline, emptyValue } = options;\n\n  const handleBlur = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) =>\n      onBlur(id, enumOptionsValueForIndex<S>(target && target.value, enumOptions, emptyValue)),\n    [onBlur, id]\n  );\n\n  const handleFocus = useCallback(\n    ({ target }: FocusEvent<HTMLInputElement>) =>\n      onFocus(id, enumOptionsValueForIndex<S>(target && target.value, enumOptions, emptyValue)),\n    [onFocus, id]\n  );\n\n  return (\n    <div className='field-radio-group' id={id}>\n      {Array.isArray(enumOptions) &&\n        enumOptions.map((option, i) => {\n          const checked = enumOptionsIsSelected<S>(option.value, value);\n          const itemDisabled = Array.isArray(enumDisabled) && enumDisabled.indexOf(option.value) !== -1;\n          const disabledCls = disabled || itemDisabled || readonly ? 'disabled' : '';\n\n          const handleChange = () => onChange(option.value);\n\n          const radio = (\n            <span>\n              <input\n                type='radio'\n                id={optionId(id, i)}\n                checked={checked}\n                name={id}\n                required={required}\n                value={String(i)}\n                disabled={disabled || itemDisabled || readonly}\n                autoFocus={autofocus && i === 0}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                onFocus={handleFocus}\n                aria-describedby={ariaDescribedByIds<T>(id)}\n              />\n              <span>{option.label}</span>\n            </span>\n          );\n\n          return inline ? (\n            <label key={i} className={`radio-inline ${disabledCls}`}>\n              {radio}\n            </label>\n          ) : (\n            <div key={i} className={`radio ${disabledCls}`}>\n              <label>{radio}</label>\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n\nexport default RadioWidget;\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `RangeWidget` component uses the `BaseInputTemplate` changing the type to `range` and wrapping the result\n * in a div, with the value along side it.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function RangeWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const {\n    value,\n    registry: {\n      templates: { BaseInputTemplate },\n    },\n  } = props;\n  return (\n    <div className='field-range-wrapper'>\n      <BaseInputTemplate type='range' {...props} />\n      <span className='range-view'>{value}</span>\n    </div>\n  );\n}\n","import { ChangeEvent, FocusEvent, SyntheticEvent, useCallback } from 'react';\nimport {\n  ariaDescribedByIds,\n  enumOptionsIndexForValue,\n  enumOptionsValueForIndex,\n  FormContextType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  WidgetProps,\n} from '@rjsf/utils';\n\nfunction getValue(event: SyntheticEvent<HTMLSelectElement>, multiple: boolean) {\n  if (multiple) {\n    return Array.from((event.target as HTMLSelectElement).options)\n      .slice()\n      .filter((o) => o.selected)\n      .map((o) => o.value);\n  }\n  return (event.target as HTMLSelectElement).value;\n}\n\n/** The `SelectWidget` is a widget for rendering dropdowns.\n *  It is typically used with string properties constrained with enum options.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction SelectWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  schema,\n  id,\n  options,\n  value,\n  required,\n  disabled,\n  readonly,\n  multiple = false,\n  autofocus = false,\n  onChange,\n  onBlur,\n  onFocus,\n  placeholder,\n}: WidgetProps<T, S, F>) {\n  const { enumOptions, enumDisabled, emptyValue: optEmptyVal } = options;\n  const emptyValue = multiple ? [] : '';\n\n  const handleFocus = useCallback(\n    (event: FocusEvent<HTMLSelectElement>) => {\n      const newValue = getValue(event, multiple);\n      return onFocus(id, enumOptionsValueForIndex<S>(newValue, enumOptions, optEmptyVal));\n    },\n    [onFocus, id, schema, multiple, enumOptions, optEmptyVal]\n  );\n\n  const handleBlur = useCallback(\n    (event: FocusEvent<HTMLSelectElement>) => {\n      const newValue = getValue(event, multiple);\n      return onBlur(id, enumOptionsValueForIndex<S>(newValue, enumOptions, optEmptyVal));\n    },\n    [onBlur, id, schema, multiple, enumOptions, optEmptyVal]\n  );\n\n  const handleChange = useCallback(\n    (event: ChangeEvent<HTMLSelectElement>) => {\n      const newValue = getValue(event, multiple);\n      return onChange(enumOptionsValueForIndex<S>(newValue, enumOptions, optEmptyVal));\n    },\n    [onChange, schema, multiple, enumOptions, optEmptyVal]\n  );\n\n  const selectedIndexes = enumOptionsIndexForValue<S>(value, enumOptions, multiple);\n  const showPlaceholderOption = !multiple && schema.default === undefined;\n\n  return (\n    <select\n      id={id}\n      name={id}\n      multiple={multiple}\n      className='form-control'\n      value={typeof selectedIndexes === 'undefined' ? emptyValue : selectedIndexes}\n      required={required}\n      disabled={disabled || readonly}\n      autoFocus={autofocus}\n      onBlur={handleBlur}\n      onFocus={handleFocus}\n      onChange={handleChange}\n      aria-describedby={ariaDescribedByIds<T>(id)}\n    >\n      {showPlaceholderOption && <option value=''>{placeholder}</option>}\n      {Array.isArray(enumOptions) &&\n        enumOptions.map(({ value, label }, i) => {\n          const disabled = enumDisabled && enumDisabled.indexOf(value) !== -1;\n          return (\n            <option key={i} value={String(i)} disabled={disabled}>\n              {label}\n            </option>\n          );\n        })}\n    </select>\n  );\n}\n\nexport default SelectWidget;\n","import { ChangeEvent, FocusEvent, useCallback } from 'react';\nimport { ariaDescribedByIds, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `TextareaWidget` is a widget for rendering input fields as textarea.\n *\n * @param props - The `WidgetProps` for this component\n */\nfunction TextareaWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>({\n  id,\n  options = {},\n  placeholder,\n  value,\n  required,\n  disabled,\n  readonly,\n  autofocus = false,\n  onChange,\n  onBlur,\n  onFocus,\n}: WidgetProps<T, S, F>) {\n  const handleChange = useCallback(\n    ({ target: { value } }: ChangeEvent<HTMLTextAreaElement>) => onChange(value === '' ? options.emptyValue : value),\n    [onChange, options.emptyValue]\n  );\n\n  const handleBlur = useCallback(\n    ({ target }: FocusEvent<HTMLTextAreaElement>) => onBlur(id, target && target.value),\n    [onBlur, id]\n  );\n\n  const handleFocus = useCallback(\n    ({ target }: FocusEvent<HTMLTextAreaElement>) => onFocus(id, target && target.value),\n    [id, onFocus]\n  );\n\n  return (\n    <textarea\n      id={id}\n      name={id}\n      className='form-control'\n      value={value ? value : ''}\n      placeholder={placeholder}\n      required={required}\n      disabled={disabled}\n      readOnly={readonly}\n      autoFocus={autofocus}\n      rows={options.rows}\n      onBlur={handleBlur}\n      onFocus={handleFocus}\n      onChange={handleChange}\n      aria-describedby={ariaDescribedByIds<T>(id)}\n    />\n  );\n}\n\nTextareaWidget.defaultProps = {\n  autofocus: false,\n  options: {},\n};\n\nexport default TextareaWidget;\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `TextWidget` component uses the `BaseInputTemplate`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function TextWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate {...props} />;\n}\n","import { useCallback } from 'react';\nimport { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `TimeWidget` component uses the `BaseInputTemplate` changing the type to `time` and transforms\n * the value to undefined when it is falsy during the `onChange` handling.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function TimeWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { onChange, options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  const handleChange = useCallback((value: any) => onChange(value ? `${value}:00` : undefined), [onChange]);\n\n  return <BaseInputTemplate type='time' {...props} onChange={handleChange} />;\n}\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `URLWidget` component uses the `BaseInputTemplate` changing the type to `url`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function URLWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate type='url' {...props} />;\n}\n","import { getTemplate, FormContextType, RJSFSchema, StrictRJSFSchema, WidgetProps } from '@rjsf/utils';\n\n/** The `UpDownWidget` component uses the `BaseInputTemplate` changing the type to `number`.\n *\n * @param props - The `WidgetProps` for this component\n */\nexport default function UpDownWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  props: WidgetProps<T, S, F>\n) {\n  const { options, registry } = props;\n  const BaseInputTemplate = getTemplate<'BaseInputTemplate', T, S, F>('BaseInputTemplate', registry, options);\n  return <BaseInputTemplate type='number' {...props} />;\n}\n","import { FormContextType, RegistryWidgetsType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\nimport AltDateWidget from './AltDateWidget';\nimport AltDateTimeWidget from './AltDateTimeWidget';\nimport CheckboxWidget from './CheckboxWidget';\nimport CheckboxesWidget from './CheckboxesWidget';\nimport ColorWidget from './ColorWidget';\nimport DateWidget from './DateWidget';\nimport DateTimeWidget from './DateTimeWidget';\nimport EmailWidget from './EmailWidget';\nimport FileWidget from './FileWidget';\nimport HiddenWidget from './HiddenWidget';\nimport PasswordWidget from './PasswordWidget';\nimport RadioWidget from './RadioWidget';\nimport RangeWidget from './RangeWidget';\nimport SelectWidget from './SelectWidget';\nimport TextareaWidget from './TextareaWidget';\nimport TextWidget from './TextWidget';\nimport TimeWidget from './TimeWidget';\nimport URLWidget from './URLWidget';\nimport UpDownWidget from './UpDownWidget';\n\nfunction widgets<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(): RegistryWidgetsType<T, S, F> {\n  return {\n    AltDateWidget,\n    AltDateTimeWidget,\n    CheckboxWidget,\n    CheckboxesWidget,\n    ColorWidget,\n    DateWidget,\n    DateTimeWidget,\n    EmailWidget,\n    FileWidget,\n    HiddenWidget,\n    PasswordWidget,\n    RadioWidget,\n    RangeWidget,\n    SelectWidget,\n    TextWidget,\n    TextareaWidget,\n    TimeWidget,\n    UpDownWidget,\n    URLWidget,\n  };\n}\n\nexport default widgets;\n","import { Component, ElementType, FormEvent, ReactNode, Ref, RefObject, createRef } from 'react';\nimport {\n  createSchemaUtils,\n  CustomValidator,\n  deepEquals,\n  ErrorSchema,\n  ErrorTransformer,\n  FormContextType,\n  GenericObjectType,\n  getTemplate,\n  getUiOptions,\n  IdSchema,\n  isObject,\n  mergeObjects,\n  NAME_KEY,\n  PathSchema,\n  StrictRJSFSchema,\n  Registry,\n  RegistryFieldsType,\n  RegistryWidgetsType,\n  RJSFSchema,\n  RJSFValidationError,\n  RJSF_ADDITIONAL_PROPERTIES_FLAG,\n  SchemaUtilsType,\n  shouldRender,\n  SUBMIT_BTN_OPTIONS_KEY,\n  TemplatesType,\n  toErrorList,\n  UiSchema,\n  UI_GLOBAL_OPTIONS_KEY,\n  UI_OPTIONS_KEY,\n  ValidationData,\n  validationDataMerge,\n  ValidatorType,\n  Experimental_DefaultFormStateBehavior,\n} from '@rjsf/utils';\nimport _get from 'lodash/get';\nimport _isEmpty from 'lodash/isEmpty';\nimport _pick from 'lodash/pick';\nimport _toPath from 'lodash/toPath';\n\nimport getDefaultRegistry from '../getDefaultRegistry';\n\n/** The properties that are passed to the `Form` */\nexport interface FormProps<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> {\n  /** The JSON schema object for the form */\n  schema: S;\n  /** An implementation of the `ValidatorType` interface that is needed for form validation to work */\n  validator: ValidatorType<T, S, F>;\n  /** The optional children for the form, if provided, it will replace the default `SubmitButton` */\n  children?: ReactNode;\n  /** The uiSchema for the form */\n  uiSchema?: UiSchema<T, S, F>;\n  /** The data for the form, used to prefill a form with existing data */\n  formData?: T;\n  // Form presentation and behavior modifiers\n  /** You can provide a `formContext` object to the form, which is passed down to all fields and widgets. Useful for\n   * implementing context aware fields and widgets.\n   *\n   * NOTE: Setting `{readonlyAsDisabled: false}` on the formContext will make the antd theme treat readOnly fields as\n   * disabled.\n   */\n  formContext?: F;\n  /** To avoid collisions with existing ids in the DOM, it is possible to change the prefix used for ids;\n   * Default is `root`\n   */\n  idPrefix?: string;\n  /** To avoid using a path separator that is present in field names, it is possible to change the separator used for\n   * ids (Default is `_`)\n   */\n  idSeparator?: string;\n  /** It's possible to disable the whole form by setting the `disabled` prop. The `disabled` prop is then forwarded down\n   * to each field of the form. If you just want to disable some fields, see the `ui:disabled` parameter in `uiSchema`\n   */\n  disabled?: boolean;\n  /** It's possible to make the whole form read-only by setting the `readonly` prop. The `readonly` prop is then\n   * forwarded down to each field of the form. If you just want to make some fields read-only, see the `ui:readonly`\n   * parameter in `uiSchema`\n   */\n  readonly?: boolean;\n  // Form registry\n  /** The dictionary of registered fields in the form */\n  fields?: RegistryFieldsType<T, S, F>;\n  /** The dictionary of registered templates in the form; Partial allows a subset to be provided beyond the defaults */\n  templates?: Partial<Omit<TemplatesType<T, S, F>, 'ButtonTemplates'>> & {\n    ButtonTemplates?: Partial<TemplatesType<T, S, F>['ButtonTemplates']>;\n  };\n  /** The dictionary of registered widgets in the form */\n  widgets?: RegistryWidgetsType<T, S, F>;\n  // Callbacks\n  /** If you plan on being notified every time the form data are updated, you can pass an `onChange` handler, which will\n   * receive the same args as `onSubmit` any time a value is updated in the form. Can also return the `id` of the field\n   * that caused the change\n   */\n  onChange?: (data: IChangeEvent<T, S, F>, id?: string) => void;\n  /** To react when submitted form data are invalid, pass an `onError` handler. It will be passed the list of\n   * encountered errors\n   */\n  onError?: (errors: RJSFValidationError[]) => void;\n  /** You can pass a function as the `onSubmit` prop of your `Form` component to listen to when the form is submitted\n   * and its data are valid. It will be passed a result object having a `formData` attribute, which is the valid form\n   * data you're usually after. The original event will also be passed as a second parameter\n   */\n  onSubmit?: (data: IChangeEvent<T, S, F>, event: FormEvent<any>) => void;\n  /** Sometimes you may want to trigger events or modify external state when a field has been touched, so you can pass\n   * an `onBlur` handler, which will receive the id of the input that was blurred and the field value\n   */\n  onBlur?: (id: string, data: any) => void;\n  /** Sometimes you may want to trigger events or modify external state when a field has been focused, so you can pass\n   * an `onFocus` handler, which will receive the id of the input that is focused and the field value\n   */\n  onFocus?: (id: string, data: any) => void;\n  // <form /> HTML attributes\n  /** The value of this prop will be passed to the `accept-charset` HTML attribute on the form\n   * @deprecated replaced with `acceptCharset` which will supercede this value if both are specified\n   */\n  acceptcharset?: string;\n  /** The value of this prop will be passed to the `accept-charset` HTML attribute on the form */\n  acceptCharset?: string;\n  /** The value of this prop will be passed to the `action` HTML attribute on the form\n   *\n   * NOTE: this just renders the `action` attribute in the HTML markup. There is no real network request being sent to\n   * this `action` on submit. Instead, react-jsonschema-form catches the submit event with `event.preventDefault()`\n   * and then calls the `onSubmit` function, where you could send a request programmatically with `fetch` or similar.\n   */\n  action?: string;\n  /** The value of this prop will be passed to the `autocomplete` HTML attribute on the form */\n  autoComplete?: string;\n  /** The value of this prop will be passed to the `class` HTML attribute on the form */\n  className?: string;\n  /** The value of this prop will be passed to the `enctype` HTML attribute on the form */\n  enctype?: string;\n  /** The value of this prop will be passed to the `id` HTML attribute on the form */\n  id?: string;\n  /** The value of this prop will be passed to the `name` HTML attribute on the form */\n  name?: string;\n  /** The value of this prop will be passed to the `method` HTML attribute on the form */\n  method?: string;\n  /** It's possible to change the default `form` tag name to a different HTML tag, which can be helpful if you are\n   * nesting forms. However, native browser form behaviour, such as submitting when the `Enter` key is pressed, may no\n   * longer work\n   */\n  tagName?: ElementType;\n  /** The value of this prop will be passed to the `target` HTML attribute on the form */\n  target?: string;\n  // Errors and validation\n  /** Formerly the `validate` prop; Takes a function that specifies custom validation rules for the form */\n  customValidate?: CustomValidator<T, S, F>;\n  /** This prop allows passing in custom errors that are augmented with the existing JSON Schema errors on the form; it\n   * can be used to implement asynchronous validation. By default, these are non-blocking errors, meaning that you can\n   * still submit the form when these are the only errors displayed to the user.\n   */\n  extraErrors?: ErrorSchema<T>;\n  /** If set to true, causes the `extraErrors` to become blocking when the form is submitted */\n  extraErrorsBlockSubmit?: boolean;\n  /** If set to true, turns off HTML5 validation on the form; Set to `false` by default */\n  noHtml5Validate?: boolean;\n  /** If set to true, turns off all validation. Set to `false` by default\n   *\n   * @deprecated - In a future release, this switch may be replaced by making `validator` prop optional\n   */\n  noValidate?: boolean;\n  /** If set to true, the form will perform validation and show any validation errors whenever the form data is changed,\n   * rather than just on submit\n   */\n  liveValidate?: boolean;\n  /** If `omitExtraData` and `liveOmit` are both set to true, then extra form data values that are not in any form field\n   * will be removed whenever `onChange` is called. Set to `false` by default\n   */\n  liveOmit?: boolean;\n  /** If set to true, then extra form data values that are not in any form field will be removed whenever `onSubmit` is\n   * called. Set to `false` by default.\n   */\n  omitExtraData?: boolean;\n  /** When this prop is set to `top` or 'bottom', a list of errors (or the custom error list defined in the `ErrorList`) will also\n   * show. When set to false, only inline input validation errors will be shown. Set to `top` by default\n   */\n  showErrorList?: false | 'top' | 'bottom';\n  /** A function can be passed to this prop in order to make modifications to the default errors resulting from JSON\n   * Schema validation\n   */\n  transformErrors?: ErrorTransformer<T, S, F>;\n  /** If set to true, then the first field with an error will receive the focus when the form is submitted with errors\n   */\n  focusOnFirstError?: boolean | ((error: RJSFValidationError) => void);\n  /** Optional string translation function, if provided, allows users to change the translation of the RJSF internal\n   * strings. Some strings contain replaceable parameter values as indicated by `%1`, `%2`, etc. The number after the\n   * `%` indicates the order of the parameter. The ordering of parameters is important because some languages may choose\n   * to put the second parameter before the first in its translation.\n   */\n  translateString?: Registry['translateString'];\n  /** Optional configuration object with flags, if provided, allows users to override default form state behavior\n   * Currently only affecting minItems on array fields and handling of setting defaults based on the value of\n   * `emptyObjectFields`\n   */\n  experimental_defaultFormStateBehavior?: Experimental_DefaultFormStateBehavior;\n  // Private\n  /**\n   * _internalFormWrapper is currently used by the semantic-ui theme to provide a custom wrapper around `<Form />`\n   * that supports the proper rendering of those themes. To use this prop, one must pass a component that takes two\n   * props: `children` and `as`. That component, at minimum, should render the `children` inside of a <form /> tag\n   * unless `as` is provided, in which case, use the `as` prop in place of `<form />`.\n   * i.e.:\n   * ```\n   * export default function InternalForm({ children, as }) {\n   *   const FormTag = as || 'form';\n   *   return <FormTag>{children}</FormTag>;\n   * }\n   * ```\n   *\n   * Use at your own risk as this prop is private and may change at any time without notice.\n   */\n  _internalFormWrapper?: ElementType;\n  /** Support receiving a React ref to the Form\n   */\n  ref?: Ref<Form<T, S, F>>;\n}\n\n/** The data that is contained within the state for the `Form` */\nexport interface FormState<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any> {\n  /** The JSON schema object for the form */\n  schema: S;\n  /** The uiSchema for the form */\n  uiSchema: UiSchema<T, S, F>;\n  /** The `IdSchema` for the form, computed from the `schema`, the `rootFieldId`, the `formData` and the `idPrefix` and\n   * `idSeparator` props.\n   */\n  idSchema: IdSchema<T>;\n  /** The schemaUtils implementation used by the `Form`, created from the `validator` and the `schema` */\n  schemaUtils: SchemaUtilsType<T, S, F>;\n  /** The current data for the form, computed from the `formData` prop and the changes made by the user */\n  formData?: T;\n  /** Flag indicating whether the form is in edit mode, true when `formData` is passed to the form, otherwise false */\n  edit: boolean;\n  /** The current list of errors for the form, includes `extraErrors` */\n  errors: RJSFValidationError[];\n  /** The current errors, in `ErrorSchema` format, for the form, includes `extraErrors` */\n  errorSchema: ErrorSchema<T>;\n  /** The current list of errors for the form directly from schema validation, does NOT include `extraErrors` */\n  schemaValidationErrors: RJSFValidationError[];\n  /** The current errors, in `ErrorSchema` format, for the form directly from schema validation, does NOT include\n   * `extraErrors`\n   */\n  schemaValidationErrorSchema: ErrorSchema<T>;\n  // Private\n  /** @description result of schemaUtils.retrieveSchema(schema, formData). This a memoized value to avoid re calculate at internal functions (getStateFromProps, onChange) */\n  retrievedSchema: S;\n}\n\n/** The event data passed when changes have been made to the form, includes everything from the `FormState` except\n * the schema validation errors. An additional `status` is added when returned from `onSubmit`\n */\nexport interface IChangeEvent<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>\n  extends Omit<FormState<T, S, F>, 'schemaValidationErrors' | 'schemaValidationErrorSchema'> {\n  /** The status of the form when submitted */\n  status?: 'submitted';\n}\n\n/** The `Form` component renders the outer form and all the fields defined in the `schema` */\nexport default class Form<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n> extends Component<FormProps<T, S, F>, FormState<T, S, F>> {\n  /** The ref used to hold the `form` element, this needs to be `any` because `tagName` or `_internalFormWrapper` can\n   * provide any possible type here\n   */\n  formElement: RefObject<any>;\n\n  /** Constructs the `Form` from the `props`. Will setup the initial state from the props. It will also call the\n   * `onChange` handler if the initially provided `formData` is modified to add missing default values as part of the\n   * state construction.\n   *\n   * @param props - The initial props for the `Form`\n   */\n  constructor(props: FormProps<T, S, F>) {\n    super(props);\n\n    if (!props.validator) {\n      throw new Error('A validator is required for Form functionality to work');\n    }\n\n    this.state = this.getStateFromProps(props, props.formData);\n    if (this.props.onChange && !deepEquals(this.state.formData, this.props.formData)) {\n      this.props.onChange(this.state);\n    }\n    this.formElement = createRef();\n  }\n\n  /**\n   * `getSnapshotBeforeUpdate` is a React lifecycle method that is invoked right before the most recently rendered\n   * output is committed to the DOM. It enables your component to capture current values (e.g., scroll position) before\n   * they are potentially changed.\n   *\n   * In this case, it checks if the props have changed since the last render. If they have, it computes the next state\n   * of the component using `getStateFromProps` method and returns it along with a `shouldUpdate` flag set to `true` IF\n   * the `nextState` and `prevState` are different, otherwise `false`. This ensures that we have the most up-to-date\n   * state ready to be applied in `componentDidUpdate`.\n   *\n   * If `formData` hasn't changed, it simply returns an object with `shouldUpdate` set to `false`, indicating that a\n   * state update is not necessary.\n   *\n   * @param prevProps - The previous set of props before the update.\n   * @param prevState - The previous state before the update.\n   * @returns Either an object containing the next state and a flag indicating that an update should occur, or an object\n   *        with a flag indicating that an update is not necessary.\n   */\n  getSnapshotBeforeUpdate(\n    prevProps: FormProps<T, S, F>,\n    prevState: FormState<T, S, F>\n  ): { nextState: FormState<T, S, F>; shouldUpdate: true } | { shouldUpdate: false } {\n    if (!deepEquals(this.props, prevProps)) {\n      const isSchemaChanged = !deepEquals(prevProps.schema, this.props.schema);\n      const isFormDataChanged = !deepEquals(prevProps.formData, this.props.formData);\n      const nextState = this.getStateFromProps(\n        this.props,\n        this.props.formData,\n        // If the `schema` has changed, we need to update the retrieved schema.\n        // Or if the `formData` changes, for example in the case of a schema with dependencies that need to\n        //  match one of the subSchemas, the retrieved schema must be updated.\n        isSchemaChanged || isFormDataChanged ? undefined : this.state.retrievedSchema,\n        isSchemaChanged\n      );\n      const shouldUpdate = !deepEquals(nextState, prevState);\n      return { nextState, shouldUpdate };\n    }\n    return { shouldUpdate: false };\n  }\n\n  /**\n   * `componentDidUpdate` is a React lifecycle method that is invoked immediately after updating occurs. This method is\n   * not called for the initial render.\n   *\n   * Here, it checks if an update is necessary based on the `shouldUpdate` flag received from `getSnapshotBeforeUpdate`.\n   * If an update is required, it applies the next state and, if needed, triggers the `onChange` handler to inform about\n   * changes.\n   *\n   * This method effectively replaces the deprecated `UNSAFE_componentWillReceiveProps`, providing a safer alternative\n   * to handle prop changes and state updates.\n   *\n   * @param _ - The previous set of props.\n   * @param prevState - The previous state of the component before the update.\n   * @param snapshot - The value returned from `getSnapshotBeforeUpdate`.\n   */\n  componentDidUpdate(\n    _: FormProps<T, S, F>,\n    prevState: FormState<T, S, F>,\n    snapshot: { nextState: FormState<T, S, F>; shouldUpdate: true } | { shouldUpdate: false }\n  ) {\n    if (snapshot.shouldUpdate) {\n      const { nextState } = snapshot;\n\n      if (\n        !deepEquals(nextState.formData, this.props.formData) &&\n        !deepEquals(nextState.formData, prevState.formData) &&\n        this.props.onChange\n      ) {\n        this.props.onChange(nextState);\n      }\n      this.setState(nextState);\n    }\n  }\n\n  /** Extracts the updated state from the given `props` and `inputFormData`. As part of this process, the\n   * `inputFormData` is first processed to add any missing required defaults. After that, the data is run through the\n   * validation process IF required by the `props`.\n   *\n   * @param props - The props passed to the `Form`\n   * @param inputFormData - The new or current data for the `Form`\n   * @param retrievedSchema - An expanded schema, if not provided, it will be retrieved from the `schema` and `formData`.\n   * @param isSchemaChanged - A flag indicating whether the schema has changed.\n   * @returns - The new state for the `Form`\n   */\n  getStateFromProps(\n    props: FormProps<T, S, F>,\n    inputFormData?: T,\n    retrievedSchema?: S,\n    isSchemaChanged = false\n  ): FormState<T, S, F> {\n    const state: FormState<T, S, F> = this.state || {};\n    const schema = 'schema' in props ? props.schema : this.props.schema;\n    const uiSchema: UiSchema<T, S, F> = ('uiSchema' in props ? props.uiSchema! : this.props.uiSchema!) || {};\n    const edit = typeof inputFormData !== 'undefined';\n    const liveValidate = 'liveValidate' in props ? props.liveValidate : this.props.liveValidate;\n    const mustValidate = edit && !props.noValidate && liveValidate;\n    const rootSchema = schema;\n    const experimental_defaultFormStateBehavior =\n      'experimental_defaultFormStateBehavior' in props\n        ? props.experimental_defaultFormStateBehavior\n        : this.props.experimental_defaultFormStateBehavior;\n    let schemaUtils: SchemaUtilsType<T, S, F> = state.schemaUtils;\n    if (\n      !schemaUtils ||\n      schemaUtils.doesSchemaUtilsDiffer(props.validator, rootSchema, experimental_defaultFormStateBehavior)\n    ) {\n      schemaUtils = createSchemaUtils<T, S, F>(props.validator, rootSchema, experimental_defaultFormStateBehavior);\n    }\n    const formData: T = schemaUtils.getDefaultFormState(schema, inputFormData) as T;\n    const _retrievedSchema = retrievedSchema ?? schemaUtils.retrieveSchema(schema, formData);\n\n    const getCurrentErrors = (): ValidationData<T> => {\n      // If the `props.noValidate` option is set or the schema has changed, we reset the error state.\n      if (props.noValidate || isSchemaChanged) {\n        return { errors: [], errorSchema: {} };\n      } else if (!props.liveValidate) {\n        return {\n          errors: state.schemaValidationErrors || [],\n          errorSchema: state.schemaValidationErrorSchema || {},\n        };\n      }\n      return {\n        errors: state.errors || [],\n        errorSchema: state.errorSchema || {},\n      };\n    };\n\n    let errors: RJSFValidationError[];\n    let errorSchema: ErrorSchema<T> | undefined;\n    let schemaValidationErrors: RJSFValidationError[] = state.schemaValidationErrors;\n    let schemaValidationErrorSchema: ErrorSchema<T> = state.schemaValidationErrorSchema;\n    if (mustValidate) {\n      const schemaValidation = this.validate(formData, schema, schemaUtils, _retrievedSchema);\n      errors = schemaValidation.errors;\n      errorSchema = schemaValidation.errorSchema;\n      schemaValidationErrors = errors;\n      schemaValidationErrorSchema = errorSchema;\n    } else {\n      const currentErrors = getCurrentErrors();\n      errors = currentErrors.errors;\n      errorSchema = currentErrors.errorSchema;\n    }\n    if (props.extraErrors) {\n      const merged = validationDataMerge({ errorSchema, errors }, props.extraErrors);\n      errorSchema = merged.errorSchema;\n      errors = merged.errors;\n    }\n    const idSchema = schemaUtils.toIdSchema(\n      _retrievedSchema,\n      uiSchema['ui:rootFieldId'],\n      formData,\n      props.idPrefix,\n      props.idSeparator\n    );\n    const nextState: FormState<T, S, F> = {\n      schemaUtils,\n      schema,\n      uiSchema,\n      idSchema,\n      formData,\n      edit,\n      errors,\n      errorSchema,\n      schemaValidationErrors,\n      schemaValidationErrorSchema,\n      retrievedSchema: _retrievedSchema,\n    };\n    return nextState;\n  }\n\n  /** React lifecycle method that is used to determine whether component should be updated.\n   *\n   * @param nextProps - The next version of the props\n   * @param nextState - The next version of the state\n   * @returns - True if the component should be updated, false otherwise\n   */\n  shouldComponentUpdate(nextProps: FormProps<T, S, F>, nextState: FormState<T, S, F>): boolean {\n    return shouldRender(this, nextProps, nextState);\n  }\n\n  /** Validates the `formData` against the `schema` using the `altSchemaUtils` (if provided otherwise it uses the\n   * `schemaUtils` in the state), returning the results.\n   *\n   * @param formData - The new form data to validate\n   * @param schema - The schema used to validate against\n   * @param altSchemaUtils - The alternate schemaUtils to use for validation\n   */\n  validate(\n    formData: T | undefined,\n    schema = this.props.schema,\n    altSchemaUtils?: SchemaUtilsType<T, S, F>,\n    retrievedSchema?: S\n  ): ValidationData<T> {\n    const schemaUtils = altSchemaUtils ? altSchemaUtils : this.state.schemaUtils;\n    const { customValidate, transformErrors, uiSchema } = this.props;\n    const resolvedSchema = retrievedSchema ?? schemaUtils.retrieveSchema(schema, formData);\n    return schemaUtils\n      .getValidator()\n      .validateFormData(formData, resolvedSchema, customValidate, transformErrors, uiSchema);\n  }\n\n  /** Renders any errors contained in the `state` in using the `ErrorList`, if not disabled by `showErrorList`. */\n  renderErrors(registry: Registry<T, S, F>) {\n    const { errors, errorSchema, schema, uiSchema } = this.state;\n    const { formContext } = this.props;\n    const options = getUiOptions<T, S, F>(uiSchema);\n    const ErrorListTemplate = getTemplate<'ErrorListTemplate', T, S, F>('ErrorListTemplate', registry, options);\n\n    if (errors && errors.length) {\n      return (\n        <ErrorListTemplate\n          errors={errors}\n          errorSchema={errorSchema || {}}\n          schema={schema}\n          uiSchema={uiSchema}\n          formContext={formContext}\n          registry={registry}\n        />\n      );\n    }\n    return null;\n  }\n\n  /** Returns the `formData` with only the elements specified in the `fields` list\n   *\n   * @param formData - The data for the `Form`\n   * @param fields - The fields to keep while filtering\n   */\n  getUsedFormData = (formData: T | undefined, fields: string[][]): T | undefined => {\n    // For the case of a single input form\n    if (fields.length === 0 && typeof formData !== 'object') {\n      return formData;\n    }\n\n    // _pick has incorrect type definition, it works with string[][], because lodash/hasIn supports it\n    const data: GenericObjectType = _pick(formData, fields as unknown as string[]);\n    if (Array.isArray(formData)) {\n      return Object.keys(data).map((key: string) => data[key]) as unknown as T;\n    }\n\n    return data as T;\n  };\n\n  /** Returns the list of field names from inspecting the `pathSchema` as well as using the `formData`\n   *\n   * @param pathSchema - The `PathSchema` object for the form\n   * @param [formData] - The form data to use while checking for empty objects/arrays\n   */\n  getFieldNames = (pathSchema: PathSchema<T>, formData?: T): string[][] => {\n    const getAllPaths = (_obj: GenericObjectType, acc: string[][] = [], paths: string[][] = [[]]) => {\n      Object.keys(_obj).forEach((key: string) => {\n        if (typeof _obj[key] === 'object') {\n          const newPaths = paths.map((path) => [...path, key]);\n          // If an object is marked with additionalProperties, all its keys are valid\n          if (_obj[key][RJSF_ADDITIONAL_PROPERTIES_FLAG] && _obj[key][NAME_KEY] !== '') {\n            acc.push(_obj[key][NAME_KEY]);\n          } else {\n            getAllPaths(_obj[key], acc, newPaths);\n          }\n        } else if (key === NAME_KEY && _obj[key] !== '') {\n          paths.forEach((path) => {\n            const formValue = _get(formData, path);\n            // adds path to fieldNames if it points to a value\n            // or an empty object/array\n            if (\n              typeof formValue !== 'object' ||\n              _isEmpty(formValue) ||\n              (Array.isArray(formValue) && formValue.every((val) => typeof val !== 'object'))\n            ) {\n              acc.push(path);\n            }\n          });\n        }\n      });\n      return acc;\n    };\n\n    return getAllPaths(pathSchema);\n  };\n\n  /** Returns the `formData` after filtering to remove any extra data not in a form field\n   *\n   * @param formData - The data for the `Form`\n   * @returns The `formData` after omitting extra data\n   */\n  omitExtraData = (formData?: T): T | undefined => {\n    const { schema, schemaUtils } = this.state;\n    const retrievedSchema = schemaUtils.retrieveSchema(schema, formData);\n    const pathSchema = schemaUtils.toPathSchema(retrievedSchema, '', formData);\n    const fieldNames = this.getFieldNames(pathSchema, formData);\n    const newFormData = this.getUsedFormData(formData, fieldNames);\n    return newFormData;\n  };\n\n  /** Function to handle changes made to a field in the `Form`. This handler receives an entirely new copy of the\n   * `formData` along with a new `ErrorSchema`. It will first update the `formData` with any missing default fields and\n   * then, if `omitExtraData` and `liveOmit` are turned on, the `formData` will be filtered to remove any extra data not\n   * in a form field. Then, the resulting formData will be validated if required. The state will be updated with the new\n   * updated (potentially filtered) `formData`, any errors that resulted from validation. Finally the `onChange`\n   * callback will be called if specified with the updated state.\n   *\n   * @param formData - The new form data from a change to a field\n   * @param newErrorSchema - The new `ErrorSchema` based on the field change\n   * @param id - The id of the field that caused the change\n   */\n  onChange = (formData: T | undefined, newErrorSchema?: ErrorSchema<T>, id?: string) => {\n    const { extraErrors, omitExtraData, liveOmit, noValidate, liveValidate, onChange } = this.props;\n    const { schemaUtils, schema, retrievedSchema } = this.state;\n\n    if (isObject(formData) || Array.isArray(formData)) {\n      const newState = this.getStateFromProps(this.props, formData, retrievedSchema);\n      formData = newState.formData;\n    }\n\n    const mustValidate = !noValidate && liveValidate;\n    let state: Partial<FormState<T, S, F>> = { formData, schema };\n    let newFormData = formData;\n\n    let _retrievedSchema: S | undefined;\n    if (omitExtraData === true && liveOmit === true) {\n      newFormData = this.omitExtraData(formData);\n      state = {\n        formData: newFormData,\n      };\n    }\n\n    if (mustValidate) {\n      const schemaValidation = this.validate(newFormData, schema, schemaUtils, retrievedSchema);\n      let errors = schemaValidation.errors;\n      let errorSchema = schemaValidation.errorSchema;\n      const schemaValidationErrors = errors;\n      const schemaValidationErrorSchema = errorSchema;\n      if (extraErrors) {\n        const merged = validationDataMerge(schemaValidation, extraErrors);\n        errorSchema = merged.errorSchema;\n        errors = merged.errors;\n      }\n      state = {\n        formData: newFormData,\n        errors,\n        errorSchema,\n        schemaValidationErrors,\n        schemaValidationErrorSchema,\n      };\n    } else if (!noValidate && newErrorSchema) {\n      const errorSchema = extraErrors\n        ? (mergeObjects(newErrorSchema, extraErrors, 'preventDuplicates') as ErrorSchema<T>)\n        : newErrorSchema;\n      state = {\n        formData: newFormData,\n        errorSchema: errorSchema,\n        errors: toErrorList(errorSchema),\n      };\n    }\n    if (_retrievedSchema) {\n      state.retrievedSchema = _retrievedSchema;\n    }\n    this.setState(state as FormState<T, S, F>, () => onChange && onChange({ ...this.state, ...state }, id));\n  };\n\n  /**\n   * Callback function to handle reset form data.\n   * - Reset all fields with default values.\n   * - Reset validations and errors\n   *\n   */\n  reset = () => {\n    const { onChange } = this.props;\n    const newState = this.getStateFromProps(this.props, undefined);\n    const newFormData = newState.formData;\n    const state = {\n      formData: newFormData,\n      errorSchema: {},\n      errors: [] as unknown,\n      schemaValidationErrors: [] as unknown,\n      schemaValidationErrorSchema: {},\n    } as FormState<T, S, F>;\n\n    this.setState(state, () => onChange && onChange({ ...this.state, ...state }));\n  };\n\n  /** Callback function to handle when a field on the form is blurred. Calls the `onBlur` callback for the `Form` if it\n   * was provided.\n   *\n   * @param id - The unique `id` of the field that was blurred\n   * @param data - The data associated with the field that was blurred\n   */\n  onBlur = (id: string, data: any) => {\n    const { onBlur } = this.props;\n    if (onBlur) {\n      onBlur(id, data);\n    }\n  };\n\n  /** Callback function to handle when a field on the form is focused. Calls the `onFocus` callback for the `Form` if it\n   * was provided.\n   *\n   * @param id - The unique `id` of the field that was focused\n   * @param data - The data associated with the field that was focused\n   */\n  onFocus = (id: string, data: any) => {\n    const { onFocus } = this.props;\n    if (onFocus) {\n      onFocus(id, data);\n    }\n  };\n\n  /** Callback function to handle when the form is submitted. First, it prevents the default event behavior. Nothing\n   * happens if the target and currentTarget of the event are not the same. It will omit any extra data in the\n   * `formData` in the state if `omitExtraData` is true. It will validate the resulting `formData`, reporting errors\n   * via the `onError()` callback unless validation is disabled. Finally, it will add in any `extraErrors` and then call\n   * back the `onSubmit` callback if it was provided.\n   *\n   * @param event - The submit HTML form event\n   */\n  onSubmit = (event: FormEvent<any>) => {\n    event.preventDefault();\n    if (event.target !== event.currentTarget) {\n      return;\n    }\n\n    event.persist();\n    const { omitExtraData, extraErrors, noValidate, onSubmit } = this.props;\n    let { formData: newFormData } = this.state;\n\n    if (omitExtraData === true) {\n      newFormData = this.omitExtraData(newFormData);\n    }\n\n    if (noValidate || this.validateFormWithFormData(newFormData)) {\n      // There are no errors generated through schema validation.\n      // Check for user provided errors and update state accordingly.\n      const errorSchema = extraErrors || {};\n      const errors = extraErrors ? toErrorList(extraErrors) : [];\n      this.setState(\n        {\n          formData: newFormData,\n          errors,\n          errorSchema,\n          schemaValidationErrors: [],\n          schemaValidationErrorSchema: {},\n        },\n        () => {\n          if (onSubmit) {\n            onSubmit({ ...this.state, formData: newFormData, status: 'submitted' }, event);\n          }\n        }\n      );\n    }\n  };\n\n  /** Returns the registry for the form */\n  getRegistry(): Registry<T, S, F> {\n    const { translateString: customTranslateString, uiSchema = {} } = this.props;\n    const { schemaUtils } = this.state;\n    const { fields, templates, widgets, formContext, translateString } = getDefaultRegistry<T, S, F>();\n    return {\n      fields: { ...fields, ...this.props.fields },\n      templates: {\n        ...templates,\n        ...this.props.templates,\n        ButtonTemplates: {\n          ...templates.ButtonTemplates,\n          ...this.props.templates?.ButtonTemplates,\n        },\n      },\n      widgets: { ...widgets, ...this.props.widgets },\n      rootSchema: this.props.schema,\n      formContext: this.props.formContext || formContext,\n      schemaUtils,\n      translateString: customTranslateString || translateString,\n      globalUiOptions: uiSchema[UI_GLOBAL_OPTIONS_KEY],\n    };\n  }\n\n  /** Provides a function that can be used to programmatically submit the `Form` */\n  submit = () => {\n    if (this.formElement.current) {\n      const submitCustomEvent = new CustomEvent('submit', {\n        cancelable: true,\n      });\n      submitCustomEvent.preventDefault();\n      this.formElement.current.dispatchEvent(submitCustomEvent);\n      this.formElement.current.requestSubmit();\n    }\n  };\n\n  /** Attempts to focus on the field associated with the `error`. Uses the `property` field to compute path of the error\n   * field, then, using the `idPrefix` and `idSeparator` converts that path into an id. Then the input element with that\n   * id is attempted to be found using the `formElement` ref. If it is located, then it is focused.\n   *\n   * @param error - The error on which to focus\n   */\n  focusOnError(error: RJSFValidationError) {\n    const { idPrefix = 'root', idSeparator = '_' } = this.props;\n    const { property } = error;\n    const path = _toPath(property);\n    if (path[0] === '') {\n      // Most of the time the `.foo` property results in the first element being empty, so replace it with the idPrefix\n      path[0] = idPrefix;\n    } else {\n      // Otherwise insert the idPrefix into the first location using unshift\n      path.unshift(idPrefix);\n    }\n\n    const elementId = path.join(idSeparator);\n    let field = this.formElement.current.elements[elementId];\n    if (!field) {\n      // if not an exact match, try finding an input starting with the element id (like radio buttons or checkboxes)\n      field = this.formElement.current.querySelector(`input[id^=${elementId}`);\n    }\n    if (field && field.length) {\n      // If we got a list with length > 0\n      field = field[0];\n    }\n    if (field) {\n      field.focus();\n    }\n  }\n\n  /** Validates the form using the given `formData`. For use on form submission or on programmatic validation.\n   * If `onError` is provided, then it will be called with the list of errors.\n   *\n   * @param formData - The form data to validate\n   * @returns - True if the form is valid, false otherwise.\n   */\n  validateFormWithFormData = (formData?: T): boolean => {\n    const { extraErrors, extraErrorsBlockSubmit, focusOnFirstError, onError } = this.props;\n    const { errors: prevErrors } = this.state;\n    const schemaValidation = this.validate(formData);\n    let errors = schemaValidation.errors;\n    let errorSchema = schemaValidation.errorSchema;\n    const schemaValidationErrors = errors;\n    const schemaValidationErrorSchema = errorSchema;\n    const hasError = errors.length > 0 || (extraErrors && extraErrorsBlockSubmit);\n    if (hasError) {\n      if (extraErrors) {\n        const merged = validationDataMerge(schemaValidation, extraErrors);\n        errorSchema = merged.errorSchema;\n        errors = merged.errors;\n      }\n      if (focusOnFirstError) {\n        if (typeof focusOnFirstError === 'function') {\n          focusOnFirstError(errors[0]);\n        } else {\n          this.focusOnError(errors[0]);\n        }\n      }\n      this.setState(\n        {\n          errors,\n          errorSchema,\n          schemaValidationErrors,\n          schemaValidationErrorSchema,\n        },\n        () => {\n          if (onError) {\n            onError(errors);\n          } else {\n            console.error('Form validation failed', errors);\n          }\n        }\n      );\n    } else if (prevErrors.length > 0) {\n      this.setState({\n        errors: [],\n        errorSchema: {},\n        schemaValidationErrors: [],\n        schemaValidationErrorSchema: {},\n      });\n    }\n    return !hasError;\n  };\n\n  /** Programmatically validate the form.  If `omitExtraData` is true, the `formData` will first be filtered to remove\n   * any extra data not in a form field. If `onError` is provided, then it will be called with the list of errors the\n   * same way as would happen on form submission.\n   *\n   * @returns - True if the form is valid, false otherwise.\n   */\n  validateForm() {\n    const { omitExtraData } = this.props;\n    let { formData: newFormData } = this.state;\n    if (omitExtraData === true) {\n      newFormData = this.omitExtraData(newFormData);\n    }\n    return this.validateFormWithFormData(newFormData);\n  }\n\n  /** Renders the `Form` fields inside the <form> | `tagName` or `_internalFormWrapper`, rendering any errors if\n   * needed along with the submit button or any children of the form.\n   */\n  render() {\n    const {\n      children,\n      id,\n      idPrefix,\n      idSeparator,\n      className = '',\n      tagName,\n      name,\n      method,\n      target,\n      action,\n      autoComplete,\n      enctype,\n      acceptcharset,\n      acceptCharset,\n      noHtml5Validate = false,\n      disabled,\n      readonly,\n      formContext,\n      showErrorList = 'top',\n      _internalFormWrapper,\n    } = this.props;\n\n    const { schema, uiSchema, formData, errorSchema, idSchema } = this.state;\n    const registry = this.getRegistry();\n    const { SchemaField: _SchemaField } = registry.fields;\n    const { SubmitButton } = registry.templates.ButtonTemplates;\n    // The `semantic-ui` and `material-ui` themes have `_internalFormWrapper`s that take an `as` prop that is the\n    // PropTypes.elementType to use for the inner tag, so we'll need to pass `tagName` along if it is provided.\n    // NOTE, the `as` prop is native to `semantic-ui` and is emulated in the `material-ui` theme\n    const as = _internalFormWrapper ? tagName : undefined;\n    const FormTag = _internalFormWrapper || tagName || 'form';\n\n    let { [SUBMIT_BTN_OPTIONS_KEY]: submitOptions = {} } = getUiOptions<T, S, F>(uiSchema);\n    if (disabled) {\n      submitOptions = { ...submitOptions, props: { ...submitOptions.props, disabled: true } };\n    }\n    const submitUiSchema = { [UI_OPTIONS_KEY]: { [SUBMIT_BTN_OPTIONS_KEY]: submitOptions } };\n\n    return (\n      <FormTag\n        className={className ? className : 'rjsf'}\n        id={id}\n        name={name}\n        method={method}\n        target={target}\n        action={action}\n        autoComplete={autoComplete}\n        encType={enctype}\n        acceptCharset={acceptCharset || acceptcharset}\n        noValidate={noHtml5Validate}\n        onSubmit={this.onSubmit}\n        as={as}\n        ref={this.formElement}\n      >\n        {showErrorList === 'top' && this.renderErrors(registry)}\n        <_SchemaField\n          name=''\n          schema={schema}\n          uiSchema={uiSchema}\n          errorSchema={errorSchema}\n          idSchema={idSchema}\n          idPrefix={idPrefix}\n          idSeparator={idSeparator}\n          formContext={formContext}\n          formData={formData}\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onFocus={this.onFocus}\n          registry={registry}\n          disabled={disabled}\n          readonly={readonly}\n        />\n\n        {children ? children : <SubmitButton uiSchema={submitUiSchema} registry={registry} />}\n        {showErrorList === 'bottom' && this.renderErrors(registry)}\n      </FormTag>\n    );\n  }\n}\n","import { englishStringTranslator, FormContextType, Registry, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\nimport fields from './components/fields';\nimport templates from './components/templates';\nimport widgets from './components/widgets';\n\n/** The default registry consists of all the fields, templates and widgets provided in the core implementation,\n * plus an empty `rootSchema` and `formContext. We omit schemaUtils here because it cannot be defaulted without a\n * rootSchema and validator. It will be added into the computed registry later in the Form.\n */\nexport default function getDefaultRegistry<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(): Omit<Registry<T, S, F>, 'schemaUtils'> {\n  return {\n    fields: fields<T, S, F>(),\n    templates: templates<T, S, F>(),\n    widgets: widgets<T, S, F>(),\n    rootSchema: {} as S,\n    formContext: {} as F,\n    translateString: englishStringTranslator,\n  };\n}\n","import Form, { FormProps, FormState, IChangeEvent } from './components/Form';\nimport withTheme, { ThemeProps } from './withTheme';\nimport getDefaultRegistry from './getDefaultRegistry';\n\nexport type { FormProps, FormState, IChangeEvent, ThemeProps };\n\nexport { withTheme, getDefaultRegistry };\nexport default Form;\n","/** Determines whether a `thing` is an object for the purposes of RSJF. In this case, `thing` is an object if it has\n * the type `object` but is NOT null, an array or a File.\n *\n * @param thing - The thing to check to see whether it is an object\n * @returns - True if it is a non-null, non-array, non-File object\n */\nexport default function isObject(thing: any) {\n  if (typeof File !== 'undefined' && thing instanceof File) {\n    return false;\n  }\n  if (typeof Date !== 'undefined' && thing instanceof Date) {\n    return false;\n  }\n  return typeof thing === 'object' && thing !== null && !Array.isArray(thing);\n}\n","import isObject from './isObject';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Checks the schema to see if it is allowing additional items, by verifying that `schema.additionalItems` is an\n * object. The user is warned in the console if `schema.additionalItems` has the value `true`.\n *\n * @param schema - The schema object to check\n * @returns - True if additional items is allowed, otherwise false\n */\nexport default function allowAdditionalItems<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  if (schema.additionalItems === true) {\n    console.warn('additionalItems=true is currently not supported');\n  }\n  return isObject(schema.additionalItems);\n}\n","/** Attempts to convert the string into a number. If an empty string is provided, then `undefined` is returned. If a\n * `null` is provided, it is returned. If the string ends in a `.` then the string is returned because the user may be\n * in the middle of typing a float number. If a number ends in a pattern like `.0`, `.20`, `.030`, string is returned\n * because the user may be typing number that will end in a non-zero digit. Otherwise, the string is wrapped by\n * `Number()` and if that result is not `NaN`, that number will be returned, otherwise the string `value` will be.\n *\n * @param value - The string or null value to convert to a number\n * @returns - The `value` converted to a number when appropriate, otherwise the `value`\n */\nexport default function asNumber(value: string | null) {\n  if (value === '') {\n    return undefined;\n  }\n  if (value === null) {\n    return null;\n  }\n  if (/\\.$/.test(value)) {\n    // '3.' can't really be considered a number even if it parses in js. The\n    // user is most likely entering a float.\n    return value;\n  }\n  if (/\\.0$/.test(value)) {\n    // we need to return this as a string here, to allow for input like 3.07\n    return value;\n  }\n\n  if (/\\.\\d*0$/.test(value)) {\n    // It's a number, that's cool - but we need it as a string so it doesn't screw\n    // with the user when entering dollar amounts or other values (such as those with\n    // specific precision or number of significant digits)\n    return value;\n  }\n\n  const n = Number(value);\n  const valid = typeof n === 'number' && !Number.isNaN(n);\n\n  return valid ? n : value;\n}\n","/** Below are the list of all the keys into various elements of a RJSFSchema or UiSchema that are used by the various\n * utility functions. In addition to those keys, there are the special `ADDITIONAL_PROPERTY_FLAG` and\n * `RJSF_ADDITIONAL_PROPERTIES_FLAG` flags that is added to a schema under certain conditions by the `retrieveSchema()`\n * utility.\n */\nexport const ADDITIONAL_PROPERTY_FLAG = '__additional_property';\nexport const ADDITIONAL_PROPERTIES_KEY = 'additionalProperties';\nexport const ALL_OF_KEY = 'allOf';\nexport const ANY_OF_KEY = 'anyOf';\nexport const CONST_KEY = 'const';\nexport const DEFAULT_KEY = 'default';\nexport const DEFINITIONS_KEY = 'definitions';\nexport const DEPENDENCIES_KEY = 'dependencies';\nexport const ENUM_KEY = 'enum';\nexport const ERRORS_KEY = '__errors';\nexport const ID_KEY = '$id';\nexport const IF_KEY = 'if';\nexport const ITEMS_KEY = 'items';\nexport const JUNK_OPTION_ID = '_$junk_option_schema_id$_';\nexport const NAME_KEY = '$name';\nexport const ONE_OF_KEY = 'oneOf';\nexport const PROPERTIES_KEY = 'properties';\nexport const REQUIRED_KEY = 'required';\nexport const SUBMIT_BTN_OPTIONS_KEY = 'submitButtonOptions';\nexport const REF_KEY = '$ref';\n/**\n * @deprecated Replace with correctly spelled constant `RJSF_ADDITIONAL_PROPERTIES_FLAG`\n */\nexport const RJSF_ADDITONAL_PROPERTIES_FLAG = '__rjsf_additionalProperties';\nexport const RJSF_ADDITIONAL_PROPERTIES_FLAG = '__rjsf_additionalProperties';\nexport const ROOT_SCHEMA_PREFIX = '__rjsf_rootSchema';\nexport const UI_FIELD_KEY = 'ui:field';\nexport const UI_WIDGET_KEY = 'ui:widget';\nexport const UI_OPTIONS_KEY = 'ui:options';\nexport const UI_GLOBAL_OPTIONS_KEY = 'ui:globalOptions';\n","import { UI_OPTIONS_KEY, UI_WIDGET_KEY } from './constants';\nimport isObject from './isObject';\nimport { FormContextType, GlobalUISchemaOptions, RJSFSchema, StrictRJSFSchema, UIOptionsType, UiSchema } from './types';\n\n/** Get all passed options from ui:options, and ui:<optionName>, returning them in an object with the `ui:`\n * stripped off. Any `globalOptions` will always be returned, unless they are overridden by options in the `uiSchema`.\n *\n * @param [uiSchema={}] - The UI Schema from which to get any `ui:xxx` options\n * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n * @returns - An object containing all the `ui:xxx` options with the `ui:` stripped off along with all `globalOptions`\n */\nexport default function getUiOptions<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  uiSchema: UiSchema<T, S, F> = {},\n  globalOptions: GlobalUISchemaOptions = {}\n): UIOptionsType<T, S, F> {\n  return Object.keys(uiSchema)\n    .filter((key) => key.indexOf('ui:') === 0)\n    .reduce(\n      (options, key) => {\n        const value = uiSchema[key];\n        if (key === UI_WIDGET_KEY && isObject(value)) {\n          console.error('Setting options via ui:widget object is no longer supported, use ui:options instead');\n          return options;\n        }\n        if (key === UI_OPTIONS_KEY && isObject(value)) {\n          return { ...options, ...value };\n        }\n        return { ...options, [key.substring(3)]: value };\n      },\n      { ...globalOptions }\n    );\n}\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, UiSchema } from './types';\nimport getUiOptions from './getUiOptions';\n\n/** Checks whether the field described by `schema`, having the `uiSchema` and `formData` supports expanding. The UI for\n * the field can expand if it has additional properties, is not forced as non-expandable by the `uiSchema` and the\n * `formData` object doesn't already have `schema.maxProperties` elements.\n *\n * @param schema - The schema for the field that is being checked\n * @param [uiSchema={}] - The uiSchema for the field\n * @param [formData] - The formData for the field\n * @returns - True if the schema element has additionalProperties, is expandable, and not at the maxProperties limit\n */\nexport default function canExpand<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  schema: RJSFSchema,\n  uiSchema: UiSchema<T, S, F> = {},\n  formData?: T\n) {\n  if (!schema.additionalProperties) {\n    return false;\n  }\n  const { expandable = true } = getUiOptions<T, S, F>(uiSchema);\n  if (expandable === false) {\n    return expandable;\n  }\n  // if ui:options.expandable was not explicitly set to false, we can add\n  // another property if we have not exceeded maxProperties yet\n  if (schema.maxProperties !== undefined && formData) {\n    return Object.keys(formData).length < schema.maxProperties;\n  }\n  return true;\n}\n","import isPlainObject from 'lodash/isPlainObject';\n\nimport { ERRORS_KEY } from './constants';\nimport { FieldValidation, FormValidation, GenericObjectType } from './types';\n\n/** Given a `formData` object, recursively creates a `FormValidation` error handling structure around it\n *\n * @param formData - The form data around which the error handler is created\n * @returns - A `FormValidation` object based on the `formData` structure\n */\nexport default function createErrorHandler<T = any>(formData: T): FormValidation<T> {\n  const handler: FieldValidation = {\n    // We store the list of errors for this node in a property named __errors\n    // to avoid name collision with a possible sub schema field named\n    // 'errors' (see `utils.toErrorSchema`).\n    [ERRORS_KEY]: [],\n    addError(message: string) {\n      this[ERRORS_KEY]!.push(message);\n    },\n  };\n  if (Array.isArray(formData)) {\n    return formData.reduce((acc, value, key) => {\n      return { ...acc, [key]: createErrorHandler(value) };\n    }, handler);\n  }\n  if (isPlainObject(formData)) {\n    const formObject: GenericObjectType = formData as GenericObjectType;\n    return Object.keys(formObject).reduce((acc, key) => {\n      return { ...acc, [key]: createErrorHandler(formObject[key]) };\n    }, handler as FormValidation<T>);\n  }\n  return handler as FormValidation<T>;\n}\n","import isEqualWith from 'lodash/isEqualWith';\n\n/** Implements a deep equals using the `lodash.isEqualWith` function, that provides a customized comparator that\n * assumes all functions are equivalent.\n *\n * @param a - The first element to compare\n * @param b - The second element to compare\n * @returns - True if the `a` and `b` are deeply equal, false otherwise\n */\nexport default function deepEquals(a: any, b: any): boolean {\n  return isEqualWith(a, b, (obj: any, other: any) => {\n    if (typeof obj === 'function' && typeof other === 'function') {\n      // Assume all functions are equivalent\n      // see https://github.com/rjsf-team/react-jsonschema-form/issues/255\n      return true;\n    }\n    return undefined; // fallback to default isEquals behavior\n  });\n}\n","import jsonpointer from 'jsonpointer';\nimport omit from 'lodash/omit';\n\nimport { REF_KEY } from './constants';\nimport { GenericObjectType, RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Splits out the value at the `key` in `object` from the `object`, returning an array that contains in the first\n * location, the `object` minus the `key: value` and in the second location the `value`.\n *\n * @param key - The key from the object to extract\n * @param object - The object from which to extract the element\n * @returns - An array with the first value being the object minus the `key` element and the second element being the\n *      value from `object[key]`\n */\nexport function splitKeyElementFromObject(key: string, object: GenericObjectType) {\n  const value = object[key];\n  const remaining = omit(object, [key]);\n  return [remaining, value];\n}\n\n/** Given the name of a `$ref` from within a schema, using the `rootSchema`, recursively look up and return the\n * sub-schema using the path provided by that reference. If `#` is not the first character of the reference, the path\n * does not exist in the schema, or the reference resolves circularly back to itself, then throw an Error.\n * Otherwise return the sub-schema. Also deals with nested `$ref`s in the sub-schema.\n *\n * @param $ref - The ref string for which the schema definition is desired\n * @param [rootSchema={}] - The root schema in which to search for the definition\n * @param recurseList - List of $refs already resolved to prevent recursion\n * @returns - The sub-schema within the `rootSchema` which matches the `$ref` if it exists\n * @throws - Error indicating that no schema for that reference could be resolved\n */\nexport function findSchemaDefinitionRecursive<S extends StrictRJSFSchema = RJSFSchema>(\n  $ref?: string,\n  rootSchema: S = {} as S,\n  recurseList: string[] = []\n): S {\n  const ref = $ref || '';\n  let decodedRef;\n  if (ref.startsWith('#')) {\n    // Decode URI fragment representation.\n    decodedRef = decodeURIComponent(ref.substring(1));\n  } else {\n    throw new Error(`Could not find a definition for ${$ref}.`);\n  }\n  const current: S = jsonpointer.get(rootSchema, decodedRef);\n  if (current === undefined) {\n    throw new Error(`Could not find a definition for ${$ref}.`);\n  }\n  const nextRef = current[REF_KEY];\n  if (nextRef) {\n    // Check for circular references.\n    if (recurseList.includes(nextRef)) {\n      if (recurseList.length === 1) {\n        throw new Error(`Definition for ${$ref} is a circular reference`);\n      }\n      const [firstRef, ...restRefs] = recurseList;\n      const circularPath = [...restRefs, ref, firstRef].join(' -> ');\n      throw new Error(`Definition for ${firstRef} contains a circular reference through ${circularPath}`);\n    }\n    const [remaining, theRef] = splitKeyElementFromObject(REF_KEY, current);\n    const subSchema = findSchemaDefinitionRecursive<S>(theRef, rootSchema, [...recurseList, ref]);\n    if (Object.keys(remaining).length > 0) {\n      return { ...remaining, ...subSchema };\n    }\n    return subSchema;\n  }\n  return current;\n}\n\n/** Given the name of a `$ref` from within a schema, using the `rootSchema`, look up and return the sub-schema using the\n * path provided by that reference. If `#` is not the first character of the reference, the path does not exist in\n * the schema, or the reference resolves circularly back to itself, then throw an Error. Otherwise return the\n * sub-schema. Also deals with nested `$ref`s in the sub-schema.\n *\n * @param $ref - The ref string for which the schema definition is desired\n * @param [rootSchema={}] - The root schema in which to search for the definition\n * @returns - The sub-schema within the `rootSchema` which matches the `$ref` if it exists\n * @throws - Error indicating that no schema for that reference could be resolved\n */\nexport default function findSchemaDefinition<S extends StrictRJSFSchema = RJSFSchema>(\n  $ref?: string,\n  rootSchema: S = {} as S\n): S {\n  const recurseList: string[] = [];\n  return findSchemaDefinitionRecursive($ref, rootSchema, recurseList);\n}\n","import get from 'lodash/get';\nimport { PROPERTIES_KEY } from './constants';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Compares the value of `discriminatorField` within `formData` against the value of `discriminatorField` within schema for each `option`.\n * Returns index of first `option` whose discriminator matches formData. Returns `undefined` if there is no match.\n * This function does not work with discriminators of `\"type\": \"object\"` and `\"type\": \"array\"`\n *\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the matched option or undefined if there is no match\n */\nexport default function getOptionMatchingSimpleDiscriminator<T = any, S extends StrictRJSFSchema = RJSFSchema>(\n  formData: T | undefined,\n  options: S[],\n  discriminatorField?: string\n): number | undefined {\n  if (formData && discriminatorField) {\n    const value = get(formData, discriminatorField);\n\n    if (value === undefined) {\n      return;\n    }\n\n    for (let i = 0; i < options.length; i++) {\n      const option = options[i];\n      const discriminator = get(option, [PROPERTIES_KEY, discriminatorField], {});\n\n      if (discriminator.type === 'object' || discriminator.type === 'array') {\n        continue;\n      }\n\n      if (discriminator.const === value) {\n        return i;\n      }\n\n      if (discriminator.enum?.includes(value)) {\n        return i;\n      }\n    }\n  }\n\n  return;\n}\n","import get from 'lodash/get';\nimport has from 'lodash/has';\nimport isNumber from 'lodash/isNumber';\n\nimport { PROPERTIES_KEY } from '../constants';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport getOptionMatchingSimpleDiscriminator from '../getOptionMatchingSimpleDiscriminator';\n\n/** Given the `formData` and list of `options`, attempts to find the index of the option that best matches the data.\n * Deprecated, use `getFirstMatchingOption()` instead.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param rootSchema - The root schema, used to primarily to look up `$ref`s\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the matched option or 0 if none is available\n * @deprecated\n */\nexport default function getMatchingOption<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  formData: T | undefined,\n  options: S[],\n  rootSchema: S,\n  discriminatorField?: string\n): number {\n  // For performance, skip validating subschemas if formData is undefined. We just\n  // want to get the first option in that case.\n  if (formData === undefined) {\n    return 0;\n  }\n\n  const simpleDiscriminatorMatch = getOptionMatchingSimpleDiscriminator(formData, options, discriminatorField);\n  if (isNumber(simpleDiscriminatorMatch)) {\n    return simpleDiscriminatorMatch;\n  }\n\n  for (let i = 0; i < options.length; i++) {\n    const option = options[i];\n\n    // If we have a discriminator field, then we will use this to make the determination\n    if (discriminatorField && has(option, [PROPERTIES_KEY, discriminatorField])) {\n      const value = get(formData, discriminatorField);\n      const discriminator = get(option, [PROPERTIES_KEY, discriminatorField], {});\n      if (validator.isValid(discriminator, value, rootSchema)) {\n        return i;\n      }\n    } else if (option[PROPERTIES_KEY]) {\n      // If the schema describes an object then we need to add slightly more\n      // strict matching to the schema, because unless the schema uses the\n      // \"requires\" keyword, an object will match the schema as long as it\n      // doesn't have matching keys with a conflicting type. To do this we use an\n      // \"anyOf\" with an array of requires. This augmentation expresses that the\n      // schema should match if any of the keys in the schema are present on the\n      // object and pass validation.\n      //\n      // Create an \"anyOf\" schema that requires at least one of the keys in the\n      // \"properties\" object\n      const requiresAnyOf = {\n        anyOf: Object.keys(option[PROPERTIES_KEY]).map((key) => ({\n          required: [key],\n        })),\n      };\n\n      let augmentedSchema;\n\n      // If the \"anyOf\" keyword already exists, wrap the augmentation in an \"allOf\"\n      if (option.anyOf) {\n        // Create a shallow clone of the option\n        const { ...shallowClone } = option;\n\n        if (!shallowClone.allOf) {\n          shallowClone.allOf = [];\n        } else {\n          // If \"allOf\" already exists, shallow clone the array\n          shallowClone.allOf = shallowClone.allOf.slice();\n        }\n\n        shallowClone.allOf.push(requiresAnyOf);\n\n        augmentedSchema = shallowClone;\n      } else {\n        augmentedSchema = Object.assign({}, option, requiresAnyOf);\n      }\n\n      // Remove the \"required\" field as it's likely that not all fields have\n      // been filled in yet, which will mean that the schema is not valid\n      delete augmentedSchema.required;\n\n      if (validator.isValid(augmentedSchema, formData, rootSchema)) {\n        return i;\n      }\n    } else if (validator.isValid(option, formData, rootSchema)) {\n      return i;\n    }\n  }\n  return 0;\n}\n","import getMatchingOption from './getMatchingOption';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\n\n/** Given the `formData` and list of `options`, attempts to find the index of the first option that matches the data.\n * Always returns the first option if there is nothing that matches.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param formData - The current formData, if any, used to figure out a match\n * @param options - The list of options to find a matching options from\n * @param rootSchema - The root schema, used to primarily to look up `$ref`s\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the first matched option or 0 if none is available\n */\nexport default function getFirstMatchingOption<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  formData: T | undefined,\n  options: S[],\n  rootSchema: S,\n  discriminatorField?: string\n): number {\n  return getMatchingOption<T, S, F>(validator, formData, options, rootSchema, discriminatorField);\n}\n","import get from 'lodash/get';\nimport isString from 'lodash/isString';\n\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Returns the `discriminator.propertyName` when defined in the `schema` if it is a string. A warning is generated when\n * it is not a string. Returns `undefined` when a valid discriminator is not present.\n *\n * @param schema - The schema from which the discriminator is potentially obtained\n * @returns - The `discriminator.propertyName` if it exists in the schema, otherwise `undefined`\n */\nexport default function getDiscriminatorFieldFromSchema<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  let discriminator: string | undefined;\n  const maybeString = get(schema, 'discriminator.propertyName', undefined);\n  if (isString(maybeString)) {\n    discriminator = maybeString;\n  } else if (maybeString !== undefined) {\n    console.warn(`Expecting discriminator to be a string, got \"${typeof maybeString}\" instead`);\n  }\n  return discriminator;\n}\n","/** Given a specific `value` attempts to guess the type of a schema element. In the case where we have to implicitly\n *  create a schema, it is useful to know what type to use based on the data we are defining.\n *\n * @param value - The value from which to guess the type\n * @returns - The best guess for the object type\n */\nexport default function guessType(value: any) {\n  if (Array.isArray(value)) {\n    return 'array';\n  }\n  if (typeof value === 'string') {\n    return 'string';\n  }\n  if (value == null) {\n    return 'null';\n  }\n  if (typeof value === 'boolean') {\n    return 'boolean';\n  }\n  if (!isNaN(value)) {\n    return 'number';\n  }\n  if (typeof value === 'object') {\n    return 'object';\n  }\n  // Default to string if we can't figure it out\n  return 'string';\n}\n","import guessType from './guessType';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Gets the type of a given `schema`. If the type is not explicitly defined, then an attempt is made to infer it from\n * other elements of the schema as follows:\n * - schema.const: Returns the `guessType()` of that value\n * - schema.enum: Returns `string`\n * - schema.properties: Returns `object`\n * - schema.additionalProperties: Returns `object`\n * - type is an array with a length of 2 and one type is 'null': Returns the other type\n *\n * @param schema - The schema for which to get the type\n * @returns - The type of the schema\n */\nexport default function getSchemaType<S extends StrictRJSFSchema = RJSFSchema>(\n  schema: S\n): string | string[] | undefined {\n  let { type } = schema;\n\n  if (!type && schema.const) {\n    return guessType(schema.const);\n  }\n\n  if (!type && schema.enum) {\n    return 'string';\n  }\n\n  if (!type && (schema.properties || schema.additionalProperties)) {\n    return 'object';\n  }\n\n  if (Array.isArray(type)) {\n    if (type.length === 2 && type.includes('null')) {\n      type = type.find((type) => type !== 'null');\n    } else {\n      type = type[0];\n    }\n  }\n\n  return type;\n}\n","import union from 'lodash/union';\n\nimport { REQUIRED_KEY } from './constants';\nimport getSchemaType from './getSchemaType';\nimport isObject from './isObject';\nimport { GenericObjectType } from './types';\n\n/** Recursively merge deeply nested schemas. The difference between `mergeSchemas` and `mergeObjects` is that\n * `mergeSchemas` only concats arrays for values under the 'required' keyword, and when it does, it doesn't include\n * duplicate values.\n *\n * @param obj1 - The first schema object to merge\n * @param obj2 - The second schema object to merge\n * @returns - The merged schema object\n */\nexport default function mergeSchemas(obj1: GenericObjectType, obj2: GenericObjectType) {\n  const acc = Object.assign({}, obj1); // Prevent mutation of source object.\n  return Object.keys(obj2).reduce((acc, key) => {\n    const left = obj1 ? obj1[key] : {},\n      right = obj2[key];\n    if (obj1 && key in obj1 && isObject(right)) {\n      acc[key] = mergeSchemas(left, right);\n    } else if (\n      obj1 &&\n      obj2 &&\n      (getSchemaType(obj1) === 'object' || getSchemaType(obj2) === 'object') &&\n      key === REQUIRED_KEY &&\n      Array.isArray(left) &&\n      Array.isArray(right)\n    ) {\n      // Don't include duplicate values when merging 'required' fields.\n      acc[key] = union(left, right);\n    } else {\n      acc[key] = right;\n    }\n    return acc;\n  }, acc);\n}\n","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport set from 'lodash/set';\nimport times from 'lodash/times';\nimport transform from 'lodash/transform';\nimport merge from 'lodash/merge';\nimport flattenDeep from 'lodash/flattenDeep';\nimport uniq from 'lodash/uniq';\nimport mergeAllOf, { Options } from 'json-schema-merge-allof';\n\nimport {\n  ADDITIONAL_PROPERTIES_KEY,\n  ADDITIONAL_PROPERTY_FLAG,\n  ALL_OF_KEY,\n  ANY_OF_KEY,\n  DEPENDENCIES_KEY,\n  IF_KEY,\n  ONE_OF_KEY,\n  REF_KEY,\n  PROPERTIES_KEY,\n  ITEMS_KEY,\n} from '../constants';\nimport findSchemaDefinition, { splitKeyElementFromObject } from '../findSchemaDefinition';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport guessType from '../guessType';\nimport isObject from '../isObject';\nimport mergeSchemas from '../mergeSchemas';\nimport { FormContextType, GenericObjectType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport getFirstMatchingOption from './getFirstMatchingOption';\n\n/** Retrieves an expanded schema that has had all of its conditions, additional properties, references and dependencies\n * resolved and merged into the `schema` given a `validator`, `rootSchema` and `rawFormData` that is used to do the\n * potentially recursive resolution.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param [rootSchema={}] - The root schema that will be forwarded to all the APIs\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n * @returns - The schema having its conditions, additional properties, references and dependencies resolved\n */\nexport default function retrieveSchema<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(validator: ValidatorType<T, S, F>, schema: S, rootSchema: S = {} as S, rawFormData?: T): S {\n  return retrieveSchemaInternal<T, S, F>(validator, schema, rootSchema, rawFormData)[0];\n}\n\n/** Resolves a conditional block (if/else/then) by removing the condition and merging the appropriate conditional branch\n * with the rest of the schema. If `expandAllBranches` is true, then the `retrieveSchemaInteral()` results for both\n * conditions will be returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that is used to detect valid schema conditions\n * @param schema - The schema for which resolving a condition is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and\n *          dependencies as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData to assist retrieving a schema\n * @returns - A list of schemas with the appropriate conditions resolved, possibly with all branches expanded\n */\nexport function resolveCondition<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  const { if: expression, then, else: otherwise, ...resolvedSchemaLessConditional } = schema;\n\n  const conditionValue = validator.isValid(expression as S, formData || ({} as T), rootSchema);\n  let resolvedSchemas = [resolvedSchemaLessConditional as S];\n  let schemas: S[] = [];\n  if (expandAllBranches) {\n    if (then && typeof then !== 'boolean') {\n      schemas = schemas.concat(\n        retrieveSchemaInternal<T, S, F>(validator, then as S, rootSchema, formData, expandAllBranches, recurseList)\n      );\n    }\n    if (otherwise && typeof otherwise !== 'boolean') {\n      schemas = schemas.concat(\n        retrieveSchemaInternal<T, S, F>(validator, otherwise as S, rootSchema, formData, expandAllBranches, recurseList)\n      );\n    }\n  } else {\n    const conditionalSchema = conditionValue ? then : otherwise;\n    if (conditionalSchema && typeof conditionalSchema !== 'boolean') {\n      schemas = schemas.concat(\n        retrieveSchemaInternal<T, S, F>(\n          validator,\n          conditionalSchema as S,\n          rootSchema,\n          formData,\n          expandAllBranches,\n          recurseList\n        )\n      );\n    }\n  }\n  if (schemas.length) {\n    resolvedSchemas = schemas.map((s) => mergeSchemas(resolvedSchemaLessConditional, s) as S);\n  }\n  return resolvedSchemas.flatMap((s) =>\n    retrieveSchemaInternal<T, S, F>(validator, s, rootSchema, formData, expandAllBranches, recurseList)\n  );\n}\n\n/** Given a list of lists of allOf, anyOf or oneOf values, create a list of lists of all permutations of the values. The\n * `listOfLists` is expected to be all resolved values of the 1st...nth schemas within an `allOf`, `anyOf` or `oneOf`.\n * From those lists, build a matrix for each `xxxOf` where there is more than one schema for a row in the list of lists.\n *\n * For example:\n * - If there are three xxxOf rows (A, B, C) and they have been resolved such that there is only one A, two B and three\n *   C schemas then:\n *   - The permutation for the first row is `[[A]]`\n *   - The permutations for the second row are `[[A,B1], [A,B2]]`\n *   - The permutations for the third row are `[[A,B1,C1], [A,B1,C2], [A,B1,C3], [A,B2,C1], [A,B2,C2], [A,B2,C3]]`\n *\n * @param listOfLists - The list of lists of elements that represent the allOf, anyOf or oneOf resolved values in order\n * @returns - The list of all permutations of schemas for a set of `xxxOf`s\n */\nexport function getAllPermutationsOfXxxOf<S extends StrictRJSFSchema = RJSFSchema>(listOfLists: S[][]) {\n  const allPermutations: S[][] = listOfLists.reduce<S[][]>(\n    (permutations, list) => {\n      // When there are more than one set of schemas for a row, duplicate the set of permutations and add in the values\n      if (list.length > 1) {\n        return list.flatMap((element) => times(permutations.length, (i) => [...permutations[i]].concat(element)));\n      }\n      // Otherwise just push in the single value into the current set of permutations\n      permutations.forEach((permutation) => permutation.push(list[0]));\n      return permutations;\n    },\n    [[]] as S[][] // Start with an empty list\n  );\n\n  return allPermutations;\n}\n\n/** Resolves references and dependencies within a schema and its 'allOf' children. Passes the `expandAllBranches` flag\n * down to the `retrieveSchemaInternal()`, `resolveReference()` and `resolveDependencies()` helper calls. If\n * `expandAllBranches` is true, then all possible dependencies and/or allOf branches are returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list of schemas having its references, dependencies and allOf schemas resolved\n */\nexport function resolveSchema<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  const updatedSchemas = resolveReference<T, S, F>(\n    validator,\n    schema,\n    rootSchema,\n    expandAllBranches,\n    recurseList,\n    formData\n  );\n  if (updatedSchemas.length > 1 || updatedSchemas[0] !== schema) {\n    // return the updatedSchemas array if it has either multiple schemas within it\n    // OR the first schema is not the same as the original schema\n    return updatedSchemas;\n  }\n  if (DEPENDENCIES_KEY in schema) {\n    const resolvedSchemas = resolveDependencies<T, S, F>(\n      validator,\n      schema,\n      rootSchema,\n      expandAllBranches,\n      recurseList,\n      formData\n    );\n    return resolvedSchemas.flatMap((s) => {\n      return retrieveSchemaInternal<T, S, F>(validator, s, rootSchema, formData, expandAllBranches, recurseList);\n    });\n  }\n  if (ALL_OF_KEY in schema && Array.isArray(schema.allOf)) {\n    const allOfSchemaElements: S[][] = schema.allOf.map((allOfSubschema) =>\n      retrieveSchemaInternal<T, S, F>(\n        validator,\n        allOfSubschema as S,\n        rootSchema,\n        formData,\n        expandAllBranches,\n        recurseList\n      )\n    );\n    const allPermutations = getAllPermutationsOfXxxOf<S>(allOfSchemaElements);\n    return allPermutations.map((permutation) => ({ ...schema, allOf: permutation }));\n  }\n  // No $ref or dependencies or allOf attribute was found, returning the original schema.\n  return [schema];\n}\n\n/** Resolves all references within a schema and then returns the `retrieveSchemaInternal()` if the resolved schema is\n * actually different than the original. Passes the `expandAllBranches` flag down to the `retrieveSchemaInternal()`\n * helper call.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a reference is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list schemas retrieved after having all references resolved\n */\nexport function resolveReference<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  const updatedSchema = resolveAllReferences<S>(schema, rootSchema, recurseList);\n  if (updatedSchema !== schema) {\n    // Only call this if the schema was actually changed by the `resolveAllReferences()` function\n    return retrieveSchemaInternal<T, S, F>(\n      validator,\n      updatedSchema,\n      rootSchema,\n      formData,\n      expandAllBranches,\n      recurseList\n    );\n  }\n  return [schema];\n}\n\n/** Resolves all references within the schema itself as well as any of its properties and array items.\n *\n * @param schema - The schema for which resolving all references is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param recurseList - List of $refs already resolved to prevent recursion\n * @returns - given schema will all references resolved or the original schema if no internal `$refs` were resolved\n */\nexport function resolveAllReferences<S extends StrictRJSFSchema = RJSFSchema>(\n  schema: S,\n  rootSchema: S,\n  recurseList: string[]\n): S {\n  if (!isObject(schema)) {\n    return schema;\n  }\n  let resolvedSchema: S = schema;\n  // resolve top level ref\n  if (REF_KEY in resolvedSchema) {\n    const { $ref, ...localSchema } = resolvedSchema;\n    // Check for a recursive reference and stop the loop\n    if (recurseList.includes($ref!)) {\n      return resolvedSchema;\n    }\n    recurseList.push($ref!);\n    // Retrieve the referenced schema definition.\n    const refSchema = findSchemaDefinition<S>($ref, rootSchema);\n    resolvedSchema = { ...refSchema, ...localSchema };\n  }\n\n  if (PROPERTIES_KEY in resolvedSchema) {\n    const childrenLists: string[][] = [];\n    const updatedProps = transform(\n      resolvedSchema[PROPERTIES_KEY]!,\n      (result, value, key: string) => {\n        const childList: string[] = [...recurseList];\n        result[key] = resolveAllReferences(value as S, rootSchema, childList);\n        childrenLists.push(childList);\n      },\n      {} as RJSFSchema\n    );\n    merge(recurseList, uniq(flattenDeep(childrenLists)));\n    resolvedSchema = { ...resolvedSchema, [PROPERTIES_KEY]: updatedProps };\n  }\n\n  if (\n    ITEMS_KEY in resolvedSchema &&\n    !Array.isArray(resolvedSchema.items) &&\n    typeof resolvedSchema.items !== 'boolean'\n  ) {\n    resolvedSchema = {\n      ...resolvedSchema,\n      items: resolveAllReferences(resolvedSchema.items as S, rootSchema, recurseList),\n    };\n  }\n\n  return isEqual(schema, resolvedSchema) ? schema : resolvedSchema;\n}\n\n/** Creates new 'properties' items for each key in the `formData`\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which the existing additional properties is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s * @param validator\n * @param [aFormData] - The current formData, if any, to assist retrieving a schema\n * @returns - The updated schema with additional properties stubbed\n */\nexport function stubExistingAdditionalProperties<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(validator: ValidatorType<T, S, F>, theSchema: S, rootSchema?: S, aFormData?: T): S {\n  // Clone the schema so that we don't ruin the consumer's original\n  const schema = {\n    ...theSchema,\n    properties: { ...theSchema.properties },\n  };\n\n  // make sure formData is an object\n  const formData: GenericObjectType = aFormData && isObject(aFormData) ? aFormData : {};\n  Object.keys(formData).forEach((key) => {\n    if (key in schema.properties) {\n      // No need to stub, our schema already has the property\n      return;\n    }\n\n    let additionalProperties: S['additionalProperties'] = {};\n    if (typeof schema.additionalProperties !== 'boolean') {\n      if (REF_KEY in schema.additionalProperties!) {\n        additionalProperties = retrieveSchema<T, S, F>(\n          validator,\n          { $ref: get(schema.additionalProperties, [REF_KEY]) } as S,\n          rootSchema,\n          formData as T\n        );\n      } else if ('type' in schema.additionalProperties!) {\n        additionalProperties = { ...schema.additionalProperties };\n      } else if (ANY_OF_KEY in schema.additionalProperties! || ONE_OF_KEY in schema.additionalProperties!) {\n        additionalProperties = {\n          type: 'object',\n          ...schema.additionalProperties,\n        };\n      } else {\n        additionalProperties = { type: guessType(get(formData, [key])) };\n      }\n    } else {\n      additionalProperties = { type: guessType(get(formData, [key])) };\n    }\n\n    // The type of our new key should match the additionalProperties value;\n    schema.properties[key] = additionalProperties;\n    // Set our additional property flag so we know it was dynamically added\n    set(schema.properties, [key, ADDITIONAL_PROPERTY_FLAG], true);\n  });\n\n  return schema;\n}\n\n/** Internal handler that retrieves an expanded schema that has had all of its conditions, additional properties,\n * references and dependencies resolved and merged into the `schema` given a `validator`, `rootSchema` and `rawFormData`\n * that is used to do the potentially recursive resolution. If `expandAllBranches` is true, then all possible branches\n * of the schema and its references, conditions and dependencies are returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n * @param [expandAllBranches=false] - Flag, if true, will return all possible branches of conditions, any/oneOf and\n *          dependencies as a list of schemas\n * @param [recurseList=[]] - The optional, list of recursive references already processed\n * @returns - The schema(s) resulting from having its conditions, additional properties, references and dependencies\n *          resolved. Multiple schemas may be returned if `expandAllBranches` is true.\n */\nexport function retrieveSchemaInternal<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  rawFormData?: T,\n  expandAllBranches = false,\n  recurseList: string[] = []\n): S[] {\n  if (!isObject(schema)) {\n    return [{} as S];\n  }\n  const resolvedSchemas = resolveSchema<T, S, F>(\n    validator,\n    schema,\n    rootSchema,\n    expandAllBranches,\n    recurseList,\n    rawFormData\n  );\n  return resolvedSchemas.flatMap((s: S) => {\n    let resolvedSchema = s;\n    if (IF_KEY in resolvedSchema) {\n      return resolveCondition<T, S, F>(\n        validator,\n        resolvedSchema,\n        rootSchema,\n        expandAllBranches,\n        recurseList,\n        rawFormData as T\n      );\n    }\n    if (ALL_OF_KEY in resolvedSchema) {\n      // resolve allOf schemas\n      if (expandAllBranches) {\n        const { allOf, ...restOfSchema } = resolvedSchema;\n        return [...(allOf as S[]), restOfSchema as S];\n      }\n      try {\n        resolvedSchema = mergeAllOf(resolvedSchema, {\n          deep: false,\n        } as Options) as S;\n      } catch (e) {\n        console.warn('could not merge subschemas in allOf:\\n', e);\n        const { allOf, ...resolvedSchemaWithoutAllOf } = resolvedSchema;\n        return resolvedSchemaWithoutAllOf as S;\n      }\n    }\n    const hasAdditionalProperties =\n      ADDITIONAL_PROPERTIES_KEY in resolvedSchema && resolvedSchema.additionalProperties !== false;\n    if (hasAdditionalProperties) {\n      return stubExistingAdditionalProperties<T, S, F>(validator, resolvedSchema, rootSchema, rawFormData as T);\n    }\n\n    return resolvedSchema;\n  });\n}\n\n/** Resolves an `anyOf` or `oneOf` within a schema (if present) to the list of schemas returned from\n * `retrieveSchemaInternal()` for the best matching option. If `expandAllBranches` is true, then a list of schemas for ALL\n * options are retrieved and returned.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which retrieving a schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param [rawFormData] - The current formData, if any, to assist retrieving a schema, defaults to an empty object\n * @returns - Either an array containing the best matching option or all options if `expandAllBranches` is true\n */\nexport function resolveAnyOrOneOfSchemas<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(validator: ValidatorType<T, S, F>, schema: S, rootSchema: S, expandAllBranches: boolean, rawFormData?: T) {\n  let anyOrOneOf: S[] | undefined;\n  const { oneOf, anyOf, ...remaining } = schema;\n  if (Array.isArray(oneOf)) {\n    anyOrOneOf = oneOf as S[];\n  } else if (Array.isArray(anyOf)) {\n    anyOrOneOf = anyOf as S[];\n  }\n  if (anyOrOneOf) {\n    // Ensure that during expand all branches we pass an object rather than undefined so that all options are interrogated\n    const formData = rawFormData === undefined && expandAllBranches ? ({} as T) : rawFormData;\n    const discriminator = getDiscriminatorFieldFromSchema<S>(schema);\n    anyOrOneOf = anyOrOneOf.map((s) => {\n      // Due to anyOf/oneOf possibly using the same $ref we always pass a fresh recurse list array so that each option\n      // can resolve recursive references independently\n      return resolveAllReferences(s, rootSchema, []);\n    });\n    // Call this to trigger the set of isValid() calls that the schema parser will need\n    const option = getFirstMatchingOption<T, S, F>(validator, formData, anyOrOneOf, rootSchema, discriminator);\n    if (expandAllBranches) {\n      return anyOrOneOf.map((item) => mergeSchemas(remaining, item) as S);\n    }\n    schema = mergeSchemas(remaining, anyOrOneOf[option]) as S;\n  }\n  return [schema];\n}\n\n/** Resolves dependencies within a schema and its 'anyOf/oneOf' children. Passes the `expandAllBranches` flag down to\n * the `resolveAnyOrOneOfSchema()` and `processDependencies()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a dependency is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The list of schemas with their dependencies resolved\n */\nexport function resolveDependencies<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  // Drop the dependencies from the source schema.\n  const { dependencies, ...remainingSchema } = schema;\n  const resolvedSchemas = resolveAnyOrOneOfSchemas<T, S, F>(\n    validator,\n    remainingSchema as S,\n    rootSchema,\n    expandAllBranches,\n    formData\n  );\n  return resolvedSchemas.flatMap((resolvedSchema) =>\n    processDependencies<T, S, F>(\n      validator,\n      dependencies,\n      resolvedSchema,\n      rootSchema,\n      expandAllBranches,\n      recurseList,\n      formData\n    )\n  );\n}\n\n/** Processes all the `dependencies` recursively into the list of `resolvedSchema`s as needed. Passes the\n * `expandAllBranches` flag down to the `withDependentSchema()` and the recursive `processDependencies()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param dependencies - The set of dependencies that needs to be processed\n * @param resolvedSchema - The schema for which processing dependencies is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The schema with the `dependencies` resolved into it\n */\nexport function processDependencies<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  dependencies: S['dependencies'],\n  resolvedSchema: S,\n  rootSchema: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  let schemas = [resolvedSchema];\n  // Process dependencies updating the local schema properties as appropriate.\n  for (const dependencyKey in dependencies) {\n    // Skip this dependency if its trigger property is not present.\n    if (!expandAllBranches && get(formData, [dependencyKey]) === undefined) {\n      continue;\n    }\n    // Skip this dependency if it is not included in the schema (such as when dependencyKey is itself a hidden dependency.)\n    if (resolvedSchema.properties && !(dependencyKey in resolvedSchema.properties)) {\n      continue;\n    }\n    const [remainingDependencies, dependencyValue] = splitKeyElementFromObject(\n      dependencyKey,\n      dependencies as GenericObjectType\n    );\n    if (Array.isArray(dependencyValue)) {\n      schemas[0] = withDependentProperties<S>(resolvedSchema, dependencyValue);\n    } else if (isObject(dependencyValue)) {\n      schemas = withDependentSchema<T, S, F>(\n        validator,\n        resolvedSchema,\n        rootSchema,\n        dependencyKey,\n        dependencyValue as S,\n        expandAllBranches,\n        recurseList,\n        formData\n      );\n    }\n    return schemas.flatMap((schema) =>\n      processDependencies<T, S, F>(\n        validator,\n        remainingDependencies,\n        schema,\n        rootSchema,\n        expandAllBranches,\n        recurseList,\n        formData\n      )\n    );\n  }\n  return schemas;\n}\n\n/** Updates a schema with additionally required properties added\n *\n * @param schema - The schema for which resolving a dependent properties is desired\n * @param [additionallyRequired] - An optional array of additionally required names\n * @returns - The schema with the additional required values merged in\n */\nexport function withDependentProperties<S extends StrictRJSFSchema = RJSFSchema>(\n  schema: S,\n  additionallyRequired?: string[]\n) {\n  if (!additionallyRequired) {\n    return schema;\n  }\n  const required = Array.isArray(schema.required)\n    ? Array.from(new Set([...schema.required, ...additionallyRequired]))\n    : additionallyRequired;\n  return { ...schema, required: required };\n}\n\n/** Merges a dependent schema into the `schema` dealing with oneOfs and references. Passes the `expandAllBranches` flag\n * down to the `retrieveSchemaInternal()`, `resolveReference()` and `withExactlyOneSubschema()` helper calls.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param schema - The schema for which resolving a dependent schema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param dependencyKey - The key name of the dependency\n * @param dependencyValue - The potentially dependent schema\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData]- The current formData to assist retrieving a schema\n * @returns - The list of schemas with the dependent schema resolved into them\n */\nexport function withDependentSchema<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  dependencyKey: string,\n  dependencyValue: S,\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  const dependentSchemas = retrieveSchemaInternal<T, S, F>(\n    validator,\n    dependencyValue,\n    rootSchema,\n    formData,\n    expandAllBranches,\n    recurseList\n  );\n  return dependentSchemas.flatMap((dependent) => {\n    const { oneOf, ...dependentSchema } = dependent;\n    schema = mergeSchemas(schema, dependentSchema) as S;\n    // Since it does not contain oneOf, we return the original schema.\n    if (oneOf === undefined) {\n      return schema;\n    }\n    // Resolve $refs inside oneOf.\n    const resolvedOneOfs = oneOf.map((subschema) => {\n      if (typeof subschema === 'boolean' || !(REF_KEY in subschema)) {\n        return [subschema as S];\n      }\n      return resolveReference<T, S, F>(validator, subschema as S, rootSchema, expandAllBranches, recurseList, formData);\n    });\n    const allPermutations = getAllPermutationsOfXxxOf(resolvedOneOfs);\n    return allPermutations.flatMap((resolvedOneOf) =>\n      withExactlyOneSubschema<T, S, F>(\n        validator,\n        schema,\n        rootSchema,\n        dependencyKey,\n        resolvedOneOf,\n        expandAllBranches,\n        recurseList,\n        formData\n      )\n    );\n  });\n}\n\n/** Returns a list of `schema`s with the best choice from the `oneOf` options merged into it. If `expandAllBranches` is\n * true, then a list of schemas for ALL options are retrieved and returned. Passes the `expandAllBranches` flag down to\n * the `retrieveSchemaInternal()` helper call.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used to validate oneOf options\n * @param schema - The schema for which resolving a oneOf subschema is desired\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param dependencyKey - The key name of the oneOf dependency\n * @param oneOf - The list of schemas representing the oneOf options\n * @param expandAllBranches - Flag, if true, will return all possible branches of conditions, any/oneOf and dependencies\n *          as a list of schemas\n * @param recurseList - The list of recursive references already processed\n * @param [formData] - The current formData to assist retrieving a schema\n * @returns - Either an array containing the best matching option or all options if `expandAllBranches` is true\n */\nexport function withExactlyOneSubschema<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  rootSchema: S,\n  dependencyKey: string,\n  oneOf: S['oneOf'],\n  expandAllBranches: boolean,\n  recurseList: string[],\n  formData?: T\n): S[] {\n  const validSubschemas = oneOf!.filter((subschema) => {\n    if (typeof subschema === 'boolean' || !subschema || !subschema.properties) {\n      return false;\n    }\n    const { [dependencyKey]: conditionPropertySchema } = subschema.properties;\n    if (conditionPropertySchema) {\n      const conditionSchema: S = {\n        type: 'object',\n        properties: {\n          [dependencyKey]: conditionPropertySchema,\n        },\n      } as S;\n      return validator.isValid(conditionSchema, formData, rootSchema) || expandAllBranches;\n    }\n    return false;\n  });\n\n  if (!expandAllBranches && validSubschemas!.length !== 1) {\n    console.warn(\"ignoring oneOf in dependencies because there isn't exactly one subschema that is valid\");\n    return [schema];\n  }\n  return validSubschemas.flatMap((s) => {\n    const subschema: S = s as S;\n    const [dependentSubschema] = splitKeyElementFromObject(dependencyKey, subschema.properties as GenericObjectType);\n    const dependentSchema = { ...subschema, properties: dependentSubschema };\n    const schemas = retrieveSchemaInternal<T, S, F>(\n      validator,\n      dependentSchema,\n      rootSchema,\n      formData,\n      expandAllBranches,\n      recurseList\n    );\n    return schemas.map((s) => mergeSchemas(schema, s) as S);\n  });\n}\n","import get from 'lodash/get';\nimport has from 'lodash/has';\nimport isNumber from 'lodash/isNumber';\nimport isObject from 'lodash/isObject';\nimport isString from 'lodash/isString';\nimport reduce from 'lodash/reduce';\nimport times from 'lodash/times';\n\nimport getFirstMatchingOption from './getFirstMatchingOption';\nimport retrieveSchema, { resolveAllReferences } from './retrieveSchema';\nimport { ONE_OF_KEY, REF_KEY, JUNK_OPTION_ID, ANY_OF_KEY } from '../constants';\nimport guessType from '../guessType';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport getOptionMatchingSimpleDiscriminator from '../getOptionMatchingSimpleDiscriminator';\n\n/** A junk option used to determine when the getFirstMatchingOption call really matches an option rather than returning\n * the first item\n */\nexport const JUNK_OPTION: StrictRJSFSchema = {\n  type: 'object',\n  $id: JUNK_OPTION_ID,\n  properties: {\n    __not_really_there__: {\n      type: 'number',\n    },\n  },\n};\n\n/** Recursive function that calculates the score of a `formData` against the given `schema`. The computation is fairly\n * simple. Initially the total score is 0. When `schema.properties` object exists, then all the `key/value` pairs within\n * the object are processed as follows after obtaining the formValue from `formData` using the `key`:\n * - If the `value` contains a `$ref`, `calculateIndexScore()` is called recursively with the formValue and the new\n *   schema that is the result of the ref in the schema being resolved and that sub-schema's resulting score is added to\n *   the total.\n * - If the `value` contains a `oneOf` and there is a formValue, then score based on the index returned from calling\n *   `getClosestMatchingOption()` of that oneOf.\n * - If the type of the `value` is 'object', `calculateIndexScore()` is called recursively with the formValue and the\n *   `value` itself as the sub-schema, and the score is added to the total.\n * - If the type of the `value` matches the guessed-type of the `formValue`, the score is incremented by 1, UNLESS the\n *   value has a `default` or `const`. In those case, if the `default` or `const` and the `formValue` match, the score\n *   is incremented by another 1 otherwise it is decremented by 1.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param schema - The schema for which the score is being calculated\n * @param formData - The form data associated with the schema, used to calculate the score\n * @returns - The score a schema against the formData\n */\nexport function calculateIndexScore<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  rootSchema: S,\n  schema?: S,\n  formData: any = {}\n): number {\n  let totalScore = 0;\n  if (schema) {\n    if (isObject(schema.properties)) {\n      totalScore += reduce(\n        schema.properties,\n        (score, value, key) => {\n          const formValue = get(formData, key);\n          if (typeof value === 'boolean') {\n            return score;\n          }\n          if (has(value, REF_KEY)) {\n            const newSchema = retrieveSchema<T, S, F>(validator, value as S, rootSchema, formValue);\n            return score + calculateIndexScore<T, S, F>(validator, rootSchema, newSchema, formValue || {});\n          }\n          if ((has(value, ONE_OF_KEY) || has(value, ANY_OF_KEY)) && formValue) {\n            const key = has(value, ONE_OF_KEY) ? ONE_OF_KEY : ANY_OF_KEY;\n            const discriminator = getDiscriminatorFieldFromSchema<S>(value as S);\n            return (\n              score +\n              getClosestMatchingOption<T, S, F>(\n                validator,\n                rootSchema,\n                formValue,\n                get(value, key) as S[],\n                -1,\n                discriminator\n              )\n            );\n          }\n          if (value.type === 'object') {\n            return score + calculateIndexScore<T, S, F>(validator, rootSchema, value as S, formValue || {});\n          }\n          if (value.type === guessType(formValue)) {\n            // If the types match, then we bump the score by one\n            let newScore = score + 1;\n            if (value.default) {\n              // If the schema contains a readonly default value score the value that matches the default higher and\n              // any non-matching value lower\n              newScore += formValue === value.default ? 1 : -1;\n            } else if (value.const) {\n              // If the schema contains a const value score the value that matches the default higher and\n              // any non-matching value lower\n              newScore += formValue === value.const ? 1 : -1;\n            }\n            // TODO eventually, deal with enums/arrays\n            return newScore;\n          }\n          return score;\n        },\n        0\n      );\n    } else if (isString(schema.type) && schema.type === guessType(formData)) {\n      totalScore += 1;\n    }\n  }\n  return totalScore;\n}\n\n/** Determines which of the given `options` provided most closely matches the `formData`. Using\n * `getFirstMatchingOption()` to match two schemas that differ only by the readOnly, default or const value of a field\n * based on the `formData` and returns 0 when there is no match. Rather than passing in all the `options` at once to\n * this utility, instead an array of valid option indexes is created by iterating over the list of options, call\n * `getFirstMatchingOptions` with a list of one junk option and one good option, seeing if the good option is considered\n * matched.\n *\n * Once the list of valid indexes is created, if there is only one valid index, just return it. Otherwise, if there are\n * no valid indexes, then fill the valid indexes array with the indexes of all the options. Next, the index of the\n * option with the highest score is determined by iterating over the list of valid options, calling\n * `calculateIndexScore()` on each, comparing it against the current best score, and returning the index of the one that\n * eventually has the best score.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param formData - The form data associated with the schema\n * @param options - The list of options that can be selected from\n * @param [selectedOption=-1] - The index of the currently selected option, defaulted to -1 if not specified\n * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n *          determine which option is selected\n * @returns - The index of the option that is the closest match to the `formData` or the `selectedOption` if no match\n */\nexport default function getClosestMatchingOption<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  rootSchema: S,\n  formData: T | undefined,\n  options: S[],\n  selectedOption = -1,\n  discriminatorField?: string\n): number {\n  // First resolve any refs in the options\n  const resolvedOptions = options.map((option) => {\n    return resolveAllReferences<S>(option, rootSchema, []);\n  });\n\n  const simpleDiscriminatorMatch = getOptionMatchingSimpleDiscriminator(formData, options, discriminatorField);\n  if (isNumber(simpleDiscriminatorMatch)) {\n    return simpleDiscriminatorMatch;\n  }\n\n  // Reduce the array of options down to a list of the indexes that are considered matching options\n  const allValidIndexes = resolvedOptions.reduce((validList: number[], option, index: number) => {\n    const testOptions: S[] = [JUNK_OPTION as S, option];\n    const match = getFirstMatchingOption<T, S, F>(validator, formData, testOptions, rootSchema, discriminatorField);\n    // The match is the real option, so add its index to list of valid indexes\n    if (match === 1) {\n      validList.push(index);\n    }\n    return validList;\n  }, []);\n\n  // There is only one valid index, so return it!\n  if (allValidIndexes.length === 1) {\n    return allValidIndexes[0];\n  }\n  if (!allValidIndexes.length) {\n    // No indexes were valid, so we'll score all the options, add all the indexes\n    times(resolvedOptions.length, (i) => allValidIndexes.push(i));\n  }\n  type BestType = { bestIndex: number; bestScore: number };\n  const scoreCount = new Set<number>();\n  // Score all the options in the list of valid indexes and return the index with the best score\n  const { bestIndex }: BestType = allValidIndexes.reduce(\n    (scoreData: BestType, index: number) => {\n      const { bestScore } = scoreData;\n      const option = resolvedOptions[index];\n      const score = calculateIndexScore(validator, rootSchema, option, formData);\n      scoreCount.add(score);\n      if (score > bestScore) {\n        return { bestIndex: index, bestScore: score };\n      }\n      return scoreData;\n    },\n    { bestIndex: selectedOption, bestScore: 0 }\n  );\n  // if all scores are the same go with selectedOption\n  if (scoreCount.size === 1 && selectedOption >= 0) {\n    return selectedOption;\n  }\n\n  return bestIndex;\n}\n","import isObject from './isObject';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Detects whether the given `schema` contains fixed items. This is the case when `schema.items` is a non-empty array\n * that only contains objects.\n *\n * @param schema - The schema in which to check for fixed items\n * @returns - True if there are fixed items in the schema, false otherwise\n */\nexport default function isFixedItems<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  return Array.isArray(schema.items) && schema.items.length > 0 && schema.items.every((item) => isObject(item));\n}\n","import get from 'lodash/get';\n\nimport isObject from './isObject';\nimport { GenericObjectType } from '../src';\n\n/** Merges the `defaults` object of type `T` into the `formData` of type `T`\n *\n * When merging defaults and form data, we want to merge in this specific way:\n * - objects are deeply merged\n * - arrays are merged in such a way that:\n *   - when the array is set in form data, only array entries set in form data\n *     are deeply merged; additional entries from the defaults are ignored unless `mergeExtraArrayDefaults` is true, in\n *     which case the extras are appended onto the end of the form data\n *   - when the array is not set in form data, the default is copied over\n * - scalars are overwritten/set by form data\n *\n * @param [defaults] - The defaults to merge\n * @param [formData] - The form data into which the defaults will be merged\n * @param [mergeExtraArrayDefaults=false] - If true, any additional default array entries are appended onto the formData\n * @returns - The resulting merged form data with defaults\n */\nexport default function mergeDefaultsWithFormData<T = any>(\n  defaults?: T,\n  formData?: T,\n  mergeExtraArrayDefaults = false\n): T | undefined {\n  if (Array.isArray(formData)) {\n    const defaultsArray = Array.isArray(defaults) ? defaults : [];\n    const mapped = formData.map((value, idx) => {\n      if (defaultsArray[idx]) {\n        return mergeDefaultsWithFormData<any>(defaultsArray[idx], value, mergeExtraArrayDefaults);\n      }\n      return value;\n    });\n    // Merge any extra defaults when mergeExtraArrayDefaults is true\n    if (mergeExtraArrayDefaults && mapped.length < defaultsArray.length) {\n      mapped.push(...defaultsArray.slice(mapped.length));\n    }\n    return mapped as unknown as T;\n  }\n  if (isObject(formData)) {\n    const acc: { [key in keyof T]: any } = Object.assign({}, defaults); // Prevent mutation of source object.\n    return Object.keys(formData as GenericObjectType).reduce((acc, key) => {\n      acc[key as keyof T] = mergeDefaultsWithFormData<T>(\n        defaults ? get(defaults, key) : {},\n        get(formData, key),\n        mergeExtraArrayDefaults\n      );\n      return acc;\n    }, acc);\n  }\n  return formData;\n}\n","import isObject from './isObject';\nimport { GenericObjectType } from './types';\n\n/** Recursively merge deeply nested objects.\n *\n * @param obj1 - The first object to merge\n * @param obj2 - The second object to merge\n * @param [concatArrays=false] - Optional flag that, when true, will cause arrays to be concatenated. Use\n *          \"preventDuplicates\" to merge arrays in a manner that prevents any duplicate entries from being merged.\n *          NOTE: Uses shallow comparison for the duplicate checking.\n * @returns - A new object that is the merge of the two given objects\n */\nexport default function mergeObjects(\n  obj1: GenericObjectType,\n  obj2: GenericObjectType,\n  concatArrays: boolean | 'preventDuplicates' = false\n) {\n  return Object.keys(obj2).reduce((acc, key) => {\n    const left = obj1 ? obj1[key] : {},\n      right = obj2[key];\n    if (obj1 && key in obj1 && isObject(right)) {\n      acc[key] = mergeObjects(left, right, concatArrays);\n    } else if (concatArrays && Array.isArray(left) && Array.isArray(right)) {\n      let toMerge = right;\n      if (concatArrays === 'preventDuplicates') {\n        toMerge = right.reduce((result, value) => {\n          if (!left.includes(value)) {\n            result.push(value);\n          }\n          return result;\n        }, []);\n      }\n      acc[key] = left.concat(toMerge);\n    } else {\n      acc[key] = right;\n    }\n    return acc;\n  }, Object.assign({}, obj1)); // Prevent mutation of source object.\n}\n","import isConstant from '../isConstant';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport retrieveSchema from './retrieveSchema';\n\n/** Checks to see if the `schema` combination represents a select\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which check for a select flag is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema contains a select, otherwise false\n */\nexport default function isSelect<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  theSchema: S,\n  rootSchema: S = {} as S\n) {\n  const schema = retrieveSchema<T, S, F>(validator, theSchema, rootSchema, undefined);\n  const altSchemas = schema.oneOf || schema.anyOf;\n  if (Array.isArray(schema.enum)) {\n    return true;\n  }\n  if (Array.isArray(altSchemas)) {\n    return altSchemas.every((altSchemas) => typeof altSchemas !== 'boolean' && isConstant(altSchemas));\n  }\n  return false;\n}\n","import { CONST_KEY } from './constants';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** This function checks if the given `schema` matches a single constant value. This happens when either the schema has\n * an `enum` array with a single value or there is a `const` defined.\n *\n * @param schema - The schema for a field\n * @returns - True if the `schema` has a single constant value, false otherwise\n */\nexport default function isConstant<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  return (Array.isArray(schema.enum) && schema.enum.length === 1) || CONST_KEY in schema;\n}\n","import { FormContextType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\n\nimport isSelect from './isSelect';\n\n/** Checks to see if the `schema` combination represents a multi-select\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which check for a multi-select flag is desired\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema contains a multi-select, otherwise false\n */\nexport default function isMultiSelect<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(validator: ValidatorType<T, S, F>, schema: S, rootSchema?: S) {\n  if (!schema.uniqueItems || !schema.items || typeof schema.items === 'boolean') {\n    return false;\n  }\n  return isSelect<T, S, F>(validator, schema.items as S, rootSchema);\n}\n","import get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\n\nimport {\n  ANY_OF_KEY,\n  DEFAULT_KEY,\n  DEPENDENCIES_KEY,\n  PROPERTIES_KEY,\n  ONE_OF_KEY,\n  REF_KEY,\n  ALL_OF_KEY,\n} from '../constants';\nimport findSchemaDefinition from '../findSchemaDefinition';\nimport getClosestMatchingOption from './getClosestMatchingOption';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport getSchemaType from '../getSchemaType';\nimport isObject from '../isObject';\nimport isFixedItems from '../isFixedItems';\nimport mergeDefaultsWithFormData from '../mergeDefaultsWithFormData';\nimport mergeObjects from '../mergeObjects';\nimport mergeSchemas from '../mergeSchemas';\nimport {\n  Experimental_DefaultFormStateBehavior,\n  FormContextType,\n  GenericObjectType,\n  RJSFSchema,\n  StrictRJSFSchema,\n  ValidatorType,\n} from '../types';\nimport isMultiSelect from './isMultiSelect';\nimport retrieveSchema, { resolveDependencies } from './retrieveSchema';\n\n/** Enum that indicates how `schema.additionalItems` should be handled by the `getInnerSchemaForArrayItem()` function.\n */\nexport enum AdditionalItemsHandling {\n  Ignore,\n  Invert,\n  Fallback,\n}\n\n/** Given a `schema` will return an inner schema that for an array item. This is computed differently based on the\n * `additionalItems` enum and the value of `idx`. There are four possible returns:\n * 1. If `idx` is >= 0, then if `schema.items` is an array the `idx`th element of the array is returned if it is a valid\n *    index and not a boolean, otherwise it falls through to 3.\n * 2. If `schema.items` is not an array AND truthy and not a boolean, then `schema.items` is returned since it actually\n *    is a schema, otherwise it falls through to 3.\n * 3. If `additionalItems` is not `AdditionalItemsHandling.Ignore` and `schema.additionalItems` is an object, then\n *    `schema.additionalItems` is returned since it actually is a schema, otherwise it falls through to 4.\n * 4. {} is returned representing an empty schema\n *\n * @param schema - The schema from which to get the particular item\n * @param [additionalItems=AdditionalItemsHandling.Ignore] - How do we want to handle additional items?\n * @param [idx=-1] - Index, if non-negative, will be used to return the idx-th element in a `schema.items` array\n * @returns - The best fit schema object from the `schema` given the `additionalItems` and `idx` modifiers\n */\nexport function getInnerSchemaForArrayItem<S extends StrictRJSFSchema = RJSFSchema>(\n  schema: S,\n  additionalItems: AdditionalItemsHandling = AdditionalItemsHandling.Ignore,\n  idx = -1\n): S {\n  if (idx >= 0) {\n    if (Array.isArray(schema.items) && idx < schema.items.length) {\n      const item = schema.items[idx];\n      if (typeof item !== 'boolean') {\n        return item as S;\n      }\n    }\n  } else if (schema.items && !Array.isArray(schema.items) && typeof schema.items !== 'boolean') {\n    return schema.items as S;\n  }\n  if (additionalItems !== AdditionalItemsHandling.Ignore && isObject(schema.additionalItems)) {\n    return schema.additionalItems as S;\n  }\n  return {} as S;\n}\n\n/** Either add `computedDefault` at `key` into `obj` or not add it based on its value, the value of\n * `includeUndefinedValues`, the value of `emptyObjectFields` and if its parent field is required. Generally undefined\n * `computedDefault` values are added only when `includeUndefinedValues` is either true/\"excludeObjectChildren\". If `\n * includeUndefinedValues` is false and `emptyObjectFields` is not \"skipDefaults\", then non-undefined and non-empty-object\n * values will be added based on certain conditions.\n *\n * @param obj - The object into which the computed default may be added\n * @param key - The key into the object at which the computed default may be added\n * @param computedDefault - The computed default value that maybe should be added to the obj\n * @param includeUndefinedValues - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties. If \"allowEmptyObject\", prevents undefined\n *          values in this object while allow the object itself to be empty and passing `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param isParentRequired - The optional boolean that indicates whether the parent field is required\n * @param requiredFields - The list of fields that are required\n * @param experimental_defaultFormStateBehavior - Optional configuration object, if provided, allows users to override\n *        default form state behavior\n */\nfunction maybeAddDefaultToObject<T = any>(\n  obj: GenericObjectType,\n  key: string,\n  computedDefault: T | T[] | undefined,\n  includeUndefinedValues: boolean | 'excludeObjectChildren',\n  isParentRequired?: boolean,\n  requiredFields: string[] = [],\n  experimental_defaultFormStateBehavior: Experimental_DefaultFormStateBehavior = {}\n) {\n  const { emptyObjectFields = 'populateAllDefaults' } = experimental_defaultFormStateBehavior;\n  if (includeUndefinedValues) {\n    obj[key] = computedDefault;\n  } else if (emptyObjectFields !== 'skipDefaults') {\n    if (isObject(computedDefault)) {\n      // If isParentRequired is undefined, then we are at the root level of the schema so defer to the requiredness of\n      // the field key itself in the `requiredField` list\n      const isSelfOrParentRequired = isParentRequired === undefined ? requiredFields.includes(key) : isParentRequired;\n\n      // If emptyObjectFields 'skipEmptyDefaults' store computedDefault if it's a non-empty object(e.g. not {})\n      if (emptyObjectFields === 'skipEmptyDefaults') {\n        if (!isEmpty(computedDefault)) {\n          obj[key] = computedDefault;\n        }\n      }\n      // Else store computedDefault if it's a non-empty object(e.g. not {}) and satisfies certain conditions\n      // Condition 1: If computedDefault is not empty or if the key is a required field\n      // Condition 2: If the parent object is required or emptyObjectFields is not 'populateRequiredDefaults'\n      else if (\n        (!isEmpty(computedDefault) || requiredFields.includes(key)) &&\n        (isSelfOrParentRequired || emptyObjectFields !== 'populateRequiredDefaults')\n      ) {\n        obj[key] = computedDefault;\n      }\n    } else if (\n      // Store computedDefault if it's a defined primitive (e.g., true) and satisfies certain conditions\n      // Condition 1: computedDefault is not undefined\n      // Condition 2: If emptyObjectFields is 'populateAllDefaults' or 'skipEmptyDefaults) or if the key is a required field\n      computedDefault !== undefined &&\n      (emptyObjectFields === 'populateAllDefaults' ||\n        emptyObjectFields === 'skipEmptyDefaults' ||\n        requiredFields.includes(key))\n    ) {\n      obj[key] = computedDefault;\n    }\n  }\n}\n\ninterface ComputeDefaultsProps<T = any, S extends StrictRJSFSchema = RJSFSchema> {\n  parentDefaults?: T;\n  rootSchema?: S;\n  rawFormData?: T;\n  includeUndefinedValues?: boolean | 'excludeObjectChildren';\n  _recurseList?: string[];\n  experimental_defaultFormStateBehavior?: Experimental_DefaultFormStateBehavior;\n  required?: boolean;\n}\n\n/** Computes the defaults for the current `schema` given the `rawFormData` and `parentDefaults` if any. This drills into\n * each level of the schema, recursively, to fill out every level of defaults provided by the schema.\n *\n * @param validator - an implementation of the `ValidatorType` interface that will be used when necessary\n * @param rawSchema - The schema for which the default state is desired\n * @param [props] - Optional props for this function\n * @param [props.parentDefaults] - Any defaults provided by the parent field in the schema\n * @param [props.rootSchema] - The options root schema, used to primarily to look up `$ref`s\n * @param [props.rawFormData] - The current formData, if any, onto which to provide any missing defaults\n * @param [props.includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param [props._recurseList=[]] - The list of ref names currently being recursed, used to prevent infinite recursion\n * @param [props.experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @param [props.required] - Optional flag, if true, indicates this schema was required in the parent schema.\n * @returns - The resulting `formData` with all the defaults provided\n */\nexport function computeDefaults<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  rawSchema: S,\n  {\n    parentDefaults,\n    rawFormData,\n    rootSchema = {} as S,\n    includeUndefinedValues = false,\n    _recurseList = [],\n    experimental_defaultFormStateBehavior = undefined,\n    required,\n  }: ComputeDefaultsProps<T, S> = {}\n): T | T[] | undefined {\n  const formData: T = (isObject(rawFormData) ? rawFormData : {}) as T;\n  const schema: S = isObject(rawSchema) ? rawSchema : ({} as S);\n  // Compute the defaults recursively: give highest priority to deepest nodes.\n  let defaults: T | T[] | undefined = parentDefaults;\n  // If we get a new schema, then we need to recompute defaults again for the new schema found.\n  let schemaToCompute: S | null = null;\n  let updatedRecurseList = _recurseList;\n\n  if (isObject(defaults) && isObject(schema.default)) {\n    // For object defaults, only override parent defaults that are defined in\n    // schema.default.\n    defaults = mergeObjects(defaults!, schema.default as GenericObjectType) as T;\n  } else if (DEFAULT_KEY in schema) {\n    defaults = schema.default as unknown as T;\n  } else if (REF_KEY in schema) {\n    const refName = schema[REF_KEY];\n    // Use referenced schema defaults for this node.\n    if (!_recurseList.includes(refName!)) {\n      updatedRecurseList = _recurseList.concat(refName!);\n      schemaToCompute = findSchemaDefinition<S>(refName, rootSchema);\n    }\n  } else if (DEPENDENCIES_KEY in schema) {\n    const resolvedSchema = resolveDependencies<T, S, F>(validator, schema, rootSchema, false, [], formData);\n    schemaToCompute = resolvedSchema[0]; // pick the first element from resolve dependencies\n  } else if (isFixedItems(schema)) {\n    defaults = (schema.items! as S[]).map((itemSchema: S, idx: number) =>\n      computeDefaults<T, S>(validator, itemSchema, {\n        rootSchema,\n        includeUndefinedValues,\n        _recurseList,\n        experimental_defaultFormStateBehavior,\n        parentDefaults: Array.isArray(parentDefaults) ? parentDefaults[idx] : undefined,\n        rawFormData: formData as T,\n        required,\n      })\n    ) as T[];\n  } else if (ONE_OF_KEY in schema) {\n    const { oneOf, ...remaining } = schema;\n    if (oneOf!.length === 0) {\n      return undefined;\n    }\n    const discriminator = getDiscriminatorFieldFromSchema<S>(schema);\n    schemaToCompute = oneOf![\n      getClosestMatchingOption<T, S, F>(\n        validator,\n        rootSchema,\n        isEmpty(formData) ? undefined : formData,\n        oneOf as S[],\n        0,\n        discriminator\n      )\n    ] as S;\n    schemaToCompute = mergeSchemas(remaining, schemaToCompute) as S;\n  } else if (ANY_OF_KEY in schema) {\n    const { anyOf, ...remaining } = schema;\n    if (anyOf!.length === 0) {\n      return undefined;\n    }\n    const discriminator = getDiscriminatorFieldFromSchema<S>(schema);\n    schemaToCompute = anyOf![\n      getClosestMatchingOption<T, S, F>(\n        validator,\n        rootSchema,\n        isEmpty(formData) ? undefined : formData,\n        anyOf as S[],\n        0,\n        discriminator\n      )\n    ] as S;\n    schemaToCompute = mergeSchemas(remaining, schemaToCompute) as S;\n  }\n\n  if (schemaToCompute) {\n    return computeDefaults<T, S, F>(validator, schemaToCompute, {\n      rootSchema,\n      includeUndefinedValues,\n      _recurseList: updatedRecurseList,\n      experimental_defaultFormStateBehavior,\n      parentDefaults: defaults as T | undefined,\n      rawFormData: formData as T,\n      required,\n    });\n  }\n\n  // No defaults defined for this node, fallback to generic typed ones.\n  if (defaults === undefined) {\n    defaults = schema.default as unknown as T;\n  }\n\n  switch (getSchemaType<S>(schema)) {\n    // We need to recurse for object schema inner default values.\n    case 'object': {\n      // This is a custom addition that fixes this issue:\n      // https://github.com/rjsf-team/react-jsonschema-form/issues/3832\n      const retrievedSchema =\n        experimental_defaultFormStateBehavior?.allOf === 'populateDefaults' && ALL_OF_KEY in schema\n          ? retrieveSchema<T, S, F>(validator, schema, rootSchema, formData)\n          : schema;\n      const objectDefaults = Object.keys(retrievedSchema.properties || {}).reduce(\n        (acc: GenericObjectType, key: string) => {\n          // Compute the defaults for this node, with the parent defaults we might\n          // have from a previous run: defaults[key].\n          const computedDefault = computeDefaults<T, S, F>(validator, get(retrievedSchema, [PROPERTIES_KEY, key]), {\n            rootSchema,\n            _recurseList,\n            experimental_defaultFormStateBehavior,\n            includeUndefinedValues: includeUndefinedValues === true,\n            parentDefaults: get(defaults, [key]),\n            rawFormData: get(formData, [key]),\n            required: retrievedSchema.required?.includes(key),\n          });\n          maybeAddDefaultToObject<T>(\n            acc,\n            key,\n            computedDefault,\n            includeUndefinedValues,\n            required,\n            retrievedSchema.required,\n            experimental_defaultFormStateBehavior\n          );\n          return acc;\n        },\n        {}\n      ) as T;\n      if (retrievedSchema.additionalProperties) {\n        // as per spec additionalProperties may be either schema or boolean\n        const additionalPropertiesSchema = isObject(retrievedSchema.additionalProperties)\n          ? retrievedSchema.additionalProperties\n          : {};\n\n        const keys = new Set<string>();\n        if (isObject(defaults)) {\n          Object.keys(defaults as GenericObjectType)\n            .filter((key) => !retrievedSchema.properties || !retrievedSchema.properties[key])\n            .forEach((key) => keys.add(key));\n        }\n        const formDataRequired: string[] = [];\n        Object.keys(formData as GenericObjectType)\n          .filter((key) => !retrievedSchema.properties || !retrievedSchema.properties[key])\n          .forEach((key) => {\n            keys.add(key);\n            formDataRequired.push(key);\n          });\n        keys.forEach((key) => {\n          const computedDefault = computeDefaults(validator, additionalPropertiesSchema as S, {\n            rootSchema,\n            _recurseList,\n            experimental_defaultFormStateBehavior,\n            includeUndefinedValues: includeUndefinedValues === true,\n            parentDefaults: get(defaults, [key]),\n            rawFormData: get(formData, [key]),\n            required: retrievedSchema.required?.includes(key),\n          });\n          // Since these are additional properties we don't need to add the `experimental_defaultFormStateBehavior` prop\n          maybeAddDefaultToObject<T>(\n            objectDefaults as GenericObjectType,\n            key,\n            computedDefault,\n            includeUndefinedValues,\n            required,\n            formDataRequired\n          );\n        });\n      }\n      return objectDefaults;\n    }\n    case 'array': {\n      const neverPopulate = experimental_defaultFormStateBehavior?.arrayMinItems?.populate === 'never';\n      const ignoreMinItemsFlagSet = experimental_defaultFormStateBehavior?.arrayMinItems?.populate === 'requiredOnly';\n      const isSkipEmptyDefaults = experimental_defaultFormStateBehavior?.emptyObjectFields === 'skipEmptyDefaults';\n      const computeSkipPopulate =\n        experimental_defaultFormStateBehavior?.arrayMinItems?.computeSkipPopulate ?? (() => false);\n\n      const emptyDefault = isSkipEmptyDefaults ? undefined : [];\n\n      // Inject defaults into existing array defaults\n      if (Array.isArray(defaults)) {\n        defaults = defaults.map((item, idx) => {\n          const schemaItem: S = getInnerSchemaForArrayItem<S>(schema, AdditionalItemsHandling.Fallback, idx);\n          return computeDefaults<T, S, F>(validator, schemaItem, {\n            rootSchema,\n            _recurseList,\n            experimental_defaultFormStateBehavior,\n            parentDefaults: item,\n            required,\n          });\n        }) as T[];\n      }\n\n      // Deeply inject defaults into already existing form data\n      if (Array.isArray(rawFormData)) {\n        const schemaItem: S = getInnerSchemaForArrayItem<S>(schema);\n        if (neverPopulate) {\n          defaults = rawFormData;\n        } else {\n          defaults = rawFormData.map((item: T, idx: number) => {\n            return computeDefaults<T, S, F>(validator, schemaItem, {\n              rootSchema,\n              _recurseList,\n              experimental_defaultFormStateBehavior,\n              rawFormData: item,\n              parentDefaults: get(defaults, [idx]),\n              required,\n            });\n          }) as T[];\n        }\n      }\n\n      if (neverPopulate) {\n        return defaults ?? emptyDefault;\n      }\n      if (ignoreMinItemsFlagSet && !required) {\n        // If no form data exists or defaults are set leave the field empty/non-existent, otherwise\n        // return form data/defaults\n        return defaults ? defaults : undefined;\n      }\n\n      const defaultsLength = Array.isArray(defaults) ? defaults.length : 0;\n      if (\n        !schema.minItems ||\n        isMultiSelect<T, S, F>(validator, schema, rootSchema) ||\n        computeSkipPopulate<T, S, F>(validator, schema, rootSchema) ||\n        schema.minItems <= defaultsLength\n      ) {\n        return defaults ? defaults : emptyDefault;\n      }\n\n      const defaultEntries: T[] = (defaults || []) as T[];\n      const fillerSchema: S = getInnerSchemaForArrayItem<S>(schema, AdditionalItemsHandling.Invert);\n      const fillerDefault = fillerSchema.default;\n\n      // Calculate filler entries for remaining items (minItems - existing raw data/defaults)\n      const fillerEntries: T[] = new Array(schema.minItems - defaultsLength).fill(\n        computeDefaults<any, S, F>(validator, fillerSchema, {\n          parentDefaults: fillerDefault,\n          rootSchema,\n          _recurseList,\n          experimental_defaultFormStateBehavior,\n          required,\n        })\n      ) as T[];\n      // then fill up the rest with either the item default or empty, up to minItems\n      return defaultEntries.concat(fillerEntries);\n    }\n  }\n\n  return defaults;\n}\n\n/** Returns the superset of `formData` that includes the given set updated to include any missing fields that have\n * computed to have defaults provided in the `schema`.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param theSchema - The schema for which the default state is desired\n * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n *          If \"excludeObjectChildren\", cause undefined values for this object and pass `includeUndefinedValues` as\n *          false when computing defaults for any nested object properties.\n * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @returns - The resulting `formData` with all the defaults provided\n */\nexport default function getDefaultFormState<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  theSchema: S,\n  formData?: T,\n  rootSchema?: S,\n  includeUndefinedValues: boolean | 'excludeObjectChildren' = false,\n  experimental_defaultFormStateBehavior?: Experimental_DefaultFormStateBehavior\n) {\n  if (!isObject(theSchema)) {\n    throw new Error('Invalid schema: ' + theSchema);\n  }\n  const schema = retrieveSchema<T, S, F>(validator, theSchema, rootSchema, formData);\n  const defaults = computeDefaults<T, S, F>(validator, schema, {\n    rootSchema,\n    includeUndefinedValues,\n    experimental_defaultFormStateBehavior,\n    rawFormData: formData,\n  });\n  if (formData === undefined || formData === null || (typeof formData === 'number' && isNaN(formData))) {\n    // No form data? Use schema defaults.\n    return defaults;\n  }\n  const { mergeExtraDefaults } = experimental_defaultFormStateBehavior?.arrayMinItems || {};\n  if (isObject(formData)) {\n    return mergeDefaultsWithFormData<T>(defaults as T, formData, mergeExtraDefaults);\n  }\n  if (Array.isArray(formData)) {\n    return mergeDefaultsWithFormData<T[]>(defaults as T[], formData, mergeExtraDefaults);\n  }\n  return formData;\n}\n","import getUiOptions from './getUiOptions';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, UiSchema } from './types';\n\n/** Checks to see if the `uiSchema` contains the `widget` field and that the widget is not `hidden`\n *\n * @param uiSchema - The UI Schema from which to detect if it is customized\n * @returns - True if the `uiSchema` describes a custom widget, false otherwise\n */\nexport default function isCustomWidget<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(uiSchema: UiSchema<T, S, F> = {}) {\n  return (\n    // TODO: Remove the `&& uiSchema['ui:widget'] !== 'hidden'` once we support hidden widgets for arrays.\n    // https://rjsf-team.github.io/react-jsonschema-form/docs/usage/widgets/#hidden-widgets\n    'widget' in getUiOptions<T, S, F>(uiSchema) && getUiOptions<T, S, F>(uiSchema)['widget'] !== 'hidden'\n  );\n}\n","import { UI_WIDGET_KEY } from '../constants';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, UiSchema, ValidatorType } from '../types';\nimport retrieveSchema from './retrieveSchema';\n\n/** Checks to see if the `schema` and `uiSchema` combination represents an array of files\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which check for array of files flag is desired\n * @param [uiSchema={}] - The UI schema from which to check the widget\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @returns - True if schema/uiSchema contains an array of files, otherwise false\n */\nexport default function isFilesArray<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  uiSchema: UiSchema<T, S, F> = {},\n  rootSchema?: S\n) {\n  if (uiSchema[UI_WIDGET_KEY] === 'files') {\n    return true;\n  }\n  if (schema.items) {\n    const itemsSchema = retrieveSchema<T, S, F>(validator, schema.items as S, rootSchema);\n    return itemsSchema.type === 'string' && itemsSchema.format === 'data-url';\n  }\n  return false;\n}\n","import get from 'lodash/get';\nimport has from 'lodash/has';\n\nimport { FormContextType, GenericObjectType, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport { PROPERTIES_KEY, REF_KEY } from '../constants';\nimport retrieveSchema from './retrieveSchema';\n\nconst NO_VALUE = Symbol('no Value');\n\n/** Sanitize the `data` associated with the `oldSchema` so it is considered appropriate for the `newSchema`. If the new\n * schema does not contain any properties, then `undefined` is returned to clear all the form data. Due to the nature\n * of schemas, this sanitization happens recursively for nested objects of data. Also, any properties in the old schema\n * that are non-existent in the new schema are set to `undefined`. The data sanitization process has the following flow:\n *\n * - If the new schema is an object that contains a `properties` object then:\n *   - Create a `removeOldSchemaData` object, setting each key in the `oldSchema.properties` having `data` to undefined\n *   - Create an empty `nestedData` object for use in the key filtering below:\n *   - Iterate over each key in the `newSchema.properties` as follows:\n *     - Get the `formValue` of the key from the `data`\n *     - Get the `oldKeySchema` and `newKeyedSchema` for the key, defaulting to `{}` when it doesn't exist\n *     - Retrieve the schema for any refs within each `oldKeySchema` and/or `newKeySchema`\n *     - Get the types of the old and new keyed schemas and if the old doesn't exist or the old & new are the same then:\n *       - If `removeOldSchemaData` has an entry for the key, delete it since the new schema has the same property\n *       - If type of the key in the new schema is `object`:\n *         - Store the value from the recursive `sanitizeDataForNewSchema` call in `nestedData[key]`\n *       - Otherwise, check for default or const values:\n *         - Get the old and new `default` values from the schema and check:\n *           - If the new `default` value does not match the form value:\n *             - If the old `default` value DOES match the form value, then:\n *               - Replace `removeOldSchemaData[key]` with the new `default`\n *               - Otherwise, if the new schema is `readOnly` then replace `removeOldSchemaData[key]` with undefined\n *         - Get the old and new `const` values from the schema and check:\n *           - If the new `const` value does not match the form value:\n *           - If the old `const` value DOES match the form value, then:\n *             - Replace `removeOldSchemaData[key]` with the new `const`\n *             - Otherwise, replace `removeOldSchemaData[key]` with undefined\n *   - Once all keys have been processed, return an object built as follows:\n *     - `{ ...removeOldSchemaData, ...nestedData, ...pick(data, keysToKeep) }`\n * - If the new and old schema types are array and the `data` is an array then:\n *   - If the type of the old and new schema `items` are a non-array objects:\n *     - Retrieve the schema for any refs within each `oldKeySchema.items` and/or `newKeySchema.items`\n *     - If the `type`s of both items are the same (or the old does not have a type):\n *       - If the type is \"object\", then:\n *         - For each element in the `data` recursively sanitize the data, stopping at `maxItems` if specified\n *       - Otherwise, just return the `data` removing any values after `maxItems` if it is set\n *   - If the type of the old and new schema `items` are booleans of the same value, return `data` as is\n * - Otherwise return `undefined`\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param rootSchema - The root JSON schema of the entire form\n * @param [newSchema] - The new schema for which the data is being sanitized\n * @param [oldSchema] - The old schema from which the data originated\n * @param [data={}] - The form data associated with the schema, defaulting to an empty object when undefined\n * @returns - The new form data, with all the fields uniquely associated with the old schema set\n *      to `undefined`. Will return `undefined` if the new schema is not an object containing properties.\n */\nexport default function sanitizeDataForNewSchema<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(validator: ValidatorType<T, S, F>, rootSchema: S, newSchema?: S, oldSchema?: S, data: any = {}): T {\n  // By default, we will clear the form data\n  let newFormData;\n  // If the new schema is of type object and that object contains a list of properties\n  if (has(newSchema, PROPERTIES_KEY)) {\n    // Create an object containing root-level keys in the old schema, setting each key to undefined to remove the data\n    const removeOldSchemaData: GenericObjectType = {};\n    if (has(oldSchema, PROPERTIES_KEY)) {\n      const properties = get(oldSchema, PROPERTIES_KEY, {});\n      Object.keys(properties).forEach((key) => {\n        if (has(data, key)) {\n          removeOldSchemaData[key] = undefined;\n        }\n      });\n    }\n    const keys: string[] = Object.keys(get(newSchema, PROPERTIES_KEY, {}));\n    // Create a place to store nested data that will be a side-effect of the filter\n    const nestedData: GenericObjectType = {};\n    keys.forEach((key) => {\n      const formValue = get(data, key);\n      let oldKeyedSchema: S = get(oldSchema, [PROPERTIES_KEY, key], {});\n      let newKeyedSchema: S = get(newSchema, [PROPERTIES_KEY, key], {});\n      // Resolve the refs if they exist\n      if (has(oldKeyedSchema, REF_KEY)) {\n        oldKeyedSchema = retrieveSchema<T, S, F>(validator, oldKeyedSchema, rootSchema, formValue);\n      }\n      if (has(newKeyedSchema, REF_KEY)) {\n        newKeyedSchema = retrieveSchema<T, S, F>(validator, newKeyedSchema, rootSchema, formValue);\n      }\n      // Now get types and see if they are the same\n      const oldSchemaTypeForKey = get(oldKeyedSchema, 'type');\n      const newSchemaTypeForKey = get(newKeyedSchema, 'type');\n      // Check if the old option has the same key with the same type\n      if (!oldSchemaTypeForKey || oldSchemaTypeForKey === newSchemaTypeForKey) {\n        if (has(removeOldSchemaData, key)) {\n          // SIDE-EFFECT: remove the undefined value for a key that has the same type between the old and new schemas\n          delete removeOldSchemaData[key];\n        }\n        // If it is an object, we'll recurse and store the resulting sanitized data for the key\n        if (newSchemaTypeForKey === 'object' || (newSchemaTypeForKey === 'array' && Array.isArray(formValue))) {\n          // SIDE-EFFECT: process the new schema type of object recursively to save iterations\n          const itemData = sanitizeDataForNewSchema<T, S, F>(\n            validator,\n            rootSchema,\n            newKeyedSchema,\n            oldKeyedSchema,\n            formValue\n          );\n          if (itemData !== undefined || newSchemaTypeForKey === 'array') {\n            // only put undefined values for the array type and not the object type\n            nestedData[key] = itemData;\n          }\n        } else {\n          // Ok, the non-object types match, let's make sure that a default or a const of a different value is replaced\n          // with the new default or const. This allows the case where two schemas differ that only by the default/const\n          // value to be properly selected\n          const newOptionDefault = get(newKeyedSchema, 'default', NO_VALUE);\n          const oldOptionDefault = get(oldKeyedSchema, 'default', NO_VALUE);\n          if (newOptionDefault !== NO_VALUE && newOptionDefault !== formValue) {\n            if (oldOptionDefault === formValue) {\n              // If the old default matches the formValue, we'll update the new value to match the new default\n              removeOldSchemaData[key] = newOptionDefault;\n            } else if (get(newKeyedSchema, 'readOnly') === true) {\n              // If the new schema has the default set to read-only, treat it like a const and remove the value\n              removeOldSchemaData[key] = undefined;\n            }\n          }\n\n          const newOptionConst = get(newKeyedSchema, 'const', NO_VALUE);\n          const oldOptionConst = get(oldKeyedSchema, 'const', NO_VALUE);\n          if (newOptionConst !== NO_VALUE && newOptionConst !== formValue) {\n            // Since this is a const, if the old value matches, replace the value with the new const otherwise clear it\n            removeOldSchemaData[key] = oldOptionConst === formValue ? newOptionConst : undefined;\n          }\n        }\n      }\n    });\n\n    newFormData = {\n      ...(typeof data == 'string' || Array.isArray(data) ? undefined : data),\n      ...removeOldSchemaData,\n      ...nestedData,\n    };\n    // First apply removing the old schema data, then apply the nested data, then apply the old data keys to keep\n  } else if (get(oldSchema, 'type') === 'array' && get(newSchema, 'type') === 'array' && Array.isArray(data)) {\n    let oldSchemaItems = get(oldSchema, 'items');\n    let newSchemaItems = get(newSchema, 'items');\n    // If any of the array types `items` are arrays (remember arrays are objects) then we'll just drop the data\n    // Eventually, we may want to deal with when either of the `items` are arrays since those tuple validations\n    if (\n      typeof oldSchemaItems === 'object' &&\n      typeof newSchemaItems === 'object' &&\n      !Array.isArray(oldSchemaItems) &&\n      !Array.isArray(newSchemaItems)\n    ) {\n      if (has(oldSchemaItems, REF_KEY)) {\n        oldSchemaItems = retrieveSchema<T, S, F>(validator, oldSchemaItems as S, rootSchema, data as T);\n      }\n      if (has(newSchemaItems, REF_KEY)) {\n        newSchemaItems = retrieveSchema<T, S, F>(validator, newSchemaItems as S, rootSchema, data as T);\n      }\n      // Now get types and see if they are the same\n      const oldSchemaType = get(oldSchemaItems, 'type');\n      const newSchemaType = get(newSchemaItems, 'type');\n      // Check if the old option has the same key with the same type\n      if (!oldSchemaType || oldSchemaType === newSchemaType) {\n        const maxItems = get(newSchema, 'maxItems', -1);\n        if (newSchemaType === 'object') {\n          newFormData = data.reduce((newValue, aValue) => {\n            const itemValue = sanitizeDataForNewSchema<T, S, F>(\n              validator,\n              rootSchema,\n              newSchemaItems as S,\n              oldSchemaItems as S,\n              aValue\n            );\n            if (itemValue !== undefined && (maxItems < 0 || newValue.length < maxItems)) {\n              newValue.push(itemValue);\n            }\n            return newValue;\n          }, []);\n        } else {\n          newFormData = maxItems > 0 && data.length > maxItems ? data.slice(0, maxItems) : data;\n        }\n      }\n    } else if (\n      typeof oldSchemaItems === 'boolean' &&\n      typeof newSchemaItems === 'boolean' &&\n      oldSchemaItems === newSchemaItems\n    ) {\n      // If they are both booleans and have the same value just return the data as is otherwise fall-thru to undefined\n      newFormData = data;\n    }\n    // Also probably want to deal with `prefixItems` as tuples with the latest 2020 draft\n  }\n  return newFormData as T;\n}\n","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\n\nimport { ALL_OF_KEY, DEPENDENCIES_KEY, ID_KEY, ITEMS_KEY, PROPERTIES_KEY, REF_KEY } from '../constants';\nimport isObject from '../isObject';\nimport { FormContextType, GenericObjectType, IdSchema, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport retrieveSchema from './retrieveSchema';\nimport getSchemaType from '../getSchemaType';\n\n/** An internal helper that generates an `IdSchema` object for the `schema`, recursively with protection against\n * infinite recursion\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `IdSchema` is desired\n * @param idPrefix - The prefix to use for the id\n * @param idSeparator - The separator to use for the path segments in the id\n * @param [id] - The base id for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [_recurseList=[]] - The list of retrieved schemas currently being recursed, used to prevent infinite recursion\n * @returns - The `IdSchema` object for the `schema`\n */\nfunction toIdSchemaInternal<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  idPrefix: string,\n  idSeparator: string,\n  id?: string | null,\n  rootSchema?: S,\n  formData?: T,\n  _recurseList: S[] = []\n): IdSchema<T> {\n  if (REF_KEY in schema || DEPENDENCIES_KEY in schema || ALL_OF_KEY in schema) {\n    const _schema = retrieveSchema<T, S, F>(validator, schema, rootSchema, formData);\n    const sameSchemaIndex = _recurseList.findIndex((item) => isEqual(item, _schema));\n    if (sameSchemaIndex === -1) {\n      return toIdSchemaInternal<T, S, F>(\n        validator,\n        _schema,\n        idPrefix,\n        idSeparator,\n        id,\n        rootSchema,\n        formData,\n        _recurseList.concat(_schema)\n      );\n    }\n  }\n  if (ITEMS_KEY in schema && !get(schema, [ITEMS_KEY, REF_KEY])) {\n    return toIdSchemaInternal<T, S, F>(\n      validator,\n      get(schema, ITEMS_KEY) as S,\n      idPrefix,\n      idSeparator,\n      id,\n      rootSchema,\n      formData,\n      _recurseList\n    );\n  }\n  const $id = id || idPrefix;\n  const idSchema: IdSchema<T> = { $id } as IdSchema<T>;\n  if (getSchemaType<S>(schema) === 'object' && PROPERTIES_KEY in schema) {\n    for (const name in schema.properties) {\n      const field = get(schema, [PROPERTIES_KEY, name]);\n      const fieldId = idSchema[ID_KEY] + idSeparator + name;\n      (idSchema as IdSchema<GenericObjectType>)[name] = toIdSchemaInternal<T, S, F>(\n        validator,\n        isObject(field) ? field : {},\n        idPrefix,\n        idSeparator,\n        fieldId,\n        rootSchema,\n        // It's possible that formData is not an object -- this can happen if an\n        // array item has just been added, but not populated with data yet\n        get(formData, [name]),\n        _recurseList\n      );\n    }\n  }\n  return idSchema;\n}\n\n/** Generates an `IdSchema` object for the `schema`, recursively\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `IdSchema` is desired\n * @param [id] - The base id for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [idPrefix='root'] - The prefix to use for the id\n * @param [idSeparator='_'] - The separator to use for the path segments in the id\n * @returns - The `IdSchema` object for the `schema`\n */\nexport default function toIdSchema<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  id?: string | null,\n  rootSchema?: S,\n  formData?: T,\n  idPrefix = 'root',\n  idSeparator = '_'\n): IdSchema<T> {\n  return toIdSchemaInternal<T, S, F>(validator, schema, idPrefix, idSeparator, id, rootSchema, formData);\n}\n","import get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\nimport set from 'lodash/set';\n\nimport {\n  ALL_OF_KEY,\n  ANY_OF_KEY,\n  ADDITIONAL_PROPERTIES_KEY,\n  DEPENDENCIES_KEY,\n  ITEMS_KEY,\n  NAME_KEY,\n  ONE_OF_KEY,\n  PROPERTIES_KEY,\n  REF_KEY,\n  RJSF_ADDITIONAL_PROPERTIES_FLAG,\n} from '../constants';\nimport getDiscriminatorFieldFromSchema from '../getDiscriminatorFieldFromSchema';\nimport { FormContextType, GenericObjectType, PathSchema, RJSFSchema, StrictRJSFSchema, ValidatorType } from '../types';\nimport getClosestMatchingOption from './getClosestMatchingOption';\nimport retrieveSchema from './retrieveSchema';\n\n/** An internal helper that generates an `PathSchema` object for the `schema`, recursively with protection against\n * infinite recursion\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `PathSchema` is desired\n * @param [name=''] - The base name for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @param [_recurseList=[]] - The list of retrieved schemas currently being recursed, used to prevent infinite recursion\n * @returns - The `PathSchema` object for the `schema`\n */\nfunction toPathSchemaInternal<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  name: string,\n  rootSchema?: S,\n  formData?: T,\n  _recurseList: S[] = []\n): PathSchema<T> {\n  if (REF_KEY in schema || DEPENDENCIES_KEY in schema || ALL_OF_KEY in schema) {\n    const _schema = retrieveSchema<T, S, F>(validator, schema, rootSchema, formData);\n    const sameSchemaIndex = _recurseList.findIndex((item) => isEqual(item, _schema));\n    if (sameSchemaIndex === -1) {\n      return toPathSchemaInternal<T, S, F>(\n        validator,\n        _schema,\n        name,\n        rootSchema,\n        formData,\n        _recurseList.concat(_schema)\n      );\n    }\n  }\n\n  let pathSchema: PathSchema<T> = {\n    [NAME_KEY]: name.replace(/^\\./, ''),\n  } as PathSchema<T>;\n\n  if (ONE_OF_KEY in schema || ANY_OF_KEY in schema) {\n    const xxxOf: S[] = ONE_OF_KEY in schema ? (schema.oneOf as S[]) : (schema.anyOf as S[]);\n    const discriminator = getDiscriminatorFieldFromSchema<S>(schema);\n    const index = getClosestMatchingOption<T, S, F>(validator, rootSchema!, formData, xxxOf, 0, discriminator);\n    const _schema: S = xxxOf![index] as S;\n    pathSchema = {\n      ...pathSchema,\n      ...toPathSchemaInternal<T, S, F>(validator, _schema, name, rootSchema, formData, _recurseList),\n    };\n  }\n\n  if (ADDITIONAL_PROPERTIES_KEY in schema && schema[ADDITIONAL_PROPERTIES_KEY] !== false) {\n    set(pathSchema, RJSF_ADDITIONAL_PROPERTIES_FLAG, true);\n  }\n\n  if (ITEMS_KEY in schema && Array.isArray(formData)) {\n    const { items: schemaItems, additionalItems: schemaAdditionalItems } = schema;\n\n    if (Array.isArray(schemaItems)) {\n      formData.forEach((element, i: number) => {\n        if (schemaItems[i]) {\n          (pathSchema as PathSchema<T[]>)[i] = toPathSchemaInternal<T, S, F>(\n            validator,\n            schemaItems[i] as S,\n            `${name}.${i}`,\n            rootSchema,\n            element,\n            _recurseList\n          );\n        } else if (schemaAdditionalItems) {\n          (pathSchema as PathSchema<T[]>)[i] = toPathSchemaInternal<T, S, F>(\n            validator,\n            schemaAdditionalItems as S,\n            `${name}.${i}`,\n            rootSchema,\n            element,\n            _recurseList\n          );\n        } else {\n          console.warn(`Unable to generate path schema for \"${name}.${i}\". No schema defined for it`);\n        }\n      });\n    } else {\n      formData.forEach((element, i: number) => {\n        (pathSchema as PathSchema<T[]>)[i] = toPathSchemaInternal<T, S, F>(\n          validator,\n          schemaItems as S,\n          `${name}.${i}`,\n          rootSchema,\n          element,\n          _recurseList\n        );\n      });\n    }\n  } else if (PROPERTIES_KEY in schema) {\n    for (const property in schema.properties) {\n      const field = get(schema, [PROPERTIES_KEY, property]);\n      (pathSchema as PathSchema<GenericObjectType>)[property] = toPathSchemaInternal<T, S, F>(\n        validator,\n        field,\n        `${name}.${property}`,\n        rootSchema,\n        // It's possible that formData is not an object -- this can happen if an\n        // array item has just been added, but not populated with data yet\n        get(formData, [property]),\n        _recurseList\n      );\n    }\n  }\n  return pathSchema;\n}\n\n/** Generates an `PathSchema` object for the `schema`, recursively\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the `PathSchema` is desired\n * @param [name=''] - The base name for the schema\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [formData] - The current formData, if any, to assist retrieving a schema\n * @returns - The `PathSchema` object for the `schema`\n */\nexport default function toPathSchema<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  name = '',\n  rootSchema?: S,\n  formData?: T\n): PathSchema<T> {\n  return toPathSchemaInternal(validator, schema, name, rootSchema, formData);\n}\n","import deepEquals from './deepEquals';\nimport {\n  ErrorSchema,\n  Experimental_DefaultFormStateBehavior,\n  FormContextType,\n  GlobalUISchemaOptions,\n  IdSchema,\n  PathSchema,\n  RJSFSchema,\n  SchemaUtilsType,\n  StrictRJSFSchema,\n  UiSchema,\n  ValidationData,\n  ValidatorType,\n} from './types';\nimport {\n  getDefaultFormState,\n  getDisplayLabel,\n  getClosestMatchingOption,\n  getFirstMatchingOption,\n  getMatchingOption,\n  isFilesArray,\n  isMultiSelect,\n  isSelect,\n  mergeValidationData,\n  retrieveSchema,\n  sanitizeDataForNewSchema,\n  toIdSchema,\n  toPathSchema,\n} from './schema';\n\n/** The `SchemaUtils` class provides a wrapper around the publicly exported APIs in the `utils/schema` directory such\n * that one does not have to explicitly pass the `validator`, `rootSchema`, or `experimental_defaultFormStateBehavior` to each method.\n * Since these generally do not change across a `Form`, this allows for providing a simplified set of APIs to the\n * `@rjsf/core` components and the various themes as well. This class implements the `SchemaUtilsType` interface.\n */\nclass SchemaUtils<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>\n  implements SchemaUtilsType<T, S, F>\n{\n  rootSchema: S;\n  validator: ValidatorType<T, S, F>;\n  experimental_defaultFormStateBehavior: Experimental_DefaultFormStateBehavior;\n\n  /** Constructs the `SchemaUtils` instance with the given `validator` and `rootSchema` stored as instance variables\n   *\n   * @param validator - An implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n   * @param rootSchema - The root schema that will be forwarded to all the APIs\n   * @param experimental_defaultFormStateBehavior - Configuration flags to allow users to override default form state behavior\n   */\n  constructor(\n    validator: ValidatorType<T, S, F>,\n    rootSchema: S,\n    experimental_defaultFormStateBehavior: Experimental_DefaultFormStateBehavior\n  ) {\n    this.rootSchema = rootSchema;\n    this.validator = validator;\n    this.experimental_defaultFormStateBehavior = experimental_defaultFormStateBehavior;\n  }\n\n  /** Returns the `ValidatorType` in the `SchemaUtilsType`\n   *\n   * @returns - The `ValidatorType`\n   */\n  getValidator() {\n    return this.validator;\n  }\n\n  /** Determines whether either the `validator` and `rootSchema` differ from the ones associated with this instance of\n   * the `SchemaUtilsType`. If either `validator` or `rootSchema` are falsy, then return false to prevent the creation\n   * of a new `SchemaUtilsType` with incomplete properties.\n   *\n   * @param validator - An implementation of the `ValidatorType` interface that will be compared against the current one\n   * @param rootSchema - The root schema that will be compared against the current one\n   * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n   * @returns - True if the `SchemaUtilsType` differs from the given `validator` or `rootSchema`\n   */\n  doesSchemaUtilsDiffer(\n    validator: ValidatorType<T, S, F>,\n    rootSchema: S,\n    experimental_defaultFormStateBehavior = {}\n  ): boolean {\n    if (!validator || !rootSchema) {\n      return false;\n    }\n    return (\n      this.validator !== validator ||\n      !deepEquals(this.rootSchema, rootSchema) ||\n      !deepEquals(this.experimental_defaultFormStateBehavior, experimental_defaultFormStateBehavior)\n    );\n  }\n\n  /** Returns the superset of `formData` that includes the given set updated to include any missing fields that have\n   * computed to have defaults provided in the `schema`.\n   *\n   * @param schema - The schema for which the default state is desired\n   * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n   * @param [includeUndefinedValues=false] - Optional flag, if true, cause undefined values to be added as defaults.\n   *          If \"excludeObjectChildren\", pass `includeUndefinedValues` as false when computing defaults for any nested\n   *          object properties.\n   * @returns - The resulting `formData` with all the defaults provided\n   */\n  getDefaultFormState(\n    schema: S,\n    formData?: T,\n    includeUndefinedValues: boolean | 'excludeObjectChildren' = false\n  ): T | T[] | undefined {\n    return getDefaultFormState<T, S, F>(\n      this.validator,\n      schema,\n      formData,\n      this.rootSchema,\n      includeUndefinedValues,\n      this.experimental_defaultFormStateBehavior\n    );\n  }\n\n  /** Determines whether the combination of `schema` and `uiSchema` properties indicates that the label for the `schema`\n   * should be displayed in a UI.\n   *\n   * @param schema - The schema for which the display label flag is desired\n   * @param [uiSchema] - The UI schema from which to derive potentially displayable information\n   * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n   * @returns - True if the label should be displayed or false if it should not\n   */\n  getDisplayLabel(schema: S, uiSchema?: UiSchema<T, S, F>, globalOptions?: GlobalUISchemaOptions) {\n    return getDisplayLabel<T, S, F>(this.validator, schema, uiSchema, this.rootSchema, globalOptions);\n  }\n\n  /** Determines which of the given `options` provided most closely matches the `formData`.\n   * Returns the index of the option that is valid and is the closest match, or 0 if there is no match.\n   *\n   * The closest match is determined using the number of matching properties, and more heavily favors options with\n   * matching readOnly, default, or const values.\n   *\n   * @param formData - The form data associated with the schema\n   * @param options - The list of options that can be selected from\n   * @param [selectedOption] - The index of the currently selected option, defaulted to -1 if not specified\n   * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n   *          determine which option is selected\n   * @returns - The index of the option that is the closest match to the `formData` or the `selectedOption` if no match\n   */\n  getClosestMatchingOption(\n    formData: T | undefined,\n    options: S[],\n    selectedOption?: number,\n    discriminatorField?: string\n  ): number {\n    return getClosestMatchingOption<T, S, F>(\n      this.validator,\n      this.rootSchema,\n      formData,\n      options,\n      selectedOption,\n      discriminatorField\n    );\n  }\n\n  /** Given the `formData` and list of `options`, attempts to find the index of the first option that matches the data.\n   * Always returns the first option if there is nothing that matches.\n   *\n   * @param formData - The current formData, if any, used to figure out a match\n   * @param options - The list of options to find a matching options from\n   * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n   *          determine which option is selected\n   * @returns - The firstindex of the matched option or 0 if none is available\n   */\n  getFirstMatchingOption(formData: T | undefined, options: S[], discriminatorField?: string): number {\n    return getFirstMatchingOption<T, S, F>(this.validator, formData, options, this.rootSchema, discriminatorField);\n  }\n\n  /** Given the `formData` and list of `options`, attempts to find the index of the option that best matches the data.\n   * Deprecated, use `getFirstMatchingOption()` instead.\n   *\n   * @param formData - The current formData, if any, onto which to provide any missing defaults\n   * @param options - The list of options to find a matching options from\n   * @param [discriminatorField] - The optional name of the field within the options object whose value is used to\n   *          determine which option is selected\n   * @returns - The index of the matched option or 0 if none is available\n   * @deprecated\n   */\n  getMatchingOption(formData: T | undefined, options: S[], discriminatorField?: string) {\n    return getMatchingOption<T, S, F>(this.validator, formData, options, this.rootSchema, discriminatorField);\n  }\n\n  /** Checks to see if the `schema` and `uiSchema` combination represents an array of files\n   *\n   * @param schema - The schema for which check for array of files flag is desired\n   * @param [uiSchema] - The UI schema from which to check the widget\n   * @returns - True if schema/uiSchema contains an array of files, otherwise false\n   */\n  isFilesArray(schema: S, uiSchema?: UiSchema<T, S, F>) {\n    return isFilesArray<T, S, F>(this.validator, schema, uiSchema, this.rootSchema);\n  }\n\n  /** Checks to see if the `schema` combination represents a multi-select\n   *\n   * @param schema - The schema for which check for a multi-select flag is desired\n   * @returns - True if schema contains a multi-select, otherwise false\n   */\n  isMultiSelect(schema: S) {\n    return isMultiSelect<T, S, F>(this.validator, schema, this.rootSchema);\n  }\n\n  /** Checks to see if the `schema` combination represents a select\n   *\n   * @param schema - The schema for which check for a select flag is desired\n   * @returns - True if schema contains a select, otherwise false\n   */\n  isSelect(schema: S) {\n    return isSelect<T, S, F>(this.validator, schema, this.rootSchema);\n  }\n\n  /** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in\n   * the two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n   * `getValidator().toErrorList()` onto the `errors` in the `validationData`. If no `additionalErrorSchema` is passed,\n   * then `validationData` is returned.\n   *\n   * @param validationData - The current `ValidationData` into which to merge the additional errors\n   * @param [additionalErrorSchema] - The additional set of errors\n   * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n   * @deprecated - Use the `validationDataMerge()` function exported from `@rjsf/utils` instead. This function will be\n   *        removed in the next major release.\n   */\n  mergeValidationData(validationData: ValidationData<T>, additionalErrorSchema?: ErrorSchema<T>): ValidationData<T> {\n    return mergeValidationData<T, S, F>(this.validator, validationData, additionalErrorSchema);\n  }\n\n  /** Retrieves an expanded schema that has had all of its conditions, additional properties, references and\n   * dependencies resolved and merged into the `schema` given a `rawFormData` that is used to do the potentially\n   * recursive resolution.\n   *\n   * @param schema - The schema for which retrieving a schema is desired\n   * @param [rawFormData] - The current formData, if any, to assist retrieving a schema\n   * @returns - The schema having its conditions, additional properties, references and dependencies resolved\n   */\n  retrieveSchema(schema: S, rawFormData?: T) {\n    return retrieveSchema<T, S, F>(this.validator, schema, this.rootSchema, rawFormData);\n  }\n\n  /** Sanitize the `data` associated with the `oldSchema` so it is considered appropriate for the `newSchema`. If the\n   * new schema does not contain any properties, then `undefined` is returned to clear all the form data. Due to the\n   * nature of schemas, this sanitization happens recursively for nested objects of data. Also, any properties in the\n   * old schemas that are non-existent in the new schema are set to `undefined`.\n   *\n   * @param [newSchema] - The new schema for which the data is being sanitized\n   * @param [oldSchema] - The old schema from which the data originated\n   * @param [data={}] - The form data associated with the schema, defaulting to an empty object when undefined\n   * @returns - The new form data, with all the fields uniquely associated with the old schema set\n   *      to `undefined`. Will return `undefined` if the new schema is not an object containing properties.\n   */\n  sanitizeDataForNewSchema(newSchema?: S, oldSchema?: S, data?: any): T {\n    return sanitizeDataForNewSchema(this.validator, this.rootSchema, newSchema, oldSchema, data);\n  }\n\n  /** Generates an `IdSchema` object for the `schema`, recursively\n   *\n   * @param schema - The schema for which the display label flag is desired\n   * @param [id] - The base id for the schema\n   * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n   * @param [idPrefix='root'] - The prefix to use for the id\n   * @param [idSeparator='_'] - The separator to use for the path segments in the id\n   * @returns - The `IdSchema` object for the `schema`\n   */\n  toIdSchema(schema: S, id?: string | null, formData?: T, idPrefix = 'root', idSeparator = '_'): IdSchema<T> {\n    return toIdSchema<T, S, F>(this.validator, schema, id, this.rootSchema, formData, idPrefix, idSeparator);\n  }\n\n  /** Generates an `PathSchema` object for the `schema`, recursively\n   *\n   * @param schema - The schema for which the display label flag is desired\n   * @param [name] - The base name for the schema\n   * @param [formData] - The current formData, if any, onto which to provide any missing defaults\n   * @returns - The `PathSchema` object for the `schema`\n   */\n  toPathSchema(schema: S, name?: string, formData?: T): PathSchema<T> {\n    return toPathSchema<T, S, F>(this.validator, schema, name, this.rootSchema, formData);\n  }\n}\n\n/** Creates a `SchemaUtilsType` interface that is based around the given `validator` and `rootSchema` parameters. The\n * resulting interface implementation will forward the `validator` and `rootSchema` to all the wrapped APIs.\n *\n * @param validator - an implementation of the `ValidatorType` interface that will be forwarded to all the APIs\n * @param rootSchema - The root schema that will be forwarded to all the APIs\n * @param [experimental_defaultFormStateBehavior] Optional configuration object, if provided, allows users to override default form state behavior\n * @returns - An implementation of a `SchemaUtilsType` interface\n */\nexport default function createSchemaUtils<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  rootSchema: S,\n  experimental_defaultFormStateBehavior = {}\n): SchemaUtilsType<T, S, F> {\n  return new SchemaUtils<T, S, F>(validator, rootSchema, experimental_defaultFormStateBehavior);\n}\n","import { UI_FIELD_KEY, UI_WIDGET_KEY } from '../constants';\nimport getSchemaType from '../getSchemaType';\nimport getUiOptions from '../getUiOptions';\nimport isCustomWidget from '../isCustomWidget';\nimport {\n  FormContextType,\n  GlobalUISchemaOptions,\n  RJSFSchema,\n  StrictRJSFSchema,\n  UiSchema,\n  ValidatorType,\n} from '../types';\nimport isFilesArray from './isFilesArray';\nimport isMultiSelect from './isMultiSelect';\n\n/** Determines whether the combination of `schema` and `uiSchema` properties indicates that the label for the `schema`\n * should be displayed in a UI.\n *\n * @param validator - An implementation of the `ValidatorType` interface that will be used when necessary\n * @param schema - The schema for which the display label flag is desired\n * @param [uiSchema={}] - The UI schema from which to derive potentially displayable information\n * @param [rootSchema] - The root schema, used to primarily to look up `$ref`s\n * @param [globalOptions={}] - The optional Global UI Schema from which to get any fallback `xxx` options\n * @returns - True if the label should be displayed or false if it should not\n */\nexport default function getDisplayLabel<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  schema: S,\n  uiSchema: UiSchema<T, S, F> = {},\n  rootSchema?: S,\n  globalOptions?: GlobalUISchemaOptions\n): boolean {\n  const uiOptions = getUiOptions<T, S, F>(uiSchema, globalOptions);\n  const { label = true } = uiOptions;\n  let displayLabel = !!label;\n  const schemaType = getSchemaType<S>(schema);\n\n  if (schemaType === 'array') {\n    displayLabel =\n      isMultiSelect<T, S, F>(validator, schema, rootSchema) ||\n      isFilesArray<T, S, F>(validator, schema, uiSchema, rootSchema) ||\n      isCustomWidget(uiSchema);\n  }\n\n  if (schemaType === 'object') {\n    displayLabel = false;\n  }\n  if (schemaType === 'boolean' && !uiSchema[UI_WIDGET_KEY]) {\n    displayLabel = false;\n  }\n  if (uiSchema[UI_FIELD_KEY]) {\n    displayLabel = false;\n  }\n  return displayLabel;\n}\n","import isEmpty from 'lodash/isEmpty';\n\nimport mergeObjects from '../mergeObjects';\nimport { ErrorSchema, FormContextType, RJSFSchema, StrictRJSFSchema, ValidationData, ValidatorType } from '../types';\n\n/** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in the\n * two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n * `validator.toErrorList()` onto the `errors` in the `validationData`. If no `additionalErrorSchema` is passed, then\n * `validationData` is returned.\n *\n * @param validator - The validator used to convert an ErrorSchema to a list of errors\n * @param validationData - The current `ValidationData` into which to merge the additional errors\n * @param [additionalErrorSchema] - The additional set of errors in an `ErrorSchema`\n * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n * @deprecated - Use the `validationDataMerge()` function exported from `@rjsf/utils` instead. This function will be\n *        removed in the next major release.\n */\nexport default function mergeValidationData<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  validationData: ValidationData<T>,\n  additionalErrorSchema?: ErrorSchema<T>\n): ValidationData<T> {\n  if (!additionalErrorSchema) {\n    return validationData;\n  }\n  const { errors: oldErrors, errorSchema: oldErrorSchema } = validationData;\n  let errors = validator.toErrorList(additionalErrorSchema);\n  let errorSchema = additionalErrorSchema;\n  if (!isEmpty(oldErrorSchema)) {\n    errorSchema = mergeObjects(oldErrorSchema, additionalErrorSchema, true) as ErrorSchema<T>;\n    errors = [...oldErrors].concat(errors);\n  }\n  return { errorSchema, errors };\n}\n","/** Given the `FileReader.readAsDataURL()` based `dataURI` extracts that data into an actual Blob along with the name\n * of that Blob if provided in the URL. If no name is provided, then the name falls back to `unknown`.\n *\n * @param dataURI - The `DataUrl` potentially containing name and raw data to be converted to a Blob\n * @returns - an object containing a Blob and its name, extracted from the URI\n */\nexport default function dataURItoBlob(dataURILike: string) {\n  // check if is dataURI\n  if (dataURILike.indexOf('data:') === -1) {\n    throw new Error('File is invalid: URI must be a dataURI');\n  }\n  const dataURI = dataURILike.slice(5);\n  // split the dataURI into media and base64, with the base64 signature\n  const splitted = dataURI.split(';base64,');\n  // if the base64 signature is not present, the latter part will become empty\n  if (splitted.length !== 2) {\n    throw new Error('File is invalid: dataURI must be base64');\n  }\n  // extract the mime type, media parameters including the name, and the base64 string\n  const [media, base64] = splitted;\n  const [mime, ...mediaparams] = media.split(';');\n  const type = mime || '';\n\n  // extract the name from the parameters\n  const name = decodeURI(\n    // parse the parameters into key-value pairs, find a key, and extract a value\n    // if no key is found, then the name is unknown\n    mediaparams.map((param) => param.split('=')).find(([key]) => key === 'name')?.[1] || 'unknown'\n  );\n\n  // Built the Uint8Array Blob parameter from the base64 string.\n  try {\n    const binary = atob(base64);\n    const array = new Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n      array[i] = binary.charCodeAt(i);\n    }\n    // Create the blob object\n    const blob = new window.Blob([new Uint8Array(array)], { type });\n\n    return { blob, name };\n  } catch (error) {\n    throw new Error('File is invalid: ' + (error as Error).message);\n  }\n}\n","/** Returns a string representation of the `num` that is padded with leading \"0\"s if necessary\n *\n * @param num - The number to pad\n * @param width - The width of the string at which no lead padding is necessary\n * @returns - The number converted to a string with leading zero padding if the number of digits is less than `width`\n */\nexport default function pad(num: number, width: number) {\n  let s = String(num);\n  while (s.length < width) {\n    s = '0' + s;\n  }\n  return s;\n}\n","import pad from './pad';\nimport { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Returns a list of options for a date range between `start` and `stop`. If the start date is greater than the end\n * date, then the date range is reversed. If `start` and `stop` are negative numbers (or zero), then they will be\n * treated as relative to the current year.\n *\n * @param start - The starting point of the date range\n * @param stop - The ending point of the date range\n * @returns - The list of EnumOptionsType for the date range between `start` and `stop`\n * @throws - Error when `start` and `stop` aren't both <= 0 or > 0\n */\nexport default function dateRangeOptions<S extends StrictRJSFSchema = RJSFSchema>(\n  start: number,\n  stop: number\n): EnumOptionsType<S>[] {\n  if (start <= 0 && stop <= 0) {\n    start = new Date().getFullYear() + start;\n    stop = new Date().getFullYear() + stop;\n  } else if (start < 0 || stop < 0) {\n    throw new Error(`Both start (${start}) and stop (${stop}) must both be <= 0 or > 0, got one of each`);\n  }\n  if (start > stop) {\n    return dateRangeOptions<S>(stop, start).reverse();\n  }\n  const options: EnumOptionsType<S>[] = [];\n  for (let i = start; i <= stop; i++) {\n    options.push({ value: i, label: pad(i, 2) });\n  }\n  return options;\n}\n","import { TranslatableString } from './enums';\nimport replaceStringParameters from './replaceStringParameters';\n\n/** Translates a `TranslatableString` value `stringToTranslate` into english. When a `params` array is provided, each\n * value in the array is used to replace any of the replaceable parameters in the `stringToTranslate` using the `%1`,\n * `%2`, etc. replacement specifiers.\n *\n * @param stringToTranslate - The `TranslatableString` value to convert to english\n * @param params - The optional list of replaceable parameter values to substitute into the english string\n * @returns - The `stringToTranslate` itself with any replaceable parameter values substituted\n */\nexport default function englishStringTranslator(stringToTranslate: TranslatableString, params?: string[]): string {\n  return replaceStringParameters(stringToTranslate, params);\n}\n","/** Potentially substitutes all replaceable parameters with the associated value(s) from the `params` if available. When\n * a `params` array is provided, each value in the array is used to replace any of the replaceable parameters in the\n * `inputString` using the `%1`, `%2`, etc. replacement specifiers.\n *\n * @param inputString - The string which will be potentially updated with replacement parameters\n * @param params - The optional list of replaceable parameter values to substitute into the english string\n * @returns - The updated string with any replacement specifiers replaced\n */\nexport default function replaceStringParameters(inputString: string, params?: string[]) {\n  let output = inputString;\n  if (Array.isArray(params)) {\n    const parts = output.split(/(%\\d)/);\n    params.forEach((param, index) => {\n      const partIndex = parts.findIndex((part) => part === `%${index + 1}`);\n      if (partIndex >= 0) {\n        parts[partIndex] = param;\n      }\n    });\n    output = parts.join('');\n  }\n  return output;\n}\n","import { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Returns the value(s) from `allEnumOptions` at the index(es) provided by `valueIndex`. If `valueIndex` is not an\n * array AND the index is not valid for `allEnumOptions`, `emptyValue` is returned. If `valueIndex` is an array, AND it\n * contains an invalid index, the returned array will have the resulting undefined values filtered out, leaving only\n * valid values or in the worst case, an empty array.\n *\n * @param valueIndex - The index(es) of the value(s) that should be returned\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @param [emptyValue] - The value to return when the non-array `valueIndex` does not refer to a real option\n * @returns - The single or list of values specified by the single or list of indexes if they are valid. Otherwise,\n *        `emptyValue` or an empty list.\n */\nexport default function enumOptionsValueForIndex<S extends StrictRJSFSchema = RJSFSchema>(\n  valueIndex: string | number | Array<string | number>,\n  allEnumOptions: EnumOptionsType<S>[] = [],\n  emptyValue?: EnumOptionsType<S>['value']\n): EnumOptionsType<S>['value'] | EnumOptionsType<S>['value'][] | undefined {\n  if (Array.isArray(valueIndex)) {\n    return (\n      valueIndex\n        .map((index) => enumOptionsValueForIndex(index, allEnumOptions))\n        // Since the recursive call returns `emptyValue` when we get a bad option, only filter those out\n        .filter((val) => val !== emptyValue)\n    );\n  }\n  // So Number(null) and Number('') both return 0, so use emptyValue for those two values\n  const index = valueIndex === '' || valueIndex === null ? -1 : Number(valueIndex);\n  const option = allEnumOptions[index];\n  return option ? option.value : emptyValue;\n}\n","import isEqual from 'lodash/isEqual';\n\nimport { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\nimport enumOptionsValueForIndex from './enumOptionsValueForIndex';\n\n/** Removes the enum option value at the `valueIndex` from the currently `selected` (list of) value(s). If `selected` is\n * a list, then that list is updated to remove the enum option value with the `valueIndex` in `allEnumOptions`. If it is\n * a single value, then if the enum option value with the `valueIndex` in `allEnumOptions` matches `selected`, undefined\n * is returned, otherwise the `selected` value is returned.\n *\n * @param valueIndex - The index of the value to be removed from the selected list or single value\n * @param selected - The current (list of) selected value(s)\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @returns - The updated `selected` with the enum option value at `valueIndex` in `allEnumOptions` removed from it,\n *        unless `selected` is a single value. In that case, if the `valueIndex` value matches `selected`, returns\n *        undefined, otherwise `selected`.\n */\nexport default function enumOptionsDeselectValue<S extends StrictRJSFSchema = RJSFSchema>(\n  valueIndex: string | number,\n  selected?: EnumOptionsType<S>['value'] | EnumOptionsType<S>['value'][],\n  allEnumOptions: EnumOptionsType<S>[] = []\n): EnumOptionsType<S>['value'] | EnumOptionsType<S>['value'][] | undefined {\n  const value = enumOptionsValueForIndex<S>(valueIndex, allEnumOptions);\n  if (Array.isArray(selected)) {\n    return selected.filter((v) => !isEqual(v, value));\n  }\n  return isEqual(value, selected) ? undefined : selected;\n}\n","import isEqual from 'lodash/isEqual';\n\nimport { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Determines whether the given `value` is (one of) the `selected` value(s).\n *\n * @param value - The value being checked to see if it is selected\n * @param selected - The current selected value or list of values\n * @returns - true if the `value` is one of the `selected` ones, false otherwise\n */\nexport default function enumOptionsIsSelected<S extends StrictRJSFSchema = RJSFSchema>(\n  value: EnumOptionsType<S>['value'],\n  selected: EnumOptionsType<S>['value'] | EnumOptionsType<S>['value'][]\n) {\n  if (Array.isArray(selected)) {\n    return selected.some((sel) => isEqual(sel, value));\n  }\n  return isEqual(selected, value);\n}\n","import { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\nimport enumOptionsIsSelected from './enumOptionsIsSelected';\n\n/** Returns the index(es) of the options in `allEnumOptions` whose value(s) match the ones in `value`. All the\n * `enumOptions` are filtered based on whether they are a \"selected\" `value` and the index of each selected one is then\n * stored in an array. If `multiple` is true, that array is returned, otherwise the first element in the array is\n * returned.\n *\n * @param value - The single value or list of values for which indexes are desired\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @param [multiple=false] - Optional flag, if true will return a list of index, otherwise a single one\n * @returns - A single string index for the first `value` in `allEnumOptions`, if not `multiple`. Otherwise, the list\n *        of indexes for (each of) the value(s) in `value`.\n */\nexport default function enumOptionsIndexForValue<S extends StrictRJSFSchema = RJSFSchema>(\n  value: EnumOptionsType<S>['value'] | EnumOptionsType<S>['value'][],\n  allEnumOptions: EnumOptionsType<S>[] = [],\n  multiple = false\n): string | string[] | undefined {\n  const selectedIndexes: string[] = allEnumOptions\n    .map((opt, index) => (enumOptionsIsSelected(opt.value, value) ? String(index) : undefined))\n    .filter((opt) => typeof opt !== 'undefined') as string[];\n  if (!multiple) {\n    return selectedIndexes[0];\n  }\n  return selectedIndexes;\n}\n","import { EnumOptionsType, RJSFSchema, StrictRJSFSchema } from './types';\nimport enumOptionsValueForIndex from './enumOptionsValueForIndex';\nimport isNil from 'lodash/isNil';\n\n/** Add the enum option value at the `valueIndex` to the list of `selected` values in the proper order as defined by\n * `allEnumOptions`\n *\n * @param valueIndex - The index of the value that should be selected\n * @param selected - The current list of selected values\n * @param [allEnumOptions=[]] - The list of all the known enumOptions\n * @returns - The updated list of selected enum values with enum value at the `valueIndex` added to it\n */\nexport default function enumOptionsSelectValue<S extends StrictRJSFSchema = RJSFSchema>(\n  valueIndex: string | number,\n  selected: EnumOptionsType<S>['value'][],\n  allEnumOptions: EnumOptionsType<S>[] = []\n) {\n  const value = enumOptionsValueForIndex<S>(valueIndex, allEnumOptions);\n  if (!isNil(value)) {\n    const index = allEnumOptions.findIndex((opt) => value === opt.value);\n    const all = allEnumOptions.map(({ value: val }) => val);\n    const updated = selected.slice(0, index).concat(value, selected.slice(index));\n    // As inserting values at predefined index positions doesn't work with empty\n    // arrays, we need to reorder the updated selection to match the initial order\n    return updated.sort((a, b) => Number(all.indexOf(a) > all.indexOf(b)));\n  }\n  return selected;\n}\n","import cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { ErrorSchema } from './types';\nimport { ERRORS_KEY } from './constants';\n\n/** The `ErrorSchemaBuilder<T>` is used to build an `ErrorSchema<T>` since the definition of the `ErrorSchema` type is\n * designed for reading information rather than writing it. Use this class to add, replace or clear errors in an error\n * schema by using either dotted path or an array of path names. Once you are done building the `ErrorSchema`, you can\n * get the result and/or reset all the errors back to an initial set and start again.\n */\nexport default class ErrorSchemaBuilder<T = any> {\n  /** The error schema being built\n   *\n   * @private\n   */\n  private errorSchema: ErrorSchema<T> = {};\n\n  /** Construct an `ErrorSchemaBuilder` with an optional initial set of errors in an `ErrorSchema`.\n   *\n   * @param [initialSchema] - The optional set of initial errors, that will be cloned into the class\n   */\n  constructor(initialSchema?: ErrorSchema<T>) {\n    this.resetAllErrors(initialSchema);\n  }\n\n  /** Returns the `ErrorSchema` that has been updated by the methods of the `ErrorSchemaBuilder`\n   */\n  get ErrorSchema() {\n    return this.errorSchema;\n  }\n\n  /** Will get an existing `ErrorSchema` at the specified `pathOfError` or create and return one.\n   *\n   * @param [pathOfError] - The optional path into the `ErrorSchema` at which to add the error(s)\n   * @returns - The error block for the given `pathOfError` or the root if not provided\n   * @private\n   */\n  private getOrCreateErrorBlock(pathOfError?: string | string[]) {\n    const hasPath = (Array.isArray(pathOfError) && pathOfError.length > 0) || typeof pathOfError === 'string';\n    let errorBlock: ErrorSchema = hasPath ? get(this.errorSchema, pathOfError) : this.errorSchema;\n    if (!errorBlock && pathOfError) {\n      errorBlock = {};\n      set(this.errorSchema, pathOfError, errorBlock);\n    }\n    return errorBlock;\n  }\n\n  /** Resets all errors in the `ErrorSchemaBuilder` back to the `initialSchema` if provided, otherwise an empty set.\n   *\n   * @param [initialSchema] - The optional set of initial errors, that will be cloned into the class\n   * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n   */\n  resetAllErrors(initialSchema?: ErrorSchema<T>) {\n    this.errorSchema = initialSchema ? cloneDeep(initialSchema) : {};\n    return this;\n  }\n\n  /** Adds the `errorOrList` to the list of errors in the `ErrorSchema` at either the root level or the location within\n   * the schema described by the `pathOfError`. For more information about how to specify the path see the\n   * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n   *\n   * @param errorOrList - The error or list of errors to add into the `ErrorSchema`\n   * @param [pathOfError] - The optional path into the `ErrorSchema` at which to add the error(s)\n   * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n   */\n  addErrors(errorOrList: string | string[], pathOfError?: string | string[]) {\n    const errorBlock: ErrorSchema = this.getOrCreateErrorBlock(pathOfError);\n    let errorsList = get(errorBlock, ERRORS_KEY);\n    if (!Array.isArray(errorsList)) {\n      errorsList = [];\n      errorBlock[ERRORS_KEY] = errorsList;\n    }\n\n    if (Array.isArray(errorOrList)) {\n      errorsList.push(...errorOrList);\n    } else {\n      errorsList.push(errorOrList);\n    }\n    return this;\n  }\n\n  /** Sets/replaces the `errorOrList` as the error(s) in the `ErrorSchema` at either the root level or the location\n   * within the schema described by the `pathOfError`. For more information about how to specify the path see the\n   * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n   *\n   * @param errorOrList - The error or list of errors to set into the `ErrorSchema`\n   * @param [pathOfError] - The optional path into the `ErrorSchema` at which to set the error(s)\n   * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n   */\n  setErrors(errorOrList: string | string[], pathOfError?: string | string[]) {\n    const errorBlock: ErrorSchema = this.getOrCreateErrorBlock(pathOfError);\n    // Effectively clone the array being given to prevent accidental outside manipulation of the given list\n    const listToAdd = Array.isArray(errorOrList) ? [...errorOrList] : [errorOrList];\n    set(errorBlock, ERRORS_KEY, listToAdd);\n    return this;\n  }\n\n  /** Clears the error(s) in the `ErrorSchema` at either the root level or the location within the schema described by\n   * the `pathOfError`. For more information about how to specify the path see the\n   * [eslint lodash plugin docs](https://github.com/wix/eslint-plugin-lodash/blob/master/docs/rules/path-style.md).\n   *\n   * @param [pathOfError] - The optional path into the `ErrorSchema` at which to clear the error(s)\n   * @returns - The `ErrorSchemaBuilder` object for chaining purposes\n   */\n  clearErrors(pathOfError?: string | string[]) {\n    const errorBlock: ErrorSchema = this.getOrCreateErrorBlock(pathOfError);\n    set(errorBlock, ERRORS_KEY, []);\n    return this;\n  }\n}\n","import { type DateObject } from './types';\n\n/** Available options for re-ordering date input element */\nexport type DateElementFormat = 'DMY' | 'MDY' | 'YMD';\n\n/** Type describing format of DateElement prop */\ntype DateElementProp = {\n  type: string;\n  range: [number, number];\n  value: number | undefined;\n};\n\n/** Given date & time information with optional yearRange & format, returns props for DateElement\n *\n * @param date - Object containing date with optional time information\n * @param time - Determines whether to include time or not\n * @param [yearRange=[1900, new Date().getFullYear() + 2]] - Controls the list of years to be displayed\n * @param [format='YMD'] - Controls the order in which day, month and year input element will be displayed\n * @returns Array of props for DateElement\n */\n\nexport default function getDateElementProps(\n  date: DateObject,\n  time: boolean,\n  yearRange: [number, number] = [1900, new Date().getFullYear() + 2],\n  format: DateElementFormat = 'YMD'\n) {\n  const { day, month, year, hour, minute, second } = date;\n\n  const dayObj: DateElementProp = { type: 'day', range: [1, 31], value: day };\n  const monthObj: DateElementProp = { type: 'month', range: [1, 12], value: month };\n  const yearObj: DateElementProp = { type: 'year', range: yearRange, value: year };\n\n  const dateElementProp: DateElementProp[] = [];\n  switch (format) {\n    case 'MDY':\n      dateElementProp.push(monthObj, dayObj, yearObj);\n      break;\n    case 'DMY':\n      dateElementProp.push(dayObj, monthObj, yearObj);\n      break;\n    case 'YMD':\n    default:\n      dateElementProp.push(yearObj, monthObj, dayObj);\n  }\n\n  if (time) {\n    dateElementProp.push(\n      { type: 'hour', range: [0, 23], value: hour },\n      { type: 'minute', range: [0, 59], value: minute },\n      { type: 'second', range: [0, 59], value: second }\n    );\n  }\n\n  return dateElementProp;\n}\n","import { RangeSpecType, StrictRJSFSchema } from './types';\nimport { RJSFSchema } from './types';\n\n/** Extracts the range spec information `{ step?: number, min?: number, max?: number }` that can be spread onto an HTML\n * input from the range analog in the schema `{ multipleOf?: number, minimum?: number, maximum?: number }`.\n *\n * @param schema - The schema from which to extract the range spec\n * @returns - A range specification from the schema\n */\nexport default function rangeSpec<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  const spec: RangeSpecType = {};\n  if (schema.multipleOf) {\n    spec.step = schema.multipleOf;\n  }\n  if (schema.minimum || schema.minimum === 0) {\n    spec.min = schema.minimum;\n  }\n  if (schema.maximum || schema.maximum === 0) {\n    spec.max = schema.maximum;\n  }\n  return spec;\n}\n","import rangeSpec from './rangeSpec';\nimport { FormContextType, InputPropsType, RJSFSchema, StrictRJSFSchema, UIOptionsType } from './types';\n\n/** Using the `schema`, `defaultType` and `options`, extract out the props for the <input> element that make sense.\n *\n * @param schema - The schema for the field provided by the widget\n * @param [defaultType] - The default type, if any, for the field provided by the widget\n * @param [options={}] - The UI Options for the field provided by the widget\n * @param [autoDefaultStepAny=true] - Determines whether to auto-default step=any when the type is number and no step\n * @returns - The extracted `InputPropsType` object\n */\nexport default function getInputProps<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  schema: RJSFSchema,\n  defaultType?: string,\n  options: UIOptionsType<T, S, F> = {},\n  autoDefaultStepAny = true\n): InputPropsType {\n  const inputProps: InputPropsType = {\n    type: defaultType || 'text',\n    ...rangeSpec(schema),\n  };\n\n  // If options.inputType is set use that as the input type\n  if (options.inputType) {\n    inputProps.type = options.inputType;\n  } else if (!defaultType) {\n    // If the schema is of type number or integer, set the input type to number\n    if (schema.type === 'number') {\n      inputProps.type = 'number';\n      // Only add step if one isn't already defined and we are auto-defaulting the \"any\" step\n      if (autoDefaultStepAny && inputProps.step === undefined) {\n        // Setting step to 'any' fixes a bug in Safari where decimals are not\n        // allowed in number inputs\n        inputProps.step = 'any';\n      }\n    } else if (schema.type === 'integer') {\n      inputProps.type = 'number';\n      // Only add step if one isn't already defined\n      if (inputProps.step === undefined) {\n        // Since this is integer, you always want to step up or down in multiples of 1\n        inputProps.step = 1;\n      }\n    }\n  }\n\n  if (options.autocomplete) {\n    inputProps.autoComplete = options.autocomplete;\n  }\n\n  return inputProps;\n}\n","import { SUBMIT_BTN_OPTIONS_KEY } from './constants';\nimport getUiOptions from './getUiOptions';\nimport { FormContextType, RJSFSchema, StrictRJSFSchema, UiSchema, UISchemaSubmitButtonOptions } from './types';\n\n/** The default submit button options, exported for testing purposes\n */\nexport const DEFAULT_OPTIONS: UISchemaSubmitButtonOptions = {\n  props: {\n    disabled: false,\n  },\n  submitText: 'Submit',\n  norender: false,\n};\n\n/** Extracts any `ui:submitButtonOptions` from the `uiSchema` and merges them onto the `DEFAULT_OPTIONS`\n *\n * @param [uiSchema={}] - the UI Schema from which to extract submit button props\n * @returns - The merging of the `DEFAULT_OPTIONS` with any custom ones\n */\nexport default function getSubmitButtonOptions<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(uiSchema: UiSchema<T, S, F> = {}): UISchemaSubmitButtonOptions {\n  const uiOptions = getUiOptions<T, S, F>(uiSchema);\n  if (uiOptions && uiOptions[SUBMIT_BTN_OPTIONS_KEY]) {\n    const options = uiOptions[SUBMIT_BTN_OPTIONS_KEY] as UISchemaSubmitButtonOptions;\n    return { ...DEFAULT_OPTIONS, ...options };\n  }\n\n  return DEFAULT_OPTIONS;\n}\n","import { FormContextType, TemplatesType, Registry, UIOptionsType, StrictRJSFSchema, RJSFSchema } from './types';\n\n/** Returns the template with the given `name` from either the `uiSchema` if it is defined or from the `registry`\n * otherwise. NOTE, since `ButtonTemplates` are not overridden in `uiSchema` only those in the `registry` are returned.\n *\n * @param name - The name of the template to fetch, restricted to the keys of `TemplatesType`\n * @param registry - The `Registry` from which to read the template\n * @param [uiOptions={}] - The `UIOptionsType` from which to read an alternate template\n * @returns - The template from either the `uiSchema` or `registry` for the `name`\n */\nexport default function getTemplate<\n  Name extends keyof TemplatesType<T, S, F>,\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(name: Name, registry: Registry<T, S, F>, uiOptions: UIOptionsType<T, S, F> = {}): TemplatesType<T, S, F>[Name] {\n  const { templates } = registry;\n  if (name === 'ButtonTemplates') {\n    return templates[name];\n  }\n  return (\n    // Evaluating uiOptions[name] results in TS2590: Expression produces a union type that is too complex to represent\n    // To avoid that, we cast uiOptions to `any` before accessing the name field\n    ((uiOptions as any)[name] as TemplatesType<T, S, F>[Name]) || templates[name]\n  );\n}\n","import { createElement } from 'react';\nimport ReactIs from 'react-is';\nimport get from 'lodash/get';\nimport set from 'lodash/set';\n\nimport { FormContextType, RJSFSchema, Widget, RegistryWidgetsType, StrictRJSFSchema } from './types';\nimport getSchemaType from './getSchemaType';\n\n/** The map of schema types to widget type to widget name\n */\nconst widgetMap: { [k: string]: { [j: string]: string } } = {\n  boolean: {\n    checkbox: 'CheckboxWidget',\n    radio: 'RadioWidget',\n    select: 'SelectWidget',\n    hidden: 'HiddenWidget',\n  },\n  string: {\n    text: 'TextWidget',\n    password: 'PasswordWidget',\n    email: 'EmailWidget',\n    hostname: 'TextWidget',\n    ipv4: 'TextWidget',\n    ipv6: 'TextWidget',\n    uri: 'URLWidget',\n    'data-url': 'FileWidget',\n    radio: 'RadioWidget',\n    select: 'SelectWidget',\n    textarea: 'TextareaWidget',\n    hidden: 'HiddenWidget',\n    date: 'DateWidget',\n    datetime: 'DateTimeWidget',\n    'date-time': 'DateTimeWidget',\n    'alt-date': 'AltDateWidget',\n    'alt-datetime': 'AltDateTimeWidget',\n    time: 'TimeWidget',\n    color: 'ColorWidget',\n    file: 'FileWidget',\n  },\n  number: {\n    text: 'TextWidget',\n    select: 'SelectWidget',\n    updown: 'UpDownWidget',\n    range: 'RangeWidget',\n    radio: 'RadioWidget',\n    hidden: 'HiddenWidget',\n  },\n  integer: {\n    text: 'TextWidget',\n    select: 'SelectWidget',\n    updown: 'UpDownWidget',\n    range: 'RangeWidget',\n    radio: 'RadioWidget',\n    hidden: 'HiddenWidget',\n  },\n  array: {\n    select: 'SelectWidget',\n    checkboxes: 'CheckboxesWidget',\n    files: 'FileWidget',\n    hidden: 'HiddenWidget',\n  },\n};\n\n/** Wraps the given widget with stateless functional component that will merge any `defaultProps.options` with the\n * `options` that are provided in the props. It will add the wrapper component as a `MergedWidget` property onto the\n * `Widget` so that future attempts to wrap `AWidget` will return the already existing wrapper.\n *\n * @param AWidget - A widget that will be wrapped or one that is already wrapped\n * @returns - The wrapper widget\n */\nfunction mergeWidgetOptions<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  AWidget: Widget<T, S, F>\n) {\n  let MergedWidget: Widget<T, S, F> | undefined = get(AWidget, 'MergedWidget');\n  // cache return value as property of widget for proper react reconciliation\n  if (!MergedWidget) {\n    const defaultOptions = (AWidget.defaultProps && AWidget.defaultProps.options) || {};\n    MergedWidget = ({ options, ...props }) => {\n      return <AWidget options={{ ...defaultOptions, ...options }} {...props} />;\n    };\n    set(AWidget, 'MergedWidget', MergedWidget);\n  }\n  return MergedWidget;\n}\n\n/** Given a schema representing a field to render and either the name or actual `Widget` implementation, returns the\n * React component that is used to render the widget. If the `widget` is already a React component, then it is wrapped\n * with a `MergedWidget`. Otherwise an attempt is made to look up the widget inside of the `registeredWidgets` map based\n * on the schema type and `widget` name. If no widget component can be found an `Error` is thrown.\n *\n * @param schema - The schema for the field\n * @param [widget] - Either the name of the widget OR a `Widget` implementation to use\n * @param [registeredWidgets={}] - A registry of widget name to `Widget` implementation\n * @returns - The `Widget` component to use\n * @throws - An error if there is no `Widget` component that can be returned\n */\nexport default function getWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  schema: RJSFSchema,\n  widget?: Widget<T, S, F> | string,\n  registeredWidgets: RegistryWidgetsType<T, S, F> = {}\n): Widget<T, S, F> {\n  const type = getSchemaType(schema);\n\n  if (\n    typeof widget === 'function' ||\n    (widget && ReactIs.isForwardRef(createElement(widget))) ||\n    ReactIs.isMemo(widget)\n  ) {\n    return mergeWidgetOptions<T, S, F>(widget as Widget<T, S, F>);\n  }\n\n  if (typeof widget !== 'string') {\n    throw new Error(`Unsupported widget definition: ${typeof widget}`);\n  }\n\n  if (widget in registeredWidgets) {\n    const registeredWidget = registeredWidgets[widget];\n    return getWidget<T, S, F>(schema, registeredWidget, registeredWidgets);\n  }\n\n  if (typeof type === 'string') {\n    if (!(type in widgetMap)) {\n      throw new Error(`No widget for type '${type}'`);\n    }\n\n    if (widget in widgetMap[type]) {\n      const registeredWidget = registeredWidgets[widgetMap[type][widget]];\n      return getWidget<T, S, F>(schema, registeredWidget, registeredWidgets);\n    }\n  }\n\n  throw new Error(`No widget '${widget}' for type '${type}'`);\n}\n","import { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** JS has no built-in hashing function, so rolling our own\n *  based on Java's hashing fn:\n *  http://www.java2s.com/example/nodejs-utility-method/string-hash/hashcode-4dc2b.html\n *\n * @param string - The string for which to get the hash\n * @returns - The resulting hash of the string in hex format\n */\nfunction hashString(string: string): string {\n  let hash = 0;\n  for (let i = 0; i < string.length; i += 1) {\n    const chr = string.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash = hash & hash; // Convert to 32bit integer\n  }\n  return hash.toString(16);\n}\n\n/** Stringifies the schema and returns the hash of the resulting string. Sorts schema fields\n * in consistent order before stringify to prevent different hash ids for the same schema.\n *\n * @param schema - The schema for which the hash is desired\n * @returns - The string obtained from the hash of the stringified schema\n */\nexport default function hashForSchema<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  const allKeys = new Set<string>();\n  // solution source: https://stackoverflow.com/questions/16167581/sort-object-properties-and-json-stringify/53593328#53593328\n  JSON.stringify(schema, (key, value) => (allKeys.add(key), value));\n  return hashString(JSON.stringify(schema, Array.from(allKeys).sort()));\n}\n","import getWidget from './getWidget';\nimport { FormContextType, RegistryWidgetsType, RJSFSchema, StrictRJSFSchema, Widget } from './types';\n\n/** Detects whether the `widget` exists for the `schema` with the associated `registryWidgets` and returns true if it\n * does, or false if it doesn't.\n *\n * @param schema - The schema for the field\n * @param widget - Either the name of the widget OR a `Widget` implementation to use\n * @param [registeredWidgets={}] - A registry of widget name to `Widget` implementation\n * @returns - True if the widget exists, false otherwise\n */\nexport default function hasWidget<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>(\n  schema: RJSFSchema,\n  widget: Widget<T, S, F> | string,\n  registeredWidgets: RegistryWidgetsType<T, S, F> = {}\n) {\n  try {\n    getWidget(schema, widget, registeredWidgets);\n    return true;\n  } catch (e) {\n    const err: Error = e as Error;\n    if (err.message && (err.message.startsWith('No widget') || err.message.startsWith('Unsupported widget'))) {\n      return false;\n    }\n    throw e;\n  }\n}\n","import isString from 'lodash/isString';\n\nimport { IdSchema } from './types';\nimport { ID_KEY } from './constants';\n\n/** Generates a consistent `id` pattern for a given `id` and a `suffix`\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @param suffix - The suffix to append to the id\n */\nfunction idGenerator<T = any>(id: IdSchema<T> | string, suffix: string) {\n  const theId = isString(id) ? id : id[ID_KEY];\n  return `${theId}__${suffix}`;\n}\n/** Return a consistent `id` for the field description element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field description element from the given `id`\n */\nexport function descriptionId<T = any>(id: IdSchema<T> | string) {\n  return idGenerator<T>(id, 'description');\n}\n\n/** Return a consistent `id` for the field error element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field error element from the given `id`\n */\nexport function errorId<T = any>(id: IdSchema<T> | string) {\n  return idGenerator<T>(id, 'error');\n}\n\n/** Return a consistent `id` for the field examples element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field examples element from the given `id`\n */\nexport function examplesId<T = any>(id: IdSchema<T> | string) {\n  return idGenerator<T>(id, 'examples');\n}\n\n/** Return a consistent `id` for the field help element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field help element from the given `id`\n */\nexport function helpId<T = any>(id: IdSchema<T> | string) {\n  return idGenerator<T>(id, 'help');\n}\n\n/** Return a consistent `id` for the field title element\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @returns - The consistent id for the field title element from the given `id`\n */\nexport function titleId<T = any>(id: IdSchema<T> | string) {\n  return idGenerator<T>(id, 'title');\n}\n\n/** Return a list of element ids that contain additional information about the field that can be used to as the aria\n * description of the field. This is correctly omitting `titleId` which would be \"labeling\" rather than \"describing\" the\n * element.\n *\n * @param id - Either simple string id or an IdSchema from which to extract it\n * @param [includeExamples=false] - Optional flag, if true, will add the `examplesId` into the list\n * @returns - The string containing the list of ids for use in an `aria-describedBy` attribute\n */\nexport function ariaDescribedByIds<T = any>(id: IdSchema<T> | string, includeExamples = false) {\n  const examples = includeExamples ? ` ${examplesId<T>(id)}` : '';\n  return `${errorId<T>(id)} ${descriptionId<T>(id)} ${helpId<T>(id)}${examples}`;\n}\n\n/** Return a consistent `id` for the `optionIndex`s of a `Radio` or `Checkboxes` widget\n *\n * @param id - The id of the parent component for the option\n * @param optionIndex - The index of the option for which the id is desired\n * @returns - An id for the option index based on the parent `id`\n */\nexport function optionId(id: string, optionIndex: number) {\n  return `${id}-${optionIndex}`;\n}\n","import { ReactElement } from 'react';\n\n/** Helper function that will return the value to use for a widget `label` based on `hideLabel`. The `fallback` is used\n * as the return value from the function when `hideLabel` is true. Due to the implementation of theme components, it\n * may be necessary to return something other than `undefined` to cause the theme component to not render a label. Some\n * themes require may `false` and others may require an empty string.\n *\n * @param [label] - The label string or component to render when not hidden\n * @param [hideLabel] - Flag, if true, will cause the label to be hidden\n * @param [fallback] - One of 3 values, `undefined` (the default), `false` or an empty string\n * @returns - `fallback` if `hideLabel` is true, otherwise `label`\n */\n\nexport default function labelValue(label?: string, hideLabel?: boolean, fallback?: ''): undefined | string;\nexport default function labelValue(label?: string, hideLabel?: boolean, fallback?: false): undefined | false | string;\nexport default function labelValue(label?: ReactElement, hideLabel?: boolean, fallback?: ''): undefined | ReactElement;\nexport default function labelValue(\n  label?: ReactElement,\n  hideLabel?: boolean,\n  fallback?: false\n): undefined | false | ReactElement;\nexport default function labelValue(\n  label?: string | ReactElement,\n  hideLabel?: boolean,\n  fallback?: false | ''\n): undefined | false | string | ReactElement {\n  return hideLabel ? fallback : label;\n}\n","/** Converts a local Date string into a UTC date string\n *\n * @param dateString - The string representation of a date as accepted by the `Date()` constructor\n * @returns - A UTC date string if `dateString` is truthy, otherwise undefined\n */\nexport default function localToUTC(dateString: string) {\n  return dateString ? new Date(dateString).toJSON() : undefined;\n}\n","import toConstant from './toConstant';\nimport { RJSFSchema, EnumOptionsType, StrictRJSFSchema } from './types';\n\n/** Gets the list of options from the schema. If the schema has an enum list, then those enum values are returned. The\n * labels for the options will be extracted from the non-standard, RJSF-deprecated `enumNames` if it exists, otherwise\n * the label will be the same as the `value`. If the schema has a `oneOf` or `anyOf`, then the value is the list of\n * `const` values from the schema and the label is either the `schema.title` or the value.\n *\n * @param schema - The schema from which to extract the options list\n * @returns - The list of options from the schema\n */\nexport default function optionsList<S extends StrictRJSFSchema = RJSFSchema>(\n  schema: S\n): EnumOptionsType<S>[] | undefined {\n  // enumNames was deprecated in v5 and is intentionally omitted from the RJSFSchema type.\n  // Cast the type to include enumNames so the feature still works.\n  const schemaWithEnumNames = schema as S & { enumNames?: string[] };\n  if (schemaWithEnumNames.enumNames && process.env.NODE_ENV !== 'production') {\n    console.warn('The enumNames property is deprecated and may be removed in a future major release.');\n  }\n  if (schema.enum) {\n    return schema.enum.map((value, i) => {\n      const label = (schemaWithEnumNames.enumNames && schemaWithEnumNames.enumNames[i]) || String(value);\n      return { label, value };\n    });\n  }\n  const altSchemas = schema.oneOf || schema.anyOf;\n  return (\n    altSchemas &&\n    altSchemas.map((aSchemaDef) => {\n      const aSchema = aSchemaDef as S;\n      const value = toConstant(aSchema);\n      const label = aSchema.title || String(value);\n      return {\n        schema: aSchema,\n        label,\n        value,\n      };\n    })\n  );\n}\n","import { CONST_KEY, ENUM_KEY } from './constants';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Returns the constant value from the schema when it is either a single value enum or has a const key. Otherwise\n * throws an error.\n *\n * @param schema - The schema from which to obtain the constant value\n * @returns - The constant value for the schema\n * @throws - Error when the schema does not have a constant value\n */\nexport default function toConstant<S extends StrictRJSFSchema = RJSFSchema>(schema: S) {\n  if (ENUM_KEY in schema && Array.isArray(schema.enum) && schema.enum.length === 1) {\n    return schema.enum[0];\n  }\n  if (CONST_KEY in schema) {\n    return schema.const;\n  }\n  throw new Error('schema cannot be inferred as a constant');\n}\n","import { GenericObjectType } from './types';\n\n/** Given a list of `properties` and an `order` list, returns a list that contains the `properties` ordered correctly.\n * If `order` is not an array, then the untouched `properties` list is returned. Otherwise `properties` is ordered per\n * the `order` list. If `order` contains a '*' then any `properties` that are not mentioned explicity in `order` will be\n * places in the location of the `*`.\n *\n * @param properties - The list of property keys to be ordered\n * @param order - An array of property keys to be ordered first, with an optional '*' property\n * @returns - A list with the `properties` ordered\n * @throws - Error when the properties cannot be ordered correctly\n */\nexport default function orderProperties(properties: string[], order?: string[]): string[] {\n  if (!Array.isArray(order)) {\n    return properties;\n  }\n\n  const arrayToHash = (arr: string[]) =>\n    arr.reduce((prev: GenericObjectType, curr) => {\n      prev[curr] = true;\n      return prev;\n    }, {});\n  const errorPropList = (arr: string[]) =>\n    arr.length > 1 ? `properties '${arr.join(\"', '\")}'` : `property '${arr[0]}'`;\n  const propertyHash = arrayToHash(properties);\n  const orderFiltered = order.filter((prop) => prop === '*' || propertyHash[prop]);\n  const orderHash = arrayToHash(orderFiltered);\n\n  const rest = properties.filter((prop: string) => !orderHash[prop]);\n  const restIndex = orderFiltered.indexOf('*');\n  if (restIndex === -1) {\n    if (rest.length) {\n      throw new Error(`uiSchema order list does not contain ${errorPropList(rest)}`);\n    }\n    return orderFiltered;\n  }\n  if (restIndex !== orderFiltered.lastIndexOf('*')) {\n    throw new Error('uiSchema order list contains more than one wildcard item');\n  }\n\n  const complete = [...orderFiltered];\n  complete.splice(restIndex, 1, ...rest);\n  return complete;\n}\n","import { DateObject } from './types';\n\n/** Parses the `dateString` into a `DateObject`, including the time information when `includeTime` is true\n *\n * @param dateString - The date string to parse into a DateObject\n * @param [includeTime=true] - Optional flag, if false, will not include the time data into the object\n * @returns - The date string converted to a `DateObject`\n * @throws - Error when the date cannot be parsed from the string\n */\nexport default function parseDateString(dateString?: string, includeTime = true): DateObject {\n  if (!dateString) {\n    return {\n      year: -1,\n      month: -1,\n      day: -1,\n      hour: includeTime ? -1 : 0,\n      minute: includeTime ? -1 : 0,\n      second: includeTime ? -1 : 0,\n    };\n  }\n  const date = new Date(dateString);\n  if (Number.isNaN(date.getTime())) {\n    throw new Error('Unable to parse date ' + dateString);\n  }\n  return {\n    year: date.getUTCFullYear(),\n    month: date.getUTCMonth() + 1, // oh you, javascript.\n    day: date.getUTCDate(),\n    hour: includeTime ? date.getUTCHours() : 0,\n    minute: includeTime ? date.getUTCMinutes() : 0,\n    second: includeTime ? date.getUTCSeconds() : 0,\n  };\n}\n","import { RJSFSchema, StrictRJSFSchema } from './types';\n\n/** Check to see if a `schema` specifies that a value must be true. This happens when:\n * - `schema.const` is truthy\n * - `schema.enum` == `[true]`\n * - `schema.anyOf` or `schema.oneOf` has a single value which recursively returns true\n * - `schema.allOf` has at least one value which recursively returns true\n *\n * @param schema - The schema to check\n * @returns - True if the schema specifies a value that must be true, false otherwise\n */\nexport default function schemaRequiresTrueValue<S extends StrictRJSFSchema = RJSFSchema>(schema: S): boolean {\n  // Check if const is a truthy value\n  if (schema.const) {\n    return true;\n  }\n\n  // Check if an enum has a single value of true\n  if (schema.enum && schema.enum.length === 1 && schema.enum[0] === true) {\n    return true;\n  }\n\n  // If anyOf has a single value, evaluate the subschema\n  if (schema.anyOf && schema.anyOf.length === 1) {\n    return schemaRequiresTrueValue(schema.anyOf[0] as S);\n  }\n\n  // If oneOf has a single value, evaluate the subschema\n  if (schema.oneOf && schema.oneOf.length === 1) {\n    return schemaRequiresTrueValue(schema.oneOf[0] as S);\n  }\n\n  // Evaluate each subschema in allOf, to see if one of them requires a true value\n  if (schema.allOf) {\n    const schemaSome = (subSchema: S['additionalProperties']) => schemaRequiresTrueValue(subSchema as S);\n    return schema.allOf.some(schemaSome);\n  }\n\n  return false;\n}\n","import React from 'react';\n\nimport deepEquals from './deepEquals';\n\n/** Determines whether the given `component` should be rerendered by comparing its current set of props and state\n * against the next set. If either of those two sets are not the same, then the component should be rerendered.\n *\n * @param component - A React component being checked\n * @param nextProps - The next set of props against which to check\n * @param nextState - The next set of state against which to check\n * @returns - True if the component should be re-rendered, false otherwise\n */\nexport default function shouldRender(component: React.Component, nextProps: any, nextState: any) {\n  const { props, state } = component;\n  return !deepEquals(props, nextProps) || !deepEquals(state, nextState);\n}\n","import { DateObject } from './types';\n\n/** Returns a UTC date string for the given `dateObject`. If `time` is false, then the time portion of the string is\n * removed.\n *\n * @param dateObject - The `DateObject` to convert to a date string\n * @param [time=true] - Optional flag used to remove the time portion of the date string if false\n * @returns - The UTC date string\n */\nexport default function toDateString(dateObject: DateObject, time = true) {\n  const { year, month, day, hour = 0, minute = 0, second = 0 } = dateObject;\n  const utcTime = Date.UTC(year, month - 1, day, hour, minute, second);\n  const datetime = new Date(utcTime).toJSON();\n  return time ? datetime : datetime.slice(0, 10);\n}\n","import isPlainObject from 'lodash/isPlainObject';\n\nimport { ERRORS_KEY } from './constants';\nimport { ErrorSchema, GenericObjectType, RJSFValidationError } from './types';\n\n/** Converts an `errorSchema` into a list of `RJSFValidationErrors`\n *\n * @param errorSchema - The `ErrorSchema` instance to convert\n * @param [fieldPath=[]] - The current field path, defaults to [] if not specified\n * @returns - The list of `RJSFValidationErrors` extracted from the `errorSchema`\n */\nexport default function toErrorList<T = any>(\n  errorSchema?: ErrorSchema<T>,\n  fieldPath: string[] = []\n): RJSFValidationError[] {\n  if (!errorSchema) {\n    return [];\n  }\n  let errorList: RJSFValidationError[] = [];\n  if (ERRORS_KEY in errorSchema) {\n    errorList = errorList.concat(\n      errorSchema[ERRORS_KEY]!.map((message: string) => {\n        const property = `.${fieldPath.join('.')}`;\n        return {\n          property,\n          message,\n          stack: `${property} ${message}`,\n        };\n      })\n    );\n  }\n  return Object.keys(errorSchema).reduce((acc, key) => {\n    if (key !== ERRORS_KEY) {\n      const childSchema = (errorSchema as GenericObjectType)[key];\n      if (isPlainObject(childSchema)) {\n        acc = acc.concat(toErrorList(childSchema, [...fieldPath, key]));\n      }\n    }\n    return acc;\n  }, errorList);\n}\n","/** An enumeration of all the translatable strings used by `@rjsf/core` and its themes. The value of each of the\n * enumeration keys is expected to be the actual english string. Some strings contain replaceable parameter values\n * as indicated by `%1`, `%2`, etc. The number after the `%` indicates the order of the parameter. The ordering of\n * parameters is important because some languages may choose to put the second parameter before the first in its\n * translation. Also, some strings are rendered using `markdown-to-jsx` and thus support markdown and inline html.\n */\nexport enum TranslatableString {\n  /** Fallback title of an array item, used by ArrayField */\n  ArrayItemTitle = 'Item',\n  /** Missing items reason, used by ArrayField */\n  MissingItems = 'Missing items definition',\n  /** Yes label, used by BooleanField */\n  YesLabel = 'Yes',\n  /** No label, used by BooleanField */\n  NoLabel = 'No',\n  /** Close label, used by ErrorList */\n  CloseLabel = 'Close',\n  /** Errors label, used by ErrorList */\n  ErrorsLabel = 'Errors',\n  /** New additionalProperties string default value, used by ObjectField */\n  NewStringDefault = 'New Value',\n  /** Add button title, used by AddButton */\n  AddButton = 'Add',\n  /** Add button title, used by AddButton */\n  AddItemButton = 'Add Item',\n  /** Copy button title, used by IconButton */\n  CopyButton = 'Copy',\n  /** Move down button title, used by IconButton */\n  MoveDownButton = 'Move down',\n  /** Move up button title, used by IconButton */\n  MoveUpButton = 'Move up',\n  /** Remove button title, used by IconButton */\n  RemoveButton = 'Remove',\n  /** Now label, used by AltDateWidget */\n  NowLabel = 'Now',\n  /** Clear label, used by AltDateWidget */\n  ClearLabel = 'Clear',\n  /** Aria date label, used by DateWidget */\n  AriaDateLabel = 'Select a date',\n  /** File preview label, used by FileWidget */\n  PreviewLabel = 'Preview',\n  /** Decrement button aria label, used by UpDownWidget */\n  DecrementAriaLabel = 'Decrease value by 1',\n  /** Increment button aria label, used by UpDownWidget */\n  IncrementAriaLabel = 'Increase value by 1',\n  // Strings with replaceable parameters\n  /** Unknown field type reason, where %1 will be replaced with the type as provided by SchemaField */\n  UnknownFieldType = 'Unknown field type %1',\n  /** Option prefix, where %1 will be replaced with the option index as provided by MultiSchemaField */\n  OptionPrefix = 'Option %1',\n  /** Option prefix, where %1 and %2 will be replaced by the schema title and option index, respectively as provided by\n   * MultiSchemaField\n   */\n  TitleOptionPrefix = '%1 option %2',\n  /** Key label, where %1 will be replaced by the label as provided by WrapIfAdditionalTemplate */\n  KeyLabel = '%1 Key',\n  // Strings with replaceable parameters AND/OR that support markdown and html\n  /** Invalid object field configuration as provided by the ObjectField.\n   * NOTE: Use markdown notation rather than html tags.\n   */\n  InvalidObjectField = 'Invalid \"%1\" object field configuration: _%2_.',\n  /** Unsupported field schema, used by UnsupportedField */\n  UnsupportedField = 'Unsupported field schema.',\n  /** Unsupported field schema, where %1 will be replaced by the idSchema.$id as provided by UnsupportedField.\n   * NOTE: Use markdown notation rather than html tags.\n   */\n  UnsupportedFieldWithId = 'Unsupported field schema for field `%1`.',\n  /** Unsupported field schema, where %1 will be replaced by the reason string as provided by UnsupportedField.\n   * NOTE: Use markdown notation rather than html tags.\n   */\n  UnsupportedFieldWithReason = 'Unsupported field schema: _%1_.',\n  /** Unsupported field schema, where %1 and %2 will be replaced by the idSchema.$id and reason strings, respectively,\n   * as provided by UnsupportedField.\n   * NOTE: Use markdown notation rather than html tags.\n   */\n  UnsupportedFieldWithIdAndReason = 'Unsupported field schema for field `%1`: _%2_.',\n  /** File name, type and size info, where %1, %2 and %3 will be replaced by the file name, file type and file size as\n   * provided by FileWidget\n   */\n  FilesInfo = '**%1** (%2, %3 bytes)',\n}\n","import toPath from 'lodash/toPath';\n\nimport { ErrorSchema, RJSFValidationError } from './types';\nimport ErrorSchemaBuilder from './ErrorSchemaBuilder';\n\n/** Transforms a rjsf validation errors list:\n * [\n *   {property: '.level1.level2[2].level3', message: 'err a'},\n *   {property: '.level1.level2[2].level3', message: 'err b'},\n *   {property: '.level1.level2[4].level3', message: 'err b'},\n * ]\n * Into an error tree:\n * {\n *   level1: {\n *     level2: {\n *       2: {level3: {errors: ['err a', 'err b']}},\n *       4: {level3: {errors: ['err b']}},\n *     }\n *   }\n * };\n *\n * @param errors - The list of RJSFValidationError objects\n * @returns - The `ErrorSchema` built from the list of `RJSFValidationErrors`\n */\nexport default function toErrorSchema<T = any>(errors: RJSFValidationError[]): ErrorSchema<T> {\n  const builder = new ErrorSchemaBuilder<T>();\n  if (errors.length) {\n    errors.forEach((error) => {\n      const { property, message } = error;\n      // When the property is the root element, just use an empty array for the path\n      const path = property === '.' ? [] : toPath(property);\n      // If the property is at the root (.level1) then toPath creates\n      // an empty array element at the first index. Remove it.\n      if (path.length > 0 && path[0] === '') {\n        path.splice(0, 1);\n      }\n      if (message) {\n        builder.addErrors(message, path);\n      }\n    });\n  }\n  return builder.ErrorSchema;\n}\n","import isPlainObject from 'lodash/isPlainObject';\n\nimport { ErrorSchema, FormValidation, GenericObjectType } from './types';\n\n/** Unwraps the `errorHandler` structure into the associated `ErrorSchema`, stripping the `addError()` functions from it\n *\n * @param errorHandler - The `FormValidation` error handling structure\n * @returns - The `ErrorSchema` resulting from the stripping of the `addError()` function\n */\nexport default function unwrapErrorHandler<T = any>(errorHandler: FormValidation<T>): ErrorSchema<T> {\n  return Object.keys(errorHandler).reduce((acc, key) => {\n    if (key === 'addError') {\n      return acc;\n    } else {\n      const childSchema = (errorHandler as GenericObjectType)[key];\n      if (isPlainObject(childSchema)) {\n        return {\n          ...acc,\n          [key]: unwrapErrorHandler(childSchema),\n        };\n      }\n      return { ...acc, [key]: childSchema };\n    }\n  }, {} as ErrorSchema<T>);\n}\n","import pad from './pad';\n\n/** Converts a UTC date string into a local Date format\n *\n * @param jsonDate - A UTC date string\n * @returns - An empty string when `jsonDate` is falsey, otherwise a date string in local format\n */\nexport default function utcToLocal(jsonDate: string) {\n  if (!jsonDate) {\n    return '';\n  }\n\n  // required format of `'yyyy-MM-ddThh:mm' followed by optional ':ss' or ':ss.SSS'\n  // https://html.spec.whatwg.org/multipage/input.html#local-date-and-time-state-(type%3Ddatetime-local)\n  // > should be a _valid local date and time string_ (not GMT)\n\n  // Note - date constructor passed local ISO-8601 does not correctly\n  // change time to UTC in node pre-8\n  const date = new Date(jsonDate);\n\n  const yyyy = pad(date.getFullYear(), 4);\n  const MM = pad(date.getMonth() + 1, 2);\n  const dd = pad(date.getDate(), 2);\n  const hh = pad(date.getHours(), 2);\n  const mm = pad(date.getMinutes(), 2);\n  const ss = pad(date.getSeconds(), 2);\n  const SSS = pad(date.getMilliseconds(), 3);\n\n  return `${yyyy}-${MM}-${dd}T${hh}:${mm}:${ss}.${SSS}`;\n}\n","import isEmpty from 'lodash/isEmpty';\n\nimport mergeObjects from './mergeObjects';\nimport toErrorList from './toErrorList';\nimport { ErrorSchema, ValidationData } from './types';\n\n/** Merges the errors in `additionalErrorSchema` into the existing `validationData` by combining the hierarchies in the\n * two `ErrorSchema`s and then appending the error list from the `additionalErrorSchema` obtained by calling\n * `toErrorList()` on the `errors` in the `validationData`. If no `additionalErrorSchema` is passed, then\n * `validationData` is returned.\n *\n * @param validationData - The current `ValidationData` into which to merge the additional errors\n * @param [additionalErrorSchema] - The optional additional set of errors in an `ErrorSchema`\n * @returns - The `validationData` with the additional errors from `additionalErrorSchema` merged into it, if provided.\n */\nexport default function validationDataMerge<T = any>(\n  validationData: ValidationData<T>,\n  additionalErrorSchema?: ErrorSchema<T>\n): ValidationData<T> {\n  if (!additionalErrorSchema) {\n    return validationData;\n  }\n  const { errors: oldErrors, errorSchema: oldErrorSchema } = validationData;\n  let errors = toErrorList(additionalErrorSchema);\n  let errorSchema = additionalErrorSchema;\n  if (!isEmpty(oldErrorSchema)) {\n    errorSchema = mergeObjects(oldErrorSchema, additionalErrorSchema, true) as ErrorSchema<T>;\n    errors = [...oldErrors].concat(errors);\n  }\n  return { errorSchema, errors };\n}\n","import { REF_KEY, ROOT_SCHEMA_PREFIX } from './constants';\nimport { RJSFSchema, StrictRJSFSchema } from './types';\nimport isObject from 'lodash/isObject';\n\n/** Takes a `node` object and transforms any contained `$ref` node variables with a prefix, recursively calling\n * `withIdRefPrefix` for any other elements.\n *\n * @param node - The object node to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n */\nfunction withIdRefPrefixObject<S extends StrictRJSFSchema = RJSFSchema>(node: S): S {\n  for (const key in node) {\n    const realObj: { [k: string]: any } = node;\n    const value = realObj[key];\n    if (key === REF_KEY && typeof value === 'string' && value.startsWith('#')) {\n      realObj[key] = ROOT_SCHEMA_PREFIX + value;\n    } else {\n      realObj[key] = withIdRefPrefix<S>(value);\n    }\n  }\n  return node;\n}\n\n/** Takes a `node` object list and transforms any contained `$ref` node variables with a prefix, recursively calling\n * `withIdRefPrefix` for any other elements.\n *\n * @param node - The list of object nodes to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n */\nfunction withIdRefPrefixArray<S extends StrictRJSFSchema = RJSFSchema>(node: S[]): S[] {\n  for (let i = 0; i < node.length; i++) {\n    node[i] = withIdRefPrefix<S>(node[i]) as S;\n  }\n  return node;\n}\n\n/** Recursively prefixes all `$ref`s in a schema with the value of the `ROOT_SCHEMA_PREFIX` constant.\n * This is used in isValid to make references to the rootSchema\n *\n * @param schemaNode - The object node to which a ROOT_SCHEMA_PREFIX is added when a REF_KEY is part of it\n * @returns - A copy of the `schemaNode` with updated `$ref`s\n */\nexport default function withIdRefPrefix<S extends StrictRJSFSchema = RJSFSchema>(\n  schemaNode: S | S[] | S[keyof S]\n): S | S[] | S[keyof S] {\n  if (Array.isArray(schemaNode)) {\n    return withIdRefPrefixArray<S>([...schemaNode]);\n  }\n  if (isObject(schemaNode)) {\n    return withIdRefPrefixObject<S>({ ...schemaNode });\n  }\n  return schemaNode;\n}\n","/**\n * @license React\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var b=Symbol.for(\"react.element\"),c=Symbol.for(\"react.portal\"),d=Symbol.for(\"react.fragment\"),e=Symbol.for(\"react.strict_mode\"),f=Symbol.for(\"react.profiler\"),g=Symbol.for(\"react.provider\"),h=Symbol.for(\"react.context\"),k=Symbol.for(\"react.server_context\"),l=Symbol.for(\"react.forward_ref\"),m=Symbol.for(\"react.suspense\"),n=Symbol.for(\"react.suspense_list\"),p=Symbol.for(\"react.memo\"),q=Symbol.for(\"react.lazy\"),t=Symbol.for(\"react.offscreen\"),u;u=Symbol.for(\"react.module.reference\");\nfunction v(a){if(\"object\"===typeof a&&null!==a){var r=a.$$typeof;switch(r){case b:switch(a=a.type,a){case d:case f:case e:case m:case n:return a;default:switch(a=a&&a.$$typeof,a){case k:case h:case l:case q:case p:case g:return a;default:return r}}case c:return r}}}exports.ContextConsumer=h;exports.ContextProvider=g;exports.Element=b;exports.ForwardRef=l;exports.Fragment=d;exports.Lazy=q;exports.Memo=p;exports.Portal=c;exports.Profiler=f;exports.StrictMode=e;exports.Suspense=m;\nexports.SuspenseList=n;exports.isAsyncMode=function(){return!1};exports.isConcurrentMode=function(){return!1};exports.isContextConsumer=function(a){return v(a)===h};exports.isContextProvider=function(a){return v(a)===g};exports.isElement=function(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===b};exports.isForwardRef=function(a){return v(a)===l};exports.isFragment=function(a){return v(a)===d};exports.isLazy=function(a){return v(a)===q};exports.isMemo=function(a){return v(a)===p};\nexports.isPortal=function(a){return v(a)===c};exports.isProfiler=function(a){return v(a)===f};exports.isStrictMode=function(a){return v(a)===e};exports.isSuspense=function(a){return v(a)===m};exports.isSuspenseList=function(a){return v(a)===n};\nexports.isValidElementType=function(a){return\"string\"===typeof a||\"function\"===typeof a||a===d||a===f||a===e||a===m||a===n||a===t||\"object\"===typeof a&&null!==a&&(a.$$typeof===q||a.$$typeof===p||a.$$typeof===g||a.$$typeof===h||a.$$typeof===l||a.$$typeof===u||void 0!==a.getModuleId)?!0:!1};exports.typeOf=v;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-is.production.min.js');\n} else {\n  module.exports = require('./cjs/react-is.development.js');\n}\n","import Ajv, { Options } from 'ajv';\nimport addFormats, { FormatsPluginOptions } from 'ajv-formats';\nimport isObject from 'lodash/isObject';\n\nimport { CustomValidatorOptionsType } from './types';\nimport { ADDITIONAL_PROPERTY_FLAG, RJSF_ADDITIONAL_PROPERTIES_FLAG } from '@rjsf/utils';\n\nexport const AJV_CONFIG: Options = {\n  allErrors: true,\n  multipleOfPrecision: 8,\n  strict: false,\n  verbose: true,\n  discriminator: false, // TODO enable this in V6\n} as const;\nexport const COLOR_FORMAT_REGEX =\n  /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/;\nexport const DATA_URL_FORMAT_REGEX = /^data:([a-z]+\\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;\n\n/** Creates an Ajv version 8 implementation object with standard support for the 'color` and `data-url` custom formats.\n * If `additionalMetaSchemas` are provided then the Ajv instance is modified to add each of the meta schemas in the\n * list. If `customFormats` are provided then those additional formats are added to the list of supported formats. If\n * `ajvOptionsOverrides` are provided then they are spread on top of the default `AJV_CONFIG` options when constructing\n * the `Ajv` instance. With Ajv v8, the JSON Schema formats are not provided by default, but can be plugged in. By\n * default, all formats from the `ajv-formats` library are added. To disable this capability, set the `ajvFormatOptions`\n * parameter to `false`. Additionally, you can configure the `ajv-formats` by providing a custom set of\n * [format options](https://github.com/ajv-validator/ajv-formats) to the `ajvFormatOptions` parameter.\n *\n * @param [additionalMetaSchemas] - The list of additional meta schemas that the validator can access\n * @param [customFormats] - The set of additional custom formats that the validator will support\n * @param [ajvOptionsOverrides={}] - The set of validator config override options\n * @param [ajvFormatOptions] - The `ajv-format` options to use when adding formats to `ajv`; pass `false` to disable it\n * @param [AjvClass] - The `Ajv` class to use when creating the validator instance\n */\nexport default function createAjvInstance(\n  additionalMetaSchemas?: CustomValidatorOptionsType['additionalMetaSchemas'],\n  customFormats?: CustomValidatorOptionsType['customFormats'],\n  ajvOptionsOverrides: CustomValidatorOptionsType['ajvOptionsOverrides'] = {},\n  ajvFormatOptions?: FormatsPluginOptions | false,\n  AjvClass: typeof Ajv = Ajv\n) {\n  const ajv = new AjvClass({ ...AJV_CONFIG, ...ajvOptionsOverrides });\n  if (ajvFormatOptions) {\n    addFormats(ajv, ajvFormatOptions);\n  } else if (ajvFormatOptions !== false) {\n    addFormats(ajv);\n  }\n\n  // add custom formats\n  ajv.addFormat('data-url', DATA_URL_FORMAT_REGEX);\n  ajv.addFormat('color', COLOR_FORMAT_REGEX);\n\n  // Add RJSF-specific additional properties keywords so Ajv doesn't report errors if strict is enabled.\n  ajv.addKeyword(ADDITIONAL_PROPERTY_FLAG);\n  ajv.addKeyword(RJSF_ADDITIONAL_PROPERTIES_FLAG);\n\n  // add more schemas to validate against\n  if (Array.isArray(additionalMetaSchemas)) {\n    ajv.addMetaSchema(additionalMetaSchemas);\n  }\n\n  // add more custom formats to validate against\n  if (isObject(customFormats)) {\n    Object.keys(customFormats).forEach((formatName) => {\n      ajv.addFormat(formatName, customFormats[formatName]);\n    });\n  }\n\n  return ajv;\n}\n","import { ErrorObject } from 'ajv';\nimport get from 'lodash/get';\nimport {\n  createErrorHandler,\n  CustomValidator,\n  ErrorTransformer,\n  FormContextType,\n  getDefaultFormState,\n  getUiOptions,\n  PROPERTIES_KEY,\n  RJSFSchema,\n  RJSFValidationError,\n  StrictRJSFSchema,\n  toErrorSchema,\n  UiSchema,\n  unwrapErrorHandler,\n  validationDataMerge,\n  ValidatorType,\n} from '@rjsf/utils';\n\nexport type RawValidationErrorsType<Result = any> = { errors?: Result[]; validationError?: Error };\n\n/** Transforming the error output from ajv to format used by @rjsf/utils.\n * At some point, components should be updated to support ajv.\n *\n * @param errors - The list of AJV errors to convert to `RJSFValidationErrors`\n * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n */\nexport function transformRJSFValidationErrors<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(errors: ErrorObject[] = [], uiSchema?: UiSchema<T, S, F>): RJSFValidationError[] {\n  return errors.map((e: ErrorObject) => {\n    const { instancePath, keyword, params, schemaPath, parentSchema, ...rest } = e;\n    let { message = '' } = rest;\n    let property = instancePath.replace(/\\//g, '.');\n    let stack = `${property} ${message}`.trim();\n\n    if ('missingProperty' in params) {\n      property = property ? `${property}.${params.missingProperty}` : params.missingProperty;\n      const currentProperty: string = params.missingProperty;\n      const uiSchemaTitle = getUiOptions(get(uiSchema, `${property.replace(/^\\./, '')}`)).title;\n\n      if (uiSchemaTitle) {\n        message = message.replace(currentProperty, uiSchemaTitle);\n      } else {\n        const parentSchemaTitle = get(parentSchema, [PROPERTIES_KEY, currentProperty, 'title']);\n\n        if (parentSchemaTitle) {\n          message = message.replace(currentProperty, parentSchemaTitle);\n        }\n      }\n\n      stack = message;\n    } else {\n      const uiSchemaTitle = getUiOptions<T, S, F>(get(uiSchema, `${property.replace(/^\\./, '')}`)).title;\n\n      if (uiSchemaTitle) {\n        stack = `'${uiSchemaTitle}' ${message}`.trim();\n      } else {\n        const parentSchemaTitle = parentSchema?.title;\n\n        if (parentSchemaTitle) {\n          stack = `'${parentSchemaTitle}' ${message}`.trim();\n        }\n      }\n    }\n\n    // put data in expected format\n    return {\n      name: keyword,\n      property,\n      message,\n      params, // specific to ajv\n      stack,\n      schemaPath,\n    };\n  });\n}\n\n/** This function processes the `formData` with an optional user contributed `customValidate` function, which receives\n * the form data and a `errorHandler` function that will be used to add custom validation errors for each field. Also\n * supports a `transformErrors` function that will take the raw AJV validation errors, prior to custom validation and\n * transform them in what ever way it chooses.\n *\n * @param validator - The `ValidatorType` implementation used for the `getDefaultFormState()` call\n * @param rawErrors - The list of raw `ErrorObject`s to process\n * @param formData - The form data to validate\n * @param schema - The schema against which to validate the form data\n * @param [customValidate] - An optional function that is used to perform custom validation\n * @param [transformErrors] - An optional function that is used to transform errors after AJV validation\n * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n */\nexport default function processRawValidationErrors<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(\n  validator: ValidatorType<T, S, F>,\n  rawErrors: RawValidationErrorsType<ErrorObject>,\n  formData: T | undefined,\n  schema: S,\n  customValidate?: CustomValidator<T, S, F>,\n  transformErrors?: ErrorTransformer<T, S, F>,\n  uiSchema?: UiSchema<T, S, F>\n) {\n  const { validationError: invalidSchemaError } = rawErrors;\n  let errors = transformRJSFValidationErrors<T, S, F>(rawErrors.errors, uiSchema);\n\n  if (invalidSchemaError) {\n    errors = [...errors, { stack: invalidSchemaError!.message }];\n  }\n  if (typeof transformErrors === 'function') {\n    errors = transformErrors(errors, uiSchema);\n  }\n\n  let errorSchema = toErrorSchema<T>(errors);\n\n  if (invalidSchemaError) {\n    errorSchema = {\n      ...errorSchema,\n      $schema: {\n        __errors: [invalidSchemaError!.message],\n      },\n    };\n  }\n\n  if (typeof customValidate !== 'function') {\n    return { errors, errorSchema };\n  }\n\n  // Include form data with undefined values, which is required for custom validation.\n  const newFormData = getDefaultFormState<T, S, F>(validator, schema, formData, schema, true) as T;\n\n  const errorHandler = customValidate(newFormData, createErrorHandler<T>(newFormData), uiSchema);\n  const userErrorSchema = unwrapErrorHandler<T>(errorHandler);\n  return validationDataMerge<T>({ errors, errorSchema }, userErrorSchema);\n}\n","import Ajv, { ErrorObject, ValidateFunction } from 'ajv';\nimport {\n  CustomValidator,\n  deepEquals,\n  ErrorSchema,\n  ErrorTransformer,\n  FormContextType,\n  ID_KEY,\n  RJSFSchema,\n  ROOT_SCHEMA_PREFIX,\n  StrictRJSFSchema,\n  toErrorList,\n  UiSchema,\n  ValidationData,\n  ValidatorType,\n  withIdRefPrefix,\n  hashForSchema,\n} from '@rjsf/utils';\n\nimport { CustomValidatorOptionsType, Localizer } from './types';\nimport createAjvInstance from './createAjvInstance';\nimport processRawValidationErrors, { RawValidationErrorsType } from './processRawValidationErrors';\n\n/** `ValidatorType` implementation that uses the AJV 8 validation mechanism.\n */\nexport default class AJV8Validator<T = any, S extends StrictRJSFSchema = RJSFSchema, F extends FormContextType = any>\n  implements ValidatorType<T, S, F>\n{\n  /** The AJV instance to use for all validations\n   *\n   * @private\n   */\n  ajv: Ajv;\n\n  /** The Localizer function to use for localizing Ajv errors\n   *\n   * @private\n   */\n  readonly localizer?: Localizer;\n\n  /** Constructs an `AJV8Validator` instance using the `options`\n   *\n   * @param options - The `CustomValidatorOptionsType` options that are used to create the AJV instance\n   * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n   */\n  constructor(options: CustomValidatorOptionsType, localizer?: Localizer) {\n    const { additionalMetaSchemas, customFormats, ajvOptionsOverrides, ajvFormatOptions, AjvClass } = options;\n    this.ajv = createAjvInstance(additionalMetaSchemas, customFormats, ajvOptionsOverrides, ajvFormatOptions, AjvClass);\n    this.localizer = localizer;\n  }\n\n  /** Resets the internal AJV validator to clear schemas from it. Can be helpful for resetting the validator for tests.\n   */\n  reset() {\n    this.ajv.removeSchema();\n  }\n\n  /** Converts an `errorSchema` into a list of `RJSFValidationErrors`\n   *\n   * @param errorSchema - The `ErrorSchema` instance to convert\n   * @param [fieldPath=[]] - The current field path, defaults to [] if not specified\n   * @deprecated - Use the `toErrorList()` function provided by `@rjsf/utils` instead. This function will be removed in\n   *        the next major release.\n   */\n  toErrorList(errorSchema?: ErrorSchema<T>, fieldPath: string[] = []) {\n    return toErrorList(errorSchema, fieldPath);\n  }\n\n  /** Runs the pure validation of the `schema` and `formData` without any of the RJSF functionality. Provided for use\n   * by the playground. Returns the `errors` from the validation\n   *\n   * @param schema - The schema against which to validate the form data   * @param schema\n   * @param formData - The form data to validate\n   */\n  rawValidation<Result = any>(schema: S, formData?: T): RawValidationErrorsType<Result> {\n    let compilationError: Error | undefined = undefined;\n    let compiledValidator: ValidateFunction | undefined;\n    if (schema[ID_KEY]) {\n      compiledValidator = this.ajv.getSchema(schema[ID_KEY]);\n    }\n    try {\n      if (compiledValidator === undefined) {\n        compiledValidator = this.ajv.compile(schema);\n      }\n      compiledValidator(formData);\n    } catch (err) {\n      compilationError = err as Error;\n    }\n\n    let errors;\n    if (compiledValidator) {\n      if (typeof this.localizer === 'function') {\n        this.localizer(compiledValidator.errors);\n      }\n      errors = compiledValidator.errors || undefined;\n\n      // Clear errors to prevent persistent errors, see #1104\n      compiledValidator.errors = null;\n    }\n\n    return {\n      errors: errors as unknown as Result[],\n      validationError: compilationError,\n    };\n  }\n\n  /** This function processes the `formData` with an optional user contributed `customValidate` function, which receives\n   * the form data and a `errorHandler` function that will be used to add custom validation errors for each field. Also\n   * supports a `transformErrors` function that will take the raw AJV validation errors, prior to custom validation and\n   * transform them in what ever way it chooses.\n   *\n   * @param formData - The form data to validate\n   * @param schema - The schema against which to validate the form data\n   * @param [customValidate] - An optional function that is used to perform custom validation\n   * @param [transformErrors] - An optional function that is used to transform errors after AJV validation\n   * @param [uiSchema] - An optional uiSchema that is passed to `transformErrors` and `customValidate`\n   */\n  validateFormData(\n    formData: T | undefined,\n    schema: S,\n    customValidate?: CustomValidator<T, S, F>,\n    transformErrors?: ErrorTransformer<T, S, F>,\n    uiSchema?: UiSchema<T, S, F>\n  ): ValidationData<T> {\n    const rawErrors = this.rawValidation<ErrorObject>(schema, formData);\n    return processRawValidationErrors(this, rawErrors, formData, schema, customValidate, transformErrors, uiSchema);\n  }\n\n  /**\n   * This function checks if a schema needs to be added and if the root schemas don't match it removes the old root schema from the ajv instance and adds the new one.\n   * @param rootSchema - The root schema used to provide $ref resolutions\n   */\n  handleSchemaUpdate(rootSchema: S): void {\n    const rootSchemaId = rootSchema[ID_KEY] ?? ROOT_SCHEMA_PREFIX;\n    // add the rootSchema ROOT_SCHEMA_PREFIX as id.\n    // if schema validator instance doesn't exist, add it.\n    // else if the root schemas don't match, we should remove and add the root schema so we don't have to remove and recompile the schema every run.\n    if (this.ajv.getSchema(rootSchemaId) === undefined) {\n      this.ajv.addSchema(rootSchema, rootSchemaId);\n    } else if (!deepEquals(rootSchema, this.ajv.getSchema(rootSchemaId)?.schema)) {\n      this.ajv.removeSchema(rootSchemaId);\n      this.ajv.addSchema(rootSchema, rootSchemaId);\n    }\n  }\n\n  /** Validates data against a schema, returning true if the data is valid, or\n   * false otherwise. If the schema is invalid, then this function will return\n   * false.\n   *\n   * @param schema - The schema against which to validate the form data\n   * @param formData - The form data to validate\n   * @param rootSchema - The root schema used to provide $ref resolutions\n   */\n  isValid(schema: S, formData: T | undefined, rootSchema: S) {\n    try {\n      this.handleSchemaUpdate(rootSchema);\n      // then rewrite the schema ref's to point to the rootSchema\n      // this accounts for the case where schema have references to models\n      // that lives in the rootSchema but not in the schema in question.\n      const schemaWithIdRefPrefix = withIdRefPrefix<S>(schema) as S;\n      const schemaId = schemaWithIdRefPrefix[ID_KEY] ?? hashForSchema(schemaWithIdRefPrefix);\n      let compiledValidator: ValidateFunction | undefined;\n      compiledValidator = this.ajv.getSchema(schemaId);\n      if (compiledValidator === undefined) {\n        // Add schema by an explicit ID so it can be fetched later\n        // Fall back to using compile if necessary\n        // https://ajv.js.org/guide/managing-schemas.html#pre-adding-all-schemas-vs-adding-on-demand\n        compiledValidator =\n          this.ajv.addSchema(schemaWithIdRefPrefix, schemaId).getSchema(schemaId) ||\n          this.ajv.compile(schemaWithIdRefPrefix);\n      }\n      const result = compiledValidator(formData);\n      return result as boolean;\n    } catch (e) {\n      console.warn('Error encountered compiling schema:', e);\n      return false;\n    }\n  }\n}\n","import customizeValidator from './customizeValidator';\nimport createPrecompiledValidator from './createPrecompiledValidator';\n\nexport { customizeValidator, createPrecompiledValidator };\nexport * from './types';\n\nexport default customizeValidator();\n","import { FormContextType, RJSFSchema, StrictRJSFSchema } from '@rjsf/utils';\n\nimport { CustomValidatorOptionsType, Localizer } from './types';\nimport AJV8Validator from './validator';\n\n/** Creates and returns a customized implementation of the `ValidatorType` with the given customization `options` if\n * provided. If a `localizer` is provided, it is used to translate the messages generated by the underlying AJV\n * validation.\n *\n * @param [options={}] - The `CustomValidatorOptionsType` options that are used to create the `ValidatorType` instance\n * @param [localizer] - If provided, is used to localize a list of Ajv `ErrorObject`s\n * @returns - The custom validator implementation resulting from the set of parameters provided\n */\nexport default function customizeValidator<\n  T = any,\n  S extends StrictRJSFSchema = RJSFSchema,\n  F extends FormContextType = any\n>(options: CustomValidatorOptionsType = {}, localizer?: Localizer) {\n  return new AJV8Validator<T, S, F>(options, localizer);\n}\n","import type {AnySchemaObject} from \"./types\"\nimport AjvCore from \"./core\"\nimport draft7Vocabularies from \"./vocabularies/draft7\"\nimport discriminator from \"./vocabularies/discriminator\"\nimport * as draft7MetaSchema from \"./refs/json-schema-draft-07.json\"\n\nconst META_SUPPORT_DATA = [\"/properties\"]\n\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\"\n\nexport class Ajv extends AjvCore {\n  _addVocabularies(): void {\n    super._addVocabularies()\n    draft7Vocabularies.forEach((v) => this.addVocabulary(v))\n    if (this.opts.discriminator) this.addKeyword(discriminator)\n  }\n\n  _addDefaultMetaSchema(): void {\n    super._addDefaultMetaSchema()\n    if (!this.opts.meta) return\n    const metaSchema = this.opts.$data\n      ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n      : draft7MetaSchema\n    this.addMetaSchema(metaSchema, META_SCHEMA_ID, false)\n    this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    return (this.opts.defaultMeta =\n      super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined))\n  }\n}\n\nmodule.exports = exports = Ajv\nmodule.exports.Ajv = Ajv\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default Ajv\n\nexport {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  SchemaValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {Plugin, Options, CodeOptions, InstanceOptions, Logger, ErrorsTextOptions} from \"./core\"\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\nexport {default as ValidationError} from \"./runtime/validation_error\"\nexport {default as MissingRefError} from \"./compile/ref_error\"\n","// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport abstract class _CodeOrName {\n  abstract readonly str: string\n  abstract readonly names: UsedNames\n  abstract toString(): string\n  abstract emptyStr(): boolean\n}\n\nexport const IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i\n\nexport class Name extends _CodeOrName {\n  readonly str: string\n  constructor(s: string) {\n    super()\n    if (!IDENTIFIER.test(s)) throw new Error(\"CodeGen: name must be a valid identifier\")\n    this.str = s\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    return false\n  }\n\n  get names(): UsedNames {\n    return {[this.str]: 1}\n  }\n}\n\nexport class _Code extends _CodeOrName {\n  readonly _items: readonly CodeItem[]\n  private _str?: string\n  private _names?: UsedNames\n\n  constructor(code: string | readonly CodeItem[]) {\n    super()\n    this._items = typeof code === \"string\" ? [code] : code\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    if (this._items.length > 1) return false\n    const item = this._items[0]\n    return item === \"\" || item === '\"\"'\n  }\n\n  get str(): string {\n    return (this._str ??= this._items.reduce((s: string, c: CodeItem) => `${s}${c}`, \"\"))\n  }\n\n  get names(): UsedNames {\n    return (this._names ??= this._items.reduce((names: UsedNames, c) => {\n      if (c instanceof Name) names[c.str] = (names[c.str] || 0) + 1\n      return names\n    }, {}))\n  }\n}\n\nexport type CodeItem = Name | string | number | boolean | null\n\nexport type UsedNames = Record<string, number | undefined>\n\nexport type Code = _Code | Name\n\nexport type SafeExpr = Code | number | boolean | null\n\nexport const nil = new _Code(\"\")\n\ntype CodeArg = SafeExpr | string | undefined\n\nexport function _(strs: TemplateStringsArray, ...args: CodeArg[]): _Code {\n  const code: CodeItem[] = [strs[0]]\n  let i = 0\n  while (i < args.length) {\n    addCodeArg(code, args[i])\n    code.push(strs[++i])\n  }\n  return new _Code(code)\n}\n\nconst plus = new _Code(\"+\")\n\nexport function str(strs: TemplateStringsArray, ...args: (CodeArg | string[])[]): _Code {\n  const expr: CodeItem[] = [safeStringify(strs[0])]\n  let i = 0\n  while (i < args.length) {\n    expr.push(plus)\n    addCodeArg(expr, args[i])\n    expr.push(plus, safeStringify(strs[++i]))\n  }\n  optimize(expr)\n  return new _Code(expr)\n}\n\nexport function addCodeArg(code: CodeItem[], arg: CodeArg | string[]): void {\n  if (arg instanceof _Code) code.push(...arg._items)\n  else if (arg instanceof Name) code.push(arg)\n  else code.push(interpolate(arg))\n}\n\nfunction optimize(expr: CodeItem[]): void {\n  let i = 1\n  while (i < expr.length - 1) {\n    if (expr[i] === plus) {\n      const res = mergeExprItems(expr[i - 1], expr[i + 1])\n      if (res !== undefined) {\n        expr.splice(i - 1, 3, res)\n        continue\n      }\n      expr[i++] = \"+\"\n    }\n    i++\n  }\n}\n\nfunction mergeExprItems(a: CodeItem, b: CodeItem): CodeItem | undefined {\n  if (b === '\"\"') return a\n  if (a === '\"\"') return b\n  if (typeof a == \"string\") {\n    if (b instanceof Name || a[a.length - 1] !== '\"') return\n    if (typeof b != \"string\") return `${a.slice(0, -1)}${b}\"`\n    if (b[0] === '\"') return a.slice(0, -1) + b.slice(1)\n    return\n  }\n  if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name)) return `\"${a}${b.slice(1)}`\n  return\n}\n\nexport function strConcat(c1: Code, c2: Code): Code {\n  return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str`${c1}${c2}`\n}\n\n// TODO do not allow arrays here\nfunction interpolate(x?: string | string[] | number | boolean | null): SafeExpr | string {\n  return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n    ? x\n    : safeStringify(Array.isArray(x) ? x.join(\",\") : x)\n}\n\nexport function stringify(x: unknown): Code {\n  return new _Code(safeStringify(x))\n}\n\nexport function safeStringify(x: unknown): string {\n  return JSON.stringify(x)\n    .replace(/\\u2028/g, \"\\\\u2028\")\n    .replace(/\\u2029/g, \"\\\\u2029\")\n}\n\nexport function getProperty(key: Code | string | number): Code {\n  return typeof key == \"string\" && IDENTIFIER.test(key) ? new _Code(`.${key}`) : _`[${key}]`\n}\n\n//Does best effort to format the name properly\nexport function getEsmExportName(key: Code | string | number): Code {\n  if (typeof key == \"string\" && IDENTIFIER.test(key)) {\n    return new _Code(`${key}`)\n  }\n  throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`)\n}\n\nexport function regexpCode(rx: RegExp): Code {\n  return new _Code(rx.toString())\n}\n","import type {ScopeValueSets, NameValue, ValueScope, ValueScopeName} from \"./scope\"\nimport {_, nil, _Code, Code, Name, UsedNames, CodeItem, addCodeArg, _CodeOrName} from \"./code\"\nimport {Scope, varKinds} from \"./scope\"\n\nexport {_, str, strConcat, nil, getProperty, stringify, regexpCode, Name, Code} from \"./code\"\nexport {Scope, ScopeStore, ValueScope, ValueScopeName, ScopeValueSets, varKinds} from \"./scope\"\n\n// type for expressions that can be safely inserted in code without quotes\nexport type SafeExpr = Code | number | boolean | null\n\n// type that is either Code of function that adds code to CodeGen instance using its methods\nexport type Block = Code | (() => void)\n\nexport const operators = {\n  GT: new _Code(\">\"),\n  GTE: new _Code(\">=\"),\n  LT: new _Code(\"<\"),\n  LTE: new _Code(\"<=\"),\n  EQ: new _Code(\"===\"),\n  NEQ: new _Code(\"!==\"),\n  NOT: new _Code(\"!\"),\n  OR: new _Code(\"||\"),\n  AND: new _Code(\"&&\"),\n  ADD: new _Code(\"+\"),\n}\n\nabstract class Node {\n  abstract readonly names: UsedNames\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    return this\n  }\n\n  optimizeNames(_names: UsedNames, _constants: Constants): this | undefined {\n    return this\n  }\n\n  // get count(): number {\n  //   return 1\n  // }\n}\n\nclass Def extends Node {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private rhs?: SafeExpr\n  ) {\n    super()\n  }\n\n  render({es5, _n}: CGOptions): string {\n    const varKind = es5 ? varKinds.var : this.varKind\n    const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`\n    return `${varKind} ${this.name}${rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!names[this.name.str]) return\n    if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.rhs instanceof _CodeOrName ? this.rhs.names : {}\n  }\n}\n\nclass Assign extends Node {\n  constructor(\n    readonly lhs: Code,\n    public rhs: SafeExpr,\n    private readonly sideEffects?: boolean\n  ) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} = ${this.rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (this.lhs instanceof Name && !names[this.lhs.str] && !this.sideEffects) return\n    this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = this.lhs instanceof Name ? {} : {...this.lhs.names}\n    return addExprNames(names, this.rhs)\n  }\n}\n\nclass AssignOp extends Assign {\n  constructor(\n    lhs: Code,\n    private readonly op: Code,\n    rhs: SafeExpr,\n    sideEffects?: boolean\n  ) {\n    super(lhs, rhs, sideEffects)\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} ${this.op}= ${this.rhs};` + _n\n  }\n}\n\nclass Label extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label: Name) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.label}:` + _n\n  }\n}\n\nclass Break extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label?: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    const label = this.label ? ` ${this.label}` : \"\"\n    return `break${label};` + _n\n  }\n}\n\nclass Throw extends Node {\n  constructor(readonly error: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `throw ${this.error};` + _n\n  }\n\n  get names(): UsedNames {\n    return this.error.names\n  }\n}\n\nclass AnyCode extends Node {\n  constructor(private code: SafeExpr) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.code};` + _n\n  }\n\n  optimizeNodes(): this | undefined {\n    return `${this.code}` ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    this.code = optimizeExpr(this.code, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.code instanceof _CodeOrName ? this.code.names : {}\n  }\n}\n\nabstract class ParentNode extends Node {\n  constructor(readonly nodes: ChildNode[] = []) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return this.nodes.reduce((code, n) => code + n.render(opts), \"\")\n  }\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      const n = nodes[i].optimizeNodes()\n      if (Array.isArray(n)) nodes.splice(i, 1, ...n)\n      else if (n) nodes[i] = n\n      else nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      // iterating backwards improves 1-pass optimization\n      const n = nodes[i]\n      if (n.optimizeNames(names, constants)) continue\n      subtractNames(names, n.names)\n      nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  get names(): UsedNames {\n    return this.nodes.reduce((names: UsedNames, n) => addNames(names, n.names), {})\n  }\n\n  // get count(): number {\n  //   return this.nodes.reduce((c, n) => c + n.count, 1)\n  // }\n}\n\nabstract class BlockNode extends ParentNode {\n  render(opts: CGOptions): string {\n    return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n\n  }\n}\n\nclass Root extends ParentNode {}\n\nclass Else extends BlockNode {\n  static readonly kind = \"else\"\n}\n\nclass If extends BlockNode {\n  static readonly kind = \"if\"\n  else?: If | Else\n  constructor(\n    private condition: Code | boolean,\n    nodes?: ChildNode[]\n  ) {\n    super(nodes)\n  }\n\n  render(opts: CGOptions): string {\n    let code = `if(${this.condition})` + super.render(opts)\n    if (this.else) code += \"else \" + this.else.render(opts)\n    return code\n  }\n\n  optimizeNodes(): If | ChildNode[] | undefined {\n    super.optimizeNodes()\n    const cond = this.condition\n    if (cond === true) return this.nodes // else is ignored here\n    let e = this.else\n    if (e) {\n      const ns = e.optimizeNodes()\n      e = this.else = Array.isArray(ns) ? new Else(ns) : (ns as Else | undefined)\n    }\n    if (e) {\n      if (cond === false) return e instanceof If ? e : e.nodes\n      if (this.nodes.length) return this\n      return new If(not(cond), e instanceof If ? [e] : e.nodes)\n    }\n    if (cond === false || !this.nodes.length) return undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    this.else = this.else?.optimizeNames(names, constants)\n    if (!(super.optimizeNames(names, constants) || this.else)) return\n    this.condition = optimizeExpr(this.condition, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    addExprNames(names, this.condition)\n    if (this.else) addNames(names, this.else.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.else?.count || 0)\n  // }\n}\n\nabstract class For extends BlockNode {\n  static readonly kind = \"for\"\n}\n\nclass ForLoop extends For {\n  constructor(private iteration: Code) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.iteration})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iteration = optimizeExpr(this.iteration, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iteration.names)\n  }\n}\n\nclass ForRange extends For {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private readonly from: SafeExpr,\n    private readonly to: SafeExpr\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const varKind = opts.es5 ? varKinds.var : this.varKind\n    const {name, from, to} = this\n    return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts)\n  }\n\n  get names(): UsedNames {\n    const names = addExprNames(super.names, this.from)\n    return addExprNames(names, this.to)\n  }\n}\n\nclass ForIter extends For {\n  constructor(\n    private readonly loop: \"of\" | \"in\",\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private iterable: Code\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iterable = optimizeExpr(this.iterable, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iterable.names)\n  }\n}\n\nclass Func extends BlockNode {\n  static readonly kind = \"func\"\n  constructor(\n    public name: Name,\n    public args: Code,\n    public async?: boolean\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const _async = this.async ? \"async \" : \"\"\n    return `${_async}function ${this.name}(${this.args})` + super.render(opts)\n  }\n}\n\nclass Return extends ParentNode {\n  static readonly kind = \"return\"\n\n  render(opts: CGOptions): string {\n    return \"return \" + super.render(opts)\n  }\n}\n\nclass Try extends BlockNode {\n  catch?: Catch\n  finally?: Finally\n\n  render(opts: CGOptions): string {\n    let code = \"try\" + super.render(opts)\n    if (this.catch) code += this.catch.render(opts)\n    if (this.finally) code += this.finally.render(opts)\n    return code\n  }\n\n  optimizeNodes(): this {\n    super.optimizeNodes()\n    this.catch?.optimizeNodes() as Catch | undefined\n    this.finally?.optimizeNodes() as Finally | undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    super.optimizeNames(names, constants)\n    this.catch?.optimizeNames(names, constants)\n    this.finally?.optimizeNames(names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    if (this.catch) addNames(names, this.catch.names)\n    if (this.finally) addNames(names, this.finally.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.catch?.count || 0) + (this.finally?.count || 0)\n  // }\n}\n\nclass Catch extends BlockNode {\n  static readonly kind = \"catch\"\n  constructor(readonly error: Name) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `catch(${this.error})` + super.render(opts)\n  }\n}\n\nclass Finally extends BlockNode {\n  static readonly kind = \"finally\"\n  render(opts: CGOptions): string {\n    return \"finally\" + super.render(opts)\n  }\n}\n\ntype StartBlockNode = If | For | Func | Return | Try\n\ntype LeafNode = Def | Assign | Label | Break | Throw | AnyCode\n\ntype ChildNode = StartBlockNode | LeafNode\n\ntype EndBlockNodeType =\n  | typeof If\n  | typeof Else\n  | typeof For\n  | typeof Func\n  | typeof Return\n  | typeof Catch\n  | typeof Finally\n\ntype Constants = Record<string, SafeExpr | undefined>\n\nexport interface CodeGenOptions {\n  es5?: boolean\n  lines?: boolean\n  ownProperties?: boolean\n}\n\ninterface CGOptions extends CodeGenOptions {\n  _n: \"\\n\" | \"\"\n}\n\nexport class CodeGen {\n  readonly _scope: Scope\n  readonly _extScope: ValueScope\n  readonly _values: ScopeValueSets = {}\n  private readonly _nodes: ParentNode[]\n  private readonly _blockStarts: number[] = []\n  private readonly _constants: Constants = {}\n  private readonly opts: CGOptions\n\n  constructor(extScope: ValueScope, opts: CodeGenOptions = {}) {\n    this.opts = {...opts, _n: opts.lines ? \"\\n\" : \"\"}\n    this._extScope = extScope\n    this._scope = new Scope({parent: extScope})\n    this._nodes = [new Root()]\n  }\n\n  toString(): string {\n    return this._root.render(this.opts)\n  }\n\n  // returns unique name in the internal scope\n  name(prefix: string): Name {\n    return this._scope.name(prefix)\n  }\n\n  // reserves unique name in the external scope\n  scopeName(prefix: string): ValueScopeName {\n    return this._extScope.name(prefix)\n  }\n\n  // reserves unique name in the external scope and assigns value to it\n  scopeValue(prefixOrName: ValueScopeName | string, value: NameValue): Name {\n    const name = this._extScope.value(prefixOrName, value)\n    const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set())\n    vs.add(name)\n    return name\n  }\n\n  getScopeValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    return this._extScope.getValue(prefix, keyOrRef)\n  }\n\n  // return code that assigns values in the external scope to the names that are used internally\n  // (same names that were returned by gen.scopeName or gen.scopeValue)\n  scopeRefs(scopeName: Name): Code {\n    return this._extScope.scopeRefs(scopeName, this._values)\n  }\n\n  scopeCode(): Code {\n    return this._extScope.scopeCode(this._values)\n  }\n\n  private _def(\n    varKind: Name,\n    nameOrPrefix: Name | string,\n    rhs?: SafeExpr,\n    constant?: boolean\n  ): Name {\n    const name = this._scope.toName(nameOrPrefix)\n    if (rhs !== undefined && constant) this._constants[name.str] = rhs\n    this._leafNode(new Def(varKind, name, rhs))\n    return name\n  }\n\n  // `const` declaration (`var` in es5 mode)\n  const(nameOrPrefix: Name | string, rhs: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.const, nameOrPrefix, rhs, _constant)\n  }\n\n  // `let` declaration with optional assignment (`var` in es5 mode)\n  let(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.let, nameOrPrefix, rhs, _constant)\n  }\n\n  // `var` declaration with optional assignment\n  var(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.var, nameOrPrefix, rhs, _constant)\n  }\n\n  // assignment code\n  assign(lhs: Code, rhs: SafeExpr, sideEffects?: boolean): CodeGen {\n    return this._leafNode(new Assign(lhs, rhs, sideEffects))\n  }\n\n  // `+=` code\n  add(lhs: Code, rhs: SafeExpr): CodeGen {\n    return this._leafNode(new AssignOp(lhs, operators.ADD, rhs))\n  }\n\n  // appends passed SafeExpr to code or executes Block\n  code(c: Block | SafeExpr): CodeGen {\n    if (typeof c == \"function\") c()\n    else if (c !== nil) this._leafNode(new AnyCode(c))\n    return this\n  }\n\n  // returns code for object literal for the passed argument list of key-value pairs\n  object(...keyValues: [Name | string, SafeExpr | string][]): _Code {\n    const code: CodeItem[] = [\"{\"]\n    for (const [key, value] of keyValues) {\n      if (code.length > 1) code.push(\",\")\n      code.push(key)\n      if (key !== value || this.opts.es5) {\n        code.push(\":\")\n        addCodeArg(code, value)\n      }\n    }\n    code.push(\"}\")\n    return new _Code(code)\n  }\n\n  // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n  if(condition: Code | boolean, thenBody?: Block, elseBody?: Block): CodeGen {\n    this._blockNode(new If(condition))\n\n    if (thenBody && elseBody) {\n      this.code(thenBody).else().code(elseBody).endIf()\n    } else if (thenBody) {\n      this.code(thenBody).endIf()\n    } else if (elseBody) {\n      throw new Error('CodeGen: \"else\" body without \"then\" body')\n    }\n    return this\n  }\n\n  // `else if` clause - invalid without `if` or after `else` clauses\n  elseIf(condition: Code | boolean): CodeGen {\n    return this._elseNode(new If(condition))\n  }\n\n  // `else` clause - only valid after `if` or `else if` clauses\n  else(): CodeGen {\n    return this._elseNode(new Else())\n  }\n\n  // end `if` statement (needed if gen.if was used only with condition)\n  endIf(): CodeGen {\n    return this._endBlockNode(If, Else)\n  }\n\n  private _for(node: For, forBody?: Block): CodeGen {\n    this._blockNode(node)\n    if (forBody) this.code(forBody).endFor()\n    return this\n  }\n\n  // a generic `for` clause (or statement if `forBody` is passed)\n  for(iteration: Code, forBody?: Block): CodeGen {\n    return this._for(new ForLoop(iteration), forBody)\n  }\n\n  // `for` statement for a range of values\n  forRange(\n    nameOrPrefix: Name | string,\n    from: SafeExpr,\n    to: SafeExpr,\n    forBody: (index: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.let\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForRange(varKind, name, from, to), () => forBody(name))\n  }\n\n  // `for-of` statement (in es5 mode replace with a normal for loop)\n  forOf(\n    nameOrPrefix: Name | string,\n    iterable: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = varKinds.const\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    if (this.opts.es5) {\n      const arr = iterable instanceof Name ? iterable : this.var(\"_arr\", iterable)\n      return this.forRange(\"_i\", 0, _`${arr}.length`, (i) => {\n        this.var(name, _`${arr}[${i}]`)\n        forBody(name)\n      })\n    }\n    return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name))\n  }\n\n  // `for-in` statement.\n  // With option `ownProperties` replaced with a `for-of` loop for object keys\n  forIn(\n    nameOrPrefix: Name | string,\n    obj: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.const\n  ): CodeGen {\n    if (this.opts.ownProperties) {\n      return this.forOf(nameOrPrefix, _`Object.keys(${obj})`, forBody)\n    }\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name))\n  }\n\n  // end `for` loop\n  endFor(): CodeGen {\n    return this._endBlockNode(For)\n  }\n\n  // `label` statement\n  label(label: Name): CodeGen {\n    return this._leafNode(new Label(label))\n  }\n\n  // `break` statement\n  break(label?: Code): CodeGen {\n    return this._leafNode(new Break(label))\n  }\n\n  // `return` statement\n  return(value: Block | SafeExpr): CodeGen {\n    const node = new Return()\n    this._blockNode(node)\n    this.code(value)\n    if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node')\n    return this._endBlockNode(Return)\n  }\n\n  // `try` statement\n  try(tryBody: Block, catchCode?: (e: Name) => void, finallyCode?: Block): CodeGen {\n    if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"')\n    const node = new Try()\n    this._blockNode(node)\n    this.code(tryBody)\n    if (catchCode) {\n      const error = this.name(\"e\")\n      this._currNode = node.catch = new Catch(error)\n      catchCode(error)\n    }\n    if (finallyCode) {\n      this._currNode = node.finally = new Finally()\n      this.code(finallyCode)\n    }\n    return this._endBlockNode(Catch, Finally)\n  }\n\n  // `throw` statement\n  throw(error: Code): CodeGen {\n    return this._leafNode(new Throw(error))\n  }\n\n  // start self-balancing block\n  block(body?: Block, nodeCount?: number): CodeGen {\n    this._blockStarts.push(this._nodes.length)\n    if (body) this.code(body).endBlock(nodeCount)\n    return this\n  }\n\n  // end the current self-balancing block\n  endBlock(nodeCount?: number): CodeGen {\n    const len = this._blockStarts.pop()\n    if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\")\n    const toClose = this._nodes.length - len\n    if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n      throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`)\n    }\n    this._nodes.length = len\n    return this\n  }\n\n  // `function` heading (or definition if funcBody is passed)\n  func(name: Name, args: Code = nil, async?: boolean, funcBody?: Block): CodeGen {\n    this._blockNode(new Func(name, args, async))\n    if (funcBody) this.code(funcBody).endFunc()\n    return this\n  }\n\n  // end function definition\n  endFunc(): CodeGen {\n    return this._endBlockNode(Func)\n  }\n\n  optimize(n = 1): void {\n    while (n-- > 0) {\n      this._root.optimizeNodes()\n      this._root.optimizeNames(this._root.names, this._constants)\n    }\n  }\n\n  private _leafNode(node: LeafNode): CodeGen {\n    this._currNode.nodes.push(node)\n    return this\n  }\n\n  private _blockNode(node: StartBlockNode): void {\n    this._currNode.nodes.push(node)\n    this._nodes.push(node)\n  }\n\n  private _endBlockNode(N1: EndBlockNodeType, N2?: EndBlockNodeType): CodeGen {\n    const n = this._currNode\n    if (n instanceof N1 || (N2 && n instanceof N2)) {\n      this._nodes.pop()\n      return this\n    }\n    throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`)\n  }\n\n  private _elseNode(node: If | Else): CodeGen {\n    const n = this._currNode\n    if (!(n instanceof If)) {\n      throw new Error('CodeGen: \"else\" without \"if\"')\n    }\n    this._currNode = n.else = node\n    return this\n  }\n\n  private get _root(): Root {\n    return this._nodes[0] as Root\n  }\n\n  private get _currNode(): ParentNode {\n    const ns = this._nodes\n    return ns[ns.length - 1]\n  }\n\n  private set _currNode(node: ParentNode) {\n    const ns = this._nodes\n    ns[ns.length - 1] = node\n  }\n\n  // get nodeCount(): number {\n  //   return this._root.count\n  // }\n}\n\nfunction addNames(names: UsedNames, from: UsedNames): UsedNames {\n  for (const n in from) names[n] = (names[n] || 0) + (from[n] || 0)\n  return names\n}\n\nfunction addExprNames(names: UsedNames, from: SafeExpr): UsedNames {\n  return from instanceof _CodeOrName ? addNames(names, from.names) : names\n}\n\nfunction optimizeExpr<T extends SafeExpr | Code>(expr: T, names: UsedNames, constants: Constants): T\nfunction optimizeExpr(expr: SafeExpr, names: UsedNames, constants: Constants): SafeExpr {\n  if (expr instanceof Name) return replaceName(expr)\n  if (!canOptimize(expr)) return expr\n  return new _Code(\n    expr._items.reduce((items: CodeItem[], c: SafeExpr | string) => {\n      if (c instanceof Name) c = replaceName(c)\n      if (c instanceof _Code) items.push(...c._items)\n      else items.push(c)\n      return items\n    }, [])\n  )\n\n  function replaceName(n: Name): SafeExpr {\n    const c = constants[n.str]\n    if (c === undefined || names[n.str] !== 1) return n\n    delete names[n.str]\n    return c\n  }\n\n  function canOptimize(e: SafeExpr): e is _Code {\n    return (\n      e instanceof _Code &&\n      e._items.some(\n        (c) => c instanceof Name && names[c.str] === 1 && constants[c.str] !== undefined\n      )\n    )\n  }\n}\n\nfunction subtractNames(names: UsedNames, from: UsedNames): void {\n  for (const n in from) names[n] = (names[n] || 0) - (from[n] || 0)\n}\n\nexport function not<T extends Code | SafeExpr>(x: T): T\nexport function not(x: Code | SafeExpr): Code | SafeExpr {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : _`!${par(x)}`\n}\n\nconst andCode = mappend(operators.AND)\n\n// boolean AND (&&) expression with the passed arguments\nexport function and(...args: Code[]): Code {\n  return args.reduce(andCode)\n}\n\nconst orCode = mappend(operators.OR)\n\n// boolean OR (||) expression with the passed arguments\nexport function or(...args: Code[]): Code {\n  return args.reduce(orCode)\n}\n\ntype MAppend = (x: Code, y: Code) => Code\n\nfunction mappend(op: Code): MAppend {\n  return (x, y) => (x === nil ? y : y === nil ? x : _`${par(x)} ${op} ${par(y)}`)\n}\n\nfunction par(x: Code): Code {\n  return x instanceof Name ? x : _`(${x})`\n}\n","import {_, nil, Code, Name} from \"./code\"\n\ninterface NameGroup {\n  prefix: string\n  index: number\n}\n\nexport interface NameValue {\n  ref: ValueReference // this is the reference to any value that can be referred to from generated code via `globals` var in the closure\n  key?: unknown // any key to identify a global to avoid duplicates, if not passed ref is used\n  code?: Code // this is the code creating the value needed for standalone code wit_out closure - can be a primitive value, function or import (`require`)\n}\n\nexport type ValueReference = unknown // possibly make CodeGen parameterized type on this type\n\nclass ValueError extends Error {\n  readonly value?: NameValue\n  constructor(name: ValueScopeName) {\n    super(`CodeGen: \"code\" for ${name} not defined`)\n    this.value = name.value\n  }\n}\n\ninterface ScopeOptions {\n  prefixes?: Set<string>\n  parent?: Scope\n}\n\ninterface ValueScopeOptions extends ScopeOptions {\n  scope: ScopeStore\n  es5?: boolean\n  lines?: boolean\n}\n\nexport type ScopeStore = Record<string, ValueReference[] | undefined>\n\ntype ScopeValues = {\n  [Prefix in string]?: Map<unknown, ValueScopeName>\n}\n\nexport type ScopeValueSets = {\n  [Prefix in string]?: Set<ValueScopeName>\n}\n\nexport enum UsedValueState {\n  Started,\n  Completed,\n}\n\nexport type UsedScopeValues = {\n  [Prefix in string]?: Map<ValueScopeName, UsedValueState | undefined>\n}\n\nexport const varKinds = {\n  const: new Name(\"const\"),\n  let: new Name(\"let\"),\n  var: new Name(\"var\"),\n}\n\nexport class Scope {\n  protected readonly _names: {[Prefix in string]?: NameGroup} = {}\n  protected readonly _prefixes?: Set<string>\n  protected readonly _parent?: Scope\n\n  constructor({prefixes, parent}: ScopeOptions = {}) {\n    this._prefixes = prefixes\n    this._parent = parent\n  }\n\n  toName(nameOrPrefix: Name | string): Name {\n    return nameOrPrefix instanceof Name ? nameOrPrefix : this.name(nameOrPrefix)\n  }\n\n  name(prefix: string): Name {\n    return new Name(this._newName(prefix))\n  }\n\n  protected _newName(prefix: string): string {\n    const ng = this._names[prefix] || this._nameGroup(prefix)\n    return `${prefix}${ng.index++}`\n  }\n\n  private _nameGroup(prefix: string): NameGroup {\n    if (this._parent?._prefixes?.has(prefix) || (this._prefixes && !this._prefixes.has(prefix))) {\n      throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`)\n    }\n    return (this._names[prefix] = {prefix, index: 0})\n  }\n}\n\ninterface ScopePath {\n  property: string\n  itemIndex: number\n}\n\nexport class ValueScopeName extends Name {\n  readonly prefix: string\n  value?: NameValue\n  scopePath?: Code\n\n  constructor(prefix: string, nameStr: string) {\n    super(nameStr)\n    this.prefix = prefix\n  }\n\n  setValue(value: NameValue, {property, itemIndex}: ScopePath): void {\n    this.value = value\n    this.scopePath = _`.${new Name(property)}[${itemIndex}]`\n  }\n}\n\ninterface VSOptions extends ValueScopeOptions {\n  _n: Code\n}\n\nconst line = _`\\n`\n\nexport class ValueScope extends Scope {\n  protected readonly _values: ScopeValues = {}\n  protected readonly _scope: ScopeStore\n  readonly opts: VSOptions\n\n  constructor(opts: ValueScopeOptions) {\n    super(opts)\n    this._scope = opts.scope\n    this.opts = {...opts, _n: opts.lines ? line : nil}\n  }\n\n  get(): ScopeStore {\n    return this._scope\n  }\n\n  name(prefix: string): ValueScopeName {\n    return new ValueScopeName(prefix, this._newName(prefix))\n  }\n\n  value(nameOrPrefix: ValueScopeName | string, value: NameValue): ValueScopeName {\n    if (value.ref === undefined) throw new Error(\"CodeGen: ref must be passed in value\")\n    const name = this.toName(nameOrPrefix) as ValueScopeName\n    const {prefix} = name\n    const valueKey = value.key ?? value.ref\n    let vs = this._values[prefix]\n    if (vs) {\n      const _name = vs.get(valueKey)\n      if (_name) return _name\n    } else {\n      vs = this._values[prefix] = new Map()\n    }\n    vs.set(valueKey, name)\n\n    const s = this._scope[prefix] || (this._scope[prefix] = [])\n    const itemIndex = s.length\n    s[itemIndex] = value.ref\n    name.setValue(value, {property: prefix, itemIndex})\n    return name\n  }\n\n  getValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    const vs = this._values[prefix]\n    if (!vs) return\n    return vs.get(keyOrRef)\n  }\n\n  scopeRefs(scopeName: Name, values: ScopeValues | ScopeValueSets = this._values): Code {\n    return this._reduceValues(values, (name: ValueScopeName) => {\n      if (name.scopePath === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n      return _`${scopeName}${name.scopePath}`\n    })\n  }\n\n  scopeCode(\n    values: ScopeValues | ScopeValueSets = this._values,\n    usedValues?: UsedScopeValues,\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    return this._reduceValues(\n      values,\n      (name: ValueScopeName) => {\n        if (name.value === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n        return name.value.code\n      },\n      usedValues,\n      getCode\n    )\n  }\n\n  private _reduceValues(\n    values: ScopeValues | ScopeValueSets,\n    valueCode: (n: ValueScopeName) => Code | undefined,\n    usedValues: UsedScopeValues = {},\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    let code: Code = nil\n    for (const prefix in values) {\n      const vs = values[prefix]\n      if (!vs) continue\n      const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map())\n      vs.forEach((name: ValueScopeName) => {\n        if (nameSet.has(name)) return\n        nameSet.set(name, UsedValueState.Started)\n        let c = valueCode(name)\n        if (c) {\n          const def = this.opts.es5 ? varKinds.var : varKinds.const\n          code = _`${code}${def} ${name} = ${c};${this.opts._n}`\n        } else if ((c = getCode?.(name))) {\n          code = _`${code}${c}${this.opts._n}`\n        } else {\n          throw new ValueError(name)\n        }\n        nameSet.set(name, UsedValueState.Completed)\n      })\n    }\n    return code\n  }\n}\n","import type {KeywordErrorCxt, KeywordErrorDefinition} from \"../types\"\nimport type {SchemaCxt} from \"./index\"\nimport {CodeGen, _, str, strConcat, Code, Name} from \"./codegen\"\nimport {SafeExpr} from \"./codegen/code\"\nimport {getErrorPath, Type} from \"./util\"\nimport N from \"./names\"\n\nexport const keywordError: KeywordErrorDefinition = {\n  message: ({keyword}) => str`must pass \"${keyword}\" keyword validation`,\n}\n\nexport const keyword$DataError: KeywordErrorDefinition = {\n  message: ({keyword, schemaType}) =>\n    schemaType\n      ? str`\"${keyword}\" keyword must be ${schemaType} ($data)`\n      : str`\"${keyword}\" keyword is invalid ($data)`,\n}\n\nexport interface ErrorPaths {\n  instancePath?: Code\n  schemaPath?: string\n  parentSchema?: boolean\n}\n\nexport function reportError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths,\n  overrideAllErrors?: boolean\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  if (overrideAllErrors ?? (compositeRule || allErrors)) {\n    addError(gen, errObj)\n  } else {\n    returnErrors(it, _`[${errObj}]`)\n  }\n}\n\nexport function reportExtraError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  addError(gen, errObj)\n  if (!(compositeRule || allErrors)) {\n    returnErrors(it, N.vErrors)\n  }\n}\n\nexport function resetErrorsCount(gen: CodeGen, errsCount: Name): void {\n  gen.assign(N.errors, errsCount)\n  gen.if(_`${N.vErrors} !== null`, () =>\n    gen.if(\n      errsCount,\n      () => gen.assign(_`${N.vErrors}.length`, errsCount),\n      () => gen.assign(N.vErrors, null)\n    )\n  )\n}\n\nexport function extendErrors({\n  gen,\n  keyword,\n  schemaValue,\n  data,\n  errsCount,\n  it,\n}: KeywordErrorCxt): void {\n  /* istanbul ignore if */\n  if (errsCount === undefined) throw new Error(\"ajv implementation error\")\n  const err = gen.name(\"err\")\n  gen.forRange(\"i\", errsCount, N.errors, (i) => {\n    gen.const(err, _`${N.vErrors}[${i}]`)\n    gen.if(_`${err}.instancePath === undefined`, () =>\n      gen.assign(_`${err}.instancePath`, strConcat(N.instancePath, it.errorPath))\n    )\n    gen.assign(_`${err}.schemaPath`, str`${it.errSchemaPath}/${keyword}`)\n    if (it.opts.verbose) {\n      gen.assign(_`${err}.schema`, schemaValue)\n      gen.assign(_`${err}.data`, data)\n    }\n  })\n}\n\nfunction addError(gen: CodeGen, errObj: Code): void {\n  const err = gen.const(\"err\", errObj)\n  gen.if(\n    _`${N.vErrors} === null`,\n    () => gen.assign(N.vErrors, _`[${err}]`),\n    _`${N.vErrors}.push(${err})`\n  )\n  gen.code(_`${N.errors}++`)\n}\n\nfunction returnErrors(it: SchemaCxt, errs: Code): void {\n  const {gen, validateName, schemaEnv} = it\n  if (schemaEnv.$async) {\n    gen.throw(_`new ${it.ValidationError as Name}(${errs})`)\n  } else {\n    gen.assign(_`${validateName}.errors`, errs)\n    gen.return(false)\n  }\n}\n\nconst E = {\n  keyword: new Name(\"keyword\"),\n  schemaPath: new Name(\"schemaPath\"), // also used in JTD errors\n  params: new Name(\"params\"),\n  propertyName: new Name(\"propertyName\"),\n  message: new Name(\"message\"),\n  schema: new Name(\"schema\"),\n  parentSchema: new Name(\"parentSchema\"),\n}\n\nfunction errorObjectCode(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths?: ErrorPaths\n): Code {\n  const {createErrors} = cxt.it\n  if (createErrors === false) return _`{}`\n  return errorObject(cxt, error, errorPaths)\n}\n\nfunction errorObject(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths: ErrorPaths = {}\n): Code {\n  const {gen, it} = cxt\n  const keyValues: [Name, SafeExpr | string][] = [\n    errorInstancePath(it, errorPaths),\n    errorSchemaPath(cxt, errorPaths),\n  ]\n  extraErrorProps(cxt, error, keyValues)\n  return gen.object(...keyValues)\n}\n\nfunction errorInstancePath({errorPath}: SchemaCxt, {instancePath}: ErrorPaths): [Name, Code] {\n  const instPath = instancePath\n    ? str`${errorPath}${getErrorPath(instancePath, Type.Str)}`\n    : errorPath\n  return [N.instancePath, strConcat(N.instancePath, instPath)]\n}\n\nfunction errorSchemaPath(\n  {keyword, it: {errSchemaPath}}: KeywordErrorCxt,\n  {schemaPath, parentSchema}: ErrorPaths\n): [Name, string | Code] {\n  let schPath = parentSchema ? errSchemaPath : str`${errSchemaPath}/${keyword}`\n  if (schemaPath) {\n    schPath = str`${schPath}${getErrorPath(schemaPath, Type.Str)}`\n  }\n  return [E.schemaPath, schPath]\n}\n\nfunction extraErrorProps(\n  cxt: KeywordErrorCxt,\n  {params, message}: KeywordErrorDefinition,\n  keyValues: [Name, SafeExpr | string][]\n): void {\n  const {keyword, data, schemaValue, it} = cxt\n  const {opts, propertyName, topSchemaRef, schemaPath} = it\n  keyValues.push(\n    [E.keyword, keyword],\n    [E.params, typeof params == \"function\" ? params(cxt) : params || _`{}`]\n  )\n  if (opts.messages) {\n    keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message])\n  }\n  if (opts.verbose) {\n    keyValues.push(\n      [E.schema, schemaValue],\n      [E.parentSchema, _`${topSchemaRef}${schemaPath}`],\n      [N.data, data]\n    )\n  }\n  if (propertyName) keyValues.push([E.propertyName, propertyName])\n}\n","import type {\n  AnySchema,\n  AnySchemaObject,\n  AnyValidateFunction,\n  AsyncValidateFunction,\n  EvaluatedProperties,\n  EvaluatedItems,\n} from \"../types\"\nimport type Ajv from \"../core\"\nimport type {InstanceOptions} from \"../core\"\nimport {CodeGen, _, nil, stringify, Name, Code, ValueScopeName} from \"./codegen\"\nimport ValidationError from \"../runtime/validation_error\"\nimport N from \"./names\"\nimport {LocalRefs, getFullPath, _getFullPath, inlineRef, normalizeId, resolveUrl} from \"./resolve\"\nimport {schemaHasRulesButRef, unescapeFragment} from \"./util\"\nimport {validateFunctionCode} from \"./validate\"\nimport {URIComponent} from \"fast-uri\"\nimport {JSONType} from \"./rules\"\n\nexport type SchemaRefs = {\n  [Ref in string]?: SchemaEnv | AnySchema\n}\n\nexport interface SchemaCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean // validation mode - whether to collect all errors or break on error\n  readonly data: Name // Name with reference to the current part of data instance\n  readonly parentData: Name // should be used in keywords modifying data\n  readonly parentDataProperty: Code | number // should be used in keywords modifying data\n  readonly dataNames: Name[]\n  readonly dataPathArr: (Code | number)[]\n  readonly dataLevel: number // the level of the currently validated data,\n  // it can be used to access both the property names and the data on all levels from the top.\n  dataTypes: JSONType[] // data types applied to the current part of data instance\n  definedProperties: Set<string> // set of properties to keep track of for required checks\n  readonly topSchemaRef: Code\n  readonly validateName: Name\n  evaluated?: Name\n  readonly ValidationError?: Name\n  readonly schema: AnySchema // current schema object - equal to parentSchema passed via KeywordCxt\n  readonly schemaEnv: SchemaEnv\n  readonly rootId: string\n  baseId: string // the current schema base URI that should be used as the base for resolving URIs in references (\\$ref)\n  readonly schemaPath: Code // the run-time expression that evaluates to the property name of the current schema\n  readonly errSchemaPath: string // this is actual string, should not be changed to Code\n  readonly errorPath: Code\n  readonly propertyName?: Name\n  readonly compositeRule?: boolean // true indicates that the current schema is inside the compound keyword,\n  // where failing some rule doesn't mean validation failure (`anyOf`, `oneOf`, `not`, `if`).\n  // This flag is used to determine whether you can return validation result immediately after any error in case the option `allErrors` is not `true.\n  // You only need to use it if you have many steps in your keywords and potentially can define multiple errors.\n  props?: EvaluatedProperties | Name // properties evaluated by this schema - used by parent schema or assigned to validation function\n  items?: EvaluatedItems | Name // last item evaluated by this schema - used by parent schema or assigned to validation function\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  readonly createErrors?: boolean\n  readonly opts: InstanceOptions // Ajv instance option.\n  readonly self: Ajv // current Ajv instance\n}\n\nexport interface SchemaObjCxt extends SchemaCxt {\n  readonly schema: AnySchemaObject\n}\ninterface SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root?: SchemaEnv\n  readonly baseId?: string\n  readonly schemaPath?: string\n  readonly localRefs?: LocalRefs\n  readonly meta?: boolean\n}\n\nexport class SchemaEnv implements SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root: SchemaEnv\n  baseId: string // TODO possibly, it should be readonly\n  schemaPath?: string\n  localRefs?: LocalRefs\n  readonly meta?: boolean\n  readonly $async?: boolean // true if the current schema is asynchronous.\n  readonly refs: SchemaRefs = {}\n  readonly dynamicAnchors: {[Ref in string]?: true} = {}\n  validate?: AnyValidateFunction\n  validateName?: ValueScopeName\n  serialize?: (data: unknown) => string\n  serializeName?: ValueScopeName\n  parse?: (data: string) => unknown\n  parseName?: ValueScopeName\n\n  constructor(env: SchemaEnvArgs) {\n    let schema: AnySchemaObject | undefined\n    if (typeof env.schema == \"object\") schema = env.schema\n    this.schema = env.schema\n    this.schemaId = env.schemaId\n    this.root = env.root || this\n    this.baseId = env.baseId ?? normalizeId(schema?.[env.schemaId || \"$id\"])\n    this.schemaPath = env.schemaPath\n    this.localRefs = env.localRefs\n    this.meta = env.meta\n    this.$async = schema?.$async\n    this.refs = {}\n  }\n}\n\n// let codeSize = 0\n// let nodeCount = 0\n\n// Compiles schema in SchemaEnv\nexport function compileSchema(this: Ajv, sch: SchemaEnv): SchemaEnv {\n  // TODO refactor - remove compilations\n  const _sch = getCompilingSchema.call(this, sch)\n  if (_sch) return _sch\n  const rootId = getFullPath(this.opts.uriResolver, sch.root.baseId) // TODO if getFullPath removed 1 tests fails\n  const {es5, lines} = this.opts.code\n  const {ownProperties} = this.opts\n  const gen = new CodeGen(this.scope, {es5, lines, ownProperties})\n  let _ValidationError\n  if (sch.$async) {\n    _ValidationError = gen.scopeValue(\"Error\", {\n      ref: ValidationError,\n      code: _`require(\"ajv/dist/runtime/validation_error\").default`,\n    })\n  }\n\n  const validateName = gen.scopeName(\"validate\")\n  sch.validateName = validateName\n\n  const schemaCxt: SchemaCxt = {\n    gen,\n    allErrors: this.opts.allErrors,\n    data: N.data,\n    parentData: N.parentData,\n    parentDataProperty: N.parentDataProperty,\n    dataNames: [N.data],\n    dataPathArr: [nil], // TODO can its length be used as dataLevel if nil is removed?\n    dataLevel: 0,\n    dataTypes: [],\n    definedProperties: new Set<string>(),\n    topSchemaRef: gen.scopeValue(\n      \"schema\",\n      this.opts.code.source === true\n        ? {ref: sch.schema, code: stringify(sch.schema)}\n        : {ref: sch.schema}\n    ),\n    validateName,\n    ValidationError: _ValidationError,\n    schema: sch.schema,\n    schemaEnv: sch,\n    rootId,\n    baseId: sch.baseId || rootId,\n    schemaPath: nil,\n    errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n    errorPath: _`\"\"`,\n    opts: this.opts,\n    self: this,\n  }\n\n  let sourceCode: string | undefined\n  try {\n    this._compilations.add(sch)\n    validateFunctionCode(schemaCxt)\n    gen.optimize(this.opts.code.optimize)\n    // gen.optimize(1)\n    const validateCode = gen.toString()\n    sourceCode = `${gen.scopeRefs(N.scope)}return ${validateCode}`\n    // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n    if (this.opts.code.process) sourceCode = this.opts.code.process(sourceCode, sch)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n    const makeValidate = new Function(`${N.self}`, `${N.scope}`, sourceCode)\n    const validate: AnyValidateFunction = makeValidate(this, this.scope.get())\n    this.scope.value(validateName, {ref: validate})\n\n    validate.errors = null\n    validate.schema = sch.schema\n    validate.schemaEnv = sch\n    if (sch.$async) (validate as AsyncValidateFunction).$async = true\n    if (this.opts.code.source === true) {\n      validate.source = {validateName, validateCode, scopeValues: gen._values}\n    }\n    if (this.opts.unevaluated) {\n      const {props, items} = schemaCxt\n      validate.evaluated = {\n        props: props instanceof Name ? undefined : props,\n        items: items instanceof Name ? undefined : items,\n        dynamicProps: props instanceof Name,\n        dynamicItems: items instanceof Name,\n      }\n      if (validate.source) validate.source.evaluated = stringify(validate.evaluated)\n    }\n    sch.validate = validate\n    return sch\n  } catch (e) {\n    delete sch.validate\n    delete sch.validateName\n    if (sourceCode) this.logger.error(\"Error compiling schema, function code:\", sourceCode)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n    throw e\n  } finally {\n    this._compilations.delete(sch)\n  }\n}\n\nexport function resolveRef(\n  this: Ajv,\n  root: SchemaEnv,\n  baseId: string,\n  ref: string\n): AnySchema | SchemaEnv | undefined {\n  ref = resolveUrl(this.opts.uriResolver, baseId, ref)\n  const schOrFunc = root.refs[ref]\n  if (schOrFunc) return schOrFunc\n\n  let _sch = resolve.call(this, root, ref)\n  if (_sch === undefined) {\n    const schema = root.localRefs?.[ref] // TODO maybe localRefs should hold SchemaEnv\n    const {schemaId} = this.opts\n    if (schema) _sch = new SchemaEnv({schema, schemaId, root, baseId})\n  }\n\n  if (_sch === undefined) return\n  return (root.refs[ref] = inlineOrCompile.call(this, _sch))\n}\n\nfunction inlineOrCompile(this: Ajv, sch: SchemaEnv): AnySchema | SchemaEnv {\n  if (inlineRef(sch.schema, this.opts.inlineRefs)) return sch.schema\n  return sch.validate ? sch : compileSchema.call(this, sch)\n}\n\n// Index of schema compilation in the currently compiled list\nexport function getCompilingSchema(this: Ajv, schEnv: SchemaEnv): SchemaEnv | void {\n  for (const sch of this._compilations) {\n    if (sameSchemaEnv(sch, schEnv)) return sch\n  }\n}\n\nfunction sameSchemaEnv(s1: SchemaEnv, s2: SchemaEnv): boolean {\n  return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId\n}\n\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(\n  this: Ajv,\n  root: SchemaEnv, // information about the root schema for the current schema\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  let sch\n  while (typeof (sch = this.refs[ref]) == \"string\") ref = sch\n  return sch || this.schemas[ref] || resolveSchema.call(this, root, ref)\n}\n\n// Resolve schema, its root and baseId\nexport function resolveSchema(\n  this: Ajv,\n  root: SchemaEnv, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  const p = this.opts.uriResolver.parse(ref)\n  const refPath = _getFullPath(this.opts.uriResolver, p)\n  let baseId = getFullPath(this.opts.uriResolver, root.baseId, undefined)\n  // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n  if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n    return getJsonPointer.call(this, p, root)\n  }\n\n  const id = normalizeId(refPath)\n  const schOrRef = this.refs[id] || this.schemas[id]\n  if (typeof schOrRef == \"string\") {\n    const sch = resolveSchema.call(this, root, schOrRef)\n    if (typeof sch?.schema !== \"object\") return\n    return getJsonPointer.call(this, p, sch)\n  }\n\n  if (typeof schOrRef?.schema !== \"object\") return\n  if (!schOrRef.validate) compileSchema.call(this, schOrRef)\n  if (id === normalizeId(ref)) {\n    const {schema} = schOrRef\n    const {schemaId} = this.opts\n    const schId = schema[schemaId]\n    if (schId) baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    return new SchemaEnv({schema, schemaId, root, baseId})\n  }\n  return getJsonPointer.call(this, p, schOrRef)\n}\n\nconst PREVENT_SCOPE_CHANGE = new Set([\n  \"properties\",\n  \"patternProperties\",\n  \"enum\",\n  \"dependencies\",\n  \"definitions\",\n])\n\nfunction getJsonPointer(\n  this: Ajv,\n  parsedRef: URIComponent,\n  {baseId, schema, root}: SchemaEnv\n): SchemaEnv | undefined {\n  if (parsedRef.fragment?.[0] !== \"/\") return\n  for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n    if (typeof schema === \"boolean\") return\n    const partSchema = schema[unescapeFragment(part)]\n    if (partSchema === undefined) return\n    schema = partSchema\n    // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n    const schId = typeof schema === \"object\" && schema[this.opts.schemaId]\n    if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n      baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    }\n  }\n  let env: SchemaEnv | undefined\n  if (typeof schema != \"boolean\" && schema.$ref && !schemaHasRulesButRef(schema, this.RULES)) {\n    const $ref = resolveUrl(this.opts.uriResolver, baseId, schema.$ref)\n    env = resolveSchema.call(this, root, $ref)\n  }\n  // even though resolution failed we need to return SchemaEnv to throw exception\n  // so that compileAsync loads missing schema.\n  const {schemaId} = this.opts\n  env = env || new SchemaEnv({schema, schemaId, root, baseId})\n  if (env.schema !== env.root.schema) return env\n  return undefined\n}\n","import {Name} from \"./codegen\"\n\nconst names = {\n  // validation function arguments\n  data: new Name(\"data\"), // data passed to validation function\n  // args passed from referencing schema\n  valCxt: new Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n  instancePath: new Name(\"instancePath\"),\n  parentData: new Name(\"parentData\"),\n  parentDataProperty: new Name(\"parentDataProperty\"),\n  rootData: new Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n  dynamicAnchors: new Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n  // function scoped variables\n  vErrors: new Name(\"vErrors\"), // null or array of validation errors\n  errors: new Name(\"errors\"), // counter of validation errors\n  this: new Name(\"this\"),\n  // \"globals\"\n  self: new Name(\"self\"),\n  scope: new Name(\"scope\"),\n  // JTD serialize/parse name for JSON string and position\n  json: new Name(\"json\"),\n  jsonPos: new Name(\"jsonPos\"),\n  jsonLen: new Name(\"jsonLen\"),\n  jsonPart: new Name(\"jsonPart\"),\n}\n\nexport default names\n","import {resolveUrl, normalizeId, getFullPath} from \"./resolve\"\nimport type {UriResolver} from \"../types\"\n\nexport default class MissingRefError extends Error {\n  readonly missingRef: string\n  readonly missingSchema: string\n\n  constructor(resolver: UriResolver, baseId: string, ref: string, msg?: string) {\n    super(msg || `can't resolve reference ${ref} from id ${baseId}`)\n    this.missingRef = resolveUrl(resolver, baseId, ref)\n    this.missingSchema = normalizeId(getFullPath(resolver, this.missingRef))\n  }\n}\n","import type {AnySchema, AnySchemaObject, UriResolver} from \"../types\"\nimport type Ajv from \"../ajv\"\nimport type {URIComponent} from \"fast-uri\"\nimport {eachItem} from \"./util\"\nimport * as equal from \"fast-deep-equal\"\nimport * as traverse from \"json-schema-traverse\"\n\n// the hash of local references inside the schema (created by getSchemaRefs), used for inline resolution\nexport type LocalRefs = {[Ref in string]?: AnySchemaObject}\n\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\",\n  \"const\",\n])\n\nexport function inlineRef(schema: AnySchema, limit: boolean | number = true): boolean {\n  if (typeof schema == \"boolean\") return true\n  if (limit === true) return !hasRef(schema)\n  if (!limit) return false\n  return countKeys(schema) <= limit\n}\n\nconst REF_KEYWORDS = new Set([\n  \"$ref\",\n  \"$recursiveRef\",\n  \"$recursiveAnchor\",\n  \"$dynamicRef\",\n  \"$dynamicAnchor\",\n])\n\nfunction hasRef(schema: AnySchemaObject): boolean {\n  for (const key in schema) {\n    if (REF_KEYWORDS.has(key)) return true\n    const sch = schema[key]\n    if (Array.isArray(sch) && sch.some(hasRef)) return true\n    if (typeof sch == \"object\" && hasRef(sch)) return true\n  }\n  return false\n}\n\nfunction countKeys(schema: AnySchemaObject): number {\n  let count = 0\n  for (const key in schema) {\n    if (key === \"$ref\") return Infinity\n    count++\n    if (SIMPLE_INLINED.has(key)) continue\n    if (typeof schema[key] == \"object\") {\n      eachItem(schema[key], (sch) => (count += countKeys(sch)))\n    }\n    if (count === Infinity) return Infinity\n  }\n  return count\n}\n\nexport function getFullPath(resolver: UriResolver, id = \"\", normalize?: boolean): string {\n  if (normalize !== false) id = normalizeId(id)\n  const p = resolver.parse(id)\n  return _getFullPath(resolver, p)\n}\n\nexport function _getFullPath(resolver: UriResolver, p: URIComponent): string {\n  const serialized = resolver.serialize(p)\n  return serialized.split(\"#\")[0] + \"#\"\n}\n\nconst TRAILING_SLASH_HASH = /#\\/?$/\nexport function normalizeId(id: string | undefined): string {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\"\n}\n\nexport function resolveUrl(resolver: UriResolver, baseId: string, id: string): string {\n  id = normalizeId(id)\n  return resolver.resolve(baseId, id)\n}\n\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i\n\nexport function getSchemaRefs(this: Ajv, schema: AnySchema, baseId: string): LocalRefs {\n  if (typeof schema == \"boolean\") return {}\n  const {schemaId, uriResolver} = this.opts\n  const schId = normalizeId(schema[schemaId] || baseId)\n  const baseIds: {[JsonPtr in string]?: string} = {\"\": schId}\n  const pathPrefix = getFullPath(uriResolver, schId, false)\n  const localRefs: LocalRefs = {}\n  const schemaRefs: Set<string> = new Set()\n\n  traverse(schema, {allKeys: true}, (sch, jsonPtr, _, parentJsonPtr) => {\n    if (parentJsonPtr === undefined) return\n    const fullPath = pathPrefix + jsonPtr\n    let innerBaseId = baseIds[parentJsonPtr]\n    if (typeof sch[schemaId] == \"string\") innerBaseId = addRef.call(this, sch[schemaId])\n    addAnchor.call(this, sch.$anchor)\n    addAnchor.call(this, sch.$dynamicAnchor)\n    baseIds[jsonPtr] = innerBaseId\n\n    function addRef(this: Ajv, ref: string): string {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const _resolve = this.opts.uriResolver.resolve\n      ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref)\n      if (schemaRefs.has(ref)) throw ambiguos(ref)\n      schemaRefs.add(ref)\n      let schOrRef = this.refs[ref]\n      if (typeof schOrRef == \"string\") schOrRef = this.refs[schOrRef]\n      if (typeof schOrRef == \"object\") {\n        checkAmbiguosRef(sch, schOrRef.schema, ref)\n      } else if (ref !== normalizeId(fullPath)) {\n        if (ref[0] === \"#\") {\n          checkAmbiguosRef(sch, localRefs[ref], ref)\n          localRefs[ref] = sch\n        } else {\n          this.refs[ref] = fullPath\n        }\n      }\n      return ref\n    }\n\n    function addAnchor(this: Ajv, anchor: unknown): void {\n      if (typeof anchor == \"string\") {\n        if (!ANCHOR.test(anchor)) throw new Error(`invalid anchor \"${anchor}\"`)\n        addRef.call(this, `#${anchor}`)\n      }\n    }\n  })\n\n  return localRefs\n\n  function checkAmbiguosRef(sch1: AnySchema, sch2: AnySchema | undefined, ref: string): void {\n    if (sch2 !== undefined && !equal(sch1, sch2)) throw ambiguos(ref)\n  }\n\n  function ambiguos(ref: string): Error {\n    return new Error(`reference \"${ref}\" resolves to more than one schema`)\n  }\n}\n","import type {AddedKeywordDefinition} from \"../types\"\n\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"] as const\n\nexport type JSONType = (typeof _jsonTypes)[number]\n\nconst jsonTypes: Set<string> = new Set(_jsonTypes)\n\nexport function isJSONType(x: unknown): x is JSONType {\n  return typeof x == \"string\" && jsonTypes.has(x)\n}\n\ntype ValidationTypes = {\n  [K in JSONType]: boolean | RuleGroup | undefined\n}\n\nexport interface ValidationRules {\n  rules: RuleGroup[]\n  post: RuleGroup\n  all: {[Key in string]?: boolean | Rule} // rules that have to be validated\n  keywords: {[Key in string]?: boolean} // all known keywords (superset of \"all\")\n  types: ValidationTypes\n}\n\nexport interface RuleGroup {\n  type?: JSONType\n  rules: Rule[]\n}\n\n// This interface wraps KeywordDefinition because definition can have multiple keywords\nexport interface Rule {\n  keyword: string\n  definition: AddedKeywordDefinition\n}\n\nexport function getRules(): ValidationRules {\n  const groups: Record<\"number\" | \"string\" | \"array\" | \"object\", RuleGroup> = {\n    number: {type: \"number\", rules: []},\n    string: {type: \"string\", rules: []},\n    array: {type: \"array\", rules: []},\n    object: {type: \"object\", rules: []},\n  }\n  return {\n    types: {...groups, integer: true, boolean: true, null: true},\n    rules: [{rules: []}, groups.number, groups.string, groups.array, groups.object],\n    post: {rules: []},\n    all: {},\n    keywords: {},\n  }\n}\n","import type {AnySchema, EvaluatedProperties, EvaluatedItems} from \"../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \".\"\nimport {_, getProperty, Code, Name, CodeGen} from \"./codegen\"\nimport {_Code} from \"./codegen/code\"\nimport type {Rule, ValidationRules} from \"./rules\"\n\n// TODO refactor to use Set\nexport function toHash<T extends string = string>(arr: T[]): {[K in T]?: true} {\n  const hash: {[K in T]?: true} = {}\n  for (const item of arr) hash[item] = true\n  return hash\n}\n\nexport function alwaysValidSchema(it: SchemaCxt, schema: AnySchema): boolean | void {\n  if (typeof schema == \"boolean\") return schema\n  if (Object.keys(schema).length === 0) return true\n  checkUnknownRules(it, schema)\n  return !schemaHasRules(schema, it.self.RULES.all)\n}\n\nexport function checkUnknownRules(it: SchemaCxt, schema: AnySchema = it.schema): void {\n  const {opts, self} = it\n  if (!opts.strictSchema) return\n  if (typeof schema === \"boolean\") return\n  const rules = self.RULES.keywords\n  for (const key in schema) {\n    if (!rules[key]) checkStrictMode(it, `unknown keyword: \"${key}\"`)\n  }\n}\n\nexport function schemaHasRules(\n  schema: AnySchema,\n  rules: {[Key in string]?: boolean | Rule}\n): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (rules[key]) return true\n  return false\n}\n\nexport function schemaHasRulesButRef(schema: AnySchema, RULES: ValidationRules): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (key !== \"$ref\" && RULES.all[key]) return true\n  return false\n}\n\nexport function schemaRefOrVal(\n  {topSchemaRef, schemaPath}: SchemaObjCxt,\n  schema: unknown,\n  keyword: string,\n  $data?: string | false\n): Code | number | boolean {\n  if (!$data) {\n    if (typeof schema == \"number\" || typeof schema == \"boolean\") return schema\n    if (typeof schema == \"string\") return _`${schema}`\n  }\n  return _`${topSchemaRef}${schemaPath}${getProperty(keyword)}`\n}\n\nexport function unescapeFragment(str: string): string {\n  return unescapeJsonPointer(decodeURIComponent(str))\n}\n\nexport function escapeFragment(str: string | number): string {\n  return encodeURIComponent(escapeJsonPointer(str))\n}\n\nexport function escapeJsonPointer(str: string | number): string {\n  if (typeof str == \"number\") return `${str}`\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\")\n}\n\nexport function unescapeJsonPointer(str: string): string {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\")\n}\n\nexport function eachItem<T>(xs: T | T[], f: (x: T) => void): void {\n  if (Array.isArray(xs)) {\n    for (const x of xs) f(x)\n  } else {\n    f(xs)\n  }\n}\n\ntype SomeEvaluated = EvaluatedProperties | EvaluatedItems\n\ntype MergeEvaluatedFunc<T extends SomeEvaluated> = (\n  gen: CodeGen,\n  from: Name | T,\n  to: Name | Exclude<T, true> | undefined,\n  toName?: typeof Name\n) => Name | T\n\ninterface MakeMergeFuncArgs<T extends SomeEvaluated> {\n  mergeNames: (gen: CodeGen, from: Name, to: Name) => void\n  mergeToName: (gen: CodeGen, from: T, to: Name) => void\n  mergeValues: (from: T, to: Exclude<T, true>) => T\n  resultToName: (gen: CodeGen, res?: T) => Name\n}\n\nfunction makeMergeEvaluated<T extends SomeEvaluated>({\n  mergeNames,\n  mergeToName,\n  mergeValues,\n  resultToName,\n}: MakeMergeFuncArgs<T>): MergeEvaluatedFunc<T> {\n  return (gen, from, to, toName) => {\n    const res =\n      to === undefined\n        ? from\n        : to instanceof Name\n        ? (from instanceof Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n        : from instanceof Name\n        ? (mergeToName(gen, to, from), from)\n        : mergeValues(from, to)\n    return toName === Name && !(res instanceof Name) ? resultToName(gen, res) : res\n  }\n}\n\ninterface MergeEvaluated {\n  props: MergeEvaluatedFunc<EvaluatedProperties>\n  items: MergeEvaluatedFunc<EvaluatedItems>\n}\n\nexport const mergeEvaluated: MergeEvaluated = {\n  props: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () => {\n        gen.if(\n          _`${from} === true`,\n          () => gen.assign(to, true),\n          () => gen.assign(to, _`${to} || {}`).code(_`Object.assign(${to}, ${from})`)\n        )\n      }),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () => {\n        if (from === true) {\n          gen.assign(to, true)\n        } else {\n          gen.assign(to, _`${to} || {}`)\n          setEvaluated(gen, to, from)\n        }\n      }),\n    mergeValues: (from, to) => (from === true ? true : {...from, ...to}),\n    resultToName: evaluatedPropsToName,\n  }),\n  items: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () =>\n        gen.assign(to, _`${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () =>\n        gen.assign(to, from === true ? true : _`${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n    resultToName: (gen, items) => gen.var(\"items\", items),\n  }),\n}\n\nexport function evaluatedPropsToName(gen: CodeGen, ps?: EvaluatedProperties): Name {\n  if (ps === true) return gen.var(\"props\", true)\n  const props = gen.var(\"props\", _`{}`)\n  if (ps !== undefined) setEvaluated(gen, props, ps)\n  return props\n}\n\nexport function setEvaluated(gen: CodeGen, props: Name, ps: {[K in string]?: true}): void {\n  Object.keys(ps).forEach((p) => gen.assign(_`${props}${getProperty(p)}`, true))\n}\n\nconst snippets: {[S in string]?: _Code} = {}\n\nexport function useFunc(gen: CodeGen, f: {code: string}): Name {\n  return gen.scopeValue(\"func\", {\n    ref: f,\n    code: snippets[f.code] || (snippets[f.code] = new _Code(f.code)),\n  })\n}\n\nexport enum Type {\n  Num,\n  Str,\n}\n\nexport function getErrorPath(\n  dataProp: Name | string | number,\n  dataPropType?: Type,\n  jsPropertySyntax?: boolean\n): Code | string {\n  // let path\n  if (dataProp instanceof Name) {\n    const isNumber = dataPropType === Type.Num\n    return jsPropertySyntax\n      ? isNumber\n        ? _`\"[\" + ${dataProp} + \"]\"`\n        : _`\"['\" + ${dataProp} + \"']\"`\n      : isNumber\n      ? _`\"/\" + ${dataProp}`\n      : _`\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")` // TODO maybe use global escapePointer\n  }\n  return jsPropertySyntax ? getProperty(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp)\n}\n\nexport function checkStrictMode(\n  it: SchemaCxt,\n  msg: string,\n  mode: boolean | \"log\" = it.opts.strictSchema\n): void {\n  if (!mode) return\n  msg = `strict mode: ${msg}`\n  if (mode === true) throw new Error(msg)\n  it.self.logger.warn(msg)\n}\n","import type {AnySchemaObject} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport type {JSONType, RuleGroup, Rule} from \"../rules\"\n\nexport function schemaHasRulesForType(\n  {schema, self}: SchemaObjCxt,\n  type: JSONType\n): boolean | undefined {\n  const group = self.RULES.types[type]\n  return group && group !== true && shouldUseGroup(schema, group)\n}\n\nexport function shouldUseGroup(schema: AnySchemaObject, group: RuleGroup): boolean {\n  return group.rules.some((rule) => shouldUseRule(schema, rule))\n}\n\nexport function shouldUseRule(schema: AnySchemaObject, rule: Rule): boolean | undefined {\n  return (\n    schema[rule.keyword] !== undefined ||\n    rule.definition.implements?.some((kwd) => schema[kwd] !== undefined)\n  )\n}\n","import type {KeywordErrorDefinition, KeywordErrorCxt} from \"../../types\"\nimport type {SchemaCxt} from \"..\"\nimport {reportError} from \"../errors\"\nimport {_, Name} from \"../codegen\"\nimport N from \"../names\"\n\nconst boolError: KeywordErrorDefinition = {\n  message: \"boolean schema is false\",\n}\n\nexport function topBoolOrEmptySchema(it: SchemaCxt): void {\n  const {gen, schema, validateName} = it\n  if (schema === false) {\n    falseSchemaError(it, false)\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(N.data)\n  } else {\n    gen.assign(_`${validateName}.errors`, null)\n    gen.return(true)\n  }\n}\n\nexport function boolOrEmptySchema(it: SchemaCxt, valid: Name): void {\n  const {gen, schema} = it\n  if (schema === false) {\n    gen.var(valid, false) // TODO var\n    falseSchemaError(it)\n  } else {\n    gen.var(valid, true) // TODO var\n  }\n}\n\nfunction falseSchemaError(it: SchemaCxt, overrideAllErrors?: boolean): void {\n  const {gen, data} = it\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt: KeywordErrorCxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it,\n  }\n  reportError(cxt, boolError, undefined, overrideAllErrors)\n}\n","import type {\n  KeywordErrorDefinition,\n  KeywordErrorCxt,\n  ErrorObject,\n  AnySchemaObject,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {isJSONType, JSONType} from \"../rules\"\nimport {schemaHasRulesForType} from \"./applicability\"\nimport {reportError} from \"../errors\"\nimport {_, nil, and, not, operators, Code, Name} from \"../codegen\"\nimport {toHash, schemaRefOrVal} from \"../util\"\n\nexport enum DataType {\n  Correct,\n  Wrong,\n}\n\nexport function getSchemaTypes(schema: AnySchemaObject): JSONType[] {\n  const types = getJSONTypes(schema.type)\n  const hasNull = types.includes(\"null\")\n  if (hasNull) {\n    if (schema.nullable === false) throw new Error(\"type: null contradicts nullable: false\")\n  } else {\n    if (!types.length && schema.nullable !== undefined) {\n      throw new Error('\"nullable\" cannot be used without \"type\"')\n    }\n    if (schema.nullable === true) types.push(\"null\")\n  }\n  return types\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport function getJSONTypes(ts: unknown | unknown[]): JSONType[] {\n  const types: unknown[] = Array.isArray(ts) ? ts : ts ? [ts] : []\n  if (types.every(isJSONType)) return types\n  throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"))\n}\n\nexport function coerceAndCheckDataType(it: SchemaObjCxt, types: JSONType[]): boolean {\n  const {gen, data, opts} = it\n  const coerceTo = coerceToTypes(types, opts.coerceTypes)\n  const checkTypes =\n    types.length > 0 &&\n    !(coerceTo.length === 0 && types.length === 1 && schemaHasRulesForType(it, types[0]))\n  if (checkTypes) {\n    const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong)\n    gen.if(wrongType, () => {\n      if (coerceTo.length) coerceData(it, types, coerceTo)\n      else reportTypeError(it)\n    })\n  }\n  return checkTypes\n}\n\nconst COERCIBLE: Set<JSONType> = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"])\nfunction coerceToTypes(types: JSONType[], coerceTypes?: boolean | \"array\"): JSONType[] {\n  return coerceTypes\n    ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n    : []\n}\n\nfunction coerceData(it: SchemaObjCxt, types: JSONType[], coerceTo: JSONType[]): void {\n  const {gen, data, opts} = it\n  const dataType = gen.let(\"dataType\", _`typeof ${data}`)\n  const coerced = gen.let(\"coerced\", _`undefined`)\n  if (opts.coerceTypes === \"array\") {\n    gen.if(_`${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () =>\n      gen\n        .assign(data, _`${data}[0]`)\n        .assign(dataType, _`typeof ${data}`)\n        .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data))\n    )\n  }\n  gen.if(_`${coerced} !== undefined`)\n  for (const t of coerceTo) {\n    if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n      coerceSpecificType(t)\n    }\n  }\n  gen.else()\n  reportTypeError(it)\n  gen.endIf()\n\n  gen.if(_`${coerced} !== undefined`, () => {\n    gen.assign(data, coerced)\n    assignParentData(it, coerced)\n  })\n\n  function coerceSpecificType(t: string): void {\n    switch (t) {\n      case \"string\":\n        gen\n          .elseIf(_`${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n          .assign(coerced, _`\"\" + ${data}`)\n          .elseIf(_`${data} === null`)\n          .assign(coerced, _`\"\"`)\n        return\n      case \"number\":\n        gen\n          .elseIf(\n            _`${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"integer\":\n        gen\n          .elseIf(\n            _`${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"boolean\":\n        gen\n          .elseIf(_`${data} === \"false\" || ${data} === 0 || ${data} === null`)\n          .assign(coerced, false)\n          .elseIf(_`${data} === \"true\" || ${data} === 1`)\n          .assign(coerced, true)\n        return\n      case \"null\":\n        gen.elseIf(_`${data} === \"\" || ${data} === 0 || ${data} === false`)\n        gen.assign(coerced, null)\n        return\n\n      case \"array\":\n        gen\n          .elseIf(\n            _`${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`\n          )\n          .assign(coerced, _`[${data}]`)\n    }\n  }\n}\n\nfunction assignParentData({gen, parentData, parentDataProperty}: SchemaObjCxt, expr: Name): void {\n  // TODO use gen.property\n  gen.if(_`${parentData} !== undefined`, () =>\n    gen.assign(_`${parentData}[${parentDataProperty}]`, expr)\n  )\n}\n\nexport function checkDataType(\n  dataType: JSONType,\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct = DataType.Correct\n): Code {\n  const EQ = correct === DataType.Correct ? operators.EQ : operators.NEQ\n  let cond: Code\n  switch (dataType) {\n    case \"null\":\n      return _`${data} ${EQ} null`\n    case \"array\":\n      cond = _`Array.isArray(${data})`\n      break\n    case \"object\":\n      cond = _`${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`\n      break\n    case \"integer\":\n      cond = numCond(_`!(${data} % 1) && !isNaN(${data})`)\n      break\n    case \"number\":\n      cond = numCond()\n      break\n    default:\n      return _`typeof ${data} ${EQ} ${dataType}`\n  }\n  return correct === DataType.Correct ? cond : not(cond)\n\n  function numCond(_cond: Code = nil): Code {\n    return and(_`typeof ${data} == \"number\"`, _cond, strictNums ? _`isFinite(${data})` : nil)\n  }\n}\n\nexport function checkDataTypes(\n  dataTypes: JSONType[],\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct?: DataType\n): Code {\n  if (dataTypes.length === 1) {\n    return checkDataType(dataTypes[0], data, strictNums, correct)\n  }\n  let cond: Code\n  const types = toHash(dataTypes)\n  if (types.array && types.object) {\n    const notObj = _`typeof ${data} != \"object\"`\n    cond = types.null ? notObj : _`!${data} || ${notObj}`\n    delete types.null\n    delete types.array\n    delete types.object\n  } else {\n    cond = nil\n  }\n  if (types.number) delete types.integer\n  for (const t in types) cond = and(cond, checkDataType(t as JSONType, data, strictNums, correct))\n  return cond\n}\n\nexport type TypeError = ErrorObject<\"type\", {type: string}>\n\nconst typeError: KeywordErrorDefinition = {\n  message: ({schema}) => `must be ${schema}`,\n  params: ({schema, schemaValue}) =>\n    typeof schema == \"string\" ? _`{type: ${schema}}` : _`{type: ${schemaValue}}`,\n}\n\nexport function reportTypeError(it: SchemaObjCxt): void {\n  const cxt = getTypeErrorContext(it)\n  reportError(cxt, typeError)\n}\n\nfunction getTypeErrorContext(it: SchemaObjCxt): KeywordErrorCxt {\n  const {gen, data, schema} = it\n  const schemaCode = schemaRefOrVal(it, schema, \"type\")\n  return {\n    gen,\n    keyword: \"type\",\n    data,\n    schema: schema.type,\n    schemaCode,\n    schemaValue: schemaCode,\n    parentSchema: schema,\n    params: {},\n    it,\n  }\n}\n","import type {SchemaObjCxt} from \"..\"\nimport {_, getProperty, stringify} from \"../codegen\"\nimport {checkStrictMode} from \"../util\"\n\nexport function assignDefaults(it: SchemaObjCxt, ty?: string): void {\n  const {properties, items} = it.schema\n  if (ty === \"object\" && properties) {\n    for (const key in properties) {\n      assignDefault(it, key, properties[key].default)\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach((sch, i: number) => assignDefault(it, i, sch.default))\n  }\n}\n\nfunction assignDefault(it: SchemaObjCxt, prop: string | number, defaultValue: unknown): void {\n  const {gen, compositeRule, data, opts} = it\n  if (defaultValue === undefined) return\n  const childData = _`${data}${getProperty(prop)}`\n  if (compositeRule) {\n    checkStrictMode(it, `default is ignored for: ${childData}`)\n    return\n  }\n\n  let condition = _`${childData} === undefined`\n  if (opts.useDefaults === \"empty\") {\n    condition = _`${condition} || ${childData} === null || ${childData} === \"\"`\n  }\n  // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n  gen.if(condition, _`${childData} = ${stringify(defaultValue)}`)\n}\n","import type {\n  AddedKeywordDefinition,\n  AnySchema,\n  AnySchemaObject,\n  KeywordErrorCxt,\n  KeywordCxtParams,\n} from \"../../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \"..\"\nimport type {InstanceOptions} from \"../../core\"\nimport {boolOrEmptySchema, topBoolOrEmptySchema} from \"./boolSchema\"\nimport {coerceAndCheckDataType, getSchemaTypes} from \"./dataType\"\nimport {shouldUseGroup, shouldUseRule} from \"./applicability\"\nimport {checkDataType, checkDataTypes, reportTypeError, DataType} from \"./dataType\"\nimport {assignDefaults} from \"./defaults\"\nimport {funcKeywordCode, macroKeywordCode, validateKeywordUsage, validSchemaType} from \"./keyword\"\nimport {getSubschema, extendSubschemaData, SubschemaArgs, extendSubschemaMode} from \"./subschema\"\nimport {_, nil, str, or, not, getProperty, Block, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport {resolveUrl} from \"../resolve\"\nimport {\n  schemaRefOrVal,\n  schemaHasRulesButRef,\n  checkUnknownRules,\n  checkStrictMode,\n  unescapeJsonPointer,\n  mergeEvaluated,\n} from \"../util\"\nimport type {JSONType, Rule, RuleGroup} from \"../rules\"\nimport {\n  ErrorPaths,\n  reportError,\n  reportExtraError,\n  resetErrorsCount,\n  keyword$DataError,\n} from \"../errors\"\n\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nexport function validateFunctionCode(it: SchemaCxt): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      topSchemaObjCode(it)\n      return\n    }\n  }\n  validateFunction(it, () => topBoolOrEmptySchema(it))\n}\n\nfunction validateFunction(\n  {gen, validateName, schema, schemaEnv, opts}: SchemaCxt,\n  body: Block\n): void {\n  if (opts.code.es5) {\n    gen.func(validateName, _`${N.data}, ${N.valCxt}`, schemaEnv.$async, () => {\n      gen.code(_`\"use strict\"; ${funcSourceUrl(schema, opts)}`)\n      destructureValCxtES5(gen, opts)\n      gen.code(body)\n    })\n  } else {\n    gen.func(validateName, _`${N.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () =>\n      gen.code(funcSourceUrl(schema, opts)).code(body)\n    )\n  }\n}\n\nfunction destructureValCxt(opts: InstanceOptions): Code {\n  return _`{${N.instancePath}=\"\", ${N.parentData}, ${N.parentDataProperty}, ${N.rootData}=${\n    N.data\n  }${opts.dynamicRef ? _`, ${N.dynamicAnchors}={}` : nil}}={}`\n}\n\nfunction destructureValCxtES5(gen: CodeGen, opts: InstanceOptions): void {\n  gen.if(\n    N.valCxt,\n    () => {\n      gen.var(N.instancePath, _`${N.valCxt}.${N.instancePath}`)\n      gen.var(N.parentData, _`${N.valCxt}.${N.parentData}`)\n      gen.var(N.parentDataProperty, _`${N.valCxt}.${N.parentDataProperty}`)\n      gen.var(N.rootData, _`${N.valCxt}.${N.rootData}`)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`${N.valCxt}.${N.dynamicAnchors}`)\n    },\n    () => {\n      gen.var(N.instancePath, _`\"\"`)\n      gen.var(N.parentData, _`undefined`)\n      gen.var(N.parentDataProperty, _`undefined`)\n      gen.var(N.rootData, N.data)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`{}`)\n    }\n  )\n}\n\nfunction topSchemaObjCode(it: SchemaObjCxt): void {\n  const {schema, opts, gen} = it\n  validateFunction(it, () => {\n    if (opts.$comment && schema.$comment) commentKeyword(it)\n    checkNoDefault(it)\n    gen.let(N.vErrors, null)\n    gen.let(N.errors, 0)\n    if (opts.unevaluated) resetEvaluated(it)\n    typeAndKeywords(it)\n    returnResults(it)\n  })\n  return\n}\n\nfunction resetEvaluated(it: SchemaObjCxt): void {\n  // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n  const {gen, validateName} = it\n  it.evaluated = gen.const(\"evaluated\", _`${validateName}.evaluated`)\n  gen.if(_`${it.evaluated}.dynamicProps`, () => gen.assign(_`${it.evaluated}.props`, _`undefined`))\n  gen.if(_`${it.evaluated}.dynamicItems`, () => gen.assign(_`${it.evaluated}.items`, _`undefined`))\n}\n\nfunction funcSourceUrl(schema: AnySchema, opts: InstanceOptions): Code {\n  const schId = typeof schema == \"object\" && schema[opts.schemaId]\n  return schId && (opts.code.source || opts.code.process) ? _`/*# sourceURL=${schId} */` : nil\n}\n\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it: SchemaCxt, valid: Name): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      subSchemaObjCode(it, valid)\n      return\n    }\n  }\n  boolOrEmptySchema(it, valid)\n}\n\nfunction schemaCxtHasRules({schema, self}: SchemaCxt): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (self.RULES.all[key]) return true\n  return false\n}\n\nfunction isSchemaObj(it: SchemaCxt): it is SchemaObjCxt {\n  return typeof it.schema != \"boolean\"\n}\n\nfunction subSchemaObjCode(it: SchemaObjCxt, valid: Name): void {\n  const {schema, gen, opts} = it\n  if (opts.$comment && schema.$comment) commentKeyword(it)\n  updateContext(it)\n  checkAsyncSchema(it)\n  const errsCount = gen.const(\"_errs\", N.errors)\n  typeAndKeywords(it, errsCount)\n  // TODO var\n  gen.var(valid, _`${errsCount} === ${N.errors}`)\n}\n\nfunction checkKeywords(it: SchemaObjCxt): void {\n  checkUnknownRules(it)\n  checkRefsAndKeywords(it)\n}\n\nfunction typeAndKeywords(it: SchemaObjCxt, errsCount?: Name): void {\n  if (it.opts.jtd) return schemaKeywords(it, [], false, errsCount)\n  const types = getSchemaTypes(it.schema)\n  const checkedTypes = coerceAndCheckDataType(it, types)\n  schemaKeywords(it, types, !checkedTypes, errsCount)\n}\n\nfunction checkRefsAndKeywords(it: SchemaObjCxt): void {\n  const {schema, errSchemaPath, opts, self} = it\n  if (schema.$ref && opts.ignoreKeywordsWithRef && schemaHasRulesButRef(schema, self.RULES)) {\n    self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`)\n  }\n}\n\nfunction checkNoDefault(it: SchemaObjCxt): void {\n  const {schema, opts} = it\n  if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n    checkStrictMode(it, \"default is ignored in the schema root\")\n  }\n}\n\nfunction updateContext(it: SchemaObjCxt): void {\n  const schId = it.schema[it.opts.schemaId]\n  if (schId) it.baseId = resolveUrl(it.opts.uriResolver, it.baseId, schId)\n}\n\nfunction checkAsyncSchema(it: SchemaObjCxt): void {\n  if (it.schema.$async && !it.schemaEnv.$async) throw new Error(\"async schema in sync schema\")\n}\n\nfunction commentKeyword({gen, schemaEnv, schema, errSchemaPath, opts}: SchemaObjCxt): void {\n  const msg = schema.$comment\n  if (opts.$comment === true) {\n    gen.code(_`${N.self}.logger.log(${msg})`)\n  } else if (typeof opts.$comment == \"function\") {\n    const schemaPath = str`${errSchemaPath}/$comment`\n    const rootName = gen.scopeValue(\"root\", {ref: schemaEnv.root})\n    gen.code(_`${N.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`)\n  }\n}\n\nfunction returnResults(it: SchemaCxt): void {\n  const {gen, schemaEnv, validateName, ValidationError, opts} = it\n  if (schemaEnv.$async) {\n    // TODO assign unevaluated\n    gen.if(\n      _`${N.errors} === 0`,\n      () => gen.return(N.data),\n      () => gen.throw(_`new ${ValidationError as Name}(${N.vErrors})`)\n    )\n  } else {\n    gen.assign(_`${validateName}.errors`, N.vErrors)\n    if (opts.unevaluated) assignEvaluated(it)\n    gen.return(_`${N.errors} === 0`)\n  }\n}\n\nfunction assignEvaluated({gen, evaluated, props, items}: SchemaCxt): void {\n  if (props instanceof Name) gen.assign(_`${evaluated}.props`, props)\n  if (items instanceof Name) gen.assign(_`${evaluated}.items`, items)\n}\n\nfunction schemaKeywords(\n  it: SchemaObjCxt,\n  types: JSONType[],\n  typeErrors: boolean,\n  errsCount?: Name\n): void {\n  const {gen, schema, data, allErrors, opts, self} = it\n  const {RULES} = self\n  if (schema.$ref && (opts.ignoreKeywordsWithRef || !schemaHasRulesButRef(schema, RULES))) {\n    gen.block(() => keywordCode(it, \"$ref\", (RULES.all.$ref as Rule).definition)) // TODO typecast\n    return\n  }\n  if (!opts.jtd) checkStrictTypes(it, types)\n  gen.block(() => {\n    for (const group of RULES.rules) groupKeywords(group)\n    groupKeywords(RULES.post)\n  })\n\n  function groupKeywords(group: RuleGroup): void {\n    if (!shouldUseGroup(schema, group)) return\n    if (group.type) {\n      gen.if(checkDataType(group.type, data, opts.strictNumbers))\n      iterateKeywords(it, group)\n      if (types.length === 1 && types[0] === group.type && typeErrors) {\n        gen.else()\n        reportTypeError(it)\n      }\n      gen.endIf()\n    } else {\n      iterateKeywords(it, group)\n    }\n    // TODO make it \"ok\" call?\n    if (!allErrors) gen.if(_`${N.errors} === ${errsCount || 0}`)\n  }\n}\n\nfunction iterateKeywords(it: SchemaObjCxt, group: RuleGroup): void {\n  const {\n    gen,\n    schema,\n    opts: {useDefaults},\n  } = it\n  if (useDefaults) assignDefaults(it, group.type)\n  gen.block(() => {\n    for (const rule of group.rules) {\n      if (shouldUseRule(schema, rule)) {\n        keywordCode(it, rule.keyword, rule.definition, group.type)\n      }\n    }\n  })\n}\n\nfunction checkStrictTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (it.schemaEnv.meta || !it.opts.strictTypes) return\n  checkContextTypes(it, types)\n  if (!it.opts.allowUnionTypes) checkMultipleTypes(it, types)\n  checkKeywordTypes(it, it.dataTypes)\n}\n\nfunction checkContextTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (!types.length) return\n  if (!it.dataTypes.length) {\n    it.dataTypes = types\n    return\n  }\n  types.forEach((t) => {\n    if (!includesType(it.dataTypes, t)) {\n      strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`)\n    }\n  })\n  narrowSchemaTypes(it, types)\n}\n\nfunction checkMultipleTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n    strictTypesError(it, \"use allowUnionTypes to allow union type keyword\")\n  }\n}\n\nfunction checkKeywordTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  const rules = it.self.RULES.all\n  for (const keyword in rules) {\n    const rule = rules[keyword]\n    if (typeof rule == \"object\" && shouldUseRule(it.schema, rule)) {\n      const {type} = rule.definition\n      if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n        strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`)\n      }\n    }\n  }\n}\n\nfunction hasApplicableType(schTs: JSONType[], kwdT: JSONType): boolean {\n  return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"))\n}\n\nfunction includesType(ts: JSONType[], t: JSONType): boolean {\n  return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"))\n}\n\nfunction narrowSchemaTypes(it: SchemaObjCxt, withTypes: JSONType[]): void {\n  const ts: JSONType[] = []\n  for (const t of it.dataTypes) {\n    if (includesType(withTypes, t)) ts.push(t)\n    else if (withTypes.includes(\"integer\") && t === \"number\") ts.push(\"integer\")\n  }\n  it.dataTypes = ts\n}\n\nfunction strictTypesError(it: SchemaObjCxt, msg: string): void {\n  const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n  msg += ` at \"${schemaPath}\" (strictTypes)`\n  checkStrictMode(it, msg, it.opts.strictTypes)\n}\n\nexport class KeywordCxt implements KeywordErrorCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean\n  readonly keyword: string\n  readonly data: Name // Name referencing the current level of the data instance\n  readonly $data?: string | false\n  schema: any // keyword value in the schema\n  readonly schemaValue: Code | number | boolean // Code reference to keyword schema value or primitive value\n  readonly schemaCode: Code | number | boolean // Code reference to resolved schema value (different if schema is $data)\n  readonly schemaType: JSONType[] // allowed type(s) of keyword value in the schema\n  readonly parentSchema: AnySchemaObject\n  readonly errsCount?: Name // Name reference to the number of validation errors collected before this keyword,\n  // requires option trackErrors in keyword definition\n  params: KeywordCxtParams // object to pass parameters to error messages from keyword code\n  readonly it: SchemaObjCxt // schema compilation context (schema is guaranteed to be an object, not boolean)\n  readonly def: AddedKeywordDefinition\n\n  constructor(it: SchemaObjCxt, def: AddedKeywordDefinition, keyword: string) {\n    validateKeywordUsage(it, def, keyword)\n    this.gen = it.gen\n    this.allErrors = it.allErrors\n    this.keyword = keyword\n    this.data = it.data\n    this.schema = it.schema[keyword]\n    this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data\n    this.schemaValue = schemaRefOrVal(it, this.schema, keyword, this.$data)\n    this.schemaType = def.schemaType\n    this.parentSchema = it.schema\n    this.params = {}\n    this.it = it\n    this.def = def\n\n    if (this.$data) {\n      this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it))\n    } else {\n      this.schemaCode = this.schemaValue\n      if (!validSchemaType(this.schema, def.schemaType, def.allowUndefined)) {\n        throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`)\n      }\n    }\n\n    if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n      this.errsCount = it.gen.const(\"_errs\", N.errors)\n    }\n  }\n\n  result(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.failResult(not(condition), successAction, failAction)\n  }\n\n  failResult(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.gen.if(condition)\n    if (failAction) failAction()\n    else this.error()\n    if (successAction) {\n      this.gen.else()\n      successAction()\n      if (this.allErrors) this.gen.endIf()\n    } else {\n      if (this.allErrors) this.gen.endIf()\n      else this.gen.else()\n    }\n  }\n\n  pass(condition: Code, failAction?: () => void): void {\n    this.failResult(not(condition), undefined, failAction)\n  }\n\n  fail(condition?: Code): void {\n    if (condition === undefined) {\n      this.error()\n      if (!this.allErrors) this.gen.if(false) // this branch will be removed by gen.optimize\n      return\n    }\n    this.gen.if(condition)\n    this.error()\n    if (this.allErrors) this.gen.endIf()\n    else this.gen.else()\n  }\n\n  fail$data(condition: Code): void {\n    if (!this.$data) return this.fail(condition)\n    const {schemaCode} = this\n    this.fail(_`${schemaCode} !== undefined && (${or(this.invalid$data(), condition)})`)\n  }\n\n  error(append?: boolean, errorParams?: KeywordCxtParams, errorPaths?: ErrorPaths): void {\n    if (errorParams) {\n      this.setParams(errorParams)\n      this._error(append, errorPaths)\n      this.setParams({})\n      return\n    }\n    this._error(append, errorPaths)\n  }\n\n  private _error(append?: boolean, errorPaths?: ErrorPaths): void {\n    ;(append ? reportExtraError : reportError)(this, this.def.error, errorPaths)\n  }\n\n  $dataError(): void {\n    reportError(this, this.def.$dataError || keyword$DataError)\n  }\n\n  reset(): void {\n    if (this.errsCount === undefined) throw new Error('add \"trackErrors\" to keyword definition')\n    resetErrorsCount(this.gen, this.errsCount)\n  }\n\n  ok(cond: Code | boolean): void {\n    if (!this.allErrors) this.gen.if(cond)\n  }\n\n  setParams(obj: KeywordCxtParams, assign?: true): void {\n    if (assign) Object.assign(this.params, obj)\n    else this.params = obj\n  }\n\n  block$data(valid: Name, codeBlock: () => void, $dataValid: Code = nil): void {\n    this.gen.block(() => {\n      this.check$data(valid, $dataValid)\n      codeBlock()\n    })\n  }\n\n  check$data(valid: Name = nil, $dataValid: Code = nil): void {\n    if (!this.$data) return\n    const {gen, schemaCode, schemaType, def} = this\n    gen.if(or(_`${schemaCode} === undefined`, $dataValid))\n    if (valid !== nil) gen.assign(valid, true)\n    if (schemaType.length || def.validateSchema) {\n      gen.elseIf(this.invalid$data())\n      this.$dataError()\n      if (valid !== nil) gen.assign(valid, false)\n    }\n    gen.else()\n  }\n\n  invalid$data(): Code {\n    const {gen, schemaCode, schemaType, def, it} = this\n    return or(wrong$DataType(), invalid$DataSchema())\n\n    function wrong$DataType(): Code {\n      if (schemaType.length) {\n        /* istanbul ignore if */\n        if (!(schemaCode instanceof Name)) throw new Error(\"ajv implementation error\")\n        const st = Array.isArray(schemaType) ? schemaType : [schemaType]\n        return _`${checkDataTypes(st, schemaCode, it.opts.strictNumbers, DataType.Wrong)}`\n      }\n      return nil\n    }\n\n    function invalid$DataSchema(): Code {\n      if (def.validateSchema) {\n        const validateSchemaRef = gen.scopeValue(\"validate$data\", {ref: def.validateSchema}) // TODO value.code for standalone\n        return _`!${validateSchemaRef}(${schemaCode})`\n      }\n      return nil\n    }\n  }\n\n  subschema(appl: SubschemaArgs, valid: Name): SchemaCxt {\n    const subschema = getSubschema(this.it, appl)\n    extendSubschemaData(subschema, this.it, appl)\n    extendSubschemaMode(subschema, appl)\n    const nextContext = {...this.it, ...subschema, items: undefined, props: undefined}\n    subschemaCode(nextContext, valid)\n    return nextContext\n  }\n\n  mergeEvaluated(schemaCxt: SchemaCxt, toName?: typeof Name): void {\n    const {it, gen} = this\n    if (!it.opts.unevaluated) return\n    if (it.props !== true && schemaCxt.props !== undefined) {\n      it.props = mergeEvaluated.props(gen, schemaCxt.props, it.props, toName)\n    }\n    if (it.items !== true && schemaCxt.items !== undefined) {\n      it.items = mergeEvaluated.items(gen, schemaCxt.items, it.items, toName)\n    }\n  }\n\n  mergeValidEvaluated(schemaCxt: SchemaCxt, valid: Name): boolean | void {\n    const {it, gen} = this\n    if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n      gen.if(valid, () => this.mergeEvaluated(schemaCxt, Name))\n      return true\n    }\n  }\n}\n\nfunction keywordCode(\n  it: SchemaObjCxt,\n  keyword: string,\n  def: AddedKeywordDefinition,\n  ruleType?: JSONType\n): void {\n  const cxt = new KeywordCxt(it, def, keyword)\n  if (\"code\" in def) {\n    def.code(cxt, ruleType)\n  } else if (cxt.$data && def.validate) {\n    funcKeywordCode(cxt, def)\n  } else if (\"macro\" in def) {\n    macroKeywordCode(cxt, def)\n  } else if (def.compile || def.validate) {\n    funcKeywordCode(cxt, def)\n  }\n}\n\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/\nexport function getData(\n  $data: string,\n  {dataLevel, dataNames, dataPathArr}: SchemaCxt\n): Code | number {\n  let jsonPointer\n  let data: Code\n  if ($data === \"\") return N.rootData\n  if ($data[0] === \"/\") {\n    if (!JSON_POINTER.test($data)) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    jsonPointer = $data\n    data = N.rootData\n  } else {\n    const matches = RELATIVE_JSON_POINTER.exec($data)\n    if (!matches) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    const up: number = +matches[1]\n    jsonPointer = matches[2]\n    if (jsonPointer === \"#\") {\n      if (up >= dataLevel) throw new Error(errorMsg(\"property/index\", up))\n      return dataPathArr[dataLevel - up]\n    }\n    if (up > dataLevel) throw new Error(errorMsg(\"data\", up))\n    data = dataNames[dataLevel - up]\n    if (!jsonPointer) return data\n  }\n\n  let expr = data\n  const segments = jsonPointer.split(\"/\")\n  for (const segment of segments) {\n    if (segment) {\n      data = _`${data}${getProperty(unescapeJsonPointer(segment))}`\n      expr = _`${expr} && ${data}`\n    }\n  }\n  return expr\n\n  function errorMsg(pointerType: string, up: number): string {\n    return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`\n  }\n}\n","import type {KeywordCxt} from \".\"\nimport type {\n  AnySchema,\n  SchemaValidateFunction,\n  AnyValidateFunction,\n  AddedKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, nil, not, stringify, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport type {JSONType} from \"../rules\"\nimport {callValidateCode} from \"../../vocabularies/code\"\nimport {extendErrors} from \"../errors\"\n\ntype KeywordCompilationResult = AnySchema | SchemaValidateFunction | AnyValidateFunction\n\nexport function macroKeywordCode(cxt: KeywordCxt, def: MacroKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, it} = cxt\n  const macroSchema = def.macro.call(it.self, schema, parentSchema, it)\n  const schemaRef = useKeyword(gen, keyword, macroSchema)\n  if (it.opts.validateSchema !== false) it.self.validateSchema(macroSchema, true)\n\n  const valid = gen.name(\"valid\")\n  cxt.subschema(\n    {\n      schema: macroSchema,\n      schemaPath: nil,\n      errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n      topSchemaRef: schemaRef,\n      compositeRule: true,\n    },\n    valid\n  )\n  cxt.pass(valid, () => cxt.error(true))\n}\n\nexport function funcKeywordCode(cxt: KeywordCxt, def: FuncKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, $data, it} = cxt\n  checkAsyncKeyword(it, def)\n  const validate =\n    !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate\n  const validateRef = useKeyword(gen, keyword, validate)\n  const valid = gen.let(\"valid\")\n  cxt.block$data(valid, validateKeyword)\n  cxt.ok(def.valid ?? valid)\n\n  function validateKeyword(): void {\n    if (def.errors === false) {\n      assignValid()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => cxt.error())\n    } else {\n      const ruleErrs = def.async ? validateAsync() : validateSync()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => addErrs(cxt, ruleErrs))\n    }\n  }\n\n  function validateAsync(): Name {\n    const ruleErrs = gen.let(\"ruleErrs\", null)\n    gen.try(\n      () => assignValid(_`await `),\n      (e) =>\n        gen.assign(valid, false).if(\n          _`${e} instanceof ${it.ValidationError as Name}`,\n          () => gen.assign(ruleErrs, _`${e}.errors`),\n          () => gen.throw(e)\n        )\n    )\n    return ruleErrs\n  }\n\n  function validateSync(): Code {\n    const validateErrs = _`${validateRef}.errors`\n    gen.assign(validateErrs, null)\n    assignValid(nil)\n    return validateErrs\n  }\n\n  function assignValid(_await: Code = def.async ? _`await ` : nil): void {\n    const passCxt = it.opts.passContext ? N.this : N.self\n    const passSchema = !((\"compile\" in def && !$data) || def.schema === false)\n    gen.assign(\n      valid,\n      _`${_await}${callValidateCode(cxt, validateRef, passCxt, passSchema)}`,\n      def.modifying\n    )\n  }\n\n  function reportErrs(errors: () => void): void {\n    gen.if(not(def.valid ?? valid), errors)\n  }\n}\n\nfunction modifyData(cxt: KeywordCxt): void {\n  const {gen, data, it} = cxt\n  gen.if(it.parentData, () => gen.assign(data, _`${it.parentData}[${it.parentDataProperty}]`))\n}\n\nfunction addErrs(cxt: KeywordCxt, errs: Code): void {\n  const {gen} = cxt\n  gen.if(\n    _`Array.isArray(${errs})`,\n    () => {\n      gen\n        .assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`)\n        .assign(N.errors, _`${N.vErrors}.length`)\n      extendErrors(cxt)\n    },\n    () => cxt.error()\n  )\n}\n\nfunction checkAsyncKeyword({schemaEnv}: SchemaObjCxt, def: FuncKeywordDefinition): void {\n  if (def.async && !schemaEnv.$async) throw new Error(\"async keyword in sync schema\")\n}\n\nfunction useKeyword(gen: CodeGen, keyword: string, result?: KeywordCompilationResult): Name {\n  if (result === undefined) throw new Error(`keyword \"${keyword}\" failed to compile`)\n  return gen.scopeValue(\n    \"keyword\",\n    typeof result == \"function\" ? {ref: result} : {ref: result, code: stringify(result)}\n  )\n}\n\nexport function validSchemaType(\n  schema: unknown,\n  schemaType: JSONType[],\n  allowUndefined = false\n): boolean {\n  // TODO add tests\n  return (\n    !schemaType.length ||\n    schemaType.some((st) =>\n      st === \"array\"\n        ? Array.isArray(schema)\n        : st === \"object\"\n        ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n        : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")\n    )\n  )\n}\n\nexport function validateKeywordUsage(\n  {schema, opts, self, errSchemaPath}: SchemaObjCxt,\n  def: AddedKeywordDefinition,\n  keyword: string\n): void {\n  /* istanbul ignore if */\n  if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n    throw new Error(\"ajv implementation error\")\n  }\n\n  const deps = def.dependencies\n  if (deps?.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n    throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`)\n  }\n\n  if (def.validateSchema) {\n    const valid = def.validateSchema(schema[keyword])\n    if (!valid) {\n      const msg =\n        `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n        self.errorsText(def.validateSchema.errors)\n      if (opts.validateSchema === \"log\") self.logger.error(msg)\n      else throw new Error(msg)\n    }\n  }\n}\n","import type {AnySchema} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, str, getProperty, Code, Name} from \"../codegen\"\nimport {escapeFragment, getErrorPath, Type} from \"../util\"\nimport type {JSONType} from \"../rules\"\n\nexport interface SubschemaContext {\n  // TODO use Optional? align with SchemCxt property types\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef?: Code\n  errorPath?: Code\n  dataLevel?: number\n  dataTypes?: JSONType[]\n  data?: Name\n  parentData?: Name\n  parentDataProperty?: Code | number\n  dataNames?: Name[]\n  dataPathArr?: (Code | number)[]\n  propertyName?: Name\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  compositeRule?: true\n  createErrors?: boolean\n  allErrors?: boolean\n}\n\nexport type SubschemaArgs = Partial<{\n  keyword: string\n  schemaProp: string | number\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef: Code\n  data: Name | Code\n  dataProp: Code | string | number\n  dataTypes: JSONType[]\n  definedProperties: Set<string>\n  propertyName: Name\n  dataPropType: Type\n  jtdDiscriminator: string\n  jtdMetadata: boolean\n  compositeRule: true\n  createErrors: boolean\n  allErrors: boolean\n}>\n\nexport function getSubschema(\n  it: SchemaObjCxt,\n  {keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef}: SubschemaArgs\n): SubschemaContext {\n  if (keyword !== undefined && schema !== undefined) {\n    throw new Error('both \"keyword\" and \"schema\" passed, only one allowed')\n  }\n\n  if (keyword !== undefined) {\n    const sch = it.schema[keyword]\n    return schemaProp === undefined\n      ? {\n          schema: sch,\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        }\n      : {\n          schema: sch[schemaProp],\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}${getProperty(schemaProp)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}/${escapeFragment(schemaProp)}`,\n        }\n  }\n\n  if (schema !== undefined) {\n    if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n      throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"')\n    }\n    return {\n      schema,\n      schemaPath,\n      topSchemaRef,\n      errSchemaPath,\n    }\n  }\n\n  throw new Error('either \"keyword\" or \"schema\" must be passed')\n}\n\nexport function extendSubschemaData(\n  subschema: SubschemaContext,\n  it: SchemaObjCxt,\n  {dataProp, dataPropType: dpType, data, dataTypes, propertyName}: SubschemaArgs\n): void {\n  if (data !== undefined && dataProp !== undefined) {\n    throw new Error('both \"data\" and \"dataProp\" passed, only one allowed')\n  }\n\n  const {gen} = it\n\n  if (dataProp !== undefined) {\n    const {errorPath, dataPathArr, opts} = it\n    const nextData = gen.let(\"data\", _`${it.data}${getProperty(dataProp)}`, true)\n    dataContextProps(nextData)\n    subschema.errorPath = str`${errorPath}${getErrorPath(dataProp, dpType, opts.jsPropertySyntax)}`\n    subschema.parentDataProperty = _`${dataProp}`\n    subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty]\n  }\n\n  if (data !== undefined) {\n    const nextData = data instanceof Name ? data : gen.let(\"data\", data, true) // replaceable if used once?\n    dataContextProps(nextData)\n    if (propertyName !== undefined) subschema.propertyName = propertyName\n    // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n  }\n\n  if (dataTypes) subschema.dataTypes = dataTypes\n\n  function dataContextProps(_nextData: Name): void {\n    subschema.data = _nextData\n    subschema.dataLevel = it.dataLevel + 1\n    subschema.dataTypes = []\n    it.definedProperties = new Set<string>()\n    subschema.parentData = it.data\n    subschema.dataNames = [...it.dataNames, _nextData]\n  }\n}\n\nexport function extendSubschemaMode(\n  subschema: SubschemaContext,\n  {jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors}: SubschemaArgs\n): void {\n  if (compositeRule !== undefined) subschema.compositeRule = compositeRule\n  if (createErrors !== undefined) subschema.createErrors = createErrors\n  if (allErrors !== undefined) subschema.allErrors = allErrors\n  subschema.jtdDiscriminator = jtdDiscriminator // not inherited\n  subschema.jtdMetadata = jtdMetadata // not inherited\n}\n","export {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  AnyValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport interface Plugin<Opts> {\n  (ajv: Ajv, options?: Opts): Ajv\n  [prop: string]: any\n}\n\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\n\nimport type {\n  Schema,\n  AnySchema,\n  AnySchemaObject,\n  SchemaObject,\n  AsyncSchema,\n  Vocabulary,\n  KeywordDefinition,\n  AddedKeywordDefinition,\n  AnyValidateFunction,\n  ValidateFunction,\n  AsyncValidateFunction,\n  ErrorObject,\n  Format,\n  AddedFormat,\n  RegExpEngine,\n  UriResolver,\n} from \"./types\"\nimport type {JSONSchemaType} from \"./types/json-schema\"\nimport type {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nimport ValidationError from \"./runtime/validation_error\"\nimport MissingRefError from \"./compile/ref_error\"\nimport {getRules, ValidationRules, Rule, RuleGroup, JSONType} from \"./compile/rules\"\nimport {SchemaEnv, compileSchema, resolveSchema} from \"./compile\"\nimport {Code, ValueScope} from \"./compile/codegen\"\nimport {normalizeId, getSchemaRefs} from \"./compile/resolve\"\nimport {getJSONTypes} from \"./compile/validate/dataType\"\nimport {eachItem} from \"./compile/util\"\nimport * as $dataRefSchema from \"./refs/data.json\"\n\nimport DefaultUriResolver from \"./runtime/uri\"\n\nconst defaultRegExp: RegExpEngine = (str, flags) => new RegExp(str, flags)\ndefaultRegExp.code = \"new RegExp\"\n\nconst META_IGNORE_OPTIONS: (keyof Options)[] = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"]\nconst EXT_SCOPE_NAMES = new Set([\n  \"validate\",\n  \"serialize\",\n  \"parse\",\n  \"wrapper\",\n  \"root\",\n  \"schema\",\n  \"keyword\",\n  \"pattern\",\n  \"formats\",\n  \"validate$data\",\n  \"func\",\n  \"obj\",\n  \"Error\",\n])\n\nexport type Options = CurrentOptions & DeprecatedOptions\n\nexport interface CurrentOptions {\n  // strict mode options (NEW)\n  strict?: boolean | \"log\"\n  strictSchema?: boolean | \"log\"\n  strictNumbers?: boolean | \"log\"\n  strictTypes?: boolean | \"log\"\n  strictTuples?: boolean | \"log\"\n  strictRequired?: boolean | \"log\"\n  allowMatchingProperties?: boolean // disables a strict mode restriction\n  allowUnionTypes?: boolean\n  validateFormats?: boolean\n  // validation and reporting options:\n  $data?: boolean\n  allErrors?: boolean\n  verbose?: boolean\n  discriminator?: boolean\n  unicodeRegExp?: boolean\n  timestamp?: \"string\" | \"date\" // JTD only\n  parseDate?: boolean // JTD only\n  allowDate?: boolean // JTD only\n  $comment?:\n    | true\n    | ((comment: string, schemaPath?: string, rootSchema?: AnySchemaObject) => unknown)\n  formats?: {[Name in string]?: Format}\n  keywords?: Vocabulary\n  schemas?: AnySchema[] | {[Key in string]?: AnySchema}\n  logger?: Logger | false\n  loadSchema?: (uri: string) => Promise<AnySchemaObject>\n  // options to modify validated data:\n  removeAdditional?: boolean | \"all\" | \"failing\"\n  useDefaults?: boolean | \"empty\"\n  coerceTypes?: boolean | \"array\"\n  // advanced options:\n  next?: boolean // NEW\n  unevaluated?: boolean // NEW\n  dynamicRef?: boolean // NEW\n  schemaId?: \"id\" | \"$id\"\n  jtd?: boolean // NEW\n  meta?: SchemaObject | boolean\n  defaultMeta?: string | AnySchemaObject\n  validateSchema?: boolean | \"log\"\n  addUsedSchema?: boolean\n  inlineRefs?: boolean | number\n  passContext?: boolean\n  loopRequired?: number\n  loopEnum?: number // NEW\n  ownProperties?: boolean\n  multipleOfPrecision?: number\n  int32range?: boolean // JTD only\n  messages?: boolean\n  code?: CodeOptions // NEW\n  uriResolver?: UriResolver\n}\n\nexport interface CodeOptions {\n  es5?: boolean\n  esm?: boolean\n  lines?: boolean\n  optimize?: boolean | number\n  formats?: Code // code to require (or construct) map of available formats - for standalone code\n  source?: boolean\n  process?: (code: string, schema?: SchemaEnv) => string\n  regExp?: RegExpEngine\n}\n\ninterface InstanceCodeOptions extends CodeOptions {\n  regExp: RegExpEngine\n  optimize: number\n}\n\ninterface DeprecatedOptions {\n  /** @deprecated */\n  ignoreKeywordsWithRef?: boolean\n  /** @deprecated */\n  jsPropertySyntax?: boolean // added instead of jsonPointers\n  /** @deprecated */\n  unicode?: boolean\n}\n\ninterface RemovedOptions {\n  format?: boolean\n  errorDataPath?: \"object\" | \"property\"\n  nullable?: boolean // \"nullable\" keyword is supported by default\n  jsonPointers?: boolean\n  extendRefs?: true | \"ignore\" | \"fail\"\n  missingRefs?: true | \"ignore\" | \"fail\"\n  processCode?: (code: string, schema?: SchemaEnv) => string\n  sourceCode?: boolean\n  strictDefaults?: boolean\n  strictKeywords?: boolean\n  uniqueItems?: boolean\n  unknownFormats?: true | string[] | \"ignore\"\n  cache?: any\n  serialize?: (schema: AnySchema) => unknown\n  ajvErrors?: boolean\n}\n\ntype OptionsInfo<T extends RemovedOptions | DeprecatedOptions> = {\n  [K in keyof T]-?: string | undefined\n}\n\nconst removedOptions: OptionsInfo<RemovedOptions> = {\n  errorDataPath: \"\",\n  format: \"`validateFormats: false` can be used instead.\",\n  nullable: '\"nullable\" keyword is supported by default.',\n  jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n  extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n  missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n  processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n  sourceCode: \"Use option `code: {source: true}`\",\n  strictDefaults: \"It is default now, see option `strict`.\",\n  strictKeywords: \"It is default now, see option `strict`.\",\n  uniqueItems: '\"uniqueItems\" keyword is always validated.',\n  unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n  cache: \"Map is used as cache, schema object as key.\",\n  serialize: \"Map is used as cache, schema object as key.\",\n  ajvErrors: \"It is default now.\",\n}\n\nconst deprecatedOptions: OptionsInfo<DeprecatedOptions> = {\n  ignoreKeywordsWithRef: \"\",\n  jsPropertySyntax: \"\",\n  unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n}\n\ntype RequiredInstanceOptions = {\n  [K in\n    | \"strictSchema\"\n    | \"strictNumbers\"\n    | \"strictTypes\"\n    | \"strictTuples\"\n    | \"strictRequired\"\n    | \"inlineRefs\"\n    | \"loopRequired\"\n    | \"loopEnum\"\n    | \"meta\"\n    | \"messages\"\n    | \"schemaId\"\n    | \"addUsedSchema\"\n    | \"validateSchema\"\n    | \"validateFormats\"\n    | \"int32range\"\n    | \"unicodeRegExp\"\n    | \"uriResolver\"]: NonNullable<Options[K]>\n} & {code: InstanceCodeOptions}\n\nexport type InstanceOptions = Options & RequiredInstanceOptions\n\nconst MAX_EXPRESSION = 200\n\n// eslint-disable-next-line complexity\nfunction requiredOptions(o: Options): RequiredInstanceOptions {\n  const s = o.strict\n  const _optz = o.code?.optimize\n  const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0\n  const regExp = o.code?.regExp ?? defaultRegExp\n  const uriResolver = o.uriResolver ?? DefaultUriResolver\n  return {\n    strictSchema: o.strictSchema ?? s ?? true,\n    strictNumbers: o.strictNumbers ?? s ?? true,\n    strictTypes: o.strictTypes ?? s ?? \"log\",\n    strictTuples: o.strictTuples ?? s ?? \"log\",\n    strictRequired: o.strictRequired ?? s ?? false,\n    code: o.code ? {...o.code, optimize, regExp} : {optimize, regExp},\n    loopRequired: o.loopRequired ?? MAX_EXPRESSION,\n    loopEnum: o.loopEnum ?? MAX_EXPRESSION,\n    meta: o.meta ?? true,\n    messages: o.messages ?? true,\n    inlineRefs: o.inlineRefs ?? true,\n    schemaId: o.schemaId ?? \"$id\",\n    addUsedSchema: o.addUsedSchema ?? true,\n    validateSchema: o.validateSchema ?? true,\n    validateFormats: o.validateFormats ?? true,\n    unicodeRegExp: o.unicodeRegExp ?? true,\n    int32range: o.int32range ?? true,\n    uriResolver: uriResolver,\n  }\n}\n\nexport interface Logger {\n  log(...args: unknown[]): unknown\n  warn(...args: unknown[]): unknown\n  error(...args: unknown[]): unknown\n}\n\nexport default class Ajv {\n  opts: InstanceOptions\n  errors?: ErrorObject[] | null // errors from the last validation\n  logger: Logger\n  // shared external scope values for compiled functions\n  readonly scope: ValueScope\n  readonly schemas: {[Key in string]?: SchemaEnv} = {}\n  readonly refs: {[Ref in string]?: SchemaEnv | string} = {}\n  readonly formats: {[Name in string]?: AddedFormat} = {}\n  readonly RULES: ValidationRules\n  readonly _compilations: Set<SchemaEnv> = new Set()\n  private readonly _loading: {[Ref in string]?: Promise<AnySchemaObject>} = {}\n  private readonly _cache: Map<AnySchema, SchemaEnv> = new Map()\n  private readonly _metaOpts: InstanceOptions\n\n  static ValidationError = ValidationError\n  static MissingRefError = MissingRefError\n\n  constructor(opts: Options = {}) {\n    opts = this.opts = {...opts, ...requiredOptions(opts)}\n    const {es5, lines} = this.opts.code\n\n    this.scope = new ValueScope({scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines})\n    this.logger = getLogger(opts.logger)\n    const formatOpt = opts.validateFormats\n    opts.validateFormats = false\n\n    this.RULES = getRules()\n    checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\")\n    checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\")\n    this._metaOpts = getMetaSchemaOptions.call(this)\n\n    if (opts.formats) addInitialFormats.call(this)\n    this._addVocabularies()\n    this._addDefaultMetaSchema()\n    if (opts.keywords) addInitialKeywords.call(this, opts.keywords)\n    if (typeof opts.meta == \"object\") this.addMetaSchema(opts.meta)\n    addInitialSchemas.call(this)\n    opts.validateFormats = formatOpt\n  }\n\n  _addVocabularies(): void {\n    this.addKeyword(\"$async\")\n  }\n\n  _addDefaultMetaSchema(): void {\n    const {$data, meta, schemaId} = this.opts\n    let _dataRefSchema: SchemaObject = $dataRefSchema\n    if (schemaId === \"id\") {\n      _dataRefSchema = {...$dataRefSchema}\n      _dataRefSchema.id = _dataRefSchema.$id\n      delete _dataRefSchema.$id\n    }\n    if (meta && $data) this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false)\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    const {meta, schemaId} = this.opts\n    return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined)\n  }\n\n  // Validate data using schema\n  // AnySchema will be compiled and cached using schema itself as a key for Map\n  validate(schema: Schema | string, data: unknown): boolean\n  validate(schemaKeyRef: AnySchema | string, data: unknown): boolean | Promise<unknown>\n  validate<T>(schema: Schema | JSONSchemaType<T> | string, data: unknown): data is T\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  validate<T>(schema: JTDSchemaType<T>, data: unknown): data is T\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  validate<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    data: unknown\n  ): data is JTDDataType<T>\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  validate<T>(schema: AsyncSchema, data: unknown | T): Promise<T>\n  validate<T>(schemaKeyRef: AnySchema | string, data: unknown): data is T | Promise<T>\n  validate<T>(\n    schemaKeyRef: AnySchema | string, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data: unknown | T // to be validated\n  ): boolean | Promise<T> {\n    let v: AnyValidateFunction | undefined\n    if (typeof schemaKeyRef == \"string\") {\n      v = this.getSchema<T>(schemaKeyRef)\n      if (!v) throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`)\n    } else {\n      v = this.compile<T>(schemaKeyRef)\n    }\n\n    const valid = v(data)\n    if (!(\"$async\" in v)) this.errors = v.errors\n    return valid\n  }\n\n  // Create validation function for passed schema\n  // _meta: true if schema is a meta-schema. Used internally to compile meta schemas of user-defined keywords.\n  compile<T = unknown>(schema: Schema | JSONSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compile<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  compile<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    _meta?: boolean\n  ): ValidateFunction<JTDDataType<T>>\n  compile<T = unknown>(schema: AsyncSchema, _meta?: boolean): AsyncValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T> {\n    const sch = this._addSchema(schema, _meta)\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T>\n  }\n\n  // Creates validating function for passed schema with asynchronous loading of missing schemas.\n  // `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n  // TODO allow passing schema URI\n  // meta - optional true to compile meta-schema\n  compileAsync<T = unknown>(\n    schema: SchemaObject | JSONSchemaType<T>,\n    _meta?: boolean\n  ): Promise<ValidateFunction<T>>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): Promise<ValidateFunction<T>>\n  compileAsync<T = unknown>(schema: AsyncSchema, meta?: boolean): Promise<AsyncValidateFunction<T>>\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>>\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>> {\n    if (typeof this.opts.loadSchema != \"function\") {\n      throw new Error(\"options.loadSchema should be a function\")\n    }\n    const {loadSchema} = this.opts\n    return runCompileAsync.call(this, schema, meta)\n\n    async function runCompileAsync(\n      this: Ajv,\n      _schema: AnySchemaObject,\n      _meta?: boolean\n    ): Promise<AnyValidateFunction> {\n      await loadMetaSchema.call(this, _schema.$schema)\n      const sch = this._addSchema(_schema, _meta)\n      return sch.validate || _compileAsync.call(this, sch)\n    }\n\n    async function loadMetaSchema(this: Ajv, $ref?: string): Promise<void> {\n      if ($ref && !this.getSchema($ref)) {\n        await runCompileAsync.call(this, {$ref}, true)\n      }\n    }\n\n    async function _compileAsync(this: Ajv, sch: SchemaEnv): Promise<AnyValidateFunction> {\n      try {\n        return this._compileSchemaEnv(sch)\n      } catch (e) {\n        if (!(e instanceof MissingRefError)) throw e\n        checkLoaded.call(this, e)\n        await loadMissingSchema.call(this, e.missingSchema)\n        return _compileAsync.call(this, sch)\n      }\n    }\n\n    function checkLoaded(this: Ajv, {missingSchema: ref, missingRef}: MissingRefError): void {\n      if (this.refs[ref]) {\n        throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`)\n      }\n    }\n\n    async function loadMissingSchema(this: Ajv, ref: string): Promise<void> {\n      const _schema = await _loadSchema.call(this, ref)\n      if (!this.refs[ref]) await loadMetaSchema.call(this, _schema.$schema)\n      if (!this.refs[ref]) this.addSchema(_schema, ref, meta)\n    }\n\n    async function _loadSchema(this: Ajv, ref: string): Promise<AnySchemaObject> {\n      const p = this._loading[ref]\n      if (p) return p\n      try {\n        return await (this._loading[ref] = loadSchema(ref))\n      } finally {\n        delete this._loading[ref]\n      }\n    }\n  }\n\n  // Adds schema to the instance\n  addSchema(\n    schema: AnySchema | AnySchema[], // If array is passed, `key` will be ignored\n    key?: string, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta?: boolean, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n  ): Ajv {\n    if (Array.isArray(schema)) {\n      for (const sch of schema) this.addSchema(sch, undefined, _meta, _validateSchema)\n      return this\n    }\n    let id: string | undefined\n    if (typeof schema === \"object\") {\n      const {schemaId} = this.opts\n      id = schema[schemaId]\n      if (id !== undefined && typeof id != \"string\") {\n        throw new Error(`schema ${schemaId} must be string`)\n      }\n    }\n    key = normalizeId(key || id)\n    this._checkUnique(key)\n    this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true)\n    return this\n  }\n\n  // Add schema that will be used to validate other schemas\n  // options in META_IGNORE_OPTIONS are alway set to false\n  addMetaSchema(\n    schema: AnySchemaObject,\n    key?: string, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n  ): Ajv {\n    this.addSchema(schema, key, true, _validateSchema)\n    return this\n  }\n\n  //  Validate schema against its meta-schema\n  validateSchema(schema: AnySchema, throwOrLogError?: boolean): boolean | Promise<unknown> {\n    if (typeof schema == \"boolean\") return true\n    let $schema: string | AnySchemaObject | undefined\n    $schema = schema.$schema\n    if ($schema !== undefined && typeof $schema != \"string\") {\n      throw new Error(\"$schema must be a string\")\n    }\n    $schema = $schema || this.opts.defaultMeta || this.defaultMeta()\n    if (!$schema) {\n      this.logger.warn(\"meta-schema not available\")\n      this.errors = null\n      return true\n    }\n    const valid = this.validate($schema, schema)\n    if (!valid && throwOrLogError) {\n      const message = \"schema is invalid: \" + this.errorsText()\n      if (this.opts.validateSchema === \"log\") this.logger.error(message)\n      else throw new Error(message)\n    }\n    return valid\n  }\n\n  // Get compiled schema by `key` or `ref`.\n  // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n  getSchema<T = unknown>(keyRef: string): AnyValidateFunction<T> | undefined {\n    let sch\n    while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\") keyRef = sch\n    if (sch === undefined) {\n      const {schemaId} = this.opts\n      const root = new SchemaEnv({schema: {}, schemaId})\n      sch = resolveSchema.call(this, root, keyRef)\n      if (!sch) return\n      this.refs[keyRef] = sch\n    }\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T> | undefined\n  }\n\n  // Remove cached schema(s).\n  // If no parameter is passed all schemas but meta-schemas are removed.\n  // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n  // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n  removeSchema(schemaKeyRef?: AnySchema | string | RegExp): Ajv {\n    if (schemaKeyRef instanceof RegExp) {\n      this._removeAllSchemas(this.schemas, schemaKeyRef)\n      this._removeAllSchemas(this.refs, schemaKeyRef)\n      return this\n    }\n    switch (typeof schemaKeyRef) {\n      case \"undefined\":\n        this._removeAllSchemas(this.schemas)\n        this._removeAllSchemas(this.refs)\n        this._cache.clear()\n        return this\n      case \"string\": {\n        const sch = getSchEnv.call(this, schemaKeyRef)\n        if (typeof sch == \"object\") this._cache.delete(sch.schema)\n        delete this.schemas[schemaKeyRef]\n        delete this.refs[schemaKeyRef]\n        return this\n      }\n      case \"object\": {\n        const cacheKey = schemaKeyRef\n        this._cache.delete(cacheKey)\n        let id = schemaKeyRef[this.opts.schemaId]\n        if (id) {\n          id = normalizeId(id)\n          delete this.schemas[id]\n          delete this.refs[id]\n        }\n        return this\n      }\n      default:\n        throw new Error(\"ajv.removeSchema: invalid parameter\")\n    }\n  }\n\n  // add \"vocabulary\" - a collection of keywords\n  addVocabulary(definitions: Vocabulary): Ajv {\n    for (const def of definitions) this.addKeyword(def)\n    return this\n  }\n\n  addKeyword(\n    kwdOrDef: string | KeywordDefinition,\n    def?: KeywordDefinition // deprecated\n  ): Ajv {\n    let keyword: string | string[]\n    if (typeof kwdOrDef == \"string\") {\n      keyword = kwdOrDef\n      if (typeof def == \"object\") {\n        this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\")\n        def.keyword = keyword\n      }\n    } else if (typeof kwdOrDef == \"object\" && def === undefined) {\n      def = kwdOrDef\n      keyword = def.keyword\n      if (Array.isArray(keyword) && !keyword.length) {\n        throw new Error(\"addKeywords: keyword must be string or non-empty array\")\n      }\n    } else {\n      throw new Error(\"invalid addKeywords parameters\")\n    }\n\n    checkKeyword.call(this, keyword, def)\n    if (!def) {\n      eachItem(keyword, (kwd) => addRule.call(this, kwd))\n      return this\n    }\n    keywordMetaschema.call(this, def)\n    const definition: AddedKeywordDefinition = {\n      ...def,\n      type: getJSONTypes(def.type),\n      schemaType: getJSONTypes(def.schemaType),\n    }\n    eachItem(\n      keyword,\n      definition.type.length === 0\n        ? (k) => addRule.call(this, k, definition)\n        : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t))\n    )\n    return this\n  }\n\n  getKeyword(keyword: string): AddedKeywordDefinition | boolean {\n    const rule = this.RULES.all[keyword]\n    return typeof rule == \"object\" ? rule.definition : !!rule\n  }\n\n  // Remove keyword\n  removeKeyword(keyword: string): Ajv {\n    // TODO return type should be Ajv\n    const {RULES} = this\n    delete RULES.keywords[keyword]\n    delete RULES.all[keyword]\n    for (const group of RULES.rules) {\n      const i = group.rules.findIndex((rule) => rule.keyword === keyword)\n      if (i >= 0) group.rules.splice(i, 1)\n    }\n    return this\n  }\n\n  // Add format\n  addFormat(name: string, format: Format): Ajv {\n    if (typeof format == \"string\") format = new RegExp(format)\n    this.formats[name] = format\n    return this\n  }\n\n  errorsText(\n    errors: ErrorObject[] | null | undefined = this.errors, // optional array of validation errors\n    {separator = \", \", dataVar = \"data\"}: ErrorsTextOptions = {} // optional options with properties `separator` and `dataVar`\n  ): string {\n    if (!errors || errors.length === 0) return \"No errors\"\n    return errors\n      .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n      .reduce((text, msg) => text + separator + msg)\n  }\n\n  $dataMetaSchema(metaSchema: AnySchemaObject, keywordsJsonPointers: string[]): AnySchemaObject {\n    const rules = this.RULES.all\n    metaSchema = JSON.parse(JSON.stringify(metaSchema))\n    for (const jsonPointer of keywordsJsonPointers) {\n      const segments = jsonPointer.split(\"/\").slice(1) // first segment is an empty string\n      let keywords = metaSchema\n      for (const seg of segments) keywords = keywords[seg] as AnySchemaObject\n\n      for (const key in rules) {\n        const rule = rules[key]\n        if (typeof rule != \"object\") continue\n        const {$data} = rule.definition\n        const schema = keywords[key] as AnySchemaObject | undefined\n        if ($data && schema) keywords[key] = schemaOrData(schema)\n      }\n    }\n\n    return metaSchema\n  }\n\n  private _removeAllSchemas(schemas: {[Ref in string]?: SchemaEnv | string}, regex?: RegExp): void {\n    for (const keyRef in schemas) {\n      const sch = schemas[keyRef]\n      if (!regex || regex.test(keyRef)) {\n        if (typeof sch == \"string\") {\n          delete schemas[keyRef]\n        } else if (sch && !sch.meta) {\n          this._cache.delete(sch.schema)\n          delete schemas[keyRef]\n        }\n      }\n    }\n  }\n\n  _addSchema(\n    schema: AnySchema,\n    meta?: boolean,\n    baseId?: string,\n    validateSchema = this.opts.validateSchema,\n    addSchema = this.opts.addUsedSchema\n  ): SchemaEnv {\n    let id: string | undefined\n    const {schemaId} = this.opts\n    if (typeof schema == \"object\") {\n      id = schema[schemaId]\n    } else {\n      if (this.opts.jtd) throw new Error(\"schema must be object\")\n      else if (typeof schema != \"boolean\") throw new Error(\"schema must be object or boolean\")\n    }\n    let sch = this._cache.get(schema)\n    if (sch !== undefined) return sch\n\n    baseId = normalizeId(id || baseId)\n    const localRefs = getSchemaRefs.call(this, schema, baseId)\n    sch = new SchemaEnv({schema, schemaId, meta, baseId, localRefs})\n    this._cache.set(sch.schema, sch)\n    if (addSchema && !baseId.startsWith(\"#\")) {\n      // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n      if (baseId) this._checkUnique(baseId)\n      this.refs[baseId] = sch\n    }\n    if (validateSchema) this.validateSchema(schema, true)\n    return sch\n  }\n\n  private _checkUnique(id: string): void {\n    if (this.schemas[id] || this.refs[id]) {\n      throw new Error(`schema with key or id \"${id}\" already exists`)\n    }\n  }\n\n  private _compileSchemaEnv(sch: SchemaEnv): AnyValidateFunction {\n    if (sch.meta) this._compileMetaSchema(sch)\n    else compileSchema.call(this, sch)\n\n    /* istanbul ignore if */\n    if (!sch.validate) throw new Error(\"ajv implementation error\")\n    return sch.validate\n  }\n\n  private _compileMetaSchema(sch: SchemaEnv): void {\n    const currentOpts = this.opts\n    this.opts = this._metaOpts\n    try {\n      compileSchema.call(this, sch)\n    } finally {\n      this.opts = currentOpts\n    }\n  }\n}\n\nexport interface ErrorsTextOptions {\n  separator?: string\n  dataVar?: string\n}\n\nfunction checkOptions(\n  this: Ajv,\n  checkOpts: OptionsInfo<RemovedOptions | DeprecatedOptions>,\n  options: Options & RemovedOptions,\n  msg: string,\n  log: \"warn\" | \"error\" = \"error\"\n): void {\n  for (const key in checkOpts) {\n    const opt = key as keyof typeof checkOpts\n    if (opt in options) this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`)\n  }\n}\n\nfunction getSchEnv(this: Ajv, keyRef: string): SchemaEnv | string | undefined {\n  keyRef = normalizeId(keyRef) // TODO tests fail without this line\n  return this.schemas[keyRef] || this.refs[keyRef]\n}\n\nfunction addInitialSchemas(this: Ajv): void {\n  const optsSchemas = this.opts.schemas\n  if (!optsSchemas) return\n  if (Array.isArray(optsSchemas)) this.addSchema(optsSchemas)\n  else for (const key in optsSchemas) this.addSchema(optsSchemas[key] as AnySchema, key)\n}\n\nfunction addInitialFormats(this: Ajv): void {\n  for (const name in this.opts.formats) {\n    const format = this.opts.formats[name]\n    if (format) this.addFormat(name, format)\n  }\n}\n\nfunction addInitialKeywords(\n  this: Ajv,\n  defs: Vocabulary | {[K in string]?: KeywordDefinition}\n): void {\n  if (Array.isArray(defs)) {\n    this.addVocabulary(defs)\n    return\n  }\n  this.logger.warn(\"keywords option as map is deprecated, pass array\")\n  for (const keyword in defs) {\n    const def = defs[keyword] as KeywordDefinition\n    if (!def.keyword) def.keyword = keyword\n    this.addKeyword(def)\n  }\n}\n\nfunction getMetaSchemaOptions(this: Ajv): InstanceOptions {\n  const metaOpts = {...this.opts}\n  for (const opt of META_IGNORE_OPTIONS) delete metaOpts[opt]\n  return metaOpts\n}\n\nconst noLogs = {log() {}, warn() {}, error() {}}\n\nfunction getLogger(logger?: Partial<Logger> | false): Logger {\n  if (logger === false) return noLogs\n  if (logger === undefined) return console\n  if (logger.log && logger.warn && logger.error) return logger as Logger\n  throw new Error(\"logger must implement log, warn and error methods\")\n}\n\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i\n\nfunction checkKeyword(this: Ajv, keyword: string | string[], def?: KeywordDefinition): void {\n  const {RULES} = this\n  eachItem(keyword, (kwd) => {\n    if (RULES.keywords[kwd]) throw new Error(`Keyword ${kwd} is already defined`)\n    if (!KEYWORD_NAME.test(kwd)) throw new Error(`Keyword ${kwd} has invalid name`)\n  })\n  if (!def) return\n  if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n    throw new Error('$data keyword must have \"code\" or \"validate\" function')\n  }\n}\n\nfunction addRule(\n  this: Ajv,\n  keyword: string,\n  definition?: AddedKeywordDefinition,\n  dataType?: JSONType\n): void {\n  const post = definition?.post\n  if (dataType && post) throw new Error('keyword with \"post\" flag cannot have \"type\"')\n  const {RULES} = this\n  let ruleGroup = post ? RULES.post : RULES.rules.find(({type: t}) => t === dataType)\n  if (!ruleGroup) {\n    ruleGroup = {type: dataType, rules: []}\n    RULES.rules.push(ruleGroup)\n  }\n  RULES.keywords[keyword] = true\n  if (!definition) return\n\n  const rule: Rule = {\n    keyword,\n    definition: {\n      ...definition,\n      type: getJSONTypes(definition.type),\n      schemaType: getJSONTypes(definition.schemaType),\n    },\n  }\n  if (definition.before) addBeforeRule.call(this, ruleGroup, rule, definition.before)\n  else ruleGroup.rules.push(rule)\n  RULES.all[keyword] = rule\n  definition.implements?.forEach((kwd) => this.addKeyword(kwd))\n}\n\nfunction addBeforeRule(this: Ajv, ruleGroup: RuleGroup, rule: Rule, before: string): void {\n  const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before)\n  if (i >= 0) {\n    ruleGroup.rules.splice(i, 0, rule)\n  } else {\n    ruleGroup.rules.push(rule)\n    this.logger.warn(`rule ${before} is not defined`)\n  }\n}\n\nfunction keywordMetaschema(this: Ajv, def: KeywordDefinition): void {\n  let {metaSchema} = def\n  if (metaSchema === undefined) return\n  if (def.$data && this.opts.$data) metaSchema = schemaOrData(metaSchema)\n  def.validateSchema = this.compile(metaSchema, true)\n}\n\nconst $dataRef = {\n  $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n}\n\nfunction schemaOrData(schema: AnySchema): AnySchemaObject {\n  return {anyOf: [schema, $dataRef]}\n}\n","// https://github.com/ajv-validator/ajv/issues/889\nimport * as equal from \"fast-deep-equal\"\n\ntype Equal = typeof equal & {code: string}\n;(equal as Equal).code = 'require(\"ajv/dist/runtime/equal\").default'\n\nexport default equal as Equal\n","// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nexport default function ucs2length(str: string): number {\n  const len = str.length\n  let length = 0\n  let pos = 0\n  let value: number\n  while (pos < len) {\n    length++\n    value = str.charCodeAt(pos++)\n    if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos)\n      if ((value & 0xfc00) === 0xdc00) pos++ // low surrogate\n    }\n  }\n  return length\n}\n\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default'\n","import * as uri from \"fast-uri\"\n\ntype URI = typeof uri & {code: string}\n;(uri as URI).code = 'require(\"ajv/dist/runtime/uri\").default'\n\nexport default uri as URI\n","import type {ErrorObject} from \"../types\"\n\nexport default class ValidationError extends Error {\n  readonly errors: Partial<ErrorObject>[]\n  readonly ajv: true\n  readonly validation: true\n\n  constructor(errors: Partial<ErrorObject>[]) {\n    super(\"validation failed\")\n    this.errors = errors\n    this.ajv = this.validation = true\n  }\n}\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type AdditionalItemsError = ErrorObject<\"additionalItems\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"additionalItems\" as const,\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {parentSchema, it} = cxt\n    const {items} = parentSchema\n    if (!Array.isArray(items)) {\n      checkStrictMode(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas')\n      return\n    }\n    validateAdditionalItems(cxt, items)\n  },\n}\n\nexport function validateAdditionalItems(cxt: KeywordCxt, items: AnySchema[]): void {\n  const {gen, schema, data, keyword, it} = cxt\n  it.items = true\n  const len = gen.const(\"len\", _`${data}.length`)\n  if (schema === false) {\n    cxt.setParams({len: items.length})\n    cxt.pass(_`${len} <= ${items.length}`)\n  } else if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n    const valid = gen.var(\"valid\", _`${len} <= ${items.length}`) // TODO var\n    gen.if(not(valid), () => validateItems(valid))\n    cxt.ok(valid)\n  }\n\n  function validateItems(valid: Name): void {\n    gen.forRange(\"i\", items.length, len, (i) => {\n      cxt.subschema({keyword, dataProp: i, dataPropType: Type.Num}, valid)\n      if (!it.allErrors) gen.if(not(valid), () => gen.break())\n    })\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  AddedKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport {allSchemaProperties, usePattern, isOwnProperty} from \"../code\"\nimport {_, nil, or, not, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport type {SubschemaArgs} from \"../../compile/validate/subschema\"\nimport {alwaysValidSchema, schemaRefOrVal, Type} from \"../../compile/util\"\n\nexport type AdditionalPropertiesError = ErrorObject<\n  \"additionalProperties\",\n  {additionalProperty: string},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must NOT have additional properties\",\n  params: ({params}) => _`{additionalProperty: ${params.additionalProperty}}`,\n}\n\nconst def: CodeKeywordDefinition & AddedKeywordDefinition = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {gen, schema, parentSchema, data, errsCount, it} = cxt\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\")\n    const {allErrors, opts} = it\n    it.props = true\n    if (opts.removeAdditional !== \"all\" && alwaysValidSchema(it, schema)) return\n    const props = allSchemaProperties(parentSchema.properties)\n    const patProps = allSchemaProperties(parentSchema.patternProperties)\n    checkAdditionalProperties()\n    cxt.ok(_`${errsCount} === ${N.errors}`)\n\n    function checkAdditionalProperties(): void {\n      gen.forIn(\"key\", data, (key: Name) => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key)\n        else gen.if(isAdditional(key), () => additionalPropertyCode(key))\n      })\n    }\n\n    function isAdditional(key: Name): Code {\n      let definedProp: Code\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = schemaRefOrVal(it, parentSchema.properties, \"properties\")\n        definedProp = isOwnProperty(gen, propsSchema as Code, key)\n      } else if (props.length) {\n        definedProp = or(...props.map((p) => _`${key} === ${p}`))\n      } else {\n        definedProp = nil\n      }\n      if (patProps.length) {\n        definedProp = or(definedProp, ...patProps.map((p) => _`${usePattern(cxt, p)}.test(${key})`))\n      }\n      return not(definedProp)\n    }\n\n    function deleteAdditional(key: Name): void {\n      gen.code(_`delete ${data}[${key}]`)\n    }\n\n    function additionalPropertyCode(key: Name): void {\n      if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n        deleteAdditional(key)\n        return\n      }\n\n      if (schema === false) {\n        cxt.setParams({additionalProperty: key})\n        cxt.error()\n        if (!allErrors) gen.break()\n        return\n      }\n\n      if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n        const valid = gen.name(\"valid\")\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false)\n          gen.if(not(valid), () => {\n            cxt.reset()\n            deleteAdditional(key)\n          })\n        } else {\n          applyAdditionalSchema(key, valid)\n          if (!allErrors) gen.if(not(valid), () => gen.break())\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key: Name, valid: Name, errors?: false): void {\n      const subschema: SubschemaArgs = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: Type.Str,\n      }\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        })\n      }\n      cxt.subschema(subschema, valid)\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"allOf\",\n  schemaType: \"array\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    const valid = gen.name(\"valid\")\n    schema.forEach((sch: AnySchema, i: number) => {\n      if (alwaysValidSchema(it, sch)) return\n      const schCxt = cxt.subschema({keyword: \"allOf\", schemaProp: i}, valid)\n      cxt.ok(valid)\n      cxt.mergeEvaluated(schCxt)\n    })\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport {validateUnion} from \"../code\"\n\nexport type AnyOfError = ErrorNoParams<\"anyOf\", AnySchema[]>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"anyOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  code: validateUnion,\n  error: {message: \"must match a schema in anyOf\"},\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type ContainsError = ErrorObject<\n  \"contains\",\n  {minContains: number; maxContains?: number},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {min, max}}) =>\n    max === undefined\n      ? str`must contain at least ${min} valid item(s)`\n      : str`must contain at least ${min} and no more than ${max} valid item(s)`,\n  params: ({params: {min, max}}) =>\n    max === undefined ? _`{minContains: ${min}}` : _`{minContains: ${min}, maxContains: ${max}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"contains\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    let min: number\n    let max: number | undefined\n    const {minContains, maxContains} = parentSchema\n    if (it.opts.next) {\n      min = minContains === undefined ? 1 : minContains\n      max = maxContains\n    } else {\n      min = 1\n    }\n    const len = gen.const(\"len\", _`${data}.length`)\n    cxt.setParams({min, max})\n    if (max === undefined && min === 0) {\n      checkStrictMode(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`)\n      return\n    }\n    if (max !== undefined && min > max) {\n      checkStrictMode(it, `\"minContains\" > \"maxContains\" is always invalid`)\n      cxt.fail()\n      return\n    }\n    if (alwaysValidSchema(it, schema)) {\n      let cond = _`${len} >= ${min}`\n      if (max !== undefined) cond = _`${cond} && ${len} <= ${max}`\n      cxt.pass(cond)\n      return\n    }\n\n    it.items = true\n    const valid = gen.name(\"valid\")\n    if (max === undefined && min === 1) {\n      validateItems(valid, () => gen.if(valid, () => gen.break()))\n    } else if (min === 0) {\n      gen.let(valid, true)\n      if (max !== undefined) gen.if(_`${data}.length > 0`, validateItemsWithCount)\n    } else {\n      gen.let(valid, false)\n      validateItemsWithCount()\n    }\n    cxt.result(valid, () => cxt.reset())\n\n    function validateItemsWithCount(): void {\n      const schValid = gen.name(\"_valid\")\n      const count = gen.let(\"count\", 0)\n      validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)))\n    }\n\n    function validateItems(_valid: Name, block: () => void): void {\n      gen.forRange(\"i\", 0, len, (i) => {\n        cxt.subschema(\n          {\n            keyword: \"contains\",\n            dataProp: i,\n            dataPropType: Type.Num,\n            compositeRule: true,\n          },\n          _valid\n        )\n        block()\n      })\n    }\n\n    function checkLimits(count: Name): void {\n      gen.code(_`${count}++`)\n      if (max === undefined) {\n        gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true).break())\n      } else {\n        gen.if(_`${count} > ${max}`, () => gen.assign(valid, false).break())\n        if (min === 1) gen.assign(valid, true)\n        else gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true))\n      }\n    }\n  },\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  SchemaMap,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {checkReportMissingProp, checkMissingProp, reportMissingProp, propertyInData} from \"../code\"\n\nexport type PropertyDependencies = {[K in string]?: string[]}\n\nexport interface DependenciesErrorParams {\n  property: string\n  missingProperty: string\n  depsCount: number\n  deps: string // TODO change to string[]\n}\n\ntype SchemaDependencies = SchemaMap\n\nexport type DependenciesError = ErrorObject<\n  \"dependencies\",\n  DependenciesErrorParams,\n  {[K in string]?: string[] | AnySchema}\n>\n\nexport const error: KeywordErrorDefinition = {\n  message: ({params: {property, depsCount, deps}}) => {\n    const property_ies = depsCount === 1 ? \"property\" : \"properties\"\n    return str`must have ${property_ies} ${deps} when property ${property} is present`\n  },\n  params: ({params: {property, depsCount, deps, missingProperty}}) =>\n    _`{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"dependencies\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const [propDeps, schDeps] = splitDependencies(cxt)\n    validatePropertyDeps(cxt, propDeps)\n    validateSchemaDeps(cxt, schDeps)\n  },\n}\n\nfunction splitDependencies({schema}: KeywordCxt): [PropertyDependencies, SchemaDependencies] {\n  const propertyDeps: PropertyDependencies = {}\n  const schemaDeps: SchemaDependencies = {}\n  for (const key in schema) {\n    if (key === \"__proto__\") continue\n    const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps\n    deps[key] = schema[key]\n  }\n  return [propertyDeps, schemaDeps]\n}\n\nexport function validatePropertyDeps(\n  cxt: KeywordCxt,\n  propertyDeps: {[K in string]?: string[]} = cxt.schema\n): void {\n  const {gen, data, it} = cxt\n  if (Object.keys(propertyDeps).length === 0) return\n  const missing = gen.let(\"missing\")\n  for (const prop in propertyDeps) {\n    const deps = propertyDeps[prop] as string[]\n    if (deps.length === 0) continue\n    const hasProperty = propertyInData(gen, data, prop, it.opts.ownProperties)\n    cxt.setParams({\n      property: prop,\n      depsCount: deps.length,\n      deps: deps.join(\", \"),\n    })\n    if (it.allErrors) {\n      gen.if(hasProperty, () => {\n        for (const depProp of deps) {\n          checkReportMissingProp(cxt, depProp)\n        }\n      })\n    } else {\n      gen.if(_`${hasProperty} && (${checkMissingProp(cxt, deps, missing)})`)\n      reportMissingProp(cxt, missing)\n      gen.else()\n    }\n  }\n}\n\nexport function validateSchemaDeps(cxt: KeywordCxt, schemaDeps: SchemaMap = cxt.schema): void {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  for (const prop in schemaDeps) {\n    if (alwaysValidSchema(it, schemaDeps[prop] as AnySchema)) continue\n    gen.if(\n      propertyInData(gen, data, prop, it.opts.ownProperties),\n      () => {\n        const schCxt = cxt.subschema({keyword, schemaProp: prop}, valid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n      },\n      () => gen.var(valid, true) // TODO var\n    )\n    cxt.ok(valid)\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"../../compile\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\n\nexport type IfKeywordError = ErrorObject<\"if\", {failingKeyword: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params}) => str`must match \"${params.ifClause}\" schema`,\n  params: ({params}) => _`{failingKeyword: ${params.ifClause}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"if\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, parentSchema, it} = cxt\n    if (parentSchema.then === undefined && parentSchema.else === undefined) {\n      checkStrictMode(it, '\"if\" without \"then\" and \"else\" is ignored')\n    }\n    const hasThen = hasSchema(it, \"then\")\n    const hasElse = hasSchema(it, \"else\")\n    if (!hasThen && !hasElse) return\n\n    const valid = gen.let(\"valid\", true)\n    const schValid = gen.name(\"_valid\")\n    validateIf()\n    cxt.reset()\n\n    if (hasThen && hasElse) {\n      const ifClause = gen.let(\"ifClause\")\n      cxt.setParams({ifClause})\n      gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause))\n    } else if (hasThen) {\n      gen.if(schValid, validateClause(\"then\"))\n    } else {\n      gen.if(not(schValid), validateClause(\"else\"))\n    }\n\n    cxt.pass(valid, () => cxt.error(true))\n\n    function validateIf(): void {\n      const schCxt = cxt.subschema(\n        {\n          keyword: \"if\",\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        },\n        schValid\n      )\n      cxt.mergeEvaluated(schCxt)\n    }\n\n    function validateClause(keyword: string, ifClause?: Name): () => void {\n      return () => {\n        const schCxt = cxt.subschema({keyword}, schValid)\n        gen.assign(valid, schValid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n        if (ifClause) gen.assign(ifClause, _`${keyword}`)\n        else cxt.setParams({ifClause: keyword})\n      }\n    }\n  },\n}\n\nfunction hasSchema(it: SchemaObjCxt, keyword: string): boolean {\n  const schema = it.schema[keyword]\n  return schema !== undefined && !alwaysValidSchema(it, schema)\n}\n\nexport default def\n","import type {ErrorNoParams, Vocabulary} from \"../../types\"\nimport additionalItems, {AdditionalItemsError} from \"./additionalItems\"\nimport prefixItems from \"./prefixItems\"\nimport items from \"./items\"\nimport items2020, {ItemsError} from \"./items2020\"\nimport contains, {ContainsError} from \"./contains\"\nimport dependencies, {DependenciesError} from \"./dependencies\"\nimport propertyNames, {PropertyNamesError} from \"./propertyNames\"\nimport additionalProperties, {AdditionalPropertiesError} from \"./additionalProperties\"\nimport properties from \"./properties\"\nimport patternProperties from \"./patternProperties\"\nimport notKeyword, {NotKeywordError} from \"./not\"\nimport anyOf, {AnyOfError} from \"./anyOf\"\nimport oneOf, {OneOfError} from \"./oneOf\"\nimport allOf from \"./allOf\"\nimport ifKeyword, {IfKeywordError} from \"./if\"\nimport thenElse from \"./thenElse\"\n\nexport default function getApplicator(draft2020 = false): Vocabulary {\n  const applicator = [\n    // any\n    notKeyword,\n    anyOf,\n    oneOf,\n    allOf,\n    ifKeyword,\n    thenElse,\n    // object\n    propertyNames,\n    additionalProperties,\n    dependencies,\n    properties,\n    patternProperties,\n  ]\n  // array\n  if (draft2020) applicator.push(prefixItems, items2020)\n  else applicator.push(additionalItems, items)\n  applicator.push(contains)\n  return applicator\n}\n\nexport type ApplicatorKeywordError =\n  | ErrorNoParams<\"false schema\">\n  | AdditionalItemsError\n  | ItemsError\n  | ContainsError\n  | AdditionalPropertiesError\n  | DependenciesError\n  | IfKeywordError\n  | AnyOfError\n  | OneOfError\n  | NotKeywordError\n  | PropertyNamesError\n","import type {CodeKeywordDefinition, AnySchema, AnySchemaObject} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {alwaysValidSchema, mergeEvaluated, checkStrictMode} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"array\", \"boolean\"],\n  before: \"uniqueItems\",\n  code(cxt: KeywordCxt) {\n    const {schema, it} = cxt\n    if (Array.isArray(schema)) return validateTuple(cxt, \"additionalItems\", schema)\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    cxt.ok(validateArray(cxt))\n  },\n}\n\nexport function validateTuple(\n  cxt: KeywordCxt,\n  extraItems: string,\n  schArr: AnySchema[] = cxt.schema\n): void {\n  const {gen, parentSchema, data, keyword, it} = cxt\n  checkStrictTuple(parentSchema)\n  if (it.opts.unevaluated && schArr.length && it.items !== true) {\n    it.items = mergeEvaluated.items(gen, schArr.length, it.items)\n  }\n  const valid = gen.name(\"valid\")\n  const len = gen.const(\"len\", _`${data}.length`)\n  schArr.forEach((sch: AnySchema, i: number) => {\n    if (alwaysValidSchema(it, sch)) return\n    gen.if(_`${len} > ${i}`, () =>\n      cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          dataProp: i,\n        },\n        valid\n      )\n    )\n    cxt.ok(valid)\n  })\n\n  function checkStrictTuple(sch: AnySchemaObject): void {\n    const {opts, errSchemaPath} = it\n    const l = schArr.length\n    const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false)\n    if (opts.strictTuples && !fullTuple) {\n      const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`\n      checkStrictMode(it, msg, opts.strictTuples)\n    }\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\nimport {validateAdditionalItems} from \"./additionalItems\"\n\nexport type ItemsError = ErrorObject<\"items\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {schema, parentSchema, it} = cxt\n    const {prefixItems} = parentSchema\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    if (prefixItems) validateAdditionalItems(cxt, prefixItems)\n    else cxt.ok(validateArray(cxt))\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type NotKeywordError = ErrorNoParams<\"not\", AnySchema>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"not\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    if (alwaysValidSchema(it, schema)) {\n      cxt.fail()\n      return\n    }\n\n    const valid = gen.name(\"valid\")\n    cxt.subschema(\n      {\n        keyword: \"not\",\n        compositeRule: true,\n        createErrors: false,\n        allErrors: false,\n      },\n      valid\n    )\n\n    cxt.failResult(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error()\n    )\n  },\n  error: {message: \"must NOT be valid\"},\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {SchemaCxt} from \"../../compile\"\n\nexport type OneOfError = ErrorObject<\n  \"oneOf\",\n  {passingSchemas: [number, number] | null},\n  AnySchema[]\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must match exactly one schema in oneOf\",\n  params: ({params}) => _`{passingSchemas: ${params.passing}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"oneOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    if (it.opts.discriminator && parentSchema.discriminator) return\n    const schArr: AnySchema[] = schema\n    const valid = gen.let(\"valid\", false)\n    const passing = gen.let(\"passing\", null)\n    const schValid = gen.name(\"_valid\")\n    cxt.setParams({passing})\n    // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n\n    gen.block(validateOneOf)\n\n    cxt.result(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error(true)\n    )\n\n    function validateOneOf(): void {\n      schArr.forEach((sch: AnySchema, i: number) => {\n        let schCxt: SchemaCxt | undefined\n        if (alwaysValidSchema(it, sch)) {\n          gen.var(schValid, true)\n        } else {\n          schCxt = cxt.subschema(\n            {\n              keyword: \"oneOf\",\n              schemaProp: i,\n              compositeRule: true,\n            },\n            schValid\n          )\n        }\n\n        if (i > 0) {\n          gen\n            .if(_`${schValid} && ${valid}`)\n            .assign(valid, false)\n            .assign(passing, _`[${passing}, ${i}]`)\n            .else()\n        }\n\n        gen.if(schValid, () => {\n          gen.assign(valid, true)\n          gen.assign(passing, i)\n          if (schCxt) cxt.mergeEvaluated(schCxt, Name)\n        })\n      })\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {allSchemaProperties, usePattern} from \"../code\"\nimport {_, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\nimport {evaluatedPropsToName, Type} from \"../../compile/util\"\nimport {AnySchema} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"patternProperties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, parentSchema, it} = cxt\n    const {opts} = it\n    const patterns = allSchemaProperties(schema)\n    const alwaysValidPatterns = patterns.filter((p) =>\n      alwaysValidSchema(it, schema[p] as AnySchema)\n    )\n\n    if (\n      patterns.length === 0 ||\n      (alwaysValidPatterns.length === patterns.length &&\n        (!it.opts.unevaluated || it.props === true))\n    ) {\n      return\n    }\n\n    const checkProperties =\n      opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties\n    const valid = gen.name(\"valid\")\n    if (it.props !== true && !(it.props instanceof Name)) {\n      it.props = evaluatedPropsToName(gen, it.props)\n    }\n    const {props} = it\n    validatePatternProperties()\n\n    function validatePatternProperties(): void {\n      for (const pat of patterns) {\n        if (checkProperties) checkMatchingProperties(pat)\n        if (it.allErrors) {\n          validateProperties(pat)\n        } else {\n          gen.var(valid, true) // TODO var\n          validateProperties(pat)\n          gen.if(valid)\n        }\n      }\n    }\n\n    function checkMatchingProperties(pat: string): void {\n      for (const prop in checkProperties) {\n        if (new RegExp(pat).test(prop)) {\n          checkStrictMode(\n            it,\n            `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`\n          )\n        }\n      }\n    }\n\n    function validateProperties(pat: string): void {\n      gen.forIn(\"key\", data, (key) => {\n        gen.if(_`${usePattern(cxt, pat)}.test(${key})`, () => {\n          const alwaysValid = alwaysValidPatterns.includes(pat)\n          if (!alwaysValid) {\n            cxt.subschema(\n              {\n                keyword: \"patternProperties\",\n                schemaProp: pat,\n                dataProp: key,\n                dataPropType: Type.Str,\n              },\n              valid\n            )\n          }\n\n          if (it.opts.unevaluated && props !== true) {\n            gen.assign(_`${props}[${key}]`, true)\n          } else if (!alwaysValid && !it.allErrors) {\n            // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n            // or if all properties were evaluated (props === true)\n            gen.if(not(valid), () => gen.break())\n          }\n        })\n      })\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport {validateTuple} from \"./items\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"prefixItems\",\n  type: \"array\",\n  schemaType: [\"array\"],\n  before: \"uniqueItems\",\n  code: (cxt) => validateTuple(cxt, \"items\"),\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport {KeywordCxt} from \"../../compile/validate\"\nimport {propertyInData, allSchemaProperties} from \"../code\"\nimport {alwaysValidSchema, toHash, mergeEvaluated} from \"../../compile/util\"\nimport apDef from \"./additionalProperties\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      apDef.code(new KeywordCxt(it, apDef, \"additionalProperties\"))\n    }\n    const allProps = allSchemaProperties(schema)\n    for (const prop of allProps) {\n      it.definedProperties.add(prop)\n    }\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = mergeEvaluated.props(gen, toHash(allProps), it.props)\n    }\n    const properties = allProps.filter((p) => !alwaysValidSchema(it, schema[p]))\n    if (properties.length === 0) return\n    const valid = gen.name(\"valid\")\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop)\n      } else {\n        gen.if(propertyInData(gen, data, prop, it.opts.ownProperties))\n        applyPropertySchema(prop)\n        if (!it.allErrors) gen.else().var(valid, true)\n        gen.endIf()\n      }\n      cxt.it.definedProperties.add(prop)\n      cxt.ok(valid)\n    }\n\n    function hasDefault(prop: string): boolean | undefined {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined\n    }\n\n    function applyPropertySchema(prop: string): void {\n      cxt.subschema(\n        {\n          keyword: \"properties\",\n          schemaProp: prop,\n          dataProp: prop,\n        },\n        valid\n      )\n    }\n  },\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, not} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type PropertyNamesError = ErrorObject<\"propertyNames\", {propertyName: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: \"property name must be valid\",\n  params: ({params}) => _`{propertyName: ${params.propertyName}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"propertyNames\",\n  type: \"object\",\n  schemaType: [\"object\", \"boolean\"],\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, it} = cxt\n    if (alwaysValidSchema(it, schema)) return\n    const valid = gen.name(\"valid\")\n\n    gen.forIn(\"key\", data, (key) => {\n      cxt.setParams({propertyName: key})\n      cxt.subschema(\n        {\n          keyword: \"propertyNames\",\n          data: key,\n          dataTypes: [\"string\"],\n          propertyName: key,\n          compositeRule: true,\n        },\n        valid\n      )\n      gen.if(not(valid), () => {\n        cxt.error(true)\n        if (!it.allErrors) gen.break()\n      })\n    })\n\n    cxt.ok(valid)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"then\", \"else\"],\n  schemaType: [\"object\", \"boolean\"],\n  code({keyword, parentSchema, it}: KeywordCxt) {\n    if (parentSchema.if === undefined) checkStrictMode(it, `\"${keyword}\" without \"if\" is ignored`)\n  },\n}\n\nexport default def\n","import type {AnySchema, SchemaMap} from \"../types\"\nimport type {SchemaCxt} from \"../compile\"\nimport type {KeywordCxt} from \"../compile/validate\"\nimport {CodeGen, _, and, or, not, nil, strConcat, getProperty, Code, Name} from \"../compile/codegen\"\nimport {alwaysValidSchema, Type} from \"../compile/util\"\nimport N from \"../compile/names\"\nimport {useFunc} from \"../compile/util\"\nexport function checkReportMissingProp(cxt: KeywordCxt, prop: string): void {\n  const {gen, data, it} = cxt\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n    cxt.setParams({missingProperty: _`${prop}`}, true)\n    cxt.error()\n  })\n}\n\nexport function checkMissingProp(\n  {gen, data, it: {opts}}: KeywordCxt,\n  properties: string[],\n  missing: Name\n): Code {\n  return or(\n    ...properties.map((prop) =>\n      and(noPropertyInData(gen, data, prop, opts.ownProperties), _`${missing} = ${prop}`)\n    )\n  )\n}\n\nexport function reportMissingProp(cxt: KeywordCxt, missing: Name): void {\n  cxt.setParams({missingProperty: missing}, true)\n  cxt.error()\n}\n\nexport function hasPropFunc(gen: CodeGen): Name {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: _`Object.prototype.hasOwnProperty`,\n  })\n}\n\nexport function isOwnProperty(gen: CodeGen, data: Name, property: Name | string): Code {\n  return _`${hasPropFunc(gen)}.call(${data}, ${property})`\n}\n\nexport function propertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} !== undefined`\n  return ownProperties ? _`${cond} && ${isOwnProperty(gen, data, property)}` : cond\n}\n\nexport function noPropertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} === undefined`\n  return ownProperties ? or(cond, not(isOwnProperty(gen, data, property))) : cond\n}\n\nexport function allSchemaProperties(schemaMap?: SchemaMap): string[] {\n  return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : []\n}\n\nexport function schemaProperties(it: SchemaCxt, schemaMap: SchemaMap): string[] {\n  return allSchemaProperties(schemaMap).filter(\n    (p) => !alwaysValidSchema(it, schemaMap[p] as AnySchema)\n  )\n}\n\nexport function callValidateCode(\n  {schemaCode, data, it: {gen, topSchemaRef, schemaPath, errorPath}, it}: KeywordCxt,\n  func: Code,\n  context: Code,\n  passSchema?: boolean\n): Code {\n  const dataAndSchema = passSchema ? _`${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data\n  const valCxt: [Name, Code | number][] = [\n    [N.instancePath, strConcat(N.instancePath, errorPath)],\n    [N.parentData, it.parentData],\n    [N.parentDataProperty, it.parentDataProperty],\n    [N.rootData, N.rootData],\n  ]\n  if (it.opts.dynamicRef) valCxt.push([N.dynamicAnchors, N.dynamicAnchors])\n  const args = _`${dataAndSchema}, ${gen.object(...valCxt)}`\n  return context !== nil ? _`${func}.call(${context}, ${args})` : _`${func}(${args})`\n}\n\nconst newRegExp = _`new RegExp`\n\nexport function usePattern({gen, it: {opts}}: KeywordCxt, pattern: string): Name {\n  const u = opts.unicodeRegExp ? \"u\" : \"\"\n  const {regExp} = opts.code\n  const rx = regExp(pattern, u)\n\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: _`${regExp.code === \"new RegExp\" ? newRegExp : useFunc(gen, regExp)}(${pattern}, ${u})`,\n  })\n}\n\nexport function validateArray(cxt: KeywordCxt): Name {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  if (it.allErrors) {\n    const validArr = gen.let(\"valid\", true)\n    validateItems(() => gen.assign(validArr, false))\n    return validArr\n  }\n  gen.var(valid, true)\n  validateItems(() => gen.break())\n  return valid\n\n  function validateItems(notValid: () => void): void {\n    const len = gen.const(\"len\", _`${data}.length`)\n    gen.forRange(\"i\", 0, len, (i) => {\n      cxt.subschema(\n        {\n          keyword,\n          dataProp: i,\n          dataPropType: Type.Num,\n        },\n        valid\n      )\n      gen.if(not(valid), notValid)\n    })\n  }\n}\n\nexport function validateUnion(cxt: KeywordCxt): void {\n  const {gen, schema, keyword, it} = cxt\n  /* istanbul ignore if */\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n  const alwaysValid = schema.some((sch: AnySchema) => alwaysValidSchema(it, sch))\n  if (alwaysValid && !it.opts.unevaluated) return\n\n  const valid = gen.let(\"valid\", false)\n  const schValid = gen.name(\"_valid\")\n\n  gen.block(() =>\n    schema.forEach((_sch: AnySchema, i: number) => {\n      const schCxt = cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          compositeRule: true,\n        },\n        schValid\n      )\n      gen.assign(valid, _`${valid} || ${schValid}`)\n      const merged = cxt.mergeValidEvaluated(schCxt, schValid)\n      // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n      if (!merged) gen.if(not(valid))\n    })\n  )\n\n  cxt.result(\n    valid,\n    () => cxt.reset(),\n    () => cxt.error(true)\n  )\n}\n","import type {CodeKeywordDefinition} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"id\",\n  code() {\n    throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID')\n  },\n}\n\nexport default def\n","import type {Vocabulary} from \"../../types\"\nimport idKeyword from \"./id\"\nimport refKeyword from \"./ref\"\n\nconst core: Vocabulary = [\n  \"$schema\",\n  \"$id\",\n  \"$defs\",\n  \"$vocabulary\",\n  {keyword: \"$comment\"},\n  \"definitions\",\n  idKeyword,\n  refKeyword,\n]\n\nexport default core\n","import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {callValidateCode} from \"../code\"\nimport {_, nil, stringify, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport {SchemaEnv, resolveRef} from \"../../compile\"\nimport {mergeEvaluated} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"$ref\",\n  schemaType: \"string\",\n  code(cxt: KeywordCxt): void {\n    const {gen, schema: $ref, it} = cxt\n    const {baseId, schemaEnv: env, validateName, opts, self} = it\n    const {root} = env\n    if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId) return callRootRef()\n    const schOrEnv = resolveRef.call(self, root, baseId, $ref)\n    if (schOrEnv === undefined) throw new MissingRefError(it.opts.uriResolver, baseId, $ref)\n    if (schOrEnv instanceof SchemaEnv) return callValidate(schOrEnv)\n    return inlineRefSchema(schOrEnv)\n\n    function callRootRef(): void {\n      if (env === root) return callRef(cxt, validateName, env, env.$async)\n      const rootName = gen.scopeValue(\"root\", {ref: root})\n      return callRef(cxt, _`${rootName}.validate`, root, root.$async)\n    }\n\n    function callValidate(sch: SchemaEnv): void {\n      const v = getValidate(cxt, sch)\n      callRef(cxt, v, sch, sch.$async)\n    }\n\n    function inlineRefSchema(sch: AnySchema): void {\n      const schName = gen.scopeValue(\n        \"schema\",\n        opts.code.source === true ? {ref: sch, code: stringify(sch)} : {ref: sch}\n      )\n      const valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema(\n        {\n          schema: sch,\n          dataTypes: [],\n          schemaPath: nil,\n          topSchemaRef: schName,\n          errSchemaPath: $ref,\n        },\n        valid\n      )\n      cxt.mergeEvaluated(schCxt)\n      cxt.ok(valid)\n    }\n  },\n}\n\nexport function getValidate(cxt: KeywordCxt, sch: SchemaEnv): Code {\n  const {gen} = cxt\n  return sch.validate\n    ? gen.scopeValue(\"validate\", {ref: sch.validate})\n    : _`${gen.scopeValue(\"wrapper\", {ref: sch})}.validate`\n}\n\nexport function callRef(cxt: KeywordCxt, v: Code, sch?: SchemaEnv, $async?: boolean): void {\n  const {gen, it} = cxt\n  const {allErrors, schemaEnv: env, opts} = it\n  const passCxt = opts.passContext ? N.this : nil\n  if ($async) callAsyncRef()\n  else callSyncRef()\n\n  function callAsyncRef(): void {\n    if (!env.$async) throw new Error(\"async schema referenced by sync schema\")\n    const valid = gen.let(\"valid\")\n    gen.try(\n      () => {\n        gen.code(_`await ${callValidateCode(cxt, v, passCxt)}`)\n        addEvaluatedFrom(v) // TODO will not work with async, it has to be returned with the result\n        if (!allErrors) gen.assign(valid, true)\n      },\n      (e) => {\n        gen.if(_`!(${e} instanceof ${it.ValidationError as Name})`, () => gen.throw(e))\n        addErrorsFrom(e)\n        if (!allErrors) gen.assign(valid, false)\n      }\n    )\n    cxt.ok(valid)\n  }\n\n  function callSyncRef(): void {\n    cxt.result(\n      callValidateCode(cxt, v, passCxt),\n      () => addEvaluatedFrom(v),\n      () => addErrorsFrom(v)\n    )\n  }\n\n  function addErrorsFrom(source: Code): void {\n    const errs = _`${source}.errors`\n    gen.assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`) // TODO tagged\n    gen.assign(N.errors, _`${N.vErrors}.length`)\n  }\n\n  function addEvaluatedFrom(source: Code): void {\n    if (!it.opts.unevaluated) return\n    const schEvaluated = sch?.validate?.evaluated\n    // TODO refactor\n    if (it.props !== true) {\n      if (schEvaluated && !schEvaluated.dynamicProps) {\n        if (schEvaluated.props !== undefined) {\n          it.props = mergeEvaluated.props(gen, schEvaluated.props, it.props)\n        }\n      } else {\n        const props = gen.var(\"props\", _`${source}.evaluated.props`)\n        it.props = mergeEvaluated.props(gen, props, it.props, Name)\n      }\n    }\n    if (it.items !== true) {\n      if (schEvaluated && !schEvaluated.dynamicItems) {\n        if (schEvaluated.items !== undefined) {\n          it.items = mergeEvaluated.items(gen, schEvaluated.items, it.items)\n        }\n      } else {\n        const items = gen.var(\"items\", _`${source}.evaluated.items`)\n        it.items = mergeEvaluated.items(gen, items, it.items, Name)\n      }\n    }\n  }\n}\n\nexport default def\n","import type {CodeKeywordDefinition, AnySchemaObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, getProperty, Name} from \"../../compile/codegen\"\nimport {DiscrError, DiscrErrorObj} from \"../discriminator/types\"\nimport {resolveRef, SchemaEnv} from \"../../compile\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {schemaHasRulesButRef} from \"../../compile/util\"\n\nexport type DiscriminatorError = DiscrErrorObj<DiscrError.Tag> | DiscrErrorObj<DiscrError.Mapping>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {discrError, tagName}}) =>\n    discrError === DiscrError.Tag\n      ? `tag \"${tagName}\" must be string`\n      : `value of tag \"${tagName}\" must be in oneOf`,\n  params: ({params: {discrError, tag, tagName}}) =>\n    _`{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"discriminator\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schema, parentSchema, it} = cxt\n    const {oneOf} = parentSchema\n    if (!it.opts.discriminator) {\n      throw new Error(\"discriminator: requires discriminator option\")\n    }\n    const tagName = schema.propertyName\n    if (typeof tagName != \"string\") throw new Error(\"discriminator: requires propertyName\")\n    if (schema.mapping) throw new Error(\"discriminator: mapping is not supported\")\n    if (!oneOf) throw new Error(\"discriminator: requires oneOf keyword\")\n    const valid = gen.let(\"valid\", false)\n    const tag = gen.const(\"tag\", _`${data}${getProperty(tagName)}`)\n    gen.if(\n      _`typeof ${tag} == \"string\"`,\n      () => validateMapping(),\n      () => cxt.error(false, {discrError: DiscrError.Tag, tag, tagName})\n    )\n    cxt.ok(valid)\n\n    function validateMapping(): void {\n      const mapping = getMapping()\n      gen.if(false)\n      for (const tagValue in mapping) {\n        gen.elseIf(_`${tag} === ${tagValue}`)\n        gen.assign(valid, applyTagSchema(mapping[tagValue]))\n      }\n      gen.else()\n      cxt.error(false, {discrError: DiscrError.Mapping, tag, tagName})\n      gen.endIf()\n    }\n\n    function applyTagSchema(schemaProp?: number): Name {\n      const _valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema({keyword: \"oneOf\", schemaProp}, _valid)\n      cxt.mergeEvaluated(schCxt, Name)\n      return _valid\n    }\n\n    function getMapping(): {[T in string]?: number} {\n      const oneOfMapping: {[T in string]?: number} = {}\n      const topRequired = hasRequired(parentSchema)\n      let tagRequired = true\n      for (let i = 0; i < oneOf.length; i++) {\n        let sch = oneOf[i]\n        if (sch?.$ref && !schemaHasRulesButRef(sch, it.self.RULES)) {\n          const ref = sch.$ref\n          sch = resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref)\n          if (sch instanceof SchemaEnv) sch = sch.schema\n          if (sch === undefined) throw new MissingRefError(it.opts.uriResolver, it.baseId, ref)\n        }\n        const propSch = sch?.properties?.[tagName]\n        if (typeof propSch != \"object\") {\n          throw new Error(\n            `discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`\n          )\n        }\n        tagRequired = tagRequired && (topRequired || hasRequired(sch))\n        addMappings(propSch, i)\n      }\n      if (!tagRequired) throw new Error(`discriminator: \"${tagName}\" must be required`)\n      return oneOfMapping\n\n      function hasRequired({required}: AnySchemaObject): boolean {\n        return Array.isArray(required) && required.includes(tagName)\n      }\n\n      function addMappings(sch: AnySchemaObject, i: number): void {\n        if (sch.const) {\n          addMapping(sch.const, i)\n        } else if (sch.enum) {\n          for (const tagValue of sch.enum) {\n            addMapping(tagValue, i)\n          }\n        } else {\n          throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`)\n        }\n      }\n\n      function addMapping(tagValue: unknown, i: number): void {\n        if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n          throw new Error(`discriminator: \"${tagName}\" values must be unique strings`)\n        }\n        oneOfMapping[tagValue] = i\n      }\n    }\n  },\n}\n\nexport default def\n","import type {ErrorObject} from \"../../types\"\n\nexport enum DiscrError {\n  Tag = \"tag\",\n  Mapping = \"mapping\",\n}\n\nexport type DiscrErrorObj<E extends DiscrError> = ErrorObject<\n  \"discriminator\",\n  {error: E; tag: string; tagValue: unknown},\n  string\n>\n","import type {Vocabulary} from \"../types\"\nimport coreVocabulary from \"./core\"\nimport validationVocabulary from \"./validation\"\nimport getApplicatorVocabulary from \"./applicator\"\nimport formatVocabulary from \"./format\"\nimport {metadataVocabulary, contentVocabulary} from \"./metadata\"\n\nconst draft7Vocabularies: Vocabulary[] = [\n  coreVocabulary,\n  validationVocabulary,\n  getApplicatorVocabulary(),\n  formatVocabulary,\n  metadataVocabulary,\n  contentVocabulary,\n]\n\nexport default draft7Vocabularies\n","import type {\n  AddedFormat,\n  FormatValidator,\n  AsyncFormatValidator,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, nil, or, Code, getProperty, regexpCode} from \"../../compile/codegen\"\n\ntype FormatValidate =\n  | FormatValidator<string>\n  | FormatValidator<number>\n  | AsyncFormatValidator<string>\n  | AsyncFormatValidator<number>\n  | RegExp\n  | string\n  | true\n\nexport type FormatError = ErrorObject<\"format\", {format: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match format \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{format: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"format\",\n  type: [\"number\", \"string\"],\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt, ruleType?: string) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    const {opts, errSchemaPath, schemaEnv, self} = it\n    if (!opts.validateFormats) return\n\n    if ($data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fDef = gen.const(\"fDef\", _`${fmts}[${schemaCode}]`)\n      const fType = gen.let(\"fType\")\n      const format = gen.let(\"format\")\n      // TODO simplify\n      gen.if(\n        _`typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`,\n        () => gen.assign(fType, _`${fDef}.type || \"string\"`).assign(format, _`${fDef}.validate`),\n        () => gen.assign(fType, _`\"string\"`).assign(format, fDef)\n      )\n      cxt.fail$data(or(unknownFmt(), invalidFmt()))\n\n      function unknownFmt(): Code {\n        if (opts.strictSchema === false) return nil\n        return _`${schemaCode} && !${format}`\n      }\n\n      function invalidFmt(): Code {\n        const callFormat = schemaEnv.$async\n          ? _`(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n          : _`${format}(${data})`\n        const validData = _`(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`\n        return _`${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`\n      }\n    }\n\n    function validateFormat(): void {\n      const formatDef: AddedFormat | undefined = self.formats[schema]\n      if (!formatDef) {\n        unknownFormat()\n        return\n      }\n      if (formatDef === true) return\n      const [fmtType, format, fmtRef] = getFormat(formatDef)\n      if (fmtType === ruleType) cxt.pass(validCondition())\n\n      function unknownFormat(): void {\n        if (opts.strictSchema === false) {\n          self.logger.warn(unknownMsg())\n          return\n        }\n        throw new Error(unknownMsg())\n\n        function unknownMsg(): string {\n          return `unknown format \"${schema as string}\" ignored in schema at path \"${errSchemaPath}\"`\n        }\n      }\n\n      function getFormat(fmtDef: AddedFormat): [string, FormatValidate, Code] {\n        const code =\n          fmtDef instanceof RegExp\n            ? regexpCode(fmtDef)\n            : opts.code.formats\n            ? _`${opts.code.formats}${getProperty(schema)}`\n            : undefined\n        const fmt = gen.scopeValue(\"formats\", {key: schema, ref: fmtDef, code})\n        if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n          return [fmtDef.type || \"string\", fmtDef.validate, _`${fmt}.validate`]\n        }\n\n        return [\"string\", fmtDef, fmt]\n      }\n\n      function validCondition(): Code {\n        if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n          if (!schemaEnv.$async) throw new Error(\"async format in sync schema\")\n          return _`await ${fmtRef}(${data})`\n        }\n        return typeof format == \"function\" ? _`${fmtRef}(${data})` : _`${fmtRef}.test(${data})`\n      }\n    }\n  },\n}\n\nexport default def\n","import type {Vocabulary} from \"../../types\"\nimport formatKeyword from \"./format\"\n\nconst format: Vocabulary = [formatKeyword]\n\nexport default format\n","import type {Vocabulary} from \"../types\"\n\nexport const metadataVocabulary: Vocabulary = [\n  \"title\",\n  \"description\",\n  \"default\",\n  \"deprecated\",\n  \"readOnly\",\n  \"writeOnly\",\n  \"examples\",\n]\n\nexport const contentVocabulary: Vocabulary = [\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"contentSchema\",\n]\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type ConstError = ErrorObject<\"const\", {allowedValue: any}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to constant\",\n  params: ({schemaCode}) => _`{allowedValue: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"const\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schemaCode, schema} = cxt\n    if ($data || (schema && typeof schema == \"object\")) {\n      cxt.fail$data(_`!${useFunc(gen, equal)}(${data}, ${schemaCode})`)\n    } else {\n      cxt.fail(_`${schema} !== ${data}`)\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, or, Name, Code} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type EnumError = ErrorObject<\"enum\", {allowedValues: any[]}, any[] | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to one of the allowed values\",\n  params: ({schemaCode}) => _`{allowedValues: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"enum\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    if (!$data && schema.length === 0) throw new Error(\"enum must have non-empty array\")\n    const useLoop = schema.length >= it.opts.loopEnum\n    let eql: Name | undefined\n    const getEql = (): Name => (eql ??= useFunc(gen, equal))\n\n    let valid: Code\n    if (useLoop || $data) {\n      valid = gen.let(\"valid\")\n      cxt.block$data(valid, loopEnum)\n    } else {\n      /* istanbul ignore if */\n      if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n      const vSchema = gen.const(\"vSchema\", schemaCode)\n      valid = or(...schema.map((_x: unknown, i: number) => equalCode(vSchema, i)))\n    }\n    cxt.pass(valid)\n\n    function loopEnum(): void {\n      gen.assign(valid, false)\n      gen.forOf(\"v\", schemaCode as Code, (v) =>\n        gen.if(_`${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break())\n      )\n    }\n\n    function equalCode(vSchema: Name, i: number): Code {\n      const sch = schema[i]\n      return typeof sch === \"object\" && sch !== null\n        ? _`${getEql()}(${data}, ${vSchema}[${i}])`\n        : _`${data} === ${sch}`\n    }\n  },\n}\n\nexport default def\n","import type {ErrorObject, Vocabulary} from \"../../types\"\nimport limitNumber, {LimitNumberError} from \"./limitNumber\"\nimport multipleOf, {MultipleOfError} from \"./multipleOf\"\nimport limitLength from \"./limitLength\"\nimport pattern, {PatternError} from \"./pattern\"\nimport limitProperties from \"./limitProperties\"\nimport required, {RequiredError} from \"./required\"\nimport limitItems from \"./limitItems\"\nimport uniqueItems, {UniqueItemsError} from \"./uniqueItems\"\nimport constKeyword, {ConstError} from \"./const\"\nimport enumKeyword, {EnumError} from \"./enum\"\n\nconst validation: Vocabulary = [\n  // number\n  limitNumber,\n  multipleOf,\n  // string\n  limitLength,\n  pattern,\n  // object\n  limitProperties,\n  required,\n  // array\n  limitItems,\n  uniqueItems,\n  // any\n  {keyword: \"type\", schemaType: [\"string\", \"array\"]},\n  {keyword: \"nullable\", schemaType: \"boolean\"},\n  constKeyword,\n  enumKeyword,\n]\n\nexport default validation\n\ntype LimitError = ErrorObject<\n  \"maxItems\" | \"minItems\" | \"minProperties\" | \"maxProperties\" | \"minLength\" | \"maxLength\",\n  {limit: number},\n  number | {$data: string}\n>\n\nexport type ValidationKeywordError =\n  | LimitError\n  | LimitNumberError\n  | MultipleOfError\n  | PatternError\n  | RequiredError\n  | UniqueItemsError\n  | ConstError\n  | EnumError\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} items`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxItems\", \"minItems\"],\n  type: \"array\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxItems\" ? operators.GT : operators.LT\n    cxt.fail$data(_`${data}.length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport ucs2length from \"../../runtime/ucs2length\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} characters`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxLength\", \"minLength\"],\n  type: \"string\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode, it} = cxt\n    const op = keyword === \"maxLength\" ? operators.GT : operators.LT\n    const len =\n      it.opts.unicode === false ? _`${data}.length` : _`${useFunc(cxt.gen, ucs2length)}(${data})`\n    cxt.fail$data(_`${len} ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators, Code} from \"../../compile/codegen\"\n\nconst ops = operators\n\ntype Kwd = \"maximum\" | \"minimum\" | \"exclusiveMaximum\" | \"exclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  maximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  minimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  exclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  exclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitNumberError = ErrorObject<\n  Kwd,\n  {limit: number; comparison: Comparison},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`must be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    cxt.fail$data(_`${data} ${KWDs[keyword as Kwd].fail} ${schemaCode} || isNaN(${data})`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} properties`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxProperties\", \"minProperties\"],\n  type: \"object\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxProperties\" ? operators.GT : operators.LT\n    cxt.fail$data(_`Object.keys(${data}).length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type MultipleOfError = ErrorObject<\n  \"multipleOf\",\n  {multipleOf: number},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must be multiple of ${schemaCode}`,\n  params: ({schemaCode}) => _`{multipleOf: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"multipleOf\",\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schemaCode, it} = cxt\n    // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n    const prec = it.opts.multipleOfPrecision\n    const res = gen.let(\"res\")\n    const invalid = prec\n      ? _`Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n      : _`${res} !== parseInt(${res})`\n    cxt.fail$data(_`(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {usePattern} from \"../code\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type PatternError = ErrorObject<\"pattern\", {pattern: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match pattern \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{pattern: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"pattern\",\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {data, $data, schema, schemaCode, it} = cxt\n    // TODO regexp should be wrapped in try/catchs\n    const u = it.opts.unicodeRegExp ? \"u\" : \"\"\n    const regExp = $data ? _`(new RegExp(${schemaCode}, ${u}))` : usePattern(cxt, schema)\n    cxt.fail$data(_`!${regExp}.test(${data})`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {\n  checkReportMissingProp,\n  checkMissingProp,\n  reportMissingProp,\n  propertyInData,\n  noPropertyInData,\n} from \"../code\"\nimport {_, str, nil, not, Name, Code} from \"../../compile/codegen\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nexport type RequiredError = ErrorObject<\n  \"required\",\n  {missingProperty: string},\n  string[] | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {missingProperty}}) => str`must have required property '${missingProperty}'`,\n  params: ({params: {missingProperty}}) => _`{missingProperty: ${missingProperty}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, schemaCode, data, $data, it} = cxt\n    const {opts} = it\n    if (!$data && schema.length === 0) return\n    const useLoop = schema.length >= opts.loopRequired\n    if (it.allErrors) allErrorsMode()\n    else exitOnErrorMode()\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties\n      const {definedProperties} = cxt.it\n      for (const requiredKey of schema) {\n        if (props?.[requiredKey] === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`\n          checkStrictMode(it, msg, it.opts.strictRequired)\n        }\n      }\n    }\n\n    function allErrorsMode(): void {\n      if (useLoop || $data) {\n        cxt.block$data(nil, loopAllRequired)\n      } else {\n        for (const prop of schema) {\n          checkReportMissingProp(cxt, prop)\n        }\n      }\n    }\n\n    function exitOnErrorMode(): void {\n      const missing = gen.let(\"missing\")\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true)\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid))\n        cxt.ok(valid)\n      } else {\n        gen.if(checkMissingProp(cxt, schema, missing))\n        reportMissingProp(cxt, missing)\n        gen.else()\n      }\n    }\n\n    function loopAllRequired(): void {\n      gen.forOf(\"prop\", schemaCode as Code, (prop) => {\n        cxt.setParams({missingProperty: prop})\n        gen.if(noPropertyInData(gen, data, prop, opts.ownProperties), () => cxt.error())\n      })\n    }\n\n    function loopUntilMissing(missing: Name, valid: Name): void {\n      cxt.setParams({missingProperty: missing})\n      gen.forOf(\n        missing,\n        schemaCode as Code,\n        () => {\n          gen.assign(valid, propertyInData(gen, data, missing, opts.ownProperties))\n          gen.if(not(valid), () => {\n            cxt.error()\n            gen.break()\n          })\n        },\n        nil\n      )\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkDataTypes, getSchemaTypes, DataType} from \"../../compile/validate/dataType\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type UniqueItemsError = ErrorObject<\n  \"uniqueItems\",\n  {i: number; j: number},\n  boolean | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {i, j}}) =>\n    str`must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n  params: ({params: {i, j}}) => _`{i: ${i}, j: ${j}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"uniqueItems\",\n  type: \"array\",\n  schemaType: \"boolean\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, parentSchema, schemaCode, it} = cxt\n    if (!$data && !schema) return\n    const valid = gen.let(\"valid\")\n    const itemTypes = parentSchema.items ? getSchemaTypes(parentSchema.items) : []\n    cxt.block$data(valid, validateUniqueItems, _`${schemaCode} === false`)\n    cxt.ok(valid)\n\n    function validateUniqueItems(): void {\n      const i = gen.let(\"i\", _`${data}.length`)\n      const j = gen.let(\"j\")\n      cxt.setParams({i, j})\n      gen.assign(valid, true)\n      gen.if(_`${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j))\n    }\n\n    function canOptimize(): boolean {\n      return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\")\n    }\n\n    function loopN(i: Name, j: Name): void {\n      const item = gen.name(\"item\")\n      const wrongType = checkDataTypes(itemTypes, item, it.opts.strictNumbers, DataType.Wrong)\n      const indices = gen.const(\"indices\", _`{}`)\n      gen.for(_`;${i}--;`, () => {\n        gen.let(item, _`${data}[${i}]`)\n        gen.if(wrongType, _`continue`)\n        if (itemTypes.length > 1) gen.if(_`typeof ${item} == \"string\"`, _`${item} += \"_\"`)\n        gen\n          .if(_`typeof ${indices}[${item}] == \"number\"`, () => {\n            gen.assign(j, _`${indices}[${item}]`)\n            cxt.error()\n            gen.assign(valid, false).break()\n          })\n          .code(_`${indices}[${item}] = ${i}`)\n      })\n    }\n\n    function loopN2(i: Name, j: Name): void {\n      const eql = useFunc(gen, equal)\n      const outer = gen.name(\"outer\")\n      gen.label(outer).for(_`;${i}--;`, () =>\n        gen.for(_`${j} = ${i}; ${j}--;`, () =>\n          gen.if(_`${eql}(${data}[${i}], ${data}[${j}])`, () => {\n            cxt.error()\n            gen.assign(valid, false).break(outer)\n          })\n        )\n      )\n    }\n  },\n}\n\nexport default def\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","import type {Format, FormatDefinition} from \"ajv\"\nimport type {FormatValidator, FormatCompare} from \"ajv/dist/types\"\n\nexport type FormatMode = \"fast\" | \"full\"\n\nexport type FormatName =\n  | \"date\"\n  | \"time\"\n  | \"date-time\"\n  | \"duration\"\n  | \"uri\"\n  | \"uri-reference\"\n  | \"uri-template\"\n  | \"url\"\n  | \"email\"\n  | \"hostname\"\n  | \"ipv4\"\n  | \"ipv6\"\n  | \"regex\"\n  | \"uuid\"\n  | \"json-pointer\"\n  | \"json-pointer-uri-fragment\"\n  | \"relative-json-pointer\"\n  | \"byte\"\n  | \"int32\"\n  | \"int64\"\n  | \"float\"\n  | \"double\"\n  | \"password\"\n  | \"binary\"\n\nexport type DefinedFormats = {\n  [key in FormatName]: Format\n}\n\nfunction fmtDef(\n  validate: RegExp | FormatValidator<string>,\n  compare: FormatCompare<string>\n): FormatDefinition<string> {\n  return {validate, compare}\n}\n\nexport const fullFormats: DefinedFormats = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: fmtDef(date, compareDate),\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: fmtDef(time, compareTime),\n  \"date-time\": fmtDef(date_time, compareDateTime),\n  // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n  duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n  uri,\n  \"uri-reference\":\n    /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n  // uri-template: https://tools.ietf.org/html/rfc6570\n  \"uri-template\":\n    /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n  // For the source: https://gist.github.com/dperini/729294\n  // For test cases: https://mathiasbynens.be/demo/url-regex\n  url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n  email:\n    /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname:\n    /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n  regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n  \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n  // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n  // byte: https://github.com/miguelmota/is-base64\n  byte,\n  // signed 32 bit integer\n  int32: {type: \"number\", validate: validateInt32},\n  // signed 64 bit integer\n  int64: {type: \"number\", validate: validateInt64},\n  // C-type float\n  float: {type: \"number\", validate: validateNumber},\n  // C-type double\n  double: {type: \"number\", validate: validateNumber},\n  // hint to the UI to hide input strings\n  password: true,\n  // unchecked string payload\n  binary: true,\n}\n\nexport const fastFormats: DefinedFormats = {\n  ...fullFormats,\n  date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n  time: fmtDef(\n    /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n    compareTime\n  ),\n  \"date-time\": fmtDef(\n    /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n    compareDateTime\n  ),\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n  email:\n    /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n}\n\nexport const formatNames = Object.keys(fullFormats) as FormatName[]\n\nfunction isLeapYear(year: number): boolean {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)\n}\n\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n\nfunction date(str: string): boolean {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  const matches: string[] | null = DATE.exec(str)\n  if (!matches) return false\n  const year: number = +matches[1]\n  const month: number = +matches[2]\n  const day: number = +matches[3]\n  return (\n    month >= 1 &&\n    month <= 12 &&\n    day >= 1 &&\n    day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month])\n  )\n}\n\nfunction compareDate(d1: string, d2: string): number | undefined {\n  if (!(d1 && d2)) return undefined\n  if (d1 > d2) return 1\n  if (d1 < d2) return -1\n  return 0\n}\n\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i\n\nfunction time(str: string, withTimeZone?: boolean): boolean {\n  const matches: string[] | null = TIME.exec(str)\n  if (!matches) return false\n\n  const hour: number = +matches[1]\n  const minute: number = +matches[2]\n  const second: number = +matches[3]\n  const timeZone: string = matches[5]\n  return (\n    ((hour <= 23 && minute <= 59 && second <= 59) ||\n      (hour === 23 && minute === 59 && second === 60)) &&\n    (!withTimeZone || timeZone !== \"\")\n  )\n}\n\nfunction compareTime(t1: string, t2: string): number | undefined {\n  if (!(t1 && t2)) return undefined\n  const a1 = TIME.exec(t1)\n  const a2 = TIME.exec(t2)\n  if (!(a1 && a2)) return undefined\n  t1 = a1[1] + a1[2] + a1[3] + (a1[4] || \"\")\n  t2 = a2[1] + a2[2] + a2[3] + (a2[4] || \"\")\n  if (t1 > t2) return 1\n  if (t1 < t2) return -1\n  return 0\n}\n\nconst DATE_TIME_SEPARATOR = /t|\\s/i\nfunction date_time(str: string): boolean {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  const dateTime: string[] = str.split(DATE_TIME_SEPARATOR)\n  return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true)\n}\n\nfunction compareDateTime(dt1: string, dt2: string): number | undefined {\n  if (!(dt1 && dt2)) return undefined\n  const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR)\n  const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR)\n  const res = compareDate(d1, d2)\n  if (res === undefined) return undefined\n  return res || compareTime(t1, t2)\n}\n\nconst NOT_URI_FRAGMENT = /\\/|:/\nconst URI =\n  /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i\n\nfunction uri(str: string): boolean {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str)\n}\n\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm\n\nfunction byte(str: string): boolean {\n  BYTE.lastIndex = 0\n  return BYTE.test(str)\n}\n\nconst MIN_INT32 = -(2 ** 31)\nconst MAX_INT32 = 2 ** 31 - 1\n\nfunction validateInt32(value: number): boolean {\n  return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32\n}\n\nfunction validateInt64(value: number): boolean {\n  // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n  return Number.isInteger(value)\n}\n\nfunction validateNumber(): boolean {\n  return true\n}\n\nconst Z_ANCHOR = /[^\\\\]\\\\Z/\nfunction regex(str: string): boolean {\n  if (Z_ANCHOR.test(str)) return false\n  try {\n    new RegExp(str)\n    return true\n  } catch (e) {\n    return false\n  }\n}\n","import {\n  DefinedFormats,\n  FormatMode,\n  FormatName,\n  formatNames,\n  fastFormats,\n  fullFormats,\n} from \"./formats\"\nimport formatLimit from \"./limit\"\nimport type Ajv from \"ajv\"\nimport type {Plugin, Format} from \"ajv\"\nimport {_, Name} from \"ajv/dist/compile/codegen\"\n\nexport {FormatMode, FormatName} from \"./formats\"\nexport {LimitFormatError} from \"./limit\"\nexport interface FormatOptions {\n  mode?: FormatMode\n  formats?: FormatName[]\n  keywords?: boolean\n}\n\nexport type FormatsPluginOptions = FormatName[] | FormatOptions\n\nexport interface FormatsPlugin extends Plugin<FormatsPluginOptions> {\n  get: (format: FormatName, mode?: FormatMode) => Format\n}\n\nconst fullName = new Name(\"fullFormats\")\nconst fastName = new Name(\"fastFormats\")\n\nconst formatsPlugin: FormatsPlugin = (\n  ajv: Ajv,\n  opts: FormatsPluginOptions = {keywords: true}\n): Ajv => {\n  if (Array.isArray(opts)) {\n    addFormats(ajv, opts, fullFormats, fullName)\n    return ajv\n  }\n  const [formats, exportName] =\n    opts.mode === \"fast\" ? [fastFormats, fastName] : [fullFormats, fullName]\n  const list = opts.formats || formatNames\n  addFormats(ajv, list, formats, exportName)\n  if (opts.keywords) formatLimit(ajv)\n  return ajv\n}\n\nformatsPlugin.get = (name: FormatName, mode: FormatMode = \"full\"): Format => {\n  const formats = mode === \"fast\" ? fastFormats : fullFormats\n  const f = formats[name]\n  if (!f) throw new Error(`Unknown format \"${name}\"`)\n  return f\n}\n\nfunction addFormats(ajv: Ajv, list: FormatName[], fs: DefinedFormats, exportName: Name): void {\n  ajv.opts.code.formats ??= _`require(\"ajv-formats/dist/formats\").${exportName}`\n  for (const f of list) ajv.addFormat(f, fs[f])\n}\n\nmodule.exports = exports = formatsPlugin\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default formatsPlugin\n","import type Ajv from \"ajv\"\nimport type {\n  Plugin,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  Code,\n  Name,\n  ErrorObject,\n} from \"ajv\"\nimport type {AddedFormat} from \"ajv/dist/types\"\nimport type {Rule} from \"ajv/dist/compile/rules\"\nimport {KeywordCxt} from \"ajv\"\nimport {_, str, or, getProperty, operators} from \"ajv/dist/compile/codegen\"\n\ntype Kwd = \"formatMaximum\" | \"formatMinimum\" | \"formatExclusiveMaximum\" | \"formatExclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst ops = operators\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  formatMaximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  formatMinimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  formatExclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  formatExclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitFormatError = ErrorObject<Kwd, {limit: string; comparison: Comparison}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`should be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nexport const formatLimitDefinition: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt) {\n    const {gen, data, schemaCode, keyword, it} = cxt\n    const {opts, self} = it\n    if (!opts.validateFormats) return\n\n    const fCxt = new KeywordCxt(it, (self.RULES.all.format as Rule).definition, \"format\")\n    if (fCxt.$data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fmt = gen.const(\"fmt\", _`${fmts}[${fCxt.schemaCode}]`)\n      cxt.fail$data(\n        or(\n          _`typeof ${fmt} != \"object\"`,\n          _`${fmt} instanceof RegExp`,\n          _`typeof ${fmt}.compare != \"function\"`,\n          compareCode(fmt)\n        )\n      )\n    }\n\n    function validateFormat(): void {\n      const format = fCxt.schema as string\n      const fmtDef: AddedFormat | undefined = self.formats[format]\n      if (!fmtDef || fmtDef === true) return\n      if (\n        typeof fmtDef != \"object\" ||\n        fmtDef instanceof RegExp ||\n        typeof fmtDef.compare != \"function\"\n      ) {\n        throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`)\n      }\n      const fmt = gen.scopeValue(\"formats\", {\n        key: format,\n        ref: fmtDef,\n        code: opts.code.formats ? _`${opts.code.formats}${getProperty(format)}` : undefined,\n      })\n\n      cxt.fail$data(compareCode(fmt))\n    }\n\n    function compareCode(fmt: Name): Code {\n      return _`${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword as Kwd].fail} 0`\n    }\n  },\n  dependencies: [\"format\"],\n}\n\nconst formatLimitPlugin: Plugin<undefined> = (ajv: Ajv): Ajv => {\n  ajv.addKeyword(formatLimitDefinition)\n  return ajv\n}\n\nexport default formatLimitPlugin\n","import type {AnySchemaObject} from \"./types\"\nimport AjvCore from \"./core\"\nimport draft7Vocabularies from \"./vocabularies/draft7\"\nimport discriminator from \"./vocabularies/discriminator\"\nimport * as draft7MetaSchema from \"./refs/json-schema-draft-07.json\"\n\nconst META_SUPPORT_DATA = [\"/properties\"]\n\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\"\n\nexport class Ajv extends AjvCore {\n  _addVocabularies(): void {\n    super._addVocabularies()\n    draft7Vocabularies.forEach((v) => this.addVocabulary(v))\n    if (this.opts.discriminator) this.addKeyword(discriminator)\n  }\n\n  _addDefaultMetaSchema(): void {\n    super._addDefaultMetaSchema()\n    if (!this.opts.meta) return\n    const metaSchema = this.opts.$data\n      ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n      : draft7MetaSchema\n    this.addMetaSchema(metaSchema, META_SCHEMA_ID, false)\n    this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    return (this.opts.defaultMeta =\n      super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined))\n  }\n}\n\nmodule.exports = exports = Ajv\nmodule.exports.Ajv = Ajv\nObject.defineProperty(exports, \"__esModule\", {value: true})\n\nexport default Ajv\n\nexport {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  SchemaValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {Plugin, Options, CodeOptions, InstanceOptions, Logger, ErrorsTextOptions} from \"./core\"\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\nexport {default as ValidationError} from \"./runtime/validation_error\"\nexport {default as MissingRefError} from \"./compile/ref_error\"\n","// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nexport abstract class _CodeOrName {\n  abstract readonly str: string\n  abstract readonly names: UsedNames\n  abstract toString(): string\n  abstract emptyStr(): boolean\n}\n\nexport const IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i\n\nexport class Name extends _CodeOrName {\n  readonly str: string\n  constructor(s: string) {\n    super()\n    if (!IDENTIFIER.test(s)) throw new Error(\"CodeGen: name must be a valid identifier\")\n    this.str = s\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    return false\n  }\n\n  get names(): UsedNames {\n    return {[this.str]: 1}\n  }\n}\n\nexport class _Code extends _CodeOrName {\n  readonly _items: readonly CodeItem[]\n  private _str?: string\n  private _names?: UsedNames\n\n  constructor(code: string | readonly CodeItem[]) {\n    super()\n    this._items = typeof code === \"string\" ? [code] : code\n  }\n\n  toString(): string {\n    return this.str\n  }\n\n  emptyStr(): boolean {\n    if (this._items.length > 1) return false\n    const item = this._items[0]\n    return item === \"\" || item === '\"\"'\n  }\n\n  get str(): string {\n    return (this._str ??= this._items.reduce((s: string, c: CodeItem) => `${s}${c}`, \"\"))\n  }\n\n  get names(): UsedNames {\n    return (this._names ??= this._items.reduce((names: UsedNames, c) => {\n      if (c instanceof Name) names[c.str] = (names[c.str] || 0) + 1\n      return names\n    }, {}))\n  }\n}\n\nexport type CodeItem = Name | string | number | boolean | null\n\nexport type UsedNames = Record<string, number | undefined>\n\nexport type Code = _Code | Name\n\nexport type SafeExpr = Code | number | boolean | null\n\nexport const nil = new _Code(\"\")\n\ntype CodeArg = SafeExpr | string | undefined\n\nexport function _(strs: TemplateStringsArray, ...args: CodeArg[]): _Code {\n  const code: CodeItem[] = [strs[0]]\n  let i = 0\n  while (i < args.length) {\n    addCodeArg(code, args[i])\n    code.push(strs[++i])\n  }\n  return new _Code(code)\n}\n\nconst plus = new _Code(\"+\")\n\nexport function str(strs: TemplateStringsArray, ...args: (CodeArg | string[])[]): _Code {\n  const expr: CodeItem[] = [safeStringify(strs[0])]\n  let i = 0\n  while (i < args.length) {\n    expr.push(plus)\n    addCodeArg(expr, args[i])\n    expr.push(plus, safeStringify(strs[++i]))\n  }\n  optimize(expr)\n  return new _Code(expr)\n}\n\nexport function addCodeArg(code: CodeItem[], arg: CodeArg | string[]): void {\n  if (arg instanceof _Code) code.push(...arg._items)\n  else if (arg instanceof Name) code.push(arg)\n  else code.push(interpolate(arg))\n}\n\nfunction optimize(expr: CodeItem[]): void {\n  let i = 1\n  while (i < expr.length - 1) {\n    if (expr[i] === plus) {\n      const res = mergeExprItems(expr[i - 1], expr[i + 1])\n      if (res !== undefined) {\n        expr.splice(i - 1, 3, res)\n        continue\n      }\n      expr[i++] = \"+\"\n    }\n    i++\n  }\n}\n\nfunction mergeExprItems(a: CodeItem, b: CodeItem): CodeItem | undefined {\n  if (b === '\"\"') return a\n  if (a === '\"\"') return b\n  if (typeof a == \"string\") {\n    if (b instanceof Name || a[a.length - 1] !== '\"') return\n    if (typeof b != \"string\") return `${a.slice(0, -1)}${b}\"`\n    if (b[0] === '\"') return a.slice(0, -1) + b.slice(1)\n    return\n  }\n  if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name)) return `\"${a}${b.slice(1)}`\n  return\n}\n\nexport function strConcat(c1: Code, c2: Code): Code {\n  return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str`${c1}${c2}`\n}\n\n// TODO do not allow arrays here\nfunction interpolate(x?: string | string[] | number | boolean | null): SafeExpr | string {\n  return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n    ? x\n    : safeStringify(Array.isArray(x) ? x.join(\",\") : x)\n}\n\nexport function stringify(x: unknown): Code {\n  return new _Code(safeStringify(x))\n}\n\nexport function safeStringify(x: unknown): string {\n  return JSON.stringify(x)\n    .replace(/\\u2028/g, \"\\\\u2028\")\n    .replace(/\\u2029/g, \"\\\\u2029\")\n}\n\nexport function getProperty(key: Code | string | number): Code {\n  return typeof key == \"string\" && IDENTIFIER.test(key) ? new _Code(`.${key}`) : _`[${key}]`\n}\n\n//Does best effort to format the name properly\nexport function getEsmExportName(key: Code | string | number): Code {\n  if (typeof key == \"string\" && IDENTIFIER.test(key)) {\n    return new _Code(`${key}`)\n  }\n  throw new Error(`CodeGen: invalid export name: ${key}, use explicit $id name mapping`)\n}\n\nexport function regexpCode(rx: RegExp): Code {\n  return new _Code(rx.toString())\n}\n","import type {ScopeValueSets, NameValue, ValueScope, ValueScopeName} from \"./scope\"\nimport {_, nil, _Code, Code, Name, UsedNames, CodeItem, addCodeArg, _CodeOrName} from \"./code\"\nimport {Scope, varKinds} from \"./scope\"\n\nexport {_, str, strConcat, nil, getProperty, stringify, regexpCode, Name, Code} from \"./code\"\nexport {Scope, ScopeStore, ValueScope, ValueScopeName, ScopeValueSets, varKinds} from \"./scope\"\n\n// type for expressions that can be safely inserted in code without quotes\nexport type SafeExpr = Code | number | boolean | null\n\n// type that is either Code of function that adds code to CodeGen instance using its methods\nexport type Block = Code | (() => void)\n\nexport const operators = {\n  GT: new _Code(\">\"),\n  GTE: new _Code(\">=\"),\n  LT: new _Code(\"<\"),\n  LTE: new _Code(\"<=\"),\n  EQ: new _Code(\"===\"),\n  NEQ: new _Code(\"!==\"),\n  NOT: new _Code(\"!\"),\n  OR: new _Code(\"||\"),\n  AND: new _Code(\"&&\"),\n  ADD: new _Code(\"+\"),\n}\n\nabstract class Node {\n  abstract readonly names: UsedNames\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    return this\n  }\n\n  optimizeNames(_names: UsedNames, _constants: Constants): this | undefined {\n    return this\n  }\n\n  // get count(): number {\n  //   return 1\n  // }\n}\n\nclass Def extends Node {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private rhs?: SafeExpr\n  ) {\n    super()\n  }\n\n  render({es5, _n}: CGOptions): string {\n    const varKind = es5 ? varKinds.var : this.varKind\n    const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`\n    return `${varKind} ${this.name}${rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!names[this.name.str]) return\n    if (this.rhs) this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.rhs instanceof _CodeOrName ? this.rhs.names : {}\n  }\n}\n\nclass Assign extends Node {\n  constructor(\n    readonly lhs: Code,\n    public rhs: SafeExpr,\n    private readonly sideEffects?: boolean\n  ) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} = ${this.rhs};` + _n\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (this.lhs instanceof Name && !names[this.lhs.str] && !this.sideEffects) return\n    this.rhs = optimizeExpr(this.rhs, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = this.lhs instanceof Name ? {} : {...this.lhs.names}\n    return addExprNames(names, this.rhs)\n  }\n}\n\nclass AssignOp extends Assign {\n  constructor(\n    lhs: Code,\n    private readonly op: Code,\n    rhs: SafeExpr,\n    sideEffects?: boolean\n  ) {\n    super(lhs, rhs, sideEffects)\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.lhs} ${this.op}= ${this.rhs};` + _n\n  }\n}\n\nclass Label extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label: Name) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.label}:` + _n\n  }\n}\n\nclass Break extends Node {\n  readonly names: UsedNames = {}\n  constructor(readonly label?: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    const label = this.label ? ` ${this.label}` : \"\"\n    return `break${label};` + _n\n  }\n}\n\nclass Throw extends Node {\n  constructor(readonly error: Code) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `throw ${this.error};` + _n\n  }\n\n  get names(): UsedNames {\n    return this.error.names\n  }\n}\n\nclass AnyCode extends Node {\n  constructor(private code: SafeExpr) {\n    super()\n  }\n\n  render({_n}: CGOptions): string {\n    return `${this.code};` + _n\n  }\n\n  optimizeNodes(): this | undefined {\n    return `${this.code}` ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    this.code = optimizeExpr(this.code, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return this.code instanceof _CodeOrName ? this.code.names : {}\n  }\n}\n\nabstract class ParentNode extends Node {\n  constructor(readonly nodes: ChildNode[] = []) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return this.nodes.reduce((code, n) => code + n.render(opts), \"\")\n  }\n\n  optimizeNodes(): this | ChildNode | ChildNode[] | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      const n = nodes[i].optimizeNodes()\n      if (Array.isArray(n)) nodes.splice(i, 1, ...n)\n      else if (n) nodes[i] = n\n      else nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    const {nodes} = this\n    let i = nodes.length\n    while (i--) {\n      // iterating backwards improves 1-pass optimization\n      const n = nodes[i]\n      if (n.optimizeNames(names, constants)) continue\n      subtractNames(names, n.names)\n      nodes.splice(i, 1)\n    }\n    return nodes.length > 0 ? this : undefined\n  }\n\n  get names(): UsedNames {\n    return this.nodes.reduce((names: UsedNames, n) => addNames(names, n.names), {})\n  }\n\n  // get count(): number {\n  //   return this.nodes.reduce((c, n) => c + n.count, 1)\n  // }\n}\n\nabstract class BlockNode extends ParentNode {\n  render(opts: CGOptions): string {\n    return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n\n  }\n}\n\nclass Root extends ParentNode {}\n\nclass Else extends BlockNode {\n  static readonly kind = \"else\"\n}\n\nclass If extends BlockNode {\n  static readonly kind = \"if\"\n  else?: If | Else\n  constructor(\n    private condition: Code | boolean,\n    nodes?: ChildNode[]\n  ) {\n    super(nodes)\n  }\n\n  render(opts: CGOptions): string {\n    let code = `if(${this.condition})` + super.render(opts)\n    if (this.else) code += \"else \" + this.else.render(opts)\n    return code\n  }\n\n  optimizeNodes(): If | ChildNode[] | undefined {\n    super.optimizeNodes()\n    const cond = this.condition\n    if (cond === true) return this.nodes // else is ignored here\n    let e = this.else\n    if (e) {\n      const ns = e.optimizeNodes()\n      e = this.else = Array.isArray(ns) ? new Else(ns) : (ns as Else | undefined)\n    }\n    if (e) {\n      if (cond === false) return e instanceof If ? e : e.nodes\n      if (this.nodes.length) return this\n      return new If(not(cond), e instanceof If ? [e] : e.nodes)\n    }\n    if (cond === false || !this.nodes.length) return undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    this.else = this.else?.optimizeNames(names, constants)\n    if (!(super.optimizeNames(names, constants) || this.else)) return\n    this.condition = optimizeExpr(this.condition, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    addExprNames(names, this.condition)\n    if (this.else) addNames(names, this.else.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.else?.count || 0)\n  // }\n}\n\nabstract class For extends BlockNode {\n  static readonly kind = \"for\"\n}\n\nclass ForLoop extends For {\n  constructor(private iteration: Code) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.iteration})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iteration = optimizeExpr(this.iteration, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iteration.names)\n  }\n}\n\nclass ForRange extends For {\n  constructor(\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private readonly from: SafeExpr,\n    private readonly to: SafeExpr\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const varKind = opts.es5 ? varKinds.var : this.varKind\n    const {name, from, to} = this\n    return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts)\n  }\n\n  get names(): UsedNames {\n    const names = addExprNames(super.names, this.from)\n    return addExprNames(names, this.to)\n  }\n}\n\nclass ForIter extends For {\n  constructor(\n    private readonly loop: \"of\" | \"in\",\n    private readonly varKind: Name,\n    private readonly name: Name,\n    private iterable: Code\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts)\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this | undefined {\n    if (!super.optimizeNames(names, constants)) return\n    this.iterable = optimizeExpr(this.iterable, names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    return addNames(super.names, this.iterable.names)\n  }\n}\n\nclass Func extends BlockNode {\n  static readonly kind = \"func\"\n  constructor(\n    public name: Name,\n    public args: Code,\n    public async?: boolean\n  ) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    const _async = this.async ? \"async \" : \"\"\n    return `${_async}function ${this.name}(${this.args})` + super.render(opts)\n  }\n}\n\nclass Return extends ParentNode {\n  static readonly kind = \"return\"\n\n  render(opts: CGOptions): string {\n    return \"return \" + super.render(opts)\n  }\n}\n\nclass Try extends BlockNode {\n  catch?: Catch\n  finally?: Finally\n\n  render(opts: CGOptions): string {\n    let code = \"try\" + super.render(opts)\n    if (this.catch) code += this.catch.render(opts)\n    if (this.finally) code += this.finally.render(opts)\n    return code\n  }\n\n  optimizeNodes(): this {\n    super.optimizeNodes()\n    this.catch?.optimizeNodes() as Catch | undefined\n    this.finally?.optimizeNodes() as Finally | undefined\n    return this\n  }\n\n  optimizeNames(names: UsedNames, constants: Constants): this {\n    super.optimizeNames(names, constants)\n    this.catch?.optimizeNames(names, constants)\n    this.finally?.optimizeNames(names, constants)\n    return this\n  }\n\n  get names(): UsedNames {\n    const names = super.names\n    if (this.catch) addNames(names, this.catch.names)\n    if (this.finally) addNames(names, this.finally.names)\n    return names\n  }\n\n  // get count(): number {\n  //   return super.count + (this.catch?.count || 0) + (this.finally?.count || 0)\n  // }\n}\n\nclass Catch extends BlockNode {\n  static readonly kind = \"catch\"\n  constructor(readonly error: Name) {\n    super()\n  }\n\n  render(opts: CGOptions): string {\n    return `catch(${this.error})` + super.render(opts)\n  }\n}\n\nclass Finally extends BlockNode {\n  static readonly kind = \"finally\"\n  render(opts: CGOptions): string {\n    return \"finally\" + super.render(opts)\n  }\n}\n\ntype StartBlockNode = If | For | Func | Return | Try\n\ntype LeafNode = Def | Assign | Label | Break | Throw | AnyCode\n\ntype ChildNode = StartBlockNode | LeafNode\n\ntype EndBlockNodeType =\n  | typeof If\n  | typeof Else\n  | typeof For\n  | typeof Func\n  | typeof Return\n  | typeof Catch\n  | typeof Finally\n\ntype Constants = Record<string, SafeExpr | undefined>\n\nexport interface CodeGenOptions {\n  es5?: boolean\n  lines?: boolean\n  ownProperties?: boolean\n}\n\ninterface CGOptions extends CodeGenOptions {\n  _n: \"\\n\" | \"\"\n}\n\nexport class CodeGen {\n  readonly _scope: Scope\n  readonly _extScope: ValueScope\n  readonly _values: ScopeValueSets = {}\n  private readonly _nodes: ParentNode[]\n  private readonly _blockStarts: number[] = []\n  private readonly _constants: Constants = {}\n  private readonly opts: CGOptions\n\n  constructor(extScope: ValueScope, opts: CodeGenOptions = {}) {\n    this.opts = {...opts, _n: opts.lines ? \"\\n\" : \"\"}\n    this._extScope = extScope\n    this._scope = new Scope({parent: extScope})\n    this._nodes = [new Root()]\n  }\n\n  toString(): string {\n    return this._root.render(this.opts)\n  }\n\n  // returns unique name in the internal scope\n  name(prefix: string): Name {\n    return this._scope.name(prefix)\n  }\n\n  // reserves unique name in the external scope\n  scopeName(prefix: string): ValueScopeName {\n    return this._extScope.name(prefix)\n  }\n\n  // reserves unique name in the external scope and assigns value to it\n  scopeValue(prefixOrName: ValueScopeName | string, value: NameValue): Name {\n    const name = this._extScope.value(prefixOrName, value)\n    const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set())\n    vs.add(name)\n    return name\n  }\n\n  getScopeValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    return this._extScope.getValue(prefix, keyOrRef)\n  }\n\n  // return code that assigns values in the external scope to the names that are used internally\n  // (same names that were returned by gen.scopeName or gen.scopeValue)\n  scopeRefs(scopeName: Name): Code {\n    return this._extScope.scopeRefs(scopeName, this._values)\n  }\n\n  scopeCode(): Code {\n    return this._extScope.scopeCode(this._values)\n  }\n\n  private _def(\n    varKind: Name,\n    nameOrPrefix: Name | string,\n    rhs?: SafeExpr,\n    constant?: boolean\n  ): Name {\n    const name = this._scope.toName(nameOrPrefix)\n    if (rhs !== undefined && constant) this._constants[name.str] = rhs\n    this._leafNode(new Def(varKind, name, rhs))\n    return name\n  }\n\n  // `const` declaration (`var` in es5 mode)\n  const(nameOrPrefix: Name | string, rhs: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.const, nameOrPrefix, rhs, _constant)\n  }\n\n  // `let` declaration with optional assignment (`var` in es5 mode)\n  let(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.let, nameOrPrefix, rhs, _constant)\n  }\n\n  // `var` declaration with optional assignment\n  var(nameOrPrefix: Name | string, rhs?: SafeExpr, _constant?: boolean): Name {\n    return this._def(varKinds.var, nameOrPrefix, rhs, _constant)\n  }\n\n  // assignment code\n  assign(lhs: Code, rhs: SafeExpr, sideEffects?: boolean): CodeGen {\n    return this._leafNode(new Assign(lhs, rhs, sideEffects))\n  }\n\n  // `+=` code\n  add(lhs: Code, rhs: SafeExpr): CodeGen {\n    return this._leafNode(new AssignOp(lhs, operators.ADD, rhs))\n  }\n\n  // appends passed SafeExpr to code or executes Block\n  code(c: Block | SafeExpr): CodeGen {\n    if (typeof c == \"function\") c()\n    else if (c !== nil) this._leafNode(new AnyCode(c))\n    return this\n  }\n\n  // returns code for object literal for the passed argument list of key-value pairs\n  object(...keyValues: [Name | string, SafeExpr | string][]): _Code {\n    const code: CodeItem[] = [\"{\"]\n    for (const [key, value] of keyValues) {\n      if (code.length > 1) code.push(\",\")\n      code.push(key)\n      if (key !== value || this.opts.es5) {\n        code.push(\":\")\n        addCodeArg(code, value)\n      }\n    }\n    code.push(\"}\")\n    return new _Code(code)\n  }\n\n  // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n  if(condition: Code | boolean, thenBody?: Block, elseBody?: Block): CodeGen {\n    this._blockNode(new If(condition))\n\n    if (thenBody && elseBody) {\n      this.code(thenBody).else().code(elseBody).endIf()\n    } else if (thenBody) {\n      this.code(thenBody).endIf()\n    } else if (elseBody) {\n      throw new Error('CodeGen: \"else\" body without \"then\" body')\n    }\n    return this\n  }\n\n  // `else if` clause - invalid without `if` or after `else` clauses\n  elseIf(condition: Code | boolean): CodeGen {\n    return this._elseNode(new If(condition))\n  }\n\n  // `else` clause - only valid after `if` or `else if` clauses\n  else(): CodeGen {\n    return this._elseNode(new Else())\n  }\n\n  // end `if` statement (needed if gen.if was used only with condition)\n  endIf(): CodeGen {\n    return this._endBlockNode(If, Else)\n  }\n\n  private _for(node: For, forBody?: Block): CodeGen {\n    this._blockNode(node)\n    if (forBody) this.code(forBody).endFor()\n    return this\n  }\n\n  // a generic `for` clause (or statement if `forBody` is passed)\n  for(iteration: Code, forBody?: Block): CodeGen {\n    return this._for(new ForLoop(iteration), forBody)\n  }\n\n  // `for` statement for a range of values\n  forRange(\n    nameOrPrefix: Name | string,\n    from: SafeExpr,\n    to: SafeExpr,\n    forBody: (index: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.let\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForRange(varKind, name, from, to), () => forBody(name))\n  }\n\n  // `for-of` statement (in es5 mode replace with a normal for loop)\n  forOf(\n    nameOrPrefix: Name | string,\n    iterable: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = varKinds.const\n  ): CodeGen {\n    const name = this._scope.toName(nameOrPrefix)\n    if (this.opts.es5) {\n      const arr = iterable instanceof Name ? iterable : this.var(\"_arr\", iterable)\n      return this.forRange(\"_i\", 0, _`${arr}.length`, (i) => {\n        this.var(name, _`${arr}[${i}]`)\n        forBody(name)\n      })\n    }\n    return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name))\n  }\n\n  // `for-in` statement.\n  // With option `ownProperties` replaced with a `for-of` loop for object keys\n  forIn(\n    nameOrPrefix: Name | string,\n    obj: Code,\n    forBody: (item: Name) => void,\n    varKind: Code = this.opts.es5 ? varKinds.var : varKinds.const\n  ): CodeGen {\n    if (this.opts.ownProperties) {\n      return this.forOf(nameOrPrefix, _`Object.keys(${obj})`, forBody)\n    }\n    const name = this._scope.toName(nameOrPrefix)\n    return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name))\n  }\n\n  // end `for` loop\n  endFor(): CodeGen {\n    return this._endBlockNode(For)\n  }\n\n  // `label` statement\n  label(label: Name): CodeGen {\n    return this._leafNode(new Label(label))\n  }\n\n  // `break` statement\n  break(label?: Code): CodeGen {\n    return this._leafNode(new Break(label))\n  }\n\n  // `return` statement\n  return(value: Block | SafeExpr): CodeGen {\n    const node = new Return()\n    this._blockNode(node)\n    this.code(value)\n    if (node.nodes.length !== 1) throw new Error('CodeGen: \"return\" should have one node')\n    return this._endBlockNode(Return)\n  }\n\n  // `try` statement\n  try(tryBody: Block, catchCode?: (e: Name) => void, finallyCode?: Block): CodeGen {\n    if (!catchCode && !finallyCode) throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"')\n    const node = new Try()\n    this._blockNode(node)\n    this.code(tryBody)\n    if (catchCode) {\n      const error = this.name(\"e\")\n      this._currNode = node.catch = new Catch(error)\n      catchCode(error)\n    }\n    if (finallyCode) {\n      this._currNode = node.finally = new Finally()\n      this.code(finallyCode)\n    }\n    return this._endBlockNode(Catch, Finally)\n  }\n\n  // `throw` statement\n  throw(error: Code): CodeGen {\n    return this._leafNode(new Throw(error))\n  }\n\n  // start self-balancing block\n  block(body?: Block, nodeCount?: number): CodeGen {\n    this._blockStarts.push(this._nodes.length)\n    if (body) this.code(body).endBlock(nodeCount)\n    return this\n  }\n\n  // end the current self-balancing block\n  endBlock(nodeCount?: number): CodeGen {\n    const len = this._blockStarts.pop()\n    if (len === undefined) throw new Error(\"CodeGen: not in self-balancing block\")\n    const toClose = this._nodes.length - len\n    if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n      throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`)\n    }\n    this._nodes.length = len\n    return this\n  }\n\n  // `function` heading (or definition if funcBody is passed)\n  func(name: Name, args: Code = nil, async?: boolean, funcBody?: Block): CodeGen {\n    this._blockNode(new Func(name, args, async))\n    if (funcBody) this.code(funcBody).endFunc()\n    return this\n  }\n\n  // end function definition\n  endFunc(): CodeGen {\n    return this._endBlockNode(Func)\n  }\n\n  optimize(n = 1): void {\n    while (n-- > 0) {\n      this._root.optimizeNodes()\n      this._root.optimizeNames(this._root.names, this._constants)\n    }\n  }\n\n  private _leafNode(node: LeafNode): CodeGen {\n    this._currNode.nodes.push(node)\n    return this\n  }\n\n  private _blockNode(node: StartBlockNode): void {\n    this._currNode.nodes.push(node)\n    this._nodes.push(node)\n  }\n\n  private _endBlockNode(N1: EndBlockNodeType, N2?: EndBlockNodeType): CodeGen {\n    const n = this._currNode\n    if (n instanceof N1 || (N2 && n instanceof N2)) {\n      this._nodes.pop()\n      return this\n    }\n    throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`)\n  }\n\n  private _elseNode(node: If | Else): CodeGen {\n    const n = this._currNode\n    if (!(n instanceof If)) {\n      throw new Error('CodeGen: \"else\" without \"if\"')\n    }\n    this._currNode = n.else = node\n    return this\n  }\n\n  private get _root(): Root {\n    return this._nodes[0] as Root\n  }\n\n  private get _currNode(): ParentNode {\n    const ns = this._nodes\n    return ns[ns.length - 1]\n  }\n\n  private set _currNode(node: ParentNode) {\n    const ns = this._nodes\n    ns[ns.length - 1] = node\n  }\n\n  // get nodeCount(): number {\n  //   return this._root.count\n  // }\n}\n\nfunction addNames(names: UsedNames, from: UsedNames): UsedNames {\n  for (const n in from) names[n] = (names[n] || 0) + (from[n] || 0)\n  return names\n}\n\nfunction addExprNames(names: UsedNames, from: SafeExpr): UsedNames {\n  return from instanceof _CodeOrName ? addNames(names, from.names) : names\n}\n\nfunction optimizeExpr<T extends SafeExpr | Code>(expr: T, names: UsedNames, constants: Constants): T\nfunction optimizeExpr(expr: SafeExpr, names: UsedNames, constants: Constants): SafeExpr {\n  if (expr instanceof Name) return replaceName(expr)\n  if (!canOptimize(expr)) return expr\n  return new _Code(\n    expr._items.reduce((items: CodeItem[], c: SafeExpr | string) => {\n      if (c instanceof Name) c = replaceName(c)\n      if (c instanceof _Code) items.push(...c._items)\n      else items.push(c)\n      return items\n    }, [])\n  )\n\n  function replaceName(n: Name): SafeExpr {\n    const c = constants[n.str]\n    if (c === undefined || names[n.str] !== 1) return n\n    delete names[n.str]\n    return c\n  }\n\n  function canOptimize(e: SafeExpr): e is _Code {\n    return (\n      e instanceof _Code &&\n      e._items.some(\n        (c) => c instanceof Name && names[c.str] === 1 && constants[c.str] !== undefined\n      )\n    )\n  }\n}\n\nfunction subtractNames(names: UsedNames, from: UsedNames): void {\n  for (const n in from) names[n] = (names[n] || 0) - (from[n] || 0)\n}\n\nexport function not<T extends Code | SafeExpr>(x: T): T\nexport function not(x: Code | SafeExpr): Code | SafeExpr {\n  return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : _`!${par(x)}`\n}\n\nconst andCode = mappend(operators.AND)\n\n// boolean AND (&&) expression with the passed arguments\nexport function and(...args: Code[]): Code {\n  return args.reduce(andCode)\n}\n\nconst orCode = mappend(operators.OR)\n\n// boolean OR (||) expression with the passed arguments\nexport function or(...args: Code[]): Code {\n  return args.reduce(orCode)\n}\n\ntype MAppend = (x: Code, y: Code) => Code\n\nfunction mappend(op: Code): MAppend {\n  return (x, y) => (x === nil ? y : y === nil ? x : _`${par(x)} ${op} ${par(y)}`)\n}\n\nfunction par(x: Code): Code {\n  return x instanceof Name ? x : _`(${x})`\n}\n","import {_, nil, Code, Name} from \"./code\"\n\ninterface NameGroup {\n  prefix: string\n  index: number\n}\n\nexport interface NameValue {\n  ref: ValueReference // this is the reference to any value that can be referred to from generated code via `globals` var in the closure\n  key?: unknown // any key to identify a global to avoid duplicates, if not passed ref is used\n  code?: Code // this is the code creating the value needed for standalone code wit_out closure - can be a primitive value, function or import (`require`)\n}\n\nexport type ValueReference = unknown // possibly make CodeGen parameterized type on this type\n\nclass ValueError extends Error {\n  readonly value?: NameValue\n  constructor(name: ValueScopeName) {\n    super(`CodeGen: \"code\" for ${name} not defined`)\n    this.value = name.value\n  }\n}\n\ninterface ScopeOptions {\n  prefixes?: Set<string>\n  parent?: Scope\n}\n\ninterface ValueScopeOptions extends ScopeOptions {\n  scope: ScopeStore\n  es5?: boolean\n  lines?: boolean\n}\n\nexport type ScopeStore = Record<string, ValueReference[] | undefined>\n\ntype ScopeValues = {\n  [Prefix in string]?: Map<unknown, ValueScopeName>\n}\n\nexport type ScopeValueSets = {\n  [Prefix in string]?: Set<ValueScopeName>\n}\n\nexport enum UsedValueState {\n  Started,\n  Completed,\n}\n\nexport type UsedScopeValues = {\n  [Prefix in string]?: Map<ValueScopeName, UsedValueState | undefined>\n}\n\nexport const varKinds = {\n  const: new Name(\"const\"),\n  let: new Name(\"let\"),\n  var: new Name(\"var\"),\n}\n\nexport class Scope {\n  protected readonly _names: {[Prefix in string]?: NameGroup} = {}\n  protected readonly _prefixes?: Set<string>\n  protected readonly _parent?: Scope\n\n  constructor({prefixes, parent}: ScopeOptions = {}) {\n    this._prefixes = prefixes\n    this._parent = parent\n  }\n\n  toName(nameOrPrefix: Name | string): Name {\n    return nameOrPrefix instanceof Name ? nameOrPrefix : this.name(nameOrPrefix)\n  }\n\n  name(prefix: string): Name {\n    return new Name(this._newName(prefix))\n  }\n\n  protected _newName(prefix: string): string {\n    const ng = this._names[prefix] || this._nameGroup(prefix)\n    return `${prefix}${ng.index++}`\n  }\n\n  private _nameGroup(prefix: string): NameGroup {\n    if (this._parent?._prefixes?.has(prefix) || (this._prefixes && !this._prefixes.has(prefix))) {\n      throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`)\n    }\n    return (this._names[prefix] = {prefix, index: 0})\n  }\n}\n\ninterface ScopePath {\n  property: string\n  itemIndex: number\n}\n\nexport class ValueScopeName extends Name {\n  readonly prefix: string\n  value?: NameValue\n  scopePath?: Code\n\n  constructor(prefix: string, nameStr: string) {\n    super(nameStr)\n    this.prefix = prefix\n  }\n\n  setValue(value: NameValue, {property, itemIndex}: ScopePath): void {\n    this.value = value\n    this.scopePath = _`.${new Name(property)}[${itemIndex}]`\n  }\n}\n\ninterface VSOptions extends ValueScopeOptions {\n  _n: Code\n}\n\nconst line = _`\\n`\n\nexport class ValueScope extends Scope {\n  protected readonly _values: ScopeValues = {}\n  protected readonly _scope: ScopeStore\n  readonly opts: VSOptions\n\n  constructor(opts: ValueScopeOptions) {\n    super(opts)\n    this._scope = opts.scope\n    this.opts = {...opts, _n: opts.lines ? line : nil}\n  }\n\n  get(): ScopeStore {\n    return this._scope\n  }\n\n  name(prefix: string): ValueScopeName {\n    return new ValueScopeName(prefix, this._newName(prefix))\n  }\n\n  value(nameOrPrefix: ValueScopeName | string, value: NameValue): ValueScopeName {\n    if (value.ref === undefined) throw new Error(\"CodeGen: ref must be passed in value\")\n    const name = this.toName(nameOrPrefix) as ValueScopeName\n    const {prefix} = name\n    const valueKey = value.key ?? value.ref\n    let vs = this._values[prefix]\n    if (vs) {\n      const _name = vs.get(valueKey)\n      if (_name) return _name\n    } else {\n      vs = this._values[prefix] = new Map()\n    }\n    vs.set(valueKey, name)\n\n    const s = this._scope[prefix] || (this._scope[prefix] = [])\n    const itemIndex = s.length\n    s[itemIndex] = value.ref\n    name.setValue(value, {property: prefix, itemIndex})\n    return name\n  }\n\n  getValue(prefix: string, keyOrRef: unknown): ValueScopeName | undefined {\n    const vs = this._values[prefix]\n    if (!vs) return\n    return vs.get(keyOrRef)\n  }\n\n  scopeRefs(scopeName: Name, values: ScopeValues | ScopeValueSets = this._values): Code {\n    return this._reduceValues(values, (name: ValueScopeName) => {\n      if (name.scopePath === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n      return _`${scopeName}${name.scopePath}`\n    })\n  }\n\n  scopeCode(\n    values: ScopeValues | ScopeValueSets = this._values,\n    usedValues?: UsedScopeValues,\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    return this._reduceValues(\n      values,\n      (name: ValueScopeName) => {\n        if (name.value === undefined) throw new Error(`CodeGen: name \"${name}\" has no value`)\n        return name.value.code\n      },\n      usedValues,\n      getCode\n    )\n  }\n\n  private _reduceValues(\n    values: ScopeValues | ScopeValueSets,\n    valueCode: (n: ValueScopeName) => Code | undefined,\n    usedValues: UsedScopeValues = {},\n    getCode?: (n: ValueScopeName) => Code | undefined\n  ): Code {\n    let code: Code = nil\n    for (const prefix in values) {\n      const vs = values[prefix]\n      if (!vs) continue\n      const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map())\n      vs.forEach((name: ValueScopeName) => {\n        if (nameSet.has(name)) return\n        nameSet.set(name, UsedValueState.Started)\n        let c = valueCode(name)\n        if (c) {\n          const def = this.opts.es5 ? varKinds.var : varKinds.const\n          code = _`${code}${def} ${name} = ${c};${this.opts._n}`\n        } else if ((c = getCode?.(name))) {\n          code = _`${code}${c}${this.opts._n}`\n        } else {\n          throw new ValueError(name)\n        }\n        nameSet.set(name, UsedValueState.Completed)\n      })\n    }\n    return code\n  }\n}\n","import type {KeywordErrorCxt, KeywordErrorDefinition} from \"../types\"\nimport type {SchemaCxt} from \"./index\"\nimport {CodeGen, _, str, strConcat, Code, Name} from \"./codegen\"\nimport {SafeExpr} from \"./codegen/code\"\nimport {getErrorPath, Type} from \"./util\"\nimport N from \"./names\"\n\nexport const keywordError: KeywordErrorDefinition = {\n  message: ({keyword}) => str`must pass \"${keyword}\" keyword validation`,\n}\n\nexport const keyword$DataError: KeywordErrorDefinition = {\n  message: ({keyword, schemaType}) =>\n    schemaType\n      ? str`\"${keyword}\" keyword must be ${schemaType} ($data)`\n      : str`\"${keyword}\" keyword is invalid ($data)`,\n}\n\nexport interface ErrorPaths {\n  instancePath?: Code\n  schemaPath?: string\n  parentSchema?: boolean\n}\n\nexport function reportError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths,\n  overrideAllErrors?: boolean\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  if (overrideAllErrors ?? (compositeRule || allErrors)) {\n    addError(gen, errObj)\n  } else {\n    returnErrors(it, _`[${errObj}]`)\n  }\n}\n\nexport function reportExtraError(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition = keywordError,\n  errorPaths?: ErrorPaths\n): void {\n  const {it} = cxt\n  const {gen, compositeRule, allErrors} = it\n  const errObj = errorObjectCode(cxt, error, errorPaths)\n  addError(gen, errObj)\n  if (!(compositeRule || allErrors)) {\n    returnErrors(it, N.vErrors)\n  }\n}\n\nexport function resetErrorsCount(gen: CodeGen, errsCount: Name): void {\n  gen.assign(N.errors, errsCount)\n  gen.if(_`${N.vErrors} !== null`, () =>\n    gen.if(\n      errsCount,\n      () => gen.assign(_`${N.vErrors}.length`, errsCount),\n      () => gen.assign(N.vErrors, null)\n    )\n  )\n}\n\nexport function extendErrors({\n  gen,\n  keyword,\n  schemaValue,\n  data,\n  errsCount,\n  it,\n}: KeywordErrorCxt): void {\n  /* istanbul ignore if */\n  if (errsCount === undefined) throw new Error(\"ajv implementation error\")\n  const err = gen.name(\"err\")\n  gen.forRange(\"i\", errsCount, N.errors, (i) => {\n    gen.const(err, _`${N.vErrors}[${i}]`)\n    gen.if(_`${err}.instancePath === undefined`, () =>\n      gen.assign(_`${err}.instancePath`, strConcat(N.instancePath, it.errorPath))\n    )\n    gen.assign(_`${err}.schemaPath`, str`${it.errSchemaPath}/${keyword}`)\n    if (it.opts.verbose) {\n      gen.assign(_`${err}.schema`, schemaValue)\n      gen.assign(_`${err}.data`, data)\n    }\n  })\n}\n\nfunction addError(gen: CodeGen, errObj: Code): void {\n  const err = gen.const(\"err\", errObj)\n  gen.if(\n    _`${N.vErrors} === null`,\n    () => gen.assign(N.vErrors, _`[${err}]`),\n    _`${N.vErrors}.push(${err})`\n  )\n  gen.code(_`${N.errors}++`)\n}\n\nfunction returnErrors(it: SchemaCxt, errs: Code): void {\n  const {gen, validateName, schemaEnv} = it\n  if (schemaEnv.$async) {\n    gen.throw(_`new ${it.ValidationError as Name}(${errs})`)\n  } else {\n    gen.assign(_`${validateName}.errors`, errs)\n    gen.return(false)\n  }\n}\n\nconst E = {\n  keyword: new Name(\"keyword\"),\n  schemaPath: new Name(\"schemaPath\"), // also used in JTD errors\n  params: new Name(\"params\"),\n  propertyName: new Name(\"propertyName\"),\n  message: new Name(\"message\"),\n  schema: new Name(\"schema\"),\n  parentSchema: new Name(\"parentSchema\"),\n}\n\nfunction errorObjectCode(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths?: ErrorPaths\n): Code {\n  const {createErrors} = cxt.it\n  if (createErrors === false) return _`{}`\n  return errorObject(cxt, error, errorPaths)\n}\n\nfunction errorObject(\n  cxt: KeywordErrorCxt,\n  error: KeywordErrorDefinition,\n  errorPaths: ErrorPaths = {}\n): Code {\n  const {gen, it} = cxt\n  const keyValues: [Name, SafeExpr | string][] = [\n    errorInstancePath(it, errorPaths),\n    errorSchemaPath(cxt, errorPaths),\n  ]\n  extraErrorProps(cxt, error, keyValues)\n  return gen.object(...keyValues)\n}\n\nfunction errorInstancePath({errorPath}: SchemaCxt, {instancePath}: ErrorPaths): [Name, Code] {\n  const instPath = instancePath\n    ? str`${errorPath}${getErrorPath(instancePath, Type.Str)}`\n    : errorPath\n  return [N.instancePath, strConcat(N.instancePath, instPath)]\n}\n\nfunction errorSchemaPath(\n  {keyword, it: {errSchemaPath}}: KeywordErrorCxt,\n  {schemaPath, parentSchema}: ErrorPaths\n): [Name, string | Code] {\n  let schPath = parentSchema ? errSchemaPath : str`${errSchemaPath}/${keyword}`\n  if (schemaPath) {\n    schPath = str`${schPath}${getErrorPath(schemaPath, Type.Str)}`\n  }\n  return [E.schemaPath, schPath]\n}\n\nfunction extraErrorProps(\n  cxt: KeywordErrorCxt,\n  {params, message}: KeywordErrorDefinition,\n  keyValues: [Name, SafeExpr | string][]\n): void {\n  const {keyword, data, schemaValue, it} = cxt\n  const {opts, propertyName, topSchemaRef, schemaPath} = it\n  keyValues.push(\n    [E.keyword, keyword],\n    [E.params, typeof params == \"function\" ? params(cxt) : params || _`{}`]\n  )\n  if (opts.messages) {\n    keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message])\n  }\n  if (opts.verbose) {\n    keyValues.push(\n      [E.schema, schemaValue],\n      [E.parentSchema, _`${topSchemaRef}${schemaPath}`],\n      [N.data, data]\n    )\n  }\n  if (propertyName) keyValues.push([E.propertyName, propertyName])\n}\n","import type {\n  AnySchema,\n  AnySchemaObject,\n  AnyValidateFunction,\n  AsyncValidateFunction,\n  EvaluatedProperties,\n  EvaluatedItems,\n} from \"../types\"\nimport type Ajv from \"../core\"\nimport type {InstanceOptions} from \"../core\"\nimport {CodeGen, _, nil, stringify, Name, Code, ValueScopeName} from \"./codegen\"\nimport ValidationError from \"../runtime/validation_error\"\nimport N from \"./names\"\nimport {LocalRefs, getFullPath, _getFullPath, inlineRef, normalizeId, resolveUrl} from \"./resolve\"\nimport {schemaHasRulesButRef, unescapeFragment} from \"./util\"\nimport {validateFunctionCode} from \"./validate\"\nimport {URIComponent} from \"fast-uri\"\nimport {JSONType} from \"./rules\"\n\nexport type SchemaRefs = {\n  [Ref in string]?: SchemaEnv | AnySchema\n}\n\nexport interface SchemaCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean // validation mode - whether to collect all errors or break on error\n  readonly data: Name // Name with reference to the current part of data instance\n  readonly parentData: Name // should be used in keywords modifying data\n  readonly parentDataProperty: Code | number // should be used in keywords modifying data\n  readonly dataNames: Name[]\n  readonly dataPathArr: (Code | number)[]\n  readonly dataLevel: number // the level of the currently validated data,\n  // it can be used to access both the property names and the data on all levels from the top.\n  dataTypes: JSONType[] // data types applied to the current part of data instance\n  definedProperties: Set<string> // set of properties to keep track of for required checks\n  readonly topSchemaRef: Code\n  readonly validateName: Name\n  evaluated?: Name\n  readonly ValidationError?: Name\n  readonly schema: AnySchema // current schema object - equal to parentSchema passed via KeywordCxt\n  readonly schemaEnv: SchemaEnv\n  readonly rootId: string\n  baseId: string // the current schema base URI that should be used as the base for resolving URIs in references (\\$ref)\n  readonly schemaPath: Code // the run-time expression that evaluates to the property name of the current schema\n  readonly errSchemaPath: string // this is actual string, should not be changed to Code\n  readonly errorPath: Code\n  readonly propertyName?: Name\n  readonly compositeRule?: boolean // true indicates that the current schema is inside the compound keyword,\n  // where failing some rule doesn't mean validation failure (`anyOf`, `oneOf`, `not`, `if`).\n  // This flag is used to determine whether you can return validation result immediately after any error in case the option `allErrors` is not `true.\n  // You only need to use it if you have many steps in your keywords and potentially can define multiple errors.\n  props?: EvaluatedProperties | Name // properties evaluated by this schema - used by parent schema or assigned to validation function\n  items?: EvaluatedItems | Name // last item evaluated by this schema - used by parent schema or assigned to validation function\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  readonly createErrors?: boolean\n  readonly opts: InstanceOptions // Ajv instance option.\n  readonly self: Ajv // current Ajv instance\n}\n\nexport interface SchemaObjCxt extends SchemaCxt {\n  readonly schema: AnySchemaObject\n}\ninterface SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root?: SchemaEnv\n  readonly baseId?: string\n  readonly schemaPath?: string\n  readonly localRefs?: LocalRefs\n  readonly meta?: boolean\n}\n\nexport class SchemaEnv implements SchemaEnvArgs {\n  readonly schema: AnySchema\n  readonly schemaId?: \"$id\" | \"id\"\n  readonly root: SchemaEnv\n  baseId: string // TODO possibly, it should be readonly\n  schemaPath?: string\n  localRefs?: LocalRefs\n  readonly meta?: boolean\n  readonly $async?: boolean // true if the current schema is asynchronous.\n  readonly refs: SchemaRefs = {}\n  readonly dynamicAnchors: {[Ref in string]?: true} = {}\n  validate?: AnyValidateFunction\n  validateName?: ValueScopeName\n  serialize?: (data: unknown) => string\n  serializeName?: ValueScopeName\n  parse?: (data: string) => unknown\n  parseName?: ValueScopeName\n\n  constructor(env: SchemaEnvArgs) {\n    let schema: AnySchemaObject | undefined\n    if (typeof env.schema == \"object\") schema = env.schema\n    this.schema = env.schema\n    this.schemaId = env.schemaId\n    this.root = env.root || this\n    this.baseId = env.baseId ?? normalizeId(schema?.[env.schemaId || \"$id\"])\n    this.schemaPath = env.schemaPath\n    this.localRefs = env.localRefs\n    this.meta = env.meta\n    this.$async = schema?.$async\n    this.refs = {}\n  }\n}\n\n// let codeSize = 0\n// let nodeCount = 0\n\n// Compiles schema in SchemaEnv\nexport function compileSchema(this: Ajv, sch: SchemaEnv): SchemaEnv {\n  // TODO refactor - remove compilations\n  const _sch = getCompilingSchema.call(this, sch)\n  if (_sch) return _sch\n  const rootId = getFullPath(this.opts.uriResolver, sch.root.baseId) // TODO if getFullPath removed 1 tests fails\n  const {es5, lines} = this.opts.code\n  const {ownProperties} = this.opts\n  const gen = new CodeGen(this.scope, {es5, lines, ownProperties})\n  let _ValidationError\n  if (sch.$async) {\n    _ValidationError = gen.scopeValue(\"Error\", {\n      ref: ValidationError,\n      code: _`require(\"ajv/dist/runtime/validation_error\").default`,\n    })\n  }\n\n  const validateName = gen.scopeName(\"validate\")\n  sch.validateName = validateName\n\n  const schemaCxt: SchemaCxt = {\n    gen,\n    allErrors: this.opts.allErrors,\n    data: N.data,\n    parentData: N.parentData,\n    parentDataProperty: N.parentDataProperty,\n    dataNames: [N.data],\n    dataPathArr: [nil], // TODO can its length be used as dataLevel if nil is removed?\n    dataLevel: 0,\n    dataTypes: [],\n    definedProperties: new Set<string>(),\n    topSchemaRef: gen.scopeValue(\n      \"schema\",\n      this.opts.code.source === true\n        ? {ref: sch.schema, code: stringify(sch.schema)}\n        : {ref: sch.schema}\n    ),\n    validateName,\n    ValidationError: _ValidationError,\n    schema: sch.schema,\n    schemaEnv: sch,\n    rootId,\n    baseId: sch.baseId || rootId,\n    schemaPath: nil,\n    errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n    errorPath: _`\"\"`,\n    opts: this.opts,\n    self: this,\n  }\n\n  let sourceCode: string | undefined\n  try {\n    this._compilations.add(sch)\n    validateFunctionCode(schemaCxt)\n    gen.optimize(this.opts.code.optimize)\n    // gen.optimize(1)\n    const validateCode = gen.toString()\n    sourceCode = `${gen.scopeRefs(N.scope)}return ${validateCode}`\n    // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n    if (this.opts.code.process) sourceCode = this.opts.code.process(sourceCode, sch)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n    const makeValidate = new Function(`${N.self}`, `${N.scope}`, sourceCode)\n    const validate: AnyValidateFunction = makeValidate(this, this.scope.get())\n    this.scope.value(validateName, {ref: validate})\n\n    validate.errors = null\n    validate.schema = sch.schema\n    validate.schemaEnv = sch\n    if (sch.$async) (validate as AsyncValidateFunction).$async = true\n    if (this.opts.code.source === true) {\n      validate.source = {validateName, validateCode, scopeValues: gen._values}\n    }\n    if (this.opts.unevaluated) {\n      const {props, items} = schemaCxt\n      validate.evaluated = {\n        props: props instanceof Name ? undefined : props,\n        items: items instanceof Name ? undefined : items,\n        dynamicProps: props instanceof Name,\n        dynamicItems: items instanceof Name,\n      }\n      if (validate.source) validate.source.evaluated = stringify(validate.evaluated)\n    }\n    sch.validate = validate\n    return sch\n  } catch (e) {\n    delete sch.validate\n    delete sch.validateName\n    if (sourceCode) this.logger.error(\"Error compiling schema, function code:\", sourceCode)\n    // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n    throw e\n  } finally {\n    this._compilations.delete(sch)\n  }\n}\n\nexport function resolveRef(\n  this: Ajv,\n  root: SchemaEnv,\n  baseId: string,\n  ref: string\n): AnySchema | SchemaEnv | undefined {\n  ref = resolveUrl(this.opts.uriResolver, baseId, ref)\n  const schOrFunc = root.refs[ref]\n  if (schOrFunc) return schOrFunc\n\n  let _sch = resolve.call(this, root, ref)\n  if (_sch === undefined) {\n    const schema = root.localRefs?.[ref] // TODO maybe localRefs should hold SchemaEnv\n    const {schemaId} = this.opts\n    if (schema) _sch = new SchemaEnv({schema, schemaId, root, baseId})\n  }\n\n  if (_sch === undefined) return\n  return (root.refs[ref] = inlineOrCompile.call(this, _sch))\n}\n\nfunction inlineOrCompile(this: Ajv, sch: SchemaEnv): AnySchema | SchemaEnv {\n  if (inlineRef(sch.schema, this.opts.inlineRefs)) return sch.schema\n  return sch.validate ? sch : compileSchema.call(this, sch)\n}\n\n// Index of schema compilation in the currently compiled list\nexport function getCompilingSchema(this: Ajv, schEnv: SchemaEnv): SchemaEnv | void {\n  for (const sch of this._compilations) {\n    if (sameSchemaEnv(sch, schEnv)) return sch\n  }\n}\n\nfunction sameSchemaEnv(s1: SchemaEnv, s2: SchemaEnv): boolean {\n  return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId\n}\n\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(\n  this: Ajv,\n  root: SchemaEnv, // information about the root schema for the current schema\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  let sch\n  while (typeof (sch = this.refs[ref]) == \"string\") ref = sch\n  return sch || this.schemas[ref] || resolveSchema.call(this, root, ref)\n}\n\n// Resolve schema, its root and baseId\nexport function resolveSchema(\n  this: Ajv,\n  root: SchemaEnv, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\n  ref: string // reference to resolve\n): SchemaEnv | undefined {\n  const p = this.opts.uriResolver.parse(ref)\n  const refPath = _getFullPath(this.opts.uriResolver, p)\n  let baseId = getFullPath(this.opts.uriResolver, root.baseId, undefined)\n  // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n  if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n    return getJsonPointer.call(this, p, root)\n  }\n\n  const id = normalizeId(refPath)\n  const schOrRef = this.refs[id] || this.schemas[id]\n  if (typeof schOrRef == \"string\") {\n    const sch = resolveSchema.call(this, root, schOrRef)\n    if (typeof sch?.schema !== \"object\") return\n    return getJsonPointer.call(this, p, sch)\n  }\n\n  if (typeof schOrRef?.schema !== \"object\") return\n  if (!schOrRef.validate) compileSchema.call(this, schOrRef)\n  if (id === normalizeId(ref)) {\n    const {schema} = schOrRef\n    const {schemaId} = this.opts\n    const schId = schema[schemaId]\n    if (schId) baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    return new SchemaEnv({schema, schemaId, root, baseId})\n  }\n  return getJsonPointer.call(this, p, schOrRef)\n}\n\nconst PREVENT_SCOPE_CHANGE = new Set([\n  \"properties\",\n  \"patternProperties\",\n  \"enum\",\n  \"dependencies\",\n  \"definitions\",\n])\n\nfunction getJsonPointer(\n  this: Ajv,\n  parsedRef: URIComponent,\n  {baseId, schema, root}: SchemaEnv\n): SchemaEnv | undefined {\n  if (parsedRef.fragment?.[0] !== \"/\") return\n  for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n    if (typeof schema === \"boolean\") return\n    const partSchema = schema[unescapeFragment(part)]\n    if (partSchema === undefined) return\n    schema = partSchema\n    // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n    const schId = typeof schema === \"object\" && schema[this.opts.schemaId]\n    if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n      baseId = resolveUrl(this.opts.uriResolver, baseId, schId)\n    }\n  }\n  let env: SchemaEnv | undefined\n  if (typeof schema != \"boolean\" && schema.$ref && !schemaHasRulesButRef(schema, this.RULES)) {\n    const $ref = resolveUrl(this.opts.uriResolver, baseId, schema.$ref)\n    env = resolveSchema.call(this, root, $ref)\n  }\n  // even though resolution failed we need to return SchemaEnv to throw exception\n  // so that compileAsync loads missing schema.\n  const {schemaId} = this.opts\n  env = env || new SchemaEnv({schema, schemaId, root, baseId})\n  if (env.schema !== env.root.schema) return env\n  return undefined\n}\n","import {Name} from \"./codegen\"\n\nconst names = {\n  // validation function arguments\n  data: new Name(\"data\"), // data passed to validation function\n  // args passed from referencing schema\n  valCxt: new Name(\"valCxt\"), // validation/data context - should not be used directly, it is destructured to the names below\n  instancePath: new Name(\"instancePath\"),\n  parentData: new Name(\"parentData\"),\n  parentDataProperty: new Name(\"parentDataProperty\"),\n  rootData: new Name(\"rootData\"), // root data - same as the data passed to the first/top validation function\n  dynamicAnchors: new Name(\"dynamicAnchors\"), // used to support recursiveRef and dynamicRef\n  // function scoped variables\n  vErrors: new Name(\"vErrors\"), // null or array of validation errors\n  errors: new Name(\"errors\"), // counter of validation errors\n  this: new Name(\"this\"),\n  // \"globals\"\n  self: new Name(\"self\"),\n  scope: new Name(\"scope\"),\n  // JTD serialize/parse name for JSON string and position\n  json: new Name(\"json\"),\n  jsonPos: new Name(\"jsonPos\"),\n  jsonLen: new Name(\"jsonLen\"),\n  jsonPart: new Name(\"jsonPart\"),\n}\n\nexport default names\n","import {resolveUrl, normalizeId, getFullPath} from \"./resolve\"\nimport type {UriResolver} from \"../types\"\n\nexport default class MissingRefError extends Error {\n  readonly missingRef: string\n  readonly missingSchema: string\n\n  constructor(resolver: UriResolver, baseId: string, ref: string, msg?: string) {\n    super(msg || `can't resolve reference ${ref} from id ${baseId}`)\n    this.missingRef = resolveUrl(resolver, baseId, ref)\n    this.missingSchema = normalizeId(getFullPath(resolver, this.missingRef))\n  }\n}\n","import type {AnySchema, AnySchemaObject, UriResolver} from \"../types\"\nimport type Ajv from \"../ajv\"\nimport type {URIComponent} from \"fast-uri\"\nimport {eachItem} from \"./util\"\nimport * as equal from \"fast-deep-equal\"\nimport * as traverse from \"json-schema-traverse\"\n\n// the hash of local references inside the schema (created by getSchemaRefs), used for inline resolution\nexport type LocalRefs = {[Ref in string]?: AnySchemaObject}\n\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n  \"type\",\n  \"format\",\n  \"pattern\",\n  \"maxLength\",\n  \"minLength\",\n  \"maxProperties\",\n  \"minProperties\",\n  \"maxItems\",\n  \"minItems\",\n  \"maximum\",\n  \"minimum\",\n  \"uniqueItems\",\n  \"multipleOf\",\n  \"required\",\n  \"enum\",\n  \"const\",\n])\n\nexport function inlineRef(schema: AnySchema, limit: boolean | number = true): boolean {\n  if (typeof schema == \"boolean\") return true\n  if (limit === true) return !hasRef(schema)\n  if (!limit) return false\n  return countKeys(schema) <= limit\n}\n\nconst REF_KEYWORDS = new Set([\n  \"$ref\",\n  \"$recursiveRef\",\n  \"$recursiveAnchor\",\n  \"$dynamicRef\",\n  \"$dynamicAnchor\",\n])\n\nfunction hasRef(schema: AnySchemaObject): boolean {\n  for (const key in schema) {\n    if (REF_KEYWORDS.has(key)) return true\n    const sch = schema[key]\n    if (Array.isArray(sch) && sch.some(hasRef)) return true\n    if (typeof sch == \"object\" && hasRef(sch)) return true\n  }\n  return false\n}\n\nfunction countKeys(schema: AnySchemaObject): number {\n  let count = 0\n  for (const key in schema) {\n    if (key === \"$ref\") return Infinity\n    count++\n    if (SIMPLE_INLINED.has(key)) continue\n    if (typeof schema[key] == \"object\") {\n      eachItem(schema[key], (sch) => (count += countKeys(sch)))\n    }\n    if (count === Infinity) return Infinity\n  }\n  return count\n}\n\nexport function getFullPath(resolver: UriResolver, id = \"\", normalize?: boolean): string {\n  if (normalize !== false) id = normalizeId(id)\n  const p = resolver.parse(id)\n  return _getFullPath(resolver, p)\n}\n\nexport function _getFullPath(resolver: UriResolver, p: URIComponent): string {\n  const serialized = resolver.serialize(p)\n  return serialized.split(\"#\")[0] + \"#\"\n}\n\nconst TRAILING_SLASH_HASH = /#\\/?$/\nexport function normalizeId(id: string | undefined): string {\n  return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\"\n}\n\nexport function resolveUrl(resolver: UriResolver, baseId: string, id: string): string {\n  id = normalizeId(id)\n  return resolver.resolve(baseId, id)\n}\n\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i\n\nexport function getSchemaRefs(this: Ajv, schema: AnySchema, baseId: string): LocalRefs {\n  if (typeof schema == \"boolean\") return {}\n  const {schemaId, uriResolver} = this.opts\n  const schId = normalizeId(schema[schemaId] || baseId)\n  const baseIds: {[JsonPtr in string]?: string} = {\"\": schId}\n  const pathPrefix = getFullPath(uriResolver, schId, false)\n  const localRefs: LocalRefs = {}\n  const schemaRefs: Set<string> = new Set()\n\n  traverse(schema, {allKeys: true}, (sch, jsonPtr, _, parentJsonPtr) => {\n    if (parentJsonPtr === undefined) return\n    const fullPath = pathPrefix + jsonPtr\n    let innerBaseId = baseIds[parentJsonPtr]\n    if (typeof sch[schemaId] == \"string\") innerBaseId = addRef.call(this, sch[schemaId])\n    addAnchor.call(this, sch.$anchor)\n    addAnchor.call(this, sch.$dynamicAnchor)\n    baseIds[jsonPtr] = innerBaseId\n\n    function addRef(this: Ajv, ref: string): string {\n      // eslint-disable-next-line @typescript-eslint/unbound-method\n      const _resolve = this.opts.uriResolver.resolve\n      ref = normalizeId(innerBaseId ? _resolve(innerBaseId, ref) : ref)\n      if (schemaRefs.has(ref)) throw ambiguos(ref)\n      schemaRefs.add(ref)\n      let schOrRef = this.refs[ref]\n      if (typeof schOrRef == \"string\") schOrRef = this.refs[schOrRef]\n      if (typeof schOrRef == \"object\") {\n        checkAmbiguosRef(sch, schOrRef.schema, ref)\n      } else if (ref !== normalizeId(fullPath)) {\n        if (ref[0] === \"#\") {\n          checkAmbiguosRef(sch, localRefs[ref], ref)\n          localRefs[ref] = sch\n        } else {\n          this.refs[ref] = fullPath\n        }\n      }\n      return ref\n    }\n\n    function addAnchor(this: Ajv, anchor: unknown): void {\n      if (typeof anchor == \"string\") {\n        if (!ANCHOR.test(anchor)) throw new Error(`invalid anchor \"${anchor}\"`)\n        addRef.call(this, `#${anchor}`)\n      }\n    }\n  })\n\n  return localRefs\n\n  function checkAmbiguosRef(sch1: AnySchema, sch2: AnySchema | undefined, ref: string): void {\n    if (sch2 !== undefined && !equal(sch1, sch2)) throw ambiguos(ref)\n  }\n\n  function ambiguos(ref: string): Error {\n    return new Error(`reference \"${ref}\" resolves to more than one schema`)\n  }\n}\n","import type {AddedKeywordDefinition} from \"../types\"\n\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"] as const\n\nexport type JSONType = (typeof _jsonTypes)[number]\n\nconst jsonTypes: Set<string> = new Set(_jsonTypes)\n\nexport function isJSONType(x: unknown): x is JSONType {\n  return typeof x == \"string\" && jsonTypes.has(x)\n}\n\ntype ValidationTypes = {\n  [K in JSONType]: boolean | RuleGroup | undefined\n}\n\nexport interface ValidationRules {\n  rules: RuleGroup[]\n  post: RuleGroup\n  all: {[Key in string]?: boolean | Rule} // rules that have to be validated\n  keywords: {[Key in string]?: boolean} // all known keywords (superset of \"all\")\n  types: ValidationTypes\n}\n\nexport interface RuleGroup {\n  type?: JSONType\n  rules: Rule[]\n}\n\n// This interface wraps KeywordDefinition because definition can have multiple keywords\nexport interface Rule {\n  keyword: string\n  definition: AddedKeywordDefinition\n}\n\nexport function getRules(): ValidationRules {\n  const groups: Record<\"number\" | \"string\" | \"array\" | \"object\", RuleGroup> = {\n    number: {type: \"number\", rules: []},\n    string: {type: \"string\", rules: []},\n    array: {type: \"array\", rules: []},\n    object: {type: \"object\", rules: []},\n  }\n  return {\n    types: {...groups, integer: true, boolean: true, null: true},\n    rules: [{rules: []}, groups.number, groups.string, groups.array, groups.object],\n    post: {rules: []},\n    all: {},\n    keywords: {},\n  }\n}\n","import type {AnySchema, EvaluatedProperties, EvaluatedItems} from \"../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \".\"\nimport {_, getProperty, Code, Name, CodeGen} from \"./codegen\"\nimport {_Code} from \"./codegen/code\"\nimport type {Rule, ValidationRules} from \"./rules\"\n\n// TODO refactor to use Set\nexport function toHash<T extends string = string>(arr: T[]): {[K in T]?: true} {\n  const hash: {[K in T]?: true} = {}\n  for (const item of arr) hash[item] = true\n  return hash\n}\n\nexport function alwaysValidSchema(it: SchemaCxt, schema: AnySchema): boolean | void {\n  if (typeof schema == \"boolean\") return schema\n  if (Object.keys(schema).length === 0) return true\n  checkUnknownRules(it, schema)\n  return !schemaHasRules(schema, it.self.RULES.all)\n}\n\nexport function checkUnknownRules(it: SchemaCxt, schema: AnySchema = it.schema): void {\n  const {opts, self} = it\n  if (!opts.strictSchema) return\n  if (typeof schema === \"boolean\") return\n  const rules = self.RULES.keywords\n  for (const key in schema) {\n    if (!rules[key]) checkStrictMode(it, `unknown keyword: \"${key}\"`)\n  }\n}\n\nexport function schemaHasRules(\n  schema: AnySchema,\n  rules: {[Key in string]?: boolean | Rule}\n): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (rules[key]) return true\n  return false\n}\n\nexport function schemaHasRulesButRef(schema: AnySchema, RULES: ValidationRules): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (key !== \"$ref\" && RULES.all[key]) return true\n  return false\n}\n\nexport function schemaRefOrVal(\n  {topSchemaRef, schemaPath}: SchemaObjCxt,\n  schema: unknown,\n  keyword: string,\n  $data?: string | false\n): Code | number | boolean {\n  if (!$data) {\n    if (typeof schema == \"number\" || typeof schema == \"boolean\") return schema\n    if (typeof schema == \"string\") return _`${schema}`\n  }\n  return _`${topSchemaRef}${schemaPath}${getProperty(keyword)}`\n}\n\nexport function unescapeFragment(str: string): string {\n  return unescapeJsonPointer(decodeURIComponent(str))\n}\n\nexport function escapeFragment(str: string | number): string {\n  return encodeURIComponent(escapeJsonPointer(str))\n}\n\nexport function escapeJsonPointer(str: string | number): string {\n  if (typeof str == \"number\") return `${str}`\n  return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\")\n}\n\nexport function unescapeJsonPointer(str: string): string {\n  return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\")\n}\n\nexport function eachItem<T>(xs: T | T[], f: (x: T) => void): void {\n  if (Array.isArray(xs)) {\n    for (const x of xs) f(x)\n  } else {\n    f(xs)\n  }\n}\n\ntype SomeEvaluated = EvaluatedProperties | EvaluatedItems\n\ntype MergeEvaluatedFunc<T extends SomeEvaluated> = (\n  gen: CodeGen,\n  from: Name | T,\n  to: Name | Exclude<T, true> | undefined,\n  toName?: typeof Name\n) => Name | T\n\ninterface MakeMergeFuncArgs<T extends SomeEvaluated> {\n  mergeNames: (gen: CodeGen, from: Name, to: Name) => void\n  mergeToName: (gen: CodeGen, from: T, to: Name) => void\n  mergeValues: (from: T, to: Exclude<T, true>) => T\n  resultToName: (gen: CodeGen, res?: T) => Name\n}\n\nfunction makeMergeEvaluated<T extends SomeEvaluated>({\n  mergeNames,\n  mergeToName,\n  mergeValues,\n  resultToName,\n}: MakeMergeFuncArgs<T>): MergeEvaluatedFunc<T> {\n  return (gen, from, to, toName) => {\n    const res =\n      to === undefined\n        ? from\n        : to instanceof Name\n        ? (from instanceof Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n        : from instanceof Name\n        ? (mergeToName(gen, to, from), from)\n        : mergeValues(from, to)\n    return toName === Name && !(res instanceof Name) ? resultToName(gen, res) : res\n  }\n}\n\ninterface MergeEvaluated {\n  props: MergeEvaluatedFunc<EvaluatedProperties>\n  items: MergeEvaluatedFunc<EvaluatedItems>\n}\n\nexport const mergeEvaluated: MergeEvaluated = {\n  props: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () => {\n        gen.if(\n          _`${from} === true`,\n          () => gen.assign(to, true),\n          () => gen.assign(to, _`${to} || {}`).code(_`Object.assign(${to}, ${from})`)\n        )\n      }),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () => {\n        if (from === true) {\n          gen.assign(to, true)\n        } else {\n          gen.assign(to, _`${to} || {}`)\n          setEvaluated(gen, to, from)\n        }\n      }),\n    mergeValues: (from, to) => (from === true ? true : {...from, ...to}),\n    resultToName: evaluatedPropsToName,\n  }),\n  items: makeMergeEvaluated({\n    mergeNames: (gen, from, to) =>\n      gen.if(_`${to} !== true && ${from} !== undefined`, () =>\n        gen.assign(to, _`${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeToName: (gen, from, to) =>\n      gen.if(_`${to} !== true`, () =>\n        gen.assign(to, from === true ? true : _`${to} > ${from} ? ${to} : ${from}`)\n      ),\n    mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n    resultToName: (gen, items) => gen.var(\"items\", items),\n  }),\n}\n\nexport function evaluatedPropsToName(gen: CodeGen, ps?: EvaluatedProperties): Name {\n  if (ps === true) return gen.var(\"props\", true)\n  const props = gen.var(\"props\", _`{}`)\n  if (ps !== undefined) setEvaluated(gen, props, ps)\n  return props\n}\n\nexport function setEvaluated(gen: CodeGen, props: Name, ps: {[K in string]?: true}): void {\n  Object.keys(ps).forEach((p) => gen.assign(_`${props}${getProperty(p)}`, true))\n}\n\nconst snippets: {[S in string]?: _Code} = {}\n\nexport function useFunc(gen: CodeGen, f: {code: string}): Name {\n  return gen.scopeValue(\"func\", {\n    ref: f,\n    code: snippets[f.code] || (snippets[f.code] = new _Code(f.code)),\n  })\n}\n\nexport enum Type {\n  Num,\n  Str,\n}\n\nexport function getErrorPath(\n  dataProp: Name | string | number,\n  dataPropType?: Type,\n  jsPropertySyntax?: boolean\n): Code | string {\n  // let path\n  if (dataProp instanceof Name) {\n    const isNumber = dataPropType === Type.Num\n    return jsPropertySyntax\n      ? isNumber\n        ? _`\"[\" + ${dataProp} + \"]\"`\n        : _`\"['\" + ${dataProp} + \"']\"`\n      : isNumber\n      ? _`\"/\" + ${dataProp}`\n      : _`\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")` // TODO maybe use global escapePointer\n  }\n  return jsPropertySyntax ? getProperty(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp)\n}\n\nexport function checkStrictMode(\n  it: SchemaCxt,\n  msg: string,\n  mode: boolean | \"log\" = it.opts.strictSchema\n): void {\n  if (!mode) return\n  msg = `strict mode: ${msg}`\n  if (mode === true) throw new Error(msg)\n  it.self.logger.warn(msg)\n}\n","import type {AnySchemaObject} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport type {JSONType, RuleGroup, Rule} from \"../rules\"\n\nexport function schemaHasRulesForType(\n  {schema, self}: SchemaObjCxt,\n  type: JSONType\n): boolean | undefined {\n  const group = self.RULES.types[type]\n  return group && group !== true && shouldUseGroup(schema, group)\n}\n\nexport function shouldUseGroup(schema: AnySchemaObject, group: RuleGroup): boolean {\n  return group.rules.some((rule) => shouldUseRule(schema, rule))\n}\n\nexport function shouldUseRule(schema: AnySchemaObject, rule: Rule): boolean | undefined {\n  return (\n    schema[rule.keyword] !== undefined ||\n    rule.definition.implements?.some((kwd) => schema[kwd] !== undefined)\n  )\n}\n","import type {KeywordErrorDefinition, KeywordErrorCxt} from \"../../types\"\nimport type {SchemaCxt} from \"..\"\nimport {reportError} from \"../errors\"\nimport {_, Name} from \"../codegen\"\nimport N from \"../names\"\n\nconst boolError: KeywordErrorDefinition = {\n  message: \"boolean schema is false\",\n}\n\nexport function topBoolOrEmptySchema(it: SchemaCxt): void {\n  const {gen, schema, validateName} = it\n  if (schema === false) {\n    falseSchemaError(it, false)\n  } else if (typeof schema == \"object\" && schema.$async === true) {\n    gen.return(N.data)\n  } else {\n    gen.assign(_`${validateName}.errors`, null)\n    gen.return(true)\n  }\n}\n\nexport function boolOrEmptySchema(it: SchemaCxt, valid: Name): void {\n  const {gen, schema} = it\n  if (schema === false) {\n    gen.var(valid, false) // TODO var\n    falseSchemaError(it)\n  } else {\n    gen.var(valid, true) // TODO var\n  }\n}\n\nfunction falseSchemaError(it: SchemaCxt, overrideAllErrors?: boolean): void {\n  const {gen, data} = it\n  // TODO maybe some other interface should be used for non-keyword validation errors...\n  const cxt: KeywordErrorCxt = {\n    gen,\n    keyword: \"false schema\",\n    data,\n    schema: false,\n    schemaCode: false,\n    schemaValue: false,\n    params: {},\n    it,\n  }\n  reportError(cxt, boolError, undefined, overrideAllErrors)\n}\n","import type {\n  KeywordErrorDefinition,\n  KeywordErrorCxt,\n  ErrorObject,\n  AnySchemaObject,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {isJSONType, JSONType} from \"../rules\"\nimport {schemaHasRulesForType} from \"./applicability\"\nimport {reportError} from \"../errors\"\nimport {_, nil, and, not, operators, Code, Name} from \"../codegen\"\nimport {toHash, schemaRefOrVal} from \"../util\"\n\nexport enum DataType {\n  Correct,\n  Wrong,\n}\n\nexport function getSchemaTypes(schema: AnySchemaObject): JSONType[] {\n  const types = getJSONTypes(schema.type)\n  const hasNull = types.includes(\"null\")\n  if (hasNull) {\n    if (schema.nullable === false) throw new Error(\"type: null contradicts nullable: false\")\n  } else {\n    if (!types.length && schema.nullable !== undefined) {\n      throw new Error('\"nullable\" cannot be used without \"type\"')\n    }\n    if (schema.nullable === true) types.push(\"null\")\n  }\n  return types\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport function getJSONTypes(ts: unknown | unknown[]): JSONType[] {\n  const types: unknown[] = Array.isArray(ts) ? ts : ts ? [ts] : []\n  if (types.every(isJSONType)) return types\n  throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"))\n}\n\nexport function coerceAndCheckDataType(it: SchemaObjCxt, types: JSONType[]): boolean {\n  const {gen, data, opts} = it\n  const coerceTo = coerceToTypes(types, opts.coerceTypes)\n  const checkTypes =\n    types.length > 0 &&\n    !(coerceTo.length === 0 && types.length === 1 && schemaHasRulesForType(it, types[0]))\n  if (checkTypes) {\n    const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong)\n    gen.if(wrongType, () => {\n      if (coerceTo.length) coerceData(it, types, coerceTo)\n      else reportTypeError(it)\n    })\n  }\n  return checkTypes\n}\n\nconst COERCIBLE: Set<JSONType> = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"])\nfunction coerceToTypes(types: JSONType[], coerceTypes?: boolean | \"array\"): JSONType[] {\n  return coerceTypes\n    ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n    : []\n}\n\nfunction coerceData(it: SchemaObjCxt, types: JSONType[], coerceTo: JSONType[]): void {\n  const {gen, data, opts} = it\n  const dataType = gen.let(\"dataType\", _`typeof ${data}`)\n  const coerced = gen.let(\"coerced\", _`undefined`)\n  if (opts.coerceTypes === \"array\") {\n    gen.if(_`${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () =>\n      gen\n        .assign(data, _`${data}[0]`)\n        .assign(dataType, _`typeof ${data}`)\n        .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data))\n    )\n  }\n  gen.if(_`${coerced} !== undefined`)\n  for (const t of coerceTo) {\n    if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n      coerceSpecificType(t)\n    }\n  }\n  gen.else()\n  reportTypeError(it)\n  gen.endIf()\n\n  gen.if(_`${coerced} !== undefined`, () => {\n    gen.assign(data, coerced)\n    assignParentData(it, coerced)\n  })\n\n  function coerceSpecificType(t: string): void {\n    switch (t) {\n      case \"string\":\n        gen\n          .elseIf(_`${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n          .assign(coerced, _`\"\" + ${data}`)\n          .elseIf(_`${data} === null`)\n          .assign(coerced, _`\"\"`)\n        return\n      case \"number\":\n        gen\n          .elseIf(\n            _`${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"integer\":\n        gen\n          .elseIf(\n            _`${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`\n          )\n          .assign(coerced, _`+${data}`)\n        return\n      case \"boolean\":\n        gen\n          .elseIf(_`${data} === \"false\" || ${data} === 0 || ${data} === null`)\n          .assign(coerced, false)\n          .elseIf(_`${data} === \"true\" || ${data} === 1`)\n          .assign(coerced, true)\n        return\n      case \"null\":\n        gen.elseIf(_`${data} === \"\" || ${data} === 0 || ${data} === false`)\n        gen.assign(coerced, null)\n        return\n\n      case \"array\":\n        gen\n          .elseIf(\n            _`${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`\n          )\n          .assign(coerced, _`[${data}]`)\n    }\n  }\n}\n\nfunction assignParentData({gen, parentData, parentDataProperty}: SchemaObjCxt, expr: Name): void {\n  // TODO use gen.property\n  gen.if(_`${parentData} !== undefined`, () =>\n    gen.assign(_`${parentData}[${parentDataProperty}]`, expr)\n  )\n}\n\nexport function checkDataType(\n  dataType: JSONType,\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct = DataType.Correct\n): Code {\n  const EQ = correct === DataType.Correct ? operators.EQ : operators.NEQ\n  let cond: Code\n  switch (dataType) {\n    case \"null\":\n      return _`${data} ${EQ} null`\n    case \"array\":\n      cond = _`Array.isArray(${data})`\n      break\n    case \"object\":\n      cond = _`${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`\n      break\n    case \"integer\":\n      cond = numCond(_`!(${data} % 1) && !isNaN(${data})`)\n      break\n    case \"number\":\n      cond = numCond()\n      break\n    default:\n      return _`typeof ${data} ${EQ} ${dataType}`\n  }\n  return correct === DataType.Correct ? cond : not(cond)\n\n  function numCond(_cond: Code = nil): Code {\n    return and(_`typeof ${data} == \"number\"`, _cond, strictNums ? _`isFinite(${data})` : nil)\n  }\n}\n\nexport function checkDataTypes(\n  dataTypes: JSONType[],\n  data: Name,\n  strictNums?: boolean | \"log\",\n  correct?: DataType\n): Code {\n  if (dataTypes.length === 1) {\n    return checkDataType(dataTypes[0], data, strictNums, correct)\n  }\n  let cond: Code\n  const types = toHash(dataTypes)\n  if (types.array && types.object) {\n    const notObj = _`typeof ${data} != \"object\"`\n    cond = types.null ? notObj : _`!${data} || ${notObj}`\n    delete types.null\n    delete types.array\n    delete types.object\n  } else {\n    cond = nil\n  }\n  if (types.number) delete types.integer\n  for (const t in types) cond = and(cond, checkDataType(t as JSONType, data, strictNums, correct))\n  return cond\n}\n\nexport type TypeError = ErrorObject<\"type\", {type: string}>\n\nconst typeError: KeywordErrorDefinition = {\n  message: ({schema}) => `must be ${schema}`,\n  params: ({schema, schemaValue}) =>\n    typeof schema == \"string\" ? _`{type: ${schema}}` : _`{type: ${schemaValue}}`,\n}\n\nexport function reportTypeError(it: SchemaObjCxt): void {\n  const cxt = getTypeErrorContext(it)\n  reportError(cxt, typeError)\n}\n\nfunction getTypeErrorContext(it: SchemaObjCxt): KeywordErrorCxt {\n  const {gen, data, schema} = it\n  const schemaCode = schemaRefOrVal(it, schema, \"type\")\n  return {\n    gen,\n    keyword: \"type\",\n    data,\n    schema: schema.type,\n    schemaCode,\n    schemaValue: schemaCode,\n    parentSchema: schema,\n    params: {},\n    it,\n  }\n}\n","import type {SchemaObjCxt} from \"..\"\nimport {_, getProperty, stringify} from \"../codegen\"\nimport {checkStrictMode} from \"../util\"\n\nexport function assignDefaults(it: SchemaObjCxt, ty?: string): void {\n  const {properties, items} = it.schema\n  if (ty === \"object\" && properties) {\n    for (const key in properties) {\n      assignDefault(it, key, properties[key].default)\n    }\n  } else if (ty === \"array\" && Array.isArray(items)) {\n    items.forEach((sch, i: number) => assignDefault(it, i, sch.default))\n  }\n}\n\nfunction assignDefault(it: SchemaObjCxt, prop: string | number, defaultValue: unknown): void {\n  const {gen, compositeRule, data, opts} = it\n  if (defaultValue === undefined) return\n  const childData = _`${data}${getProperty(prop)}`\n  if (compositeRule) {\n    checkStrictMode(it, `default is ignored for: ${childData}`)\n    return\n  }\n\n  let condition = _`${childData} === undefined`\n  if (opts.useDefaults === \"empty\") {\n    condition = _`${condition} || ${childData} === null || ${childData} === \"\"`\n  }\n  // `${childData} === undefined` +\n  // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n  gen.if(condition, _`${childData} = ${stringify(defaultValue)}`)\n}\n","import type {\n  AddedKeywordDefinition,\n  AnySchema,\n  AnySchemaObject,\n  KeywordErrorCxt,\n  KeywordCxtParams,\n} from \"../../types\"\nimport type {SchemaCxt, SchemaObjCxt} from \"..\"\nimport type {InstanceOptions} from \"../../core\"\nimport {boolOrEmptySchema, topBoolOrEmptySchema} from \"./boolSchema\"\nimport {coerceAndCheckDataType, getSchemaTypes} from \"./dataType\"\nimport {shouldUseGroup, shouldUseRule} from \"./applicability\"\nimport {checkDataType, checkDataTypes, reportTypeError, DataType} from \"./dataType\"\nimport {assignDefaults} from \"./defaults\"\nimport {funcKeywordCode, macroKeywordCode, validateKeywordUsage, validSchemaType} from \"./keyword\"\nimport {getSubschema, extendSubschemaData, SubschemaArgs, extendSubschemaMode} from \"./subschema\"\nimport {_, nil, str, or, not, getProperty, Block, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport {resolveUrl} from \"../resolve\"\nimport {\n  schemaRefOrVal,\n  schemaHasRulesButRef,\n  checkUnknownRules,\n  checkStrictMode,\n  unescapeJsonPointer,\n  mergeEvaluated,\n} from \"../util\"\nimport type {JSONType, Rule, RuleGroup} from \"../rules\"\nimport {\n  ErrorPaths,\n  reportError,\n  reportExtraError,\n  resetErrorsCount,\n  keyword$DataError,\n} from \"../errors\"\n\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nexport function validateFunctionCode(it: SchemaCxt): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      topSchemaObjCode(it)\n      return\n    }\n  }\n  validateFunction(it, () => topBoolOrEmptySchema(it))\n}\n\nfunction validateFunction(\n  {gen, validateName, schema, schemaEnv, opts}: SchemaCxt,\n  body: Block\n): void {\n  if (opts.code.es5) {\n    gen.func(validateName, _`${N.data}, ${N.valCxt}`, schemaEnv.$async, () => {\n      gen.code(_`\"use strict\"; ${funcSourceUrl(schema, opts)}`)\n      destructureValCxtES5(gen, opts)\n      gen.code(body)\n    })\n  } else {\n    gen.func(validateName, _`${N.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () =>\n      gen.code(funcSourceUrl(schema, opts)).code(body)\n    )\n  }\n}\n\nfunction destructureValCxt(opts: InstanceOptions): Code {\n  return _`{${N.instancePath}=\"\", ${N.parentData}, ${N.parentDataProperty}, ${N.rootData}=${\n    N.data\n  }${opts.dynamicRef ? _`, ${N.dynamicAnchors}={}` : nil}}={}`\n}\n\nfunction destructureValCxtES5(gen: CodeGen, opts: InstanceOptions): void {\n  gen.if(\n    N.valCxt,\n    () => {\n      gen.var(N.instancePath, _`${N.valCxt}.${N.instancePath}`)\n      gen.var(N.parentData, _`${N.valCxt}.${N.parentData}`)\n      gen.var(N.parentDataProperty, _`${N.valCxt}.${N.parentDataProperty}`)\n      gen.var(N.rootData, _`${N.valCxt}.${N.rootData}`)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`${N.valCxt}.${N.dynamicAnchors}`)\n    },\n    () => {\n      gen.var(N.instancePath, _`\"\"`)\n      gen.var(N.parentData, _`undefined`)\n      gen.var(N.parentDataProperty, _`undefined`)\n      gen.var(N.rootData, N.data)\n      if (opts.dynamicRef) gen.var(N.dynamicAnchors, _`{}`)\n    }\n  )\n}\n\nfunction topSchemaObjCode(it: SchemaObjCxt): void {\n  const {schema, opts, gen} = it\n  validateFunction(it, () => {\n    if (opts.$comment && schema.$comment) commentKeyword(it)\n    checkNoDefault(it)\n    gen.let(N.vErrors, null)\n    gen.let(N.errors, 0)\n    if (opts.unevaluated) resetEvaluated(it)\n    typeAndKeywords(it)\n    returnResults(it)\n  })\n  return\n}\n\nfunction resetEvaluated(it: SchemaObjCxt): void {\n  // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n  const {gen, validateName} = it\n  it.evaluated = gen.const(\"evaluated\", _`${validateName}.evaluated`)\n  gen.if(_`${it.evaluated}.dynamicProps`, () => gen.assign(_`${it.evaluated}.props`, _`undefined`))\n  gen.if(_`${it.evaluated}.dynamicItems`, () => gen.assign(_`${it.evaluated}.items`, _`undefined`))\n}\n\nfunction funcSourceUrl(schema: AnySchema, opts: InstanceOptions): Code {\n  const schId = typeof schema == \"object\" && schema[opts.schemaId]\n  return schId && (opts.code.source || opts.code.process) ? _`/*# sourceURL=${schId} */` : nil\n}\n\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it: SchemaCxt, valid: Name): void {\n  if (isSchemaObj(it)) {\n    checkKeywords(it)\n    if (schemaCxtHasRules(it)) {\n      subSchemaObjCode(it, valid)\n      return\n    }\n  }\n  boolOrEmptySchema(it, valid)\n}\n\nfunction schemaCxtHasRules({schema, self}: SchemaCxt): boolean {\n  if (typeof schema == \"boolean\") return !schema\n  for (const key in schema) if (self.RULES.all[key]) return true\n  return false\n}\n\nfunction isSchemaObj(it: SchemaCxt): it is SchemaObjCxt {\n  return typeof it.schema != \"boolean\"\n}\n\nfunction subSchemaObjCode(it: SchemaObjCxt, valid: Name): void {\n  const {schema, gen, opts} = it\n  if (opts.$comment && schema.$comment) commentKeyword(it)\n  updateContext(it)\n  checkAsyncSchema(it)\n  const errsCount = gen.const(\"_errs\", N.errors)\n  typeAndKeywords(it, errsCount)\n  // TODO var\n  gen.var(valid, _`${errsCount} === ${N.errors}`)\n}\n\nfunction checkKeywords(it: SchemaObjCxt): void {\n  checkUnknownRules(it)\n  checkRefsAndKeywords(it)\n}\n\nfunction typeAndKeywords(it: SchemaObjCxt, errsCount?: Name): void {\n  if (it.opts.jtd) return schemaKeywords(it, [], false, errsCount)\n  const types = getSchemaTypes(it.schema)\n  const checkedTypes = coerceAndCheckDataType(it, types)\n  schemaKeywords(it, types, !checkedTypes, errsCount)\n}\n\nfunction checkRefsAndKeywords(it: SchemaObjCxt): void {\n  const {schema, errSchemaPath, opts, self} = it\n  if (schema.$ref && opts.ignoreKeywordsWithRef && schemaHasRulesButRef(schema, self.RULES)) {\n    self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`)\n  }\n}\n\nfunction checkNoDefault(it: SchemaObjCxt): void {\n  const {schema, opts} = it\n  if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n    checkStrictMode(it, \"default is ignored in the schema root\")\n  }\n}\n\nfunction updateContext(it: SchemaObjCxt): void {\n  const schId = it.schema[it.opts.schemaId]\n  if (schId) it.baseId = resolveUrl(it.opts.uriResolver, it.baseId, schId)\n}\n\nfunction checkAsyncSchema(it: SchemaObjCxt): void {\n  if (it.schema.$async && !it.schemaEnv.$async) throw new Error(\"async schema in sync schema\")\n}\n\nfunction commentKeyword({gen, schemaEnv, schema, errSchemaPath, opts}: SchemaObjCxt): void {\n  const msg = schema.$comment\n  if (opts.$comment === true) {\n    gen.code(_`${N.self}.logger.log(${msg})`)\n  } else if (typeof opts.$comment == \"function\") {\n    const schemaPath = str`${errSchemaPath}/$comment`\n    const rootName = gen.scopeValue(\"root\", {ref: schemaEnv.root})\n    gen.code(_`${N.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`)\n  }\n}\n\nfunction returnResults(it: SchemaCxt): void {\n  const {gen, schemaEnv, validateName, ValidationError, opts} = it\n  if (schemaEnv.$async) {\n    // TODO assign unevaluated\n    gen.if(\n      _`${N.errors} === 0`,\n      () => gen.return(N.data),\n      () => gen.throw(_`new ${ValidationError as Name}(${N.vErrors})`)\n    )\n  } else {\n    gen.assign(_`${validateName}.errors`, N.vErrors)\n    if (opts.unevaluated) assignEvaluated(it)\n    gen.return(_`${N.errors} === 0`)\n  }\n}\n\nfunction assignEvaluated({gen, evaluated, props, items}: SchemaCxt): void {\n  if (props instanceof Name) gen.assign(_`${evaluated}.props`, props)\n  if (items instanceof Name) gen.assign(_`${evaluated}.items`, items)\n}\n\nfunction schemaKeywords(\n  it: SchemaObjCxt,\n  types: JSONType[],\n  typeErrors: boolean,\n  errsCount?: Name\n): void {\n  const {gen, schema, data, allErrors, opts, self} = it\n  const {RULES} = self\n  if (schema.$ref && (opts.ignoreKeywordsWithRef || !schemaHasRulesButRef(schema, RULES))) {\n    gen.block(() => keywordCode(it, \"$ref\", (RULES.all.$ref as Rule).definition)) // TODO typecast\n    return\n  }\n  if (!opts.jtd) checkStrictTypes(it, types)\n  gen.block(() => {\n    for (const group of RULES.rules) groupKeywords(group)\n    groupKeywords(RULES.post)\n  })\n\n  function groupKeywords(group: RuleGroup): void {\n    if (!shouldUseGroup(schema, group)) return\n    if (group.type) {\n      gen.if(checkDataType(group.type, data, opts.strictNumbers))\n      iterateKeywords(it, group)\n      if (types.length === 1 && types[0] === group.type && typeErrors) {\n        gen.else()\n        reportTypeError(it)\n      }\n      gen.endIf()\n    } else {\n      iterateKeywords(it, group)\n    }\n    // TODO make it \"ok\" call?\n    if (!allErrors) gen.if(_`${N.errors} === ${errsCount || 0}`)\n  }\n}\n\nfunction iterateKeywords(it: SchemaObjCxt, group: RuleGroup): void {\n  const {\n    gen,\n    schema,\n    opts: {useDefaults},\n  } = it\n  if (useDefaults) assignDefaults(it, group.type)\n  gen.block(() => {\n    for (const rule of group.rules) {\n      if (shouldUseRule(schema, rule)) {\n        keywordCode(it, rule.keyword, rule.definition, group.type)\n      }\n    }\n  })\n}\n\nfunction checkStrictTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (it.schemaEnv.meta || !it.opts.strictTypes) return\n  checkContextTypes(it, types)\n  if (!it.opts.allowUnionTypes) checkMultipleTypes(it, types)\n  checkKeywordTypes(it, it.dataTypes)\n}\n\nfunction checkContextTypes(it: SchemaObjCxt, types: JSONType[]): void {\n  if (!types.length) return\n  if (!it.dataTypes.length) {\n    it.dataTypes = types\n    return\n  }\n  types.forEach((t) => {\n    if (!includesType(it.dataTypes, t)) {\n      strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`)\n    }\n  })\n  narrowSchemaTypes(it, types)\n}\n\nfunction checkMultipleTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n    strictTypesError(it, \"use allowUnionTypes to allow union type keyword\")\n  }\n}\n\nfunction checkKeywordTypes(it: SchemaObjCxt, ts: JSONType[]): void {\n  const rules = it.self.RULES.all\n  for (const keyword in rules) {\n    const rule = rules[keyword]\n    if (typeof rule == \"object\" && shouldUseRule(it.schema, rule)) {\n      const {type} = rule.definition\n      if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n        strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`)\n      }\n    }\n  }\n}\n\nfunction hasApplicableType(schTs: JSONType[], kwdT: JSONType): boolean {\n  return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"))\n}\n\nfunction includesType(ts: JSONType[], t: JSONType): boolean {\n  return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"))\n}\n\nfunction narrowSchemaTypes(it: SchemaObjCxt, withTypes: JSONType[]): void {\n  const ts: JSONType[] = []\n  for (const t of it.dataTypes) {\n    if (includesType(withTypes, t)) ts.push(t)\n    else if (withTypes.includes(\"integer\") && t === \"number\") ts.push(\"integer\")\n  }\n  it.dataTypes = ts\n}\n\nfunction strictTypesError(it: SchemaObjCxt, msg: string): void {\n  const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n  msg += ` at \"${schemaPath}\" (strictTypes)`\n  checkStrictMode(it, msg, it.opts.strictTypes)\n}\n\nexport class KeywordCxt implements KeywordErrorCxt {\n  readonly gen: CodeGen\n  readonly allErrors?: boolean\n  readonly keyword: string\n  readonly data: Name // Name referencing the current level of the data instance\n  readonly $data?: string | false\n  schema: any // keyword value in the schema\n  readonly schemaValue: Code | number | boolean // Code reference to keyword schema value or primitive value\n  readonly schemaCode: Code | number | boolean // Code reference to resolved schema value (different if schema is $data)\n  readonly schemaType: JSONType[] // allowed type(s) of keyword value in the schema\n  readonly parentSchema: AnySchemaObject\n  readonly errsCount?: Name // Name reference to the number of validation errors collected before this keyword,\n  // requires option trackErrors in keyword definition\n  params: KeywordCxtParams // object to pass parameters to error messages from keyword code\n  readonly it: SchemaObjCxt // schema compilation context (schema is guaranteed to be an object, not boolean)\n  readonly def: AddedKeywordDefinition\n\n  constructor(it: SchemaObjCxt, def: AddedKeywordDefinition, keyword: string) {\n    validateKeywordUsage(it, def, keyword)\n    this.gen = it.gen\n    this.allErrors = it.allErrors\n    this.keyword = keyword\n    this.data = it.data\n    this.schema = it.schema[keyword]\n    this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data\n    this.schemaValue = schemaRefOrVal(it, this.schema, keyword, this.$data)\n    this.schemaType = def.schemaType\n    this.parentSchema = it.schema\n    this.params = {}\n    this.it = it\n    this.def = def\n\n    if (this.$data) {\n      this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it))\n    } else {\n      this.schemaCode = this.schemaValue\n      if (!validSchemaType(this.schema, def.schemaType, def.allowUndefined)) {\n        throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`)\n      }\n    }\n\n    if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n      this.errsCount = it.gen.const(\"_errs\", N.errors)\n    }\n  }\n\n  result(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.failResult(not(condition), successAction, failAction)\n  }\n\n  failResult(condition: Code, successAction?: () => void, failAction?: () => void): void {\n    this.gen.if(condition)\n    if (failAction) failAction()\n    else this.error()\n    if (successAction) {\n      this.gen.else()\n      successAction()\n      if (this.allErrors) this.gen.endIf()\n    } else {\n      if (this.allErrors) this.gen.endIf()\n      else this.gen.else()\n    }\n  }\n\n  pass(condition: Code, failAction?: () => void): void {\n    this.failResult(not(condition), undefined, failAction)\n  }\n\n  fail(condition?: Code): void {\n    if (condition === undefined) {\n      this.error()\n      if (!this.allErrors) this.gen.if(false) // this branch will be removed by gen.optimize\n      return\n    }\n    this.gen.if(condition)\n    this.error()\n    if (this.allErrors) this.gen.endIf()\n    else this.gen.else()\n  }\n\n  fail$data(condition: Code): void {\n    if (!this.$data) return this.fail(condition)\n    const {schemaCode} = this\n    this.fail(_`${schemaCode} !== undefined && (${or(this.invalid$data(), condition)})`)\n  }\n\n  error(append?: boolean, errorParams?: KeywordCxtParams, errorPaths?: ErrorPaths): void {\n    if (errorParams) {\n      this.setParams(errorParams)\n      this._error(append, errorPaths)\n      this.setParams({})\n      return\n    }\n    this._error(append, errorPaths)\n  }\n\n  private _error(append?: boolean, errorPaths?: ErrorPaths): void {\n    ;(append ? reportExtraError : reportError)(this, this.def.error, errorPaths)\n  }\n\n  $dataError(): void {\n    reportError(this, this.def.$dataError || keyword$DataError)\n  }\n\n  reset(): void {\n    if (this.errsCount === undefined) throw new Error('add \"trackErrors\" to keyword definition')\n    resetErrorsCount(this.gen, this.errsCount)\n  }\n\n  ok(cond: Code | boolean): void {\n    if (!this.allErrors) this.gen.if(cond)\n  }\n\n  setParams(obj: KeywordCxtParams, assign?: true): void {\n    if (assign) Object.assign(this.params, obj)\n    else this.params = obj\n  }\n\n  block$data(valid: Name, codeBlock: () => void, $dataValid: Code = nil): void {\n    this.gen.block(() => {\n      this.check$data(valid, $dataValid)\n      codeBlock()\n    })\n  }\n\n  check$data(valid: Name = nil, $dataValid: Code = nil): void {\n    if (!this.$data) return\n    const {gen, schemaCode, schemaType, def} = this\n    gen.if(or(_`${schemaCode} === undefined`, $dataValid))\n    if (valid !== nil) gen.assign(valid, true)\n    if (schemaType.length || def.validateSchema) {\n      gen.elseIf(this.invalid$data())\n      this.$dataError()\n      if (valid !== nil) gen.assign(valid, false)\n    }\n    gen.else()\n  }\n\n  invalid$data(): Code {\n    const {gen, schemaCode, schemaType, def, it} = this\n    return or(wrong$DataType(), invalid$DataSchema())\n\n    function wrong$DataType(): Code {\n      if (schemaType.length) {\n        /* istanbul ignore if */\n        if (!(schemaCode instanceof Name)) throw new Error(\"ajv implementation error\")\n        const st = Array.isArray(schemaType) ? schemaType : [schemaType]\n        return _`${checkDataTypes(st, schemaCode, it.opts.strictNumbers, DataType.Wrong)}`\n      }\n      return nil\n    }\n\n    function invalid$DataSchema(): Code {\n      if (def.validateSchema) {\n        const validateSchemaRef = gen.scopeValue(\"validate$data\", {ref: def.validateSchema}) // TODO value.code for standalone\n        return _`!${validateSchemaRef}(${schemaCode})`\n      }\n      return nil\n    }\n  }\n\n  subschema(appl: SubschemaArgs, valid: Name): SchemaCxt {\n    const subschema = getSubschema(this.it, appl)\n    extendSubschemaData(subschema, this.it, appl)\n    extendSubschemaMode(subschema, appl)\n    const nextContext = {...this.it, ...subschema, items: undefined, props: undefined}\n    subschemaCode(nextContext, valid)\n    return nextContext\n  }\n\n  mergeEvaluated(schemaCxt: SchemaCxt, toName?: typeof Name): void {\n    const {it, gen} = this\n    if (!it.opts.unevaluated) return\n    if (it.props !== true && schemaCxt.props !== undefined) {\n      it.props = mergeEvaluated.props(gen, schemaCxt.props, it.props, toName)\n    }\n    if (it.items !== true && schemaCxt.items !== undefined) {\n      it.items = mergeEvaluated.items(gen, schemaCxt.items, it.items, toName)\n    }\n  }\n\n  mergeValidEvaluated(schemaCxt: SchemaCxt, valid: Name): boolean | void {\n    const {it, gen} = this\n    if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n      gen.if(valid, () => this.mergeEvaluated(schemaCxt, Name))\n      return true\n    }\n  }\n}\n\nfunction keywordCode(\n  it: SchemaObjCxt,\n  keyword: string,\n  def: AddedKeywordDefinition,\n  ruleType?: JSONType\n): void {\n  const cxt = new KeywordCxt(it, def, keyword)\n  if (\"code\" in def) {\n    def.code(cxt, ruleType)\n  } else if (cxt.$data && def.validate) {\n    funcKeywordCode(cxt, def)\n  } else if (\"macro\" in def) {\n    macroKeywordCode(cxt, def)\n  } else if (def.compile || def.validate) {\n    funcKeywordCode(cxt, def)\n  }\n}\n\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/\nexport function getData(\n  $data: string,\n  {dataLevel, dataNames, dataPathArr}: SchemaCxt\n): Code | number {\n  let jsonPointer\n  let data: Code\n  if ($data === \"\") return N.rootData\n  if ($data[0] === \"/\") {\n    if (!JSON_POINTER.test($data)) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    jsonPointer = $data\n    data = N.rootData\n  } else {\n    const matches = RELATIVE_JSON_POINTER.exec($data)\n    if (!matches) throw new Error(`Invalid JSON-pointer: ${$data}`)\n    const up: number = +matches[1]\n    jsonPointer = matches[2]\n    if (jsonPointer === \"#\") {\n      if (up >= dataLevel) throw new Error(errorMsg(\"property/index\", up))\n      return dataPathArr[dataLevel - up]\n    }\n    if (up > dataLevel) throw new Error(errorMsg(\"data\", up))\n    data = dataNames[dataLevel - up]\n    if (!jsonPointer) return data\n  }\n\n  let expr = data\n  const segments = jsonPointer.split(\"/\")\n  for (const segment of segments) {\n    if (segment) {\n      data = _`${data}${getProperty(unescapeJsonPointer(segment))}`\n      expr = _`${expr} && ${data}`\n    }\n  }\n  return expr\n\n  function errorMsg(pointerType: string, up: number): string {\n    return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`\n  }\n}\n","import type {KeywordCxt} from \".\"\nimport type {\n  AnySchema,\n  SchemaValidateFunction,\n  AnyValidateFunction,\n  AddedKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, nil, not, stringify, Code, Name, CodeGen} from \"../codegen\"\nimport N from \"../names\"\nimport type {JSONType} from \"../rules\"\nimport {callValidateCode} from \"../../vocabularies/code\"\nimport {extendErrors} from \"../errors\"\n\ntype KeywordCompilationResult = AnySchema | SchemaValidateFunction | AnyValidateFunction\n\nexport function macroKeywordCode(cxt: KeywordCxt, def: MacroKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, it} = cxt\n  const macroSchema = def.macro.call(it.self, schema, parentSchema, it)\n  const schemaRef = useKeyword(gen, keyword, macroSchema)\n  if (it.opts.validateSchema !== false) it.self.validateSchema(macroSchema, true)\n\n  const valid = gen.name(\"valid\")\n  cxt.subschema(\n    {\n      schema: macroSchema,\n      schemaPath: nil,\n      errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n      topSchemaRef: schemaRef,\n      compositeRule: true,\n    },\n    valid\n  )\n  cxt.pass(valid, () => cxt.error(true))\n}\n\nexport function funcKeywordCode(cxt: KeywordCxt, def: FuncKeywordDefinition): void {\n  const {gen, keyword, schema, parentSchema, $data, it} = cxt\n  checkAsyncKeyword(it, def)\n  const validate =\n    !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate\n  const validateRef = useKeyword(gen, keyword, validate)\n  const valid = gen.let(\"valid\")\n  cxt.block$data(valid, validateKeyword)\n  cxt.ok(def.valid ?? valid)\n\n  function validateKeyword(): void {\n    if (def.errors === false) {\n      assignValid()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => cxt.error())\n    } else {\n      const ruleErrs = def.async ? validateAsync() : validateSync()\n      if (def.modifying) modifyData(cxt)\n      reportErrs(() => addErrs(cxt, ruleErrs))\n    }\n  }\n\n  function validateAsync(): Name {\n    const ruleErrs = gen.let(\"ruleErrs\", null)\n    gen.try(\n      () => assignValid(_`await `),\n      (e) =>\n        gen.assign(valid, false).if(\n          _`${e} instanceof ${it.ValidationError as Name}`,\n          () => gen.assign(ruleErrs, _`${e}.errors`),\n          () => gen.throw(e)\n        )\n    )\n    return ruleErrs\n  }\n\n  function validateSync(): Code {\n    const validateErrs = _`${validateRef}.errors`\n    gen.assign(validateErrs, null)\n    assignValid(nil)\n    return validateErrs\n  }\n\n  function assignValid(_await: Code = def.async ? _`await ` : nil): void {\n    const passCxt = it.opts.passContext ? N.this : N.self\n    const passSchema = !((\"compile\" in def && !$data) || def.schema === false)\n    gen.assign(\n      valid,\n      _`${_await}${callValidateCode(cxt, validateRef, passCxt, passSchema)}`,\n      def.modifying\n    )\n  }\n\n  function reportErrs(errors: () => void): void {\n    gen.if(not(def.valid ?? valid), errors)\n  }\n}\n\nfunction modifyData(cxt: KeywordCxt): void {\n  const {gen, data, it} = cxt\n  gen.if(it.parentData, () => gen.assign(data, _`${it.parentData}[${it.parentDataProperty}]`))\n}\n\nfunction addErrs(cxt: KeywordCxt, errs: Code): void {\n  const {gen} = cxt\n  gen.if(\n    _`Array.isArray(${errs})`,\n    () => {\n      gen\n        .assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`)\n        .assign(N.errors, _`${N.vErrors}.length`)\n      extendErrors(cxt)\n    },\n    () => cxt.error()\n  )\n}\n\nfunction checkAsyncKeyword({schemaEnv}: SchemaObjCxt, def: FuncKeywordDefinition): void {\n  if (def.async && !schemaEnv.$async) throw new Error(\"async keyword in sync schema\")\n}\n\nfunction useKeyword(gen: CodeGen, keyword: string, result?: KeywordCompilationResult): Name {\n  if (result === undefined) throw new Error(`keyword \"${keyword}\" failed to compile`)\n  return gen.scopeValue(\n    \"keyword\",\n    typeof result == \"function\" ? {ref: result} : {ref: result, code: stringify(result)}\n  )\n}\n\nexport function validSchemaType(\n  schema: unknown,\n  schemaType: JSONType[],\n  allowUndefined = false\n): boolean {\n  // TODO add tests\n  return (\n    !schemaType.length ||\n    schemaType.some((st) =>\n      st === \"array\"\n        ? Array.isArray(schema)\n        : st === \"object\"\n        ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n        : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")\n    )\n  )\n}\n\nexport function validateKeywordUsage(\n  {schema, opts, self, errSchemaPath}: SchemaObjCxt,\n  def: AddedKeywordDefinition,\n  keyword: string\n): void {\n  /* istanbul ignore if */\n  if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n    throw new Error(\"ajv implementation error\")\n  }\n\n  const deps = def.dependencies\n  if (deps?.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n    throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`)\n  }\n\n  if (def.validateSchema) {\n    const valid = def.validateSchema(schema[keyword])\n    if (!valid) {\n      const msg =\n        `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n        self.errorsText(def.validateSchema.errors)\n      if (opts.validateSchema === \"log\") self.logger.error(msg)\n      else throw new Error(msg)\n    }\n  }\n}\n","import type {AnySchema} from \"../../types\"\nimport type {SchemaObjCxt} from \"..\"\nimport {_, str, getProperty, Code, Name} from \"../codegen\"\nimport {escapeFragment, getErrorPath, Type} from \"../util\"\nimport type {JSONType} from \"../rules\"\n\nexport interface SubschemaContext {\n  // TODO use Optional? align with SchemCxt property types\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef?: Code\n  errorPath?: Code\n  dataLevel?: number\n  dataTypes?: JSONType[]\n  data?: Name\n  parentData?: Name\n  parentDataProperty?: Code | number\n  dataNames?: Name[]\n  dataPathArr?: (Code | number)[]\n  propertyName?: Name\n  jtdDiscriminator?: string\n  jtdMetadata?: boolean\n  compositeRule?: true\n  createErrors?: boolean\n  allErrors?: boolean\n}\n\nexport type SubschemaArgs = Partial<{\n  keyword: string\n  schemaProp: string | number\n  schema: AnySchema\n  schemaPath: Code\n  errSchemaPath: string\n  topSchemaRef: Code\n  data: Name | Code\n  dataProp: Code | string | number\n  dataTypes: JSONType[]\n  definedProperties: Set<string>\n  propertyName: Name\n  dataPropType: Type\n  jtdDiscriminator: string\n  jtdMetadata: boolean\n  compositeRule: true\n  createErrors: boolean\n  allErrors: boolean\n}>\n\nexport function getSubschema(\n  it: SchemaObjCxt,\n  {keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef}: SubschemaArgs\n): SubschemaContext {\n  if (keyword !== undefined && schema !== undefined) {\n    throw new Error('both \"keyword\" and \"schema\" passed, only one allowed')\n  }\n\n  if (keyword !== undefined) {\n    const sch = it.schema[keyword]\n    return schemaProp === undefined\n      ? {\n          schema: sch,\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        }\n      : {\n          schema: sch[schemaProp],\n          schemaPath: _`${it.schemaPath}${getProperty(keyword)}${getProperty(schemaProp)}`,\n          errSchemaPath: `${it.errSchemaPath}/${keyword}/${escapeFragment(schemaProp)}`,\n        }\n  }\n\n  if (schema !== undefined) {\n    if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n      throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"')\n    }\n    return {\n      schema,\n      schemaPath,\n      topSchemaRef,\n      errSchemaPath,\n    }\n  }\n\n  throw new Error('either \"keyword\" or \"schema\" must be passed')\n}\n\nexport function extendSubschemaData(\n  subschema: SubschemaContext,\n  it: SchemaObjCxt,\n  {dataProp, dataPropType: dpType, data, dataTypes, propertyName}: SubschemaArgs\n): void {\n  if (data !== undefined && dataProp !== undefined) {\n    throw new Error('both \"data\" and \"dataProp\" passed, only one allowed')\n  }\n\n  const {gen} = it\n\n  if (dataProp !== undefined) {\n    const {errorPath, dataPathArr, opts} = it\n    const nextData = gen.let(\"data\", _`${it.data}${getProperty(dataProp)}`, true)\n    dataContextProps(nextData)\n    subschema.errorPath = str`${errorPath}${getErrorPath(dataProp, dpType, opts.jsPropertySyntax)}`\n    subschema.parentDataProperty = _`${dataProp}`\n    subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty]\n  }\n\n  if (data !== undefined) {\n    const nextData = data instanceof Name ? data : gen.let(\"data\", data, true) // replaceable if used once?\n    dataContextProps(nextData)\n    if (propertyName !== undefined) subschema.propertyName = propertyName\n    // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n  }\n\n  if (dataTypes) subschema.dataTypes = dataTypes\n\n  function dataContextProps(_nextData: Name): void {\n    subschema.data = _nextData\n    subschema.dataLevel = it.dataLevel + 1\n    subschema.dataTypes = []\n    it.definedProperties = new Set<string>()\n    subschema.parentData = it.data\n    subschema.dataNames = [...it.dataNames, _nextData]\n  }\n}\n\nexport function extendSubschemaMode(\n  subschema: SubschemaContext,\n  {jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors}: SubschemaArgs\n): void {\n  if (compositeRule !== undefined) subschema.compositeRule = compositeRule\n  if (createErrors !== undefined) subschema.createErrors = createErrors\n  if (allErrors !== undefined) subschema.allErrors = allErrors\n  subschema.jtdDiscriminator = jtdDiscriminator // not inherited\n  subschema.jtdMetadata = jtdMetadata // not inherited\n}\n","export {\n  Format,\n  FormatDefinition,\n  AsyncFormatDefinition,\n  KeywordDefinition,\n  KeywordErrorDefinition,\n  CodeKeywordDefinition,\n  MacroKeywordDefinition,\n  FuncKeywordDefinition,\n  Vocabulary,\n  Schema,\n  SchemaObject,\n  AnySchemaObject,\n  AsyncSchema,\n  AnySchema,\n  ValidateFunction,\n  AsyncValidateFunction,\n  AnyValidateFunction,\n  ErrorObject,\n  ErrorNoParams,\n} from \"./types\"\n\nexport {SchemaCxt, SchemaObjCxt} from \"./compile\"\nexport interface Plugin<Opts> {\n  (ajv: Ajv, options?: Opts): Ajv\n  [prop: string]: any\n}\n\nexport {KeywordCxt} from \"./compile/validate\"\nexport {DefinedError} from \"./vocabularies/errors\"\nexport {JSONType} from \"./compile/rules\"\nexport {JSONSchemaType} from \"./types/json-schema\"\nexport {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nexport {_, str, stringify, nil, Name, Code, CodeGen, CodeGenOptions} from \"./compile/codegen\"\n\nimport type {\n  Schema,\n  AnySchema,\n  AnySchemaObject,\n  SchemaObject,\n  AsyncSchema,\n  Vocabulary,\n  KeywordDefinition,\n  AddedKeywordDefinition,\n  AnyValidateFunction,\n  ValidateFunction,\n  AsyncValidateFunction,\n  ErrorObject,\n  Format,\n  AddedFormat,\n  RegExpEngine,\n  UriResolver,\n} from \"./types\"\nimport type {JSONSchemaType} from \"./types/json-schema\"\nimport type {JTDSchemaType, SomeJTDSchemaType, JTDDataType} from \"./types/jtd-schema\"\nimport ValidationError from \"./runtime/validation_error\"\nimport MissingRefError from \"./compile/ref_error\"\nimport {getRules, ValidationRules, Rule, RuleGroup, JSONType} from \"./compile/rules\"\nimport {SchemaEnv, compileSchema, resolveSchema} from \"./compile\"\nimport {Code, ValueScope} from \"./compile/codegen\"\nimport {normalizeId, getSchemaRefs} from \"./compile/resolve\"\nimport {getJSONTypes} from \"./compile/validate/dataType\"\nimport {eachItem} from \"./compile/util\"\nimport * as $dataRefSchema from \"./refs/data.json\"\n\nimport DefaultUriResolver from \"./runtime/uri\"\n\nconst defaultRegExp: RegExpEngine = (str, flags) => new RegExp(str, flags)\ndefaultRegExp.code = \"new RegExp\"\n\nconst META_IGNORE_OPTIONS: (keyof Options)[] = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"]\nconst EXT_SCOPE_NAMES = new Set([\n  \"validate\",\n  \"serialize\",\n  \"parse\",\n  \"wrapper\",\n  \"root\",\n  \"schema\",\n  \"keyword\",\n  \"pattern\",\n  \"formats\",\n  \"validate$data\",\n  \"func\",\n  \"obj\",\n  \"Error\",\n])\n\nexport type Options = CurrentOptions & DeprecatedOptions\n\nexport interface CurrentOptions {\n  // strict mode options (NEW)\n  strict?: boolean | \"log\"\n  strictSchema?: boolean | \"log\"\n  strictNumbers?: boolean | \"log\"\n  strictTypes?: boolean | \"log\"\n  strictTuples?: boolean | \"log\"\n  strictRequired?: boolean | \"log\"\n  allowMatchingProperties?: boolean // disables a strict mode restriction\n  allowUnionTypes?: boolean\n  validateFormats?: boolean\n  // validation and reporting options:\n  $data?: boolean\n  allErrors?: boolean\n  verbose?: boolean\n  discriminator?: boolean\n  unicodeRegExp?: boolean\n  timestamp?: \"string\" | \"date\" // JTD only\n  parseDate?: boolean // JTD only\n  allowDate?: boolean // JTD only\n  $comment?:\n    | true\n    | ((comment: string, schemaPath?: string, rootSchema?: AnySchemaObject) => unknown)\n  formats?: {[Name in string]?: Format}\n  keywords?: Vocabulary\n  schemas?: AnySchema[] | {[Key in string]?: AnySchema}\n  logger?: Logger | false\n  loadSchema?: (uri: string) => Promise<AnySchemaObject>\n  // options to modify validated data:\n  removeAdditional?: boolean | \"all\" | \"failing\"\n  useDefaults?: boolean | \"empty\"\n  coerceTypes?: boolean | \"array\"\n  // advanced options:\n  next?: boolean // NEW\n  unevaluated?: boolean // NEW\n  dynamicRef?: boolean // NEW\n  schemaId?: \"id\" | \"$id\"\n  jtd?: boolean // NEW\n  meta?: SchemaObject | boolean\n  defaultMeta?: string | AnySchemaObject\n  validateSchema?: boolean | \"log\"\n  addUsedSchema?: boolean\n  inlineRefs?: boolean | number\n  passContext?: boolean\n  loopRequired?: number\n  loopEnum?: number // NEW\n  ownProperties?: boolean\n  multipleOfPrecision?: number\n  int32range?: boolean // JTD only\n  messages?: boolean\n  code?: CodeOptions // NEW\n  uriResolver?: UriResolver\n}\n\nexport interface CodeOptions {\n  es5?: boolean\n  esm?: boolean\n  lines?: boolean\n  optimize?: boolean | number\n  formats?: Code // code to require (or construct) map of available formats - for standalone code\n  source?: boolean\n  process?: (code: string, schema?: SchemaEnv) => string\n  regExp?: RegExpEngine\n}\n\ninterface InstanceCodeOptions extends CodeOptions {\n  regExp: RegExpEngine\n  optimize: number\n}\n\ninterface DeprecatedOptions {\n  /** @deprecated */\n  ignoreKeywordsWithRef?: boolean\n  /** @deprecated */\n  jsPropertySyntax?: boolean // added instead of jsonPointers\n  /** @deprecated */\n  unicode?: boolean\n}\n\ninterface RemovedOptions {\n  format?: boolean\n  errorDataPath?: \"object\" | \"property\"\n  nullable?: boolean // \"nullable\" keyword is supported by default\n  jsonPointers?: boolean\n  extendRefs?: true | \"ignore\" | \"fail\"\n  missingRefs?: true | \"ignore\" | \"fail\"\n  processCode?: (code: string, schema?: SchemaEnv) => string\n  sourceCode?: boolean\n  strictDefaults?: boolean\n  strictKeywords?: boolean\n  uniqueItems?: boolean\n  unknownFormats?: true | string[] | \"ignore\"\n  cache?: any\n  serialize?: (schema: AnySchema) => unknown\n  ajvErrors?: boolean\n}\n\ntype OptionsInfo<T extends RemovedOptions | DeprecatedOptions> = {\n  [K in keyof T]-?: string | undefined\n}\n\nconst removedOptions: OptionsInfo<RemovedOptions> = {\n  errorDataPath: \"\",\n  format: \"`validateFormats: false` can be used instead.\",\n  nullable: '\"nullable\" keyword is supported by default.',\n  jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n  extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n  missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n  processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n  sourceCode: \"Use option `code: {source: true}`\",\n  strictDefaults: \"It is default now, see option `strict`.\",\n  strictKeywords: \"It is default now, see option `strict`.\",\n  uniqueItems: '\"uniqueItems\" keyword is always validated.',\n  unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n  cache: \"Map is used as cache, schema object as key.\",\n  serialize: \"Map is used as cache, schema object as key.\",\n  ajvErrors: \"It is default now.\",\n}\n\nconst deprecatedOptions: OptionsInfo<DeprecatedOptions> = {\n  ignoreKeywordsWithRef: \"\",\n  jsPropertySyntax: \"\",\n  unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n}\n\ntype RequiredInstanceOptions = {\n  [K in\n    | \"strictSchema\"\n    | \"strictNumbers\"\n    | \"strictTypes\"\n    | \"strictTuples\"\n    | \"strictRequired\"\n    | \"inlineRefs\"\n    | \"loopRequired\"\n    | \"loopEnum\"\n    | \"meta\"\n    | \"messages\"\n    | \"schemaId\"\n    | \"addUsedSchema\"\n    | \"validateSchema\"\n    | \"validateFormats\"\n    | \"int32range\"\n    | \"unicodeRegExp\"\n    | \"uriResolver\"]: NonNullable<Options[K]>\n} & {code: InstanceCodeOptions}\n\nexport type InstanceOptions = Options & RequiredInstanceOptions\n\nconst MAX_EXPRESSION = 200\n\n// eslint-disable-next-line complexity\nfunction requiredOptions(o: Options): RequiredInstanceOptions {\n  const s = o.strict\n  const _optz = o.code?.optimize\n  const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0\n  const regExp = o.code?.regExp ?? defaultRegExp\n  const uriResolver = o.uriResolver ?? DefaultUriResolver\n  return {\n    strictSchema: o.strictSchema ?? s ?? true,\n    strictNumbers: o.strictNumbers ?? s ?? true,\n    strictTypes: o.strictTypes ?? s ?? \"log\",\n    strictTuples: o.strictTuples ?? s ?? \"log\",\n    strictRequired: o.strictRequired ?? s ?? false,\n    code: o.code ? {...o.code, optimize, regExp} : {optimize, regExp},\n    loopRequired: o.loopRequired ?? MAX_EXPRESSION,\n    loopEnum: o.loopEnum ?? MAX_EXPRESSION,\n    meta: o.meta ?? true,\n    messages: o.messages ?? true,\n    inlineRefs: o.inlineRefs ?? true,\n    schemaId: o.schemaId ?? \"$id\",\n    addUsedSchema: o.addUsedSchema ?? true,\n    validateSchema: o.validateSchema ?? true,\n    validateFormats: o.validateFormats ?? true,\n    unicodeRegExp: o.unicodeRegExp ?? true,\n    int32range: o.int32range ?? true,\n    uriResolver: uriResolver,\n  }\n}\n\nexport interface Logger {\n  log(...args: unknown[]): unknown\n  warn(...args: unknown[]): unknown\n  error(...args: unknown[]): unknown\n}\n\nexport default class Ajv {\n  opts: InstanceOptions\n  errors?: ErrorObject[] | null // errors from the last validation\n  logger: Logger\n  // shared external scope values for compiled functions\n  readonly scope: ValueScope\n  readonly schemas: {[Key in string]?: SchemaEnv} = {}\n  readonly refs: {[Ref in string]?: SchemaEnv | string} = {}\n  readonly formats: {[Name in string]?: AddedFormat} = {}\n  readonly RULES: ValidationRules\n  readonly _compilations: Set<SchemaEnv> = new Set()\n  private readonly _loading: {[Ref in string]?: Promise<AnySchemaObject>} = {}\n  private readonly _cache: Map<AnySchema, SchemaEnv> = new Map()\n  private readonly _metaOpts: InstanceOptions\n\n  static ValidationError = ValidationError\n  static MissingRefError = MissingRefError\n\n  constructor(opts: Options = {}) {\n    opts = this.opts = {...opts, ...requiredOptions(opts)}\n    const {es5, lines} = this.opts.code\n\n    this.scope = new ValueScope({scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines})\n    this.logger = getLogger(opts.logger)\n    const formatOpt = opts.validateFormats\n    opts.validateFormats = false\n\n    this.RULES = getRules()\n    checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\")\n    checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\")\n    this._metaOpts = getMetaSchemaOptions.call(this)\n\n    if (opts.formats) addInitialFormats.call(this)\n    this._addVocabularies()\n    this._addDefaultMetaSchema()\n    if (opts.keywords) addInitialKeywords.call(this, opts.keywords)\n    if (typeof opts.meta == \"object\") this.addMetaSchema(opts.meta)\n    addInitialSchemas.call(this)\n    opts.validateFormats = formatOpt\n  }\n\n  _addVocabularies(): void {\n    this.addKeyword(\"$async\")\n  }\n\n  _addDefaultMetaSchema(): void {\n    const {$data, meta, schemaId} = this.opts\n    let _dataRefSchema: SchemaObject = $dataRefSchema\n    if (schemaId === \"id\") {\n      _dataRefSchema = {...$dataRefSchema}\n      _dataRefSchema.id = _dataRefSchema.$id\n      delete _dataRefSchema.$id\n    }\n    if (meta && $data) this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false)\n  }\n\n  defaultMeta(): string | AnySchemaObject | undefined {\n    const {meta, schemaId} = this.opts\n    return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined)\n  }\n\n  // Validate data using schema\n  // AnySchema will be compiled and cached using schema itself as a key for Map\n  validate(schema: Schema | string, data: unknown): boolean\n  validate(schemaKeyRef: AnySchema | string, data: unknown): boolean | Promise<unknown>\n  validate<T>(schema: Schema | JSONSchemaType<T> | string, data: unknown): data is T\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  validate<T>(schema: JTDSchemaType<T>, data: unknown): data is T\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  validate<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    data: unknown\n  ): data is JTDDataType<T>\n  // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  validate<T>(schema: AsyncSchema, data: unknown | T): Promise<T>\n  validate<T>(schemaKeyRef: AnySchema | string, data: unknown): data is T | Promise<T>\n  validate<T>(\n    schemaKeyRef: AnySchema | string, // key, ref or schema object\n    // eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n    data: unknown | T // to be validated\n  ): boolean | Promise<T> {\n    let v: AnyValidateFunction | undefined\n    if (typeof schemaKeyRef == \"string\") {\n      v = this.getSchema<T>(schemaKeyRef)\n      if (!v) throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`)\n    } else {\n      v = this.compile<T>(schemaKeyRef)\n    }\n\n    const valid = v(data)\n    if (!(\"$async\" in v)) this.errors = v.errors\n    return valid\n  }\n\n  // Create validation function for passed schema\n  // _meta: true if schema is a meta-schema. Used internally to compile meta schemas of user-defined keywords.\n  compile<T = unknown>(schema: Schema | JSONSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compile<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): ValidateFunction<T>\n  // This overload is only intended for typescript inference, the first\n  // argument prevents manual type annotation from matching this overload\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  compile<N extends never, T extends SomeJTDSchemaType>(\n    schema: T,\n    _meta?: boolean\n  ): ValidateFunction<JTDDataType<T>>\n  compile<T = unknown>(schema: AsyncSchema, _meta?: boolean): AsyncValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T>\n  compile<T = unknown>(schema: AnySchema, _meta?: boolean): AnyValidateFunction<T> {\n    const sch = this._addSchema(schema, _meta)\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T>\n  }\n\n  // Creates validating function for passed schema with asynchronous loading of missing schemas.\n  // `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n  // TODO allow passing schema URI\n  // meta - optional true to compile meta-schema\n  compileAsync<T = unknown>(\n    schema: SchemaObject | JSONSchemaType<T>,\n    _meta?: boolean\n  ): Promise<ValidateFunction<T>>\n  // Separated for type inference to work\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(schema: JTDSchemaType<T>, _meta?: boolean): Promise<ValidateFunction<T>>\n  compileAsync<T = unknown>(schema: AsyncSchema, meta?: boolean): Promise<AsyncValidateFunction<T>>\n  // eslint-disable-next-line @typescript-eslint/unified-signatures\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>>\n  compileAsync<T = unknown>(\n    schema: AnySchemaObject,\n    meta?: boolean\n  ): Promise<AnyValidateFunction<T>> {\n    if (typeof this.opts.loadSchema != \"function\") {\n      throw new Error(\"options.loadSchema should be a function\")\n    }\n    const {loadSchema} = this.opts\n    return runCompileAsync.call(this, schema, meta)\n\n    async function runCompileAsync(\n      this: Ajv,\n      _schema: AnySchemaObject,\n      _meta?: boolean\n    ): Promise<AnyValidateFunction> {\n      await loadMetaSchema.call(this, _schema.$schema)\n      const sch = this._addSchema(_schema, _meta)\n      return sch.validate || _compileAsync.call(this, sch)\n    }\n\n    async function loadMetaSchema(this: Ajv, $ref?: string): Promise<void> {\n      if ($ref && !this.getSchema($ref)) {\n        await runCompileAsync.call(this, {$ref}, true)\n      }\n    }\n\n    async function _compileAsync(this: Ajv, sch: SchemaEnv): Promise<AnyValidateFunction> {\n      try {\n        return this._compileSchemaEnv(sch)\n      } catch (e) {\n        if (!(e instanceof MissingRefError)) throw e\n        checkLoaded.call(this, e)\n        await loadMissingSchema.call(this, e.missingSchema)\n        return _compileAsync.call(this, sch)\n      }\n    }\n\n    function checkLoaded(this: Ajv, {missingSchema: ref, missingRef}: MissingRefError): void {\n      if (this.refs[ref]) {\n        throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`)\n      }\n    }\n\n    async function loadMissingSchema(this: Ajv, ref: string): Promise<void> {\n      const _schema = await _loadSchema.call(this, ref)\n      if (!this.refs[ref]) await loadMetaSchema.call(this, _schema.$schema)\n      if (!this.refs[ref]) this.addSchema(_schema, ref, meta)\n    }\n\n    async function _loadSchema(this: Ajv, ref: string): Promise<AnySchemaObject> {\n      const p = this._loading[ref]\n      if (p) return p\n      try {\n        return await (this._loading[ref] = loadSchema(ref))\n      } finally {\n        delete this._loading[ref]\n      }\n    }\n  }\n\n  // Adds schema to the instance\n  addSchema(\n    schema: AnySchema | AnySchema[], // If array is passed, `key` will be ignored\n    key?: string, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta?: boolean, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n  ): Ajv {\n    if (Array.isArray(schema)) {\n      for (const sch of schema) this.addSchema(sch, undefined, _meta, _validateSchema)\n      return this\n    }\n    let id: string | undefined\n    if (typeof schema === \"object\") {\n      const {schemaId} = this.opts\n      id = schema[schemaId]\n      if (id !== undefined && typeof id != \"string\") {\n        throw new Error(`schema ${schemaId} must be string`)\n      }\n    }\n    key = normalizeId(key || id)\n    this._checkUnique(key)\n    this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true)\n    return this\n  }\n\n  // Add schema that will be used to validate other schemas\n  // options in META_IGNORE_OPTIONS are alway set to false\n  addMetaSchema(\n    schema: AnySchemaObject,\n    key?: string, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n  ): Ajv {\n    this.addSchema(schema, key, true, _validateSchema)\n    return this\n  }\n\n  //  Validate schema against its meta-schema\n  validateSchema(schema: AnySchema, throwOrLogError?: boolean): boolean | Promise<unknown> {\n    if (typeof schema == \"boolean\") return true\n    let $schema: string | AnySchemaObject | undefined\n    $schema = schema.$schema\n    if ($schema !== undefined && typeof $schema != \"string\") {\n      throw new Error(\"$schema must be a string\")\n    }\n    $schema = $schema || this.opts.defaultMeta || this.defaultMeta()\n    if (!$schema) {\n      this.logger.warn(\"meta-schema not available\")\n      this.errors = null\n      return true\n    }\n    const valid = this.validate($schema, schema)\n    if (!valid && throwOrLogError) {\n      const message = \"schema is invalid: \" + this.errorsText()\n      if (this.opts.validateSchema === \"log\") this.logger.error(message)\n      else throw new Error(message)\n    }\n    return valid\n  }\n\n  // Get compiled schema by `key` or `ref`.\n  // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n  getSchema<T = unknown>(keyRef: string): AnyValidateFunction<T> | undefined {\n    let sch\n    while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\") keyRef = sch\n    if (sch === undefined) {\n      const {schemaId} = this.opts\n      const root = new SchemaEnv({schema: {}, schemaId})\n      sch = resolveSchema.call(this, root, keyRef)\n      if (!sch) return\n      this.refs[keyRef] = sch\n    }\n    return (sch.validate || this._compileSchemaEnv(sch)) as AnyValidateFunction<T> | undefined\n  }\n\n  // Remove cached schema(s).\n  // If no parameter is passed all schemas but meta-schemas are removed.\n  // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n  // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n  removeSchema(schemaKeyRef?: AnySchema | string | RegExp): Ajv {\n    if (schemaKeyRef instanceof RegExp) {\n      this._removeAllSchemas(this.schemas, schemaKeyRef)\n      this._removeAllSchemas(this.refs, schemaKeyRef)\n      return this\n    }\n    switch (typeof schemaKeyRef) {\n      case \"undefined\":\n        this._removeAllSchemas(this.schemas)\n        this._removeAllSchemas(this.refs)\n        this._cache.clear()\n        return this\n      case \"string\": {\n        const sch = getSchEnv.call(this, schemaKeyRef)\n        if (typeof sch == \"object\") this._cache.delete(sch.schema)\n        delete this.schemas[schemaKeyRef]\n        delete this.refs[schemaKeyRef]\n        return this\n      }\n      case \"object\": {\n        const cacheKey = schemaKeyRef\n        this._cache.delete(cacheKey)\n        let id = schemaKeyRef[this.opts.schemaId]\n        if (id) {\n          id = normalizeId(id)\n          delete this.schemas[id]\n          delete this.refs[id]\n        }\n        return this\n      }\n      default:\n        throw new Error(\"ajv.removeSchema: invalid parameter\")\n    }\n  }\n\n  // add \"vocabulary\" - a collection of keywords\n  addVocabulary(definitions: Vocabulary): Ajv {\n    for (const def of definitions) this.addKeyword(def)\n    return this\n  }\n\n  addKeyword(\n    kwdOrDef: string | KeywordDefinition,\n    def?: KeywordDefinition // deprecated\n  ): Ajv {\n    let keyword: string | string[]\n    if (typeof kwdOrDef == \"string\") {\n      keyword = kwdOrDef\n      if (typeof def == \"object\") {\n        this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\")\n        def.keyword = keyword\n      }\n    } else if (typeof kwdOrDef == \"object\" && def === undefined) {\n      def = kwdOrDef\n      keyword = def.keyword\n      if (Array.isArray(keyword) && !keyword.length) {\n        throw new Error(\"addKeywords: keyword must be string or non-empty array\")\n      }\n    } else {\n      throw new Error(\"invalid addKeywords parameters\")\n    }\n\n    checkKeyword.call(this, keyword, def)\n    if (!def) {\n      eachItem(keyword, (kwd) => addRule.call(this, kwd))\n      return this\n    }\n    keywordMetaschema.call(this, def)\n    const definition: AddedKeywordDefinition = {\n      ...def,\n      type: getJSONTypes(def.type),\n      schemaType: getJSONTypes(def.schemaType),\n    }\n    eachItem(\n      keyword,\n      definition.type.length === 0\n        ? (k) => addRule.call(this, k, definition)\n        : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t))\n    )\n    return this\n  }\n\n  getKeyword(keyword: string): AddedKeywordDefinition | boolean {\n    const rule = this.RULES.all[keyword]\n    return typeof rule == \"object\" ? rule.definition : !!rule\n  }\n\n  // Remove keyword\n  removeKeyword(keyword: string): Ajv {\n    // TODO return type should be Ajv\n    const {RULES} = this\n    delete RULES.keywords[keyword]\n    delete RULES.all[keyword]\n    for (const group of RULES.rules) {\n      const i = group.rules.findIndex((rule) => rule.keyword === keyword)\n      if (i >= 0) group.rules.splice(i, 1)\n    }\n    return this\n  }\n\n  // Add format\n  addFormat(name: string, format: Format): Ajv {\n    if (typeof format == \"string\") format = new RegExp(format)\n    this.formats[name] = format\n    return this\n  }\n\n  errorsText(\n    errors: ErrorObject[] | null | undefined = this.errors, // optional array of validation errors\n    {separator = \", \", dataVar = \"data\"}: ErrorsTextOptions = {} // optional options with properties `separator` and `dataVar`\n  ): string {\n    if (!errors || errors.length === 0) return \"No errors\"\n    return errors\n      .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n      .reduce((text, msg) => text + separator + msg)\n  }\n\n  $dataMetaSchema(metaSchema: AnySchemaObject, keywordsJsonPointers: string[]): AnySchemaObject {\n    const rules = this.RULES.all\n    metaSchema = JSON.parse(JSON.stringify(metaSchema))\n    for (const jsonPointer of keywordsJsonPointers) {\n      const segments = jsonPointer.split(\"/\").slice(1) // first segment is an empty string\n      let keywords = metaSchema\n      for (const seg of segments) keywords = keywords[seg] as AnySchemaObject\n\n      for (const key in rules) {\n        const rule = rules[key]\n        if (typeof rule != \"object\") continue\n        const {$data} = rule.definition\n        const schema = keywords[key] as AnySchemaObject | undefined\n        if ($data && schema) keywords[key] = schemaOrData(schema)\n      }\n    }\n\n    return metaSchema\n  }\n\n  private _removeAllSchemas(schemas: {[Ref in string]?: SchemaEnv | string}, regex?: RegExp): void {\n    for (const keyRef in schemas) {\n      const sch = schemas[keyRef]\n      if (!regex || regex.test(keyRef)) {\n        if (typeof sch == \"string\") {\n          delete schemas[keyRef]\n        } else if (sch && !sch.meta) {\n          this._cache.delete(sch.schema)\n          delete schemas[keyRef]\n        }\n      }\n    }\n  }\n\n  _addSchema(\n    schema: AnySchema,\n    meta?: boolean,\n    baseId?: string,\n    validateSchema = this.opts.validateSchema,\n    addSchema = this.opts.addUsedSchema\n  ): SchemaEnv {\n    let id: string | undefined\n    const {schemaId} = this.opts\n    if (typeof schema == \"object\") {\n      id = schema[schemaId]\n    } else {\n      if (this.opts.jtd) throw new Error(\"schema must be object\")\n      else if (typeof schema != \"boolean\") throw new Error(\"schema must be object or boolean\")\n    }\n    let sch = this._cache.get(schema)\n    if (sch !== undefined) return sch\n\n    baseId = normalizeId(id || baseId)\n    const localRefs = getSchemaRefs.call(this, schema, baseId)\n    sch = new SchemaEnv({schema, schemaId, meta, baseId, localRefs})\n    this._cache.set(sch.schema, sch)\n    if (addSchema && !baseId.startsWith(\"#\")) {\n      // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n      if (baseId) this._checkUnique(baseId)\n      this.refs[baseId] = sch\n    }\n    if (validateSchema) this.validateSchema(schema, true)\n    return sch\n  }\n\n  private _checkUnique(id: string): void {\n    if (this.schemas[id] || this.refs[id]) {\n      throw new Error(`schema with key or id \"${id}\" already exists`)\n    }\n  }\n\n  private _compileSchemaEnv(sch: SchemaEnv): AnyValidateFunction {\n    if (sch.meta) this._compileMetaSchema(sch)\n    else compileSchema.call(this, sch)\n\n    /* istanbul ignore if */\n    if (!sch.validate) throw new Error(\"ajv implementation error\")\n    return sch.validate\n  }\n\n  private _compileMetaSchema(sch: SchemaEnv): void {\n    const currentOpts = this.opts\n    this.opts = this._metaOpts\n    try {\n      compileSchema.call(this, sch)\n    } finally {\n      this.opts = currentOpts\n    }\n  }\n}\n\nexport interface ErrorsTextOptions {\n  separator?: string\n  dataVar?: string\n}\n\nfunction checkOptions(\n  this: Ajv,\n  checkOpts: OptionsInfo<RemovedOptions | DeprecatedOptions>,\n  options: Options & RemovedOptions,\n  msg: string,\n  log: \"warn\" | \"error\" = \"error\"\n): void {\n  for (const key in checkOpts) {\n    const opt = key as keyof typeof checkOpts\n    if (opt in options) this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`)\n  }\n}\n\nfunction getSchEnv(this: Ajv, keyRef: string): SchemaEnv | string | undefined {\n  keyRef = normalizeId(keyRef) // TODO tests fail without this line\n  return this.schemas[keyRef] || this.refs[keyRef]\n}\n\nfunction addInitialSchemas(this: Ajv): void {\n  const optsSchemas = this.opts.schemas\n  if (!optsSchemas) return\n  if (Array.isArray(optsSchemas)) this.addSchema(optsSchemas)\n  else for (const key in optsSchemas) this.addSchema(optsSchemas[key] as AnySchema, key)\n}\n\nfunction addInitialFormats(this: Ajv): void {\n  for (const name in this.opts.formats) {\n    const format = this.opts.formats[name]\n    if (format) this.addFormat(name, format)\n  }\n}\n\nfunction addInitialKeywords(\n  this: Ajv,\n  defs: Vocabulary | {[K in string]?: KeywordDefinition}\n): void {\n  if (Array.isArray(defs)) {\n    this.addVocabulary(defs)\n    return\n  }\n  this.logger.warn(\"keywords option as map is deprecated, pass array\")\n  for (const keyword in defs) {\n    const def = defs[keyword] as KeywordDefinition\n    if (!def.keyword) def.keyword = keyword\n    this.addKeyword(def)\n  }\n}\n\nfunction getMetaSchemaOptions(this: Ajv): InstanceOptions {\n  const metaOpts = {...this.opts}\n  for (const opt of META_IGNORE_OPTIONS) delete metaOpts[opt]\n  return metaOpts\n}\n\nconst noLogs = {log() {}, warn() {}, error() {}}\n\nfunction getLogger(logger?: Partial<Logger> | false): Logger {\n  if (logger === false) return noLogs\n  if (logger === undefined) return console\n  if (logger.log && logger.warn && logger.error) return logger as Logger\n  throw new Error(\"logger must implement log, warn and error methods\")\n}\n\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i\n\nfunction checkKeyword(this: Ajv, keyword: string | string[], def?: KeywordDefinition): void {\n  const {RULES} = this\n  eachItem(keyword, (kwd) => {\n    if (RULES.keywords[kwd]) throw new Error(`Keyword ${kwd} is already defined`)\n    if (!KEYWORD_NAME.test(kwd)) throw new Error(`Keyword ${kwd} has invalid name`)\n  })\n  if (!def) return\n  if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n    throw new Error('$data keyword must have \"code\" or \"validate\" function')\n  }\n}\n\nfunction addRule(\n  this: Ajv,\n  keyword: string,\n  definition?: AddedKeywordDefinition,\n  dataType?: JSONType\n): void {\n  const post = definition?.post\n  if (dataType && post) throw new Error('keyword with \"post\" flag cannot have \"type\"')\n  const {RULES} = this\n  let ruleGroup = post ? RULES.post : RULES.rules.find(({type: t}) => t === dataType)\n  if (!ruleGroup) {\n    ruleGroup = {type: dataType, rules: []}\n    RULES.rules.push(ruleGroup)\n  }\n  RULES.keywords[keyword] = true\n  if (!definition) return\n\n  const rule: Rule = {\n    keyword,\n    definition: {\n      ...definition,\n      type: getJSONTypes(definition.type),\n      schemaType: getJSONTypes(definition.schemaType),\n    },\n  }\n  if (definition.before) addBeforeRule.call(this, ruleGroup, rule, definition.before)\n  else ruleGroup.rules.push(rule)\n  RULES.all[keyword] = rule\n  definition.implements?.forEach((kwd) => this.addKeyword(kwd))\n}\n\nfunction addBeforeRule(this: Ajv, ruleGroup: RuleGroup, rule: Rule, before: string): void {\n  const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before)\n  if (i >= 0) {\n    ruleGroup.rules.splice(i, 0, rule)\n  } else {\n    ruleGroup.rules.push(rule)\n    this.logger.warn(`rule ${before} is not defined`)\n  }\n}\n\nfunction keywordMetaschema(this: Ajv, def: KeywordDefinition): void {\n  let {metaSchema} = def\n  if (metaSchema === undefined) return\n  if (def.$data && this.opts.$data) metaSchema = schemaOrData(metaSchema)\n  def.validateSchema = this.compile(metaSchema, true)\n}\n\nconst $dataRef = {\n  $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n}\n\nfunction schemaOrData(schema: AnySchema): AnySchemaObject {\n  return {anyOf: [schema, $dataRef]}\n}\n","// https://github.com/ajv-validator/ajv/issues/889\nimport * as equal from \"fast-deep-equal\"\n\ntype Equal = typeof equal & {code: string}\n;(equal as Equal).code = 'require(\"ajv/dist/runtime/equal\").default'\n\nexport default equal as Equal\n","// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nexport default function ucs2length(str: string): number {\n  const len = str.length\n  let length = 0\n  let pos = 0\n  let value: number\n  while (pos < len) {\n    length++\n    value = str.charCodeAt(pos++)\n    if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos)\n      if ((value & 0xfc00) === 0xdc00) pos++ // low surrogate\n    }\n  }\n  return length\n}\n\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default'\n","import * as uri from \"fast-uri\"\n\ntype URI = typeof uri & {code: string}\n;(uri as URI).code = 'require(\"ajv/dist/runtime/uri\").default'\n\nexport default uri as URI\n","import type {ErrorObject} from \"../types\"\n\nexport default class ValidationError extends Error {\n  readonly errors: Partial<ErrorObject>[]\n  readonly ajv: true\n  readonly validation: true\n\n  constructor(errors: Partial<ErrorObject>[]) {\n    super(\"validation failed\")\n    this.errors = errors\n    this.ajv = this.validation = true\n  }\n}\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type AdditionalItemsError = ErrorObject<\"additionalItems\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"additionalItems\" as const,\n  type: \"array\",\n  schemaType: [\"boolean\", \"object\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {parentSchema, it} = cxt\n    const {items} = parentSchema\n    if (!Array.isArray(items)) {\n      checkStrictMode(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas')\n      return\n    }\n    validateAdditionalItems(cxt, items)\n  },\n}\n\nexport function validateAdditionalItems(cxt: KeywordCxt, items: AnySchema[]): void {\n  const {gen, schema, data, keyword, it} = cxt\n  it.items = true\n  const len = gen.const(\"len\", _`${data}.length`)\n  if (schema === false) {\n    cxt.setParams({len: items.length})\n    cxt.pass(_`${len} <= ${items.length}`)\n  } else if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n    const valid = gen.var(\"valid\", _`${len} <= ${items.length}`) // TODO var\n    gen.if(not(valid), () => validateItems(valid))\n    cxt.ok(valid)\n  }\n\n  function validateItems(valid: Name): void {\n    gen.forRange(\"i\", items.length, len, (i) => {\n      cxt.subschema({keyword, dataProp: i, dataPropType: Type.Num}, valid)\n      if (!it.allErrors) gen.if(not(valid), () => gen.break())\n    })\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  AddedKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport {allSchemaProperties, usePattern, isOwnProperty} from \"../code\"\nimport {_, nil, or, not, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport type {SubschemaArgs} from \"../../compile/validate/subschema\"\nimport {alwaysValidSchema, schemaRefOrVal, Type} from \"../../compile/util\"\n\nexport type AdditionalPropertiesError = ErrorObject<\n  \"additionalProperties\",\n  {additionalProperty: string},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must NOT have additional properties\",\n  params: ({params}) => _`{additionalProperty: ${params.additionalProperty}}`,\n}\n\nconst def: CodeKeywordDefinition & AddedKeywordDefinition = {\n  keyword: \"additionalProperties\",\n  type: [\"object\"],\n  schemaType: [\"boolean\", \"object\"],\n  allowUndefined: true,\n  trackErrors: true,\n  error,\n  code(cxt) {\n    const {gen, schema, parentSchema, data, errsCount, it} = cxt\n    /* istanbul ignore if */\n    if (!errsCount) throw new Error(\"ajv implementation error\")\n    const {allErrors, opts} = it\n    it.props = true\n    if (opts.removeAdditional !== \"all\" && alwaysValidSchema(it, schema)) return\n    const props = allSchemaProperties(parentSchema.properties)\n    const patProps = allSchemaProperties(parentSchema.patternProperties)\n    checkAdditionalProperties()\n    cxt.ok(_`${errsCount} === ${N.errors}`)\n\n    function checkAdditionalProperties(): void {\n      gen.forIn(\"key\", data, (key: Name) => {\n        if (!props.length && !patProps.length) additionalPropertyCode(key)\n        else gen.if(isAdditional(key), () => additionalPropertyCode(key))\n      })\n    }\n\n    function isAdditional(key: Name): Code {\n      let definedProp: Code\n      if (props.length > 8) {\n        // TODO maybe an option instead of hard-coded 8?\n        const propsSchema = schemaRefOrVal(it, parentSchema.properties, \"properties\")\n        definedProp = isOwnProperty(gen, propsSchema as Code, key)\n      } else if (props.length) {\n        definedProp = or(...props.map((p) => _`${key} === ${p}`))\n      } else {\n        definedProp = nil\n      }\n      if (patProps.length) {\n        definedProp = or(definedProp, ...patProps.map((p) => _`${usePattern(cxt, p)}.test(${key})`))\n      }\n      return not(definedProp)\n    }\n\n    function deleteAdditional(key: Name): void {\n      gen.code(_`delete ${data}[${key}]`)\n    }\n\n    function additionalPropertyCode(key: Name): void {\n      if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n        deleteAdditional(key)\n        return\n      }\n\n      if (schema === false) {\n        cxt.setParams({additionalProperty: key})\n        cxt.error()\n        if (!allErrors) gen.break()\n        return\n      }\n\n      if (typeof schema == \"object\" && !alwaysValidSchema(it, schema)) {\n        const valid = gen.name(\"valid\")\n        if (opts.removeAdditional === \"failing\") {\n          applyAdditionalSchema(key, valid, false)\n          gen.if(not(valid), () => {\n            cxt.reset()\n            deleteAdditional(key)\n          })\n        } else {\n          applyAdditionalSchema(key, valid)\n          if (!allErrors) gen.if(not(valid), () => gen.break())\n        }\n      }\n    }\n\n    function applyAdditionalSchema(key: Name, valid: Name, errors?: false): void {\n      const subschema: SubschemaArgs = {\n        keyword: \"additionalProperties\",\n        dataProp: key,\n        dataPropType: Type.Str,\n      }\n      if (errors === false) {\n        Object.assign(subschema, {\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        })\n      }\n      cxt.subschema(subschema, valid)\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"allOf\",\n  schemaType: \"array\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    const valid = gen.name(\"valid\")\n    schema.forEach((sch: AnySchema, i: number) => {\n      if (alwaysValidSchema(it, sch)) return\n      const schCxt = cxt.subschema({keyword: \"allOf\", schemaProp: i}, valid)\n      cxt.ok(valid)\n      cxt.mergeEvaluated(schCxt)\n    })\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport {validateUnion} from \"../code\"\n\nexport type AnyOfError = ErrorNoParams<\"anyOf\", AnySchema[]>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"anyOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  code: validateUnion,\n  error: {message: \"must match a schema in anyOf\"},\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode, Type} from \"../../compile/util\"\n\nexport type ContainsError = ErrorObject<\n  \"contains\",\n  {minContains: number; maxContains?: number},\n  AnySchema\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {min, max}}) =>\n    max === undefined\n      ? str`must contain at least ${min} valid item(s)`\n      : str`must contain at least ${min} and no more than ${max} valid item(s)`,\n  params: ({params: {min, max}}) =>\n    max === undefined ? _`{minContains: ${min}}` : _`{minContains: ${min}, maxContains: ${max}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"contains\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    let min: number\n    let max: number | undefined\n    const {minContains, maxContains} = parentSchema\n    if (it.opts.next) {\n      min = minContains === undefined ? 1 : minContains\n      max = maxContains\n    } else {\n      min = 1\n    }\n    const len = gen.const(\"len\", _`${data}.length`)\n    cxt.setParams({min, max})\n    if (max === undefined && min === 0) {\n      checkStrictMode(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`)\n      return\n    }\n    if (max !== undefined && min > max) {\n      checkStrictMode(it, `\"minContains\" > \"maxContains\" is always invalid`)\n      cxt.fail()\n      return\n    }\n    if (alwaysValidSchema(it, schema)) {\n      let cond = _`${len} >= ${min}`\n      if (max !== undefined) cond = _`${cond} && ${len} <= ${max}`\n      cxt.pass(cond)\n      return\n    }\n\n    it.items = true\n    const valid = gen.name(\"valid\")\n    if (max === undefined && min === 1) {\n      validateItems(valid, () => gen.if(valid, () => gen.break()))\n    } else if (min === 0) {\n      gen.let(valid, true)\n      if (max !== undefined) gen.if(_`${data}.length > 0`, validateItemsWithCount)\n    } else {\n      gen.let(valid, false)\n      validateItemsWithCount()\n    }\n    cxt.result(valid, () => cxt.reset())\n\n    function validateItemsWithCount(): void {\n      const schValid = gen.name(\"_valid\")\n      const count = gen.let(\"count\", 0)\n      validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)))\n    }\n\n    function validateItems(_valid: Name, block: () => void): void {\n      gen.forRange(\"i\", 0, len, (i) => {\n        cxt.subschema(\n          {\n            keyword: \"contains\",\n            dataProp: i,\n            dataPropType: Type.Num,\n            compositeRule: true,\n          },\n          _valid\n        )\n        block()\n      })\n    }\n\n    function checkLimits(count: Name): void {\n      gen.code(_`${count}++`)\n      if (max === undefined) {\n        gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true).break())\n      } else {\n        gen.if(_`${count} > ${max}`, () => gen.assign(valid, false).break())\n        if (min === 1) gen.assign(valid, true)\n        else gen.if(_`${count} >= ${min}`, () => gen.assign(valid, true))\n      }\n    }\n  },\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  SchemaMap,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {checkReportMissingProp, checkMissingProp, reportMissingProp, propertyInData} from \"../code\"\n\nexport type PropertyDependencies = {[K in string]?: string[]}\n\nexport interface DependenciesErrorParams {\n  property: string\n  missingProperty: string\n  depsCount: number\n  deps: string // TODO change to string[]\n}\n\ntype SchemaDependencies = SchemaMap\n\nexport type DependenciesError = ErrorObject<\n  \"dependencies\",\n  DependenciesErrorParams,\n  {[K in string]?: string[] | AnySchema}\n>\n\nexport const error: KeywordErrorDefinition = {\n  message: ({params: {property, depsCount, deps}}) => {\n    const property_ies = depsCount === 1 ? \"property\" : \"properties\"\n    return str`must have ${property_ies} ${deps} when property ${property} is present`\n  },\n  params: ({params: {property, depsCount, deps, missingProperty}}) =>\n    _`{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"dependencies\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const [propDeps, schDeps] = splitDependencies(cxt)\n    validatePropertyDeps(cxt, propDeps)\n    validateSchemaDeps(cxt, schDeps)\n  },\n}\n\nfunction splitDependencies({schema}: KeywordCxt): [PropertyDependencies, SchemaDependencies] {\n  const propertyDeps: PropertyDependencies = {}\n  const schemaDeps: SchemaDependencies = {}\n  for (const key in schema) {\n    if (key === \"__proto__\") continue\n    const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps\n    deps[key] = schema[key]\n  }\n  return [propertyDeps, schemaDeps]\n}\n\nexport function validatePropertyDeps(\n  cxt: KeywordCxt,\n  propertyDeps: {[K in string]?: string[]} = cxt.schema\n): void {\n  const {gen, data, it} = cxt\n  if (Object.keys(propertyDeps).length === 0) return\n  const missing = gen.let(\"missing\")\n  for (const prop in propertyDeps) {\n    const deps = propertyDeps[prop] as string[]\n    if (deps.length === 0) continue\n    const hasProperty = propertyInData(gen, data, prop, it.opts.ownProperties)\n    cxt.setParams({\n      property: prop,\n      depsCount: deps.length,\n      deps: deps.join(\", \"),\n    })\n    if (it.allErrors) {\n      gen.if(hasProperty, () => {\n        for (const depProp of deps) {\n          checkReportMissingProp(cxt, depProp)\n        }\n      })\n    } else {\n      gen.if(_`${hasProperty} && (${checkMissingProp(cxt, deps, missing)})`)\n      reportMissingProp(cxt, missing)\n      gen.else()\n    }\n  }\n}\n\nexport function validateSchemaDeps(cxt: KeywordCxt, schemaDeps: SchemaMap = cxt.schema): void {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  for (const prop in schemaDeps) {\n    if (alwaysValidSchema(it, schemaDeps[prop] as AnySchema)) continue\n    gen.if(\n      propertyInData(gen, data, prop, it.opts.ownProperties),\n      () => {\n        const schCxt = cxt.subschema({keyword, schemaProp: prop}, valid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n      },\n      () => gen.var(valid, true) // TODO var\n    )\n    cxt.ok(valid)\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {SchemaObjCxt} from \"../../compile\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\n\nexport type IfKeywordError = ErrorObject<\"if\", {failingKeyword: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params}) => str`must match \"${params.ifClause}\" schema`,\n  params: ({params}) => _`{failingKeyword: ${params.ifClause}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"if\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, parentSchema, it} = cxt\n    if (parentSchema.then === undefined && parentSchema.else === undefined) {\n      checkStrictMode(it, '\"if\" without \"then\" and \"else\" is ignored')\n    }\n    const hasThen = hasSchema(it, \"then\")\n    const hasElse = hasSchema(it, \"else\")\n    if (!hasThen && !hasElse) return\n\n    const valid = gen.let(\"valid\", true)\n    const schValid = gen.name(\"_valid\")\n    validateIf()\n    cxt.reset()\n\n    if (hasThen && hasElse) {\n      const ifClause = gen.let(\"ifClause\")\n      cxt.setParams({ifClause})\n      gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause))\n    } else if (hasThen) {\n      gen.if(schValid, validateClause(\"then\"))\n    } else {\n      gen.if(not(schValid), validateClause(\"else\"))\n    }\n\n    cxt.pass(valid, () => cxt.error(true))\n\n    function validateIf(): void {\n      const schCxt = cxt.subschema(\n        {\n          keyword: \"if\",\n          compositeRule: true,\n          createErrors: false,\n          allErrors: false,\n        },\n        schValid\n      )\n      cxt.mergeEvaluated(schCxt)\n    }\n\n    function validateClause(keyword: string, ifClause?: Name): () => void {\n      return () => {\n        const schCxt = cxt.subschema({keyword}, schValid)\n        gen.assign(valid, schValid)\n        cxt.mergeValidEvaluated(schCxt, valid)\n        if (ifClause) gen.assign(ifClause, _`${keyword}`)\n        else cxt.setParams({ifClause: keyword})\n      }\n    }\n  },\n}\n\nfunction hasSchema(it: SchemaObjCxt, keyword: string): boolean {\n  const schema = it.schema[keyword]\n  return schema !== undefined && !alwaysValidSchema(it, schema)\n}\n\nexport default def\n","import type {ErrorNoParams, Vocabulary} from \"../../types\"\nimport additionalItems, {AdditionalItemsError} from \"./additionalItems\"\nimport prefixItems from \"./prefixItems\"\nimport items from \"./items\"\nimport items2020, {ItemsError} from \"./items2020\"\nimport contains, {ContainsError} from \"./contains\"\nimport dependencies, {DependenciesError} from \"./dependencies\"\nimport propertyNames, {PropertyNamesError} from \"./propertyNames\"\nimport additionalProperties, {AdditionalPropertiesError} from \"./additionalProperties\"\nimport properties from \"./properties\"\nimport patternProperties from \"./patternProperties\"\nimport notKeyword, {NotKeywordError} from \"./not\"\nimport anyOf, {AnyOfError} from \"./anyOf\"\nimport oneOf, {OneOfError} from \"./oneOf\"\nimport allOf from \"./allOf\"\nimport ifKeyword, {IfKeywordError} from \"./if\"\nimport thenElse from \"./thenElse\"\n\nexport default function getApplicator(draft2020 = false): Vocabulary {\n  const applicator = [\n    // any\n    notKeyword,\n    anyOf,\n    oneOf,\n    allOf,\n    ifKeyword,\n    thenElse,\n    // object\n    propertyNames,\n    additionalProperties,\n    dependencies,\n    properties,\n    patternProperties,\n  ]\n  // array\n  if (draft2020) applicator.push(prefixItems, items2020)\n  else applicator.push(additionalItems, items)\n  applicator.push(contains)\n  return applicator\n}\n\nexport type ApplicatorKeywordError =\n  | ErrorNoParams<\"false schema\">\n  | AdditionalItemsError\n  | ItemsError\n  | ContainsError\n  | AdditionalPropertiesError\n  | DependenciesError\n  | IfKeywordError\n  | AnyOfError\n  | OneOfError\n  | NotKeywordError\n  | PropertyNamesError\n","import type {CodeKeywordDefinition, AnySchema, AnySchemaObject} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {alwaysValidSchema, mergeEvaluated, checkStrictMode} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"array\", \"boolean\"],\n  before: \"uniqueItems\",\n  code(cxt: KeywordCxt) {\n    const {schema, it} = cxt\n    if (Array.isArray(schema)) return validateTuple(cxt, \"additionalItems\", schema)\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    cxt.ok(validateArray(cxt))\n  },\n}\n\nexport function validateTuple(\n  cxt: KeywordCxt,\n  extraItems: string,\n  schArr: AnySchema[] = cxt.schema\n): void {\n  const {gen, parentSchema, data, keyword, it} = cxt\n  checkStrictTuple(parentSchema)\n  if (it.opts.unevaluated && schArr.length && it.items !== true) {\n    it.items = mergeEvaluated.items(gen, schArr.length, it.items)\n  }\n  const valid = gen.name(\"valid\")\n  const len = gen.const(\"len\", _`${data}.length`)\n  schArr.forEach((sch: AnySchema, i: number) => {\n    if (alwaysValidSchema(it, sch)) return\n    gen.if(_`${len} > ${i}`, () =>\n      cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          dataProp: i,\n        },\n        valid\n      )\n    )\n    cxt.ok(valid)\n  })\n\n  function checkStrictTuple(sch: AnySchemaObject): void {\n    const {opts, errSchemaPath} = it\n    const l = schArr.length\n    const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false)\n    if (opts.strictTuples && !fullTuple) {\n      const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`\n      checkStrictMode(it, msg, opts.strictTuples)\n    }\n  }\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {validateArray} from \"../code\"\nimport {validateAdditionalItems} from \"./additionalItems\"\n\nexport type ItemsError = ErrorObject<\"items\", {limit: number}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {len}}) => str`must NOT have more than ${len} items`,\n  params: ({params: {len}}) => _`{limit: ${len}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"items\",\n  type: \"array\",\n  schemaType: [\"object\", \"boolean\"],\n  before: \"uniqueItems\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {schema, parentSchema, it} = cxt\n    const {prefixItems} = parentSchema\n    it.items = true\n    if (alwaysValidSchema(it, schema)) return\n    if (prefixItems) validateAdditionalItems(cxt, prefixItems)\n    else cxt.ok(validateArray(cxt))\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorNoParams, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type NotKeywordError = ErrorNoParams<\"not\", AnySchema>\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"not\",\n  schemaType: [\"object\", \"boolean\"],\n  trackErrors: true,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, it} = cxt\n    if (alwaysValidSchema(it, schema)) {\n      cxt.fail()\n      return\n    }\n\n    const valid = gen.name(\"valid\")\n    cxt.subschema(\n      {\n        keyword: \"not\",\n        compositeRule: true,\n        createErrors: false,\n        allErrors: false,\n      },\n      valid\n    )\n\n    cxt.failResult(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error()\n    )\n  },\n  error: {message: \"must NOT be valid\"},\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\nimport {SchemaCxt} from \"../../compile\"\n\nexport type OneOfError = ErrorObject<\n  \"oneOf\",\n  {passingSchemas: [number, number] | null},\n  AnySchema[]\n>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must match exactly one schema in oneOf\",\n  params: ({params}) => _`{passingSchemas: ${params.passing}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"oneOf\",\n  schemaType: \"array\",\n  trackErrors: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, it} = cxt\n    /* istanbul ignore if */\n    if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n    if (it.opts.discriminator && parentSchema.discriminator) return\n    const schArr: AnySchema[] = schema\n    const valid = gen.let(\"valid\", false)\n    const passing = gen.let(\"passing\", null)\n    const schValid = gen.name(\"_valid\")\n    cxt.setParams({passing})\n    // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n\n    gen.block(validateOneOf)\n\n    cxt.result(\n      valid,\n      () => cxt.reset(),\n      () => cxt.error(true)\n    )\n\n    function validateOneOf(): void {\n      schArr.forEach((sch: AnySchema, i: number) => {\n        let schCxt: SchemaCxt | undefined\n        if (alwaysValidSchema(it, sch)) {\n          gen.var(schValid, true)\n        } else {\n          schCxt = cxt.subschema(\n            {\n              keyword: \"oneOf\",\n              schemaProp: i,\n              compositeRule: true,\n            },\n            schValid\n          )\n        }\n\n        if (i > 0) {\n          gen\n            .if(_`${schValid} && ${valid}`)\n            .assign(valid, false)\n            .assign(passing, _`[${passing}, ${i}]`)\n            .else()\n        }\n\n        gen.if(schValid, () => {\n          gen.assign(valid, true)\n          gen.assign(passing, i)\n          if (schCxt) cxt.mergeEvaluated(schCxt, Name)\n        })\n      })\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {allSchemaProperties, usePattern} from \"../code\"\nimport {_, not, Name} from \"../../compile/codegen\"\nimport {alwaysValidSchema, checkStrictMode} from \"../../compile/util\"\nimport {evaluatedPropsToName, Type} from \"../../compile/util\"\nimport {AnySchema} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"patternProperties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, parentSchema, it} = cxt\n    const {opts} = it\n    const patterns = allSchemaProperties(schema)\n    const alwaysValidPatterns = patterns.filter((p) =>\n      alwaysValidSchema(it, schema[p] as AnySchema)\n    )\n\n    if (\n      patterns.length === 0 ||\n      (alwaysValidPatterns.length === patterns.length &&\n        (!it.opts.unevaluated || it.props === true))\n    ) {\n      return\n    }\n\n    const checkProperties =\n      opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties\n    const valid = gen.name(\"valid\")\n    if (it.props !== true && !(it.props instanceof Name)) {\n      it.props = evaluatedPropsToName(gen, it.props)\n    }\n    const {props} = it\n    validatePatternProperties()\n\n    function validatePatternProperties(): void {\n      for (const pat of patterns) {\n        if (checkProperties) checkMatchingProperties(pat)\n        if (it.allErrors) {\n          validateProperties(pat)\n        } else {\n          gen.var(valid, true) // TODO var\n          validateProperties(pat)\n          gen.if(valid)\n        }\n      }\n    }\n\n    function checkMatchingProperties(pat: string): void {\n      for (const prop in checkProperties) {\n        if (new RegExp(pat).test(prop)) {\n          checkStrictMode(\n            it,\n            `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`\n          )\n        }\n      }\n    }\n\n    function validateProperties(pat: string): void {\n      gen.forIn(\"key\", data, (key) => {\n        gen.if(_`${usePattern(cxt, pat)}.test(${key})`, () => {\n          const alwaysValid = alwaysValidPatterns.includes(pat)\n          if (!alwaysValid) {\n            cxt.subschema(\n              {\n                keyword: \"patternProperties\",\n                schemaProp: pat,\n                dataProp: key,\n                dataPropType: Type.Str,\n              },\n              valid\n            )\n          }\n\n          if (it.opts.unevaluated && props !== true) {\n            gen.assign(_`${props}[${key}]`, true)\n          } else if (!alwaysValid && !it.allErrors) {\n            // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n            // or if all properties were evaluated (props === true)\n            gen.if(not(valid), () => gen.break())\n          }\n        })\n      })\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport {validateTuple} from \"./items\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"prefixItems\",\n  type: \"array\",\n  schemaType: [\"array\"],\n  before: \"uniqueItems\",\n  code: (cxt) => validateTuple(cxt, \"items\"),\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport {KeywordCxt} from \"../../compile/validate\"\nimport {propertyInData, allSchemaProperties} from \"../code\"\nimport {alwaysValidSchema, toHash, mergeEvaluated} from \"../../compile/util\"\nimport apDef from \"./additionalProperties\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"properties\",\n  type: \"object\",\n  schemaType: \"object\",\n  code(cxt: KeywordCxt) {\n    const {gen, schema, parentSchema, data, it} = cxt\n    if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n      apDef.code(new KeywordCxt(it, apDef, \"additionalProperties\"))\n    }\n    const allProps = allSchemaProperties(schema)\n    for (const prop of allProps) {\n      it.definedProperties.add(prop)\n    }\n    if (it.opts.unevaluated && allProps.length && it.props !== true) {\n      it.props = mergeEvaluated.props(gen, toHash(allProps), it.props)\n    }\n    const properties = allProps.filter((p) => !alwaysValidSchema(it, schema[p]))\n    if (properties.length === 0) return\n    const valid = gen.name(\"valid\")\n\n    for (const prop of properties) {\n      if (hasDefault(prop)) {\n        applyPropertySchema(prop)\n      } else {\n        gen.if(propertyInData(gen, data, prop, it.opts.ownProperties))\n        applyPropertySchema(prop)\n        if (!it.allErrors) gen.else().var(valid, true)\n        gen.endIf()\n      }\n      cxt.it.definedProperties.add(prop)\n      cxt.ok(valid)\n    }\n\n    function hasDefault(prop: string): boolean | undefined {\n      return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined\n    }\n\n    function applyPropertySchema(prop: string): void {\n      cxt.subschema(\n        {\n          keyword: \"properties\",\n          schemaProp: prop,\n          dataProp: prop,\n        },\n        valid\n      )\n    }\n  },\n}\n\nexport default def\n","import type {\n  CodeKeywordDefinition,\n  ErrorObject,\n  KeywordErrorDefinition,\n  AnySchema,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, not} from \"../../compile/codegen\"\nimport {alwaysValidSchema} from \"../../compile/util\"\n\nexport type PropertyNamesError = ErrorObject<\"propertyNames\", {propertyName: string}, AnySchema>\n\nconst error: KeywordErrorDefinition = {\n  message: \"property name must be valid\",\n  params: ({params}) => _`{propertyName: ${params.propertyName}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"propertyNames\",\n  type: \"object\",\n  schemaType: [\"object\", \"boolean\"],\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, data, it} = cxt\n    if (alwaysValidSchema(it, schema)) return\n    const valid = gen.name(\"valid\")\n\n    gen.forIn(\"key\", data, (key) => {\n      cxt.setParams({propertyName: key})\n      cxt.subschema(\n        {\n          keyword: \"propertyNames\",\n          data: key,\n          dataTypes: [\"string\"],\n          propertyName: key,\n          compositeRule: true,\n        },\n        valid\n      )\n      gen.if(not(valid), () => {\n        cxt.error(true)\n        if (!it.allErrors) gen.break()\n      })\n    })\n\n    cxt.ok(valid)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"then\", \"else\"],\n  schemaType: [\"object\", \"boolean\"],\n  code({keyword, parentSchema, it}: KeywordCxt) {\n    if (parentSchema.if === undefined) checkStrictMode(it, `\"${keyword}\" without \"if\" is ignored`)\n  },\n}\n\nexport default def\n","import type {AnySchema, SchemaMap} from \"../types\"\nimport type {SchemaCxt} from \"../compile\"\nimport type {KeywordCxt} from \"../compile/validate\"\nimport {CodeGen, _, and, or, not, nil, strConcat, getProperty, Code, Name} from \"../compile/codegen\"\nimport {alwaysValidSchema, Type} from \"../compile/util\"\nimport N from \"../compile/names\"\nimport {useFunc} from \"../compile/util\"\nexport function checkReportMissingProp(cxt: KeywordCxt, prop: string): void {\n  const {gen, data, it} = cxt\n  gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n    cxt.setParams({missingProperty: _`${prop}`}, true)\n    cxt.error()\n  })\n}\n\nexport function checkMissingProp(\n  {gen, data, it: {opts}}: KeywordCxt,\n  properties: string[],\n  missing: Name\n): Code {\n  return or(\n    ...properties.map((prop) =>\n      and(noPropertyInData(gen, data, prop, opts.ownProperties), _`${missing} = ${prop}`)\n    )\n  )\n}\n\nexport function reportMissingProp(cxt: KeywordCxt, missing: Name): void {\n  cxt.setParams({missingProperty: missing}, true)\n  cxt.error()\n}\n\nexport function hasPropFunc(gen: CodeGen): Name {\n  return gen.scopeValue(\"func\", {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    ref: Object.prototype.hasOwnProperty,\n    code: _`Object.prototype.hasOwnProperty`,\n  })\n}\n\nexport function isOwnProperty(gen: CodeGen, data: Name, property: Name | string): Code {\n  return _`${hasPropFunc(gen)}.call(${data}, ${property})`\n}\n\nexport function propertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} !== undefined`\n  return ownProperties ? _`${cond} && ${isOwnProperty(gen, data, property)}` : cond\n}\n\nexport function noPropertyInData(\n  gen: CodeGen,\n  data: Name,\n  property: Name | string,\n  ownProperties?: boolean\n): Code {\n  const cond = _`${data}${getProperty(property)} === undefined`\n  return ownProperties ? or(cond, not(isOwnProperty(gen, data, property))) : cond\n}\n\nexport function allSchemaProperties(schemaMap?: SchemaMap): string[] {\n  return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : []\n}\n\nexport function schemaProperties(it: SchemaCxt, schemaMap: SchemaMap): string[] {\n  return allSchemaProperties(schemaMap).filter(\n    (p) => !alwaysValidSchema(it, schemaMap[p] as AnySchema)\n  )\n}\n\nexport function callValidateCode(\n  {schemaCode, data, it: {gen, topSchemaRef, schemaPath, errorPath}, it}: KeywordCxt,\n  func: Code,\n  context: Code,\n  passSchema?: boolean\n): Code {\n  const dataAndSchema = passSchema ? _`${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data\n  const valCxt: [Name, Code | number][] = [\n    [N.instancePath, strConcat(N.instancePath, errorPath)],\n    [N.parentData, it.parentData],\n    [N.parentDataProperty, it.parentDataProperty],\n    [N.rootData, N.rootData],\n  ]\n  if (it.opts.dynamicRef) valCxt.push([N.dynamicAnchors, N.dynamicAnchors])\n  const args = _`${dataAndSchema}, ${gen.object(...valCxt)}`\n  return context !== nil ? _`${func}.call(${context}, ${args})` : _`${func}(${args})`\n}\n\nconst newRegExp = _`new RegExp`\n\nexport function usePattern({gen, it: {opts}}: KeywordCxt, pattern: string): Name {\n  const u = opts.unicodeRegExp ? \"u\" : \"\"\n  const {regExp} = opts.code\n  const rx = regExp(pattern, u)\n\n  return gen.scopeValue(\"pattern\", {\n    key: rx.toString(),\n    ref: rx,\n    code: _`${regExp.code === \"new RegExp\" ? newRegExp : useFunc(gen, regExp)}(${pattern}, ${u})`,\n  })\n}\n\nexport function validateArray(cxt: KeywordCxt): Name {\n  const {gen, data, keyword, it} = cxt\n  const valid = gen.name(\"valid\")\n  if (it.allErrors) {\n    const validArr = gen.let(\"valid\", true)\n    validateItems(() => gen.assign(validArr, false))\n    return validArr\n  }\n  gen.var(valid, true)\n  validateItems(() => gen.break())\n  return valid\n\n  function validateItems(notValid: () => void): void {\n    const len = gen.const(\"len\", _`${data}.length`)\n    gen.forRange(\"i\", 0, len, (i) => {\n      cxt.subschema(\n        {\n          keyword,\n          dataProp: i,\n          dataPropType: Type.Num,\n        },\n        valid\n      )\n      gen.if(not(valid), notValid)\n    })\n  }\n}\n\nexport function validateUnion(cxt: KeywordCxt): void {\n  const {gen, schema, keyword, it} = cxt\n  /* istanbul ignore if */\n  if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n  const alwaysValid = schema.some((sch: AnySchema) => alwaysValidSchema(it, sch))\n  if (alwaysValid && !it.opts.unevaluated) return\n\n  const valid = gen.let(\"valid\", false)\n  const schValid = gen.name(\"_valid\")\n\n  gen.block(() =>\n    schema.forEach((_sch: AnySchema, i: number) => {\n      const schCxt = cxt.subschema(\n        {\n          keyword,\n          schemaProp: i,\n          compositeRule: true,\n        },\n        schValid\n      )\n      gen.assign(valid, _`${valid} || ${schValid}`)\n      const merged = cxt.mergeValidEvaluated(schCxt, schValid)\n      // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n      // or if all properties and items were evaluated (it.props === true && it.items === true)\n      if (!merged) gen.if(not(valid))\n    })\n  )\n\n  cxt.result(\n    valid,\n    () => cxt.reset(),\n    () => cxt.error(true)\n  )\n}\n","import type {CodeKeywordDefinition} from \"../../types\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"id\",\n  code() {\n    throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID')\n  },\n}\n\nexport default def\n","import type {Vocabulary} from \"../../types\"\nimport idKeyword from \"./id\"\nimport refKeyword from \"./ref\"\n\nconst core: Vocabulary = [\n  \"$schema\",\n  \"$id\",\n  \"$defs\",\n  \"$vocabulary\",\n  {keyword: \"$comment\"},\n  \"definitions\",\n  idKeyword,\n  refKeyword,\n]\n\nexport default core\n","import type {CodeKeywordDefinition, AnySchema} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {callValidateCode} from \"../code\"\nimport {_, nil, stringify, Code, Name} from \"../../compile/codegen\"\nimport N from \"../../compile/names\"\nimport {SchemaEnv, resolveRef} from \"../../compile\"\nimport {mergeEvaluated} from \"../../compile/util\"\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"$ref\",\n  schemaType: \"string\",\n  code(cxt: KeywordCxt): void {\n    const {gen, schema: $ref, it} = cxt\n    const {baseId, schemaEnv: env, validateName, opts, self} = it\n    const {root} = env\n    if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId) return callRootRef()\n    const schOrEnv = resolveRef.call(self, root, baseId, $ref)\n    if (schOrEnv === undefined) throw new MissingRefError(it.opts.uriResolver, baseId, $ref)\n    if (schOrEnv instanceof SchemaEnv) return callValidate(schOrEnv)\n    return inlineRefSchema(schOrEnv)\n\n    function callRootRef(): void {\n      if (env === root) return callRef(cxt, validateName, env, env.$async)\n      const rootName = gen.scopeValue(\"root\", {ref: root})\n      return callRef(cxt, _`${rootName}.validate`, root, root.$async)\n    }\n\n    function callValidate(sch: SchemaEnv): void {\n      const v = getValidate(cxt, sch)\n      callRef(cxt, v, sch, sch.$async)\n    }\n\n    function inlineRefSchema(sch: AnySchema): void {\n      const schName = gen.scopeValue(\n        \"schema\",\n        opts.code.source === true ? {ref: sch, code: stringify(sch)} : {ref: sch}\n      )\n      const valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema(\n        {\n          schema: sch,\n          dataTypes: [],\n          schemaPath: nil,\n          topSchemaRef: schName,\n          errSchemaPath: $ref,\n        },\n        valid\n      )\n      cxt.mergeEvaluated(schCxt)\n      cxt.ok(valid)\n    }\n  },\n}\n\nexport function getValidate(cxt: KeywordCxt, sch: SchemaEnv): Code {\n  const {gen} = cxt\n  return sch.validate\n    ? gen.scopeValue(\"validate\", {ref: sch.validate})\n    : _`${gen.scopeValue(\"wrapper\", {ref: sch})}.validate`\n}\n\nexport function callRef(cxt: KeywordCxt, v: Code, sch?: SchemaEnv, $async?: boolean): void {\n  const {gen, it} = cxt\n  const {allErrors, schemaEnv: env, opts} = it\n  const passCxt = opts.passContext ? N.this : nil\n  if ($async) callAsyncRef()\n  else callSyncRef()\n\n  function callAsyncRef(): void {\n    if (!env.$async) throw new Error(\"async schema referenced by sync schema\")\n    const valid = gen.let(\"valid\")\n    gen.try(\n      () => {\n        gen.code(_`await ${callValidateCode(cxt, v, passCxt)}`)\n        addEvaluatedFrom(v) // TODO will not work with async, it has to be returned with the result\n        if (!allErrors) gen.assign(valid, true)\n      },\n      (e) => {\n        gen.if(_`!(${e} instanceof ${it.ValidationError as Name})`, () => gen.throw(e))\n        addErrorsFrom(e)\n        if (!allErrors) gen.assign(valid, false)\n      }\n    )\n    cxt.ok(valid)\n  }\n\n  function callSyncRef(): void {\n    cxt.result(\n      callValidateCode(cxt, v, passCxt),\n      () => addEvaluatedFrom(v),\n      () => addErrorsFrom(v)\n    )\n  }\n\n  function addErrorsFrom(source: Code): void {\n    const errs = _`${source}.errors`\n    gen.assign(N.vErrors, _`${N.vErrors} === null ? ${errs} : ${N.vErrors}.concat(${errs})`) // TODO tagged\n    gen.assign(N.errors, _`${N.vErrors}.length`)\n  }\n\n  function addEvaluatedFrom(source: Code): void {\n    if (!it.opts.unevaluated) return\n    const schEvaluated = sch?.validate?.evaluated\n    // TODO refactor\n    if (it.props !== true) {\n      if (schEvaluated && !schEvaluated.dynamicProps) {\n        if (schEvaluated.props !== undefined) {\n          it.props = mergeEvaluated.props(gen, schEvaluated.props, it.props)\n        }\n      } else {\n        const props = gen.var(\"props\", _`${source}.evaluated.props`)\n        it.props = mergeEvaluated.props(gen, props, it.props, Name)\n      }\n    }\n    if (it.items !== true) {\n      if (schEvaluated && !schEvaluated.dynamicItems) {\n        if (schEvaluated.items !== undefined) {\n          it.items = mergeEvaluated.items(gen, schEvaluated.items, it.items)\n        }\n      } else {\n        const items = gen.var(\"items\", _`${source}.evaluated.items`)\n        it.items = mergeEvaluated.items(gen, items, it.items, Name)\n      }\n    }\n  }\n}\n\nexport default def\n","import type {CodeKeywordDefinition, AnySchemaObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, getProperty, Name} from \"../../compile/codegen\"\nimport {DiscrError, DiscrErrorObj} from \"../discriminator/types\"\nimport {resolveRef, SchemaEnv} from \"../../compile\"\nimport MissingRefError from \"../../compile/ref_error\"\nimport {schemaHasRulesButRef} from \"../../compile/util\"\n\nexport type DiscriminatorError = DiscrErrorObj<DiscrError.Tag> | DiscrErrorObj<DiscrError.Mapping>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {discrError, tagName}}) =>\n    discrError === DiscrError.Tag\n      ? `tag \"${tagName}\" must be string`\n      : `value of tag \"${tagName}\" must be in oneOf`,\n  params: ({params: {discrError, tag, tagName}}) =>\n    _`{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"discriminator\",\n  type: \"object\",\n  schemaType: \"object\",\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schema, parentSchema, it} = cxt\n    const {oneOf} = parentSchema\n    if (!it.opts.discriminator) {\n      throw new Error(\"discriminator: requires discriminator option\")\n    }\n    const tagName = schema.propertyName\n    if (typeof tagName != \"string\") throw new Error(\"discriminator: requires propertyName\")\n    if (schema.mapping) throw new Error(\"discriminator: mapping is not supported\")\n    if (!oneOf) throw new Error(\"discriminator: requires oneOf keyword\")\n    const valid = gen.let(\"valid\", false)\n    const tag = gen.const(\"tag\", _`${data}${getProperty(tagName)}`)\n    gen.if(\n      _`typeof ${tag} == \"string\"`,\n      () => validateMapping(),\n      () => cxt.error(false, {discrError: DiscrError.Tag, tag, tagName})\n    )\n    cxt.ok(valid)\n\n    function validateMapping(): void {\n      const mapping = getMapping()\n      gen.if(false)\n      for (const tagValue in mapping) {\n        gen.elseIf(_`${tag} === ${tagValue}`)\n        gen.assign(valid, applyTagSchema(mapping[tagValue]))\n      }\n      gen.else()\n      cxt.error(false, {discrError: DiscrError.Mapping, tag, tagName})\n      gen.endIf()\n    }\n\n    function applyTagSchema(schemaProp?: number): Name {\n      const _valid = gen.name(\"valid\")\n      const schCxt = cxt.subschema({keyword: \"oneOf\", schemaProp}, _valid)\n      cxt.mergeEvaluated(schCxt, Name)\n      return _valid\n    }\n\n    function getMapping(): {[T in string]?: number} {\n      const oneOfMapping: {[T in string]?: number} = {}\n      const topRequired = hasRequired(parentSchema)\n      let tagRequired = true\n      for (let i = 0; i < oneOf.length; i++) {\n        let sch = oneOf[i]\n        if (sch?.$ref && !schemaHasRulesButRef(sch, it.self.RULES)) {\n          const ref = sch.$ref\n          sch = resolveRef.call(it.self, it.schemaEnv.root, it.baseId, ref)\n          if (sch instanceof SchemaEnv) sch = sch.schema\n          if (sch === undefined) throw new MissingRefError(it.opts.uriResolver, it.baseId, ref)\n        }\n        const propSch = sch?.properties?.[tagName]\n        if (typeof propSch != \"object\") {\n          throw new Error(\n            `discriminator: oneOf subschemas (or referenced schemas) must have \"properties/${tagName}\"`\n          )\n        }\n        tagRequired = tagRequired && (topRequired || hasRequired(sch))\n        addMappings(propSch, i)\n      }\n      if (!tagRequired) throw new Error(`discriminator: \"${tagName}\" must be required`)\n      return oneOfMapping\n\n      function hasRequired({required}: AnySchemaObject): boolean {\n        return Array.isArray(required) && required.includes(tagName)\n      }\n\n      function addMappings(sch: AnySchemaObject, i: number): void {\n        if (sch.const) {\n          addMapping(sch.const, i)\n        } else if (sch.enum) {\n          for (const tagValue of sch.enum) {\n            addMapping(tagValue, i)\n          }\n        } else {\n          throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`)\n        }\n      }\n\n      function addMapping(tagValue: unknown, i: number): void {\n        if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n          throw new Error(`discriminator: \"${tagName}\" values must be unique strings`)\n        }\n        oneOfMapping[tagValue] = i\n      }\n    }\n  },\n}\n\nexport default def\n","import type {ErrorObject} from \"../../types\"\n\nexport enum DiscrError {\n  Tag = \"tag\",\n  Mapping = \"mapping\",\n}\n\nexport type DiscrErrorObj<E extends DiscrError> = ErrorObject<\n  \"discriminator\",\n  {error: E; tag: string; tagValue: unknown},\n  string\n>\n","import type {Vocabulary} from \"../types\"\nimport coreVocabulary from \"./core\"\nimport validationVocabulary from \"./validation\"\nimport getApplicatorVocabulary from \"./applicator\"\nimport formatVocabulary from \"./format\"\nimport {metadataVocabulary, contentVocabulary} from \"./metadata\"\n\nconst draft7Vocabularies: Vocabulary[] = [\n  coreVocabulary,\n  validationVocabulary,\n  getApplicatorVocabulary(),\n  formatVocabulary,\n  metadataVocabulary,\n  contentVocabulary,\n]\n\nexport default draft7Vocabularies\n","import type {\n  AddedFormat,\n  FormatValidator,\n  AsyncFormatValidator,\n  CodeKeywordDefinition,\n  KeywordErrorDefinition,\n  ErrorObject,\n} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, nil, or, Code, getProperty, regexpCode} from \"../../compile/codegen\"\n\ntype FormatValidate =\n  | FormatValidator<string>\n  | FormatValidator<number>\n  | AsyncFormatValidator<string>\n  | AsyncFormatValidator<number>\n  | RegExp\n  | string\n  | true\n\nexport type FormatError = ErrorObject<\"format\", {format: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match format \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{format: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"format\",\n  type: [\"number\", \"string\"],\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt, ruleType?: string) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    const {opts, errSchemaPath, schemaEnv, self} = it\n    if (!opts.validateFormats) return\n\n    if ($data) validate$DataFormat()\n    else validateFormat()\n\n    function validate$DataFormat(): void {\n      const fmts = gen.scopeValue(\"formats\", {\n        ref: self.formats,\n        code: opts.code.formats,\n      })\n      const fDef = gen.const(\"fDef\", _`${fmts}[${schemaCode}]`)\n      const fType = gen.let(\"fType\")\n      const format = gen.let(\"format\")\n      // TODO simplify\n      gen.if(\n        _`typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`,\n        () => gen.assign(fType, _`${fDef}.type || \"string\"`).assign(format, _`${fDef}.validate`),\n        () => gen.assign(fType, _`\"string\"`).assign(format, fDef)\n      )\n      cxt.fail$data(or(unknownFmt(), invalidFmt()))\n\n      function unknownFmt(): Code {\n        if (opts.strictSchema === false) return nil\n        return _`${schemaCode} && !${format}`\n      }\n\n      function invalidFmt(): Code {\n        const callFormat = schemaEnv.$async\n          ? _`(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n          : _`${format}(${data})`\n        const validData = _`(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`\n        return _`${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`\n      }\n    }\n\n    function validateFormat(): void {\n      const formatDef: AddedFormat | undefined = self.formats[schema]\n      if (!formatDef) {\n        unknownFormat()\n        return\n      }\n      if (formatDef === true) return\n      const [fmtType, format, fmtRef] = getFormat(formatDef)\n      if (fmtType === ruleType) cxt.pass(validCondition())\n\n      function unknownFormat(): void {\n        if (opts.strictSchema === false) {\n          self.logger.warn(unknownMsg())\n          return\n        }\n        throw new Error(unknownMsg())\n\n        function unknownMsg(): string {\n          return `unknown format \"${schema as string}\" ignored in schema at path \"${errSchemaPath}\"`\n        }\n      }\n\n      function getFormat(fmtDef: AddedFormat): [string, FormatValidate, Code] {\n        const code =\n          fmtDef instanceof RegExp\n            ? regexpCode(fmtDef)\n            : opts.code.formats\n            ? _`${opts.code.formats}${getProperty(schema)}`\n            : undefined\n        const fmt = gen.scopeValue(\"formats\", {key: schema, ref: fmtDef, code})\n        if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n          return [fmtDef.type || \"string\", fmtDef.validate, _`${fmt}.validate`]\n        }\n\n        return [\"string\", fmtDef, fmt]\n      }\n\n      function validCondition(): Code {\n        if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n          if (!schemaEnv.$async) throw new Error(\"async format in sync schema\")\n          return _`await ${fmtRef}(${data})`\n        }\n        return typeof format == \"function\" ? _`${fmtRef}(${data})` : _`${fmtRef}.test(${data})`\n      }\n    }\n  },\n}\n\nexport default def\n","import type {Vocabulary} from \"../../types\"\nimport formatKeyword from \"./format\"\n\nconst format: Vocabulary = [formatKeyword]\n\nexport default format\n","import type {Vocabulary} from \"../types\"\n\nexport const metadataVocabulary: Vocabulary = [\n  \"title\",\n  \"description\",\n  \"default\",\n  \"deprecated\",\n  \"readOnly\",\n  \"writeOnly\",\n  \"examples\",\n]\n\nexport const contentVocabulary: Vocabulary = [\n  \"contentMediaType\",\n  \"contentEncoding\",\n  \"contentSchema\",\n]\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type ConstError = ErrorObject<\"const\", {allowedValue: any}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to constant\",\n  params: ({schemaCode}) => _`{allowedValue: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"const\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schemaCode, schema} = cxt\n    if ($data || (schema && typeof schema == \"object\")) {\n      cxt.fail$data(_`!${useFunc(gen, equal)}(${data}, ${schemaCode})`)\n    } else {\n      cxt.fail(_`${schema} !== ${data}`)\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, or, Name, Code} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type EnumError = ErrorObject<\"enum\", {allowedValues: any[]}, any[] | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: \"must be equal to one of the allowed values\",\n  params: ({schemaCode}) => _`{allowedValues: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"enum\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, schemaCode, it} = cxt\n    if (!$data && schema.length === 0) throw new Error(\"enum must have non-empty array\")\n    const useLoop = schema.length >= it.opts.loopEnum\n    let eql: Name | undefined\n    const getEql = (): Name => (eql ??= useFunc(gen, equal))\n\n    let valid: Code\n    if (useLoop || $data) {\n      valid = gen.let(\"valid\")\n      cxt.block$data(valid, loopEnum)\n    } else {\n      /* istanbul ignore if */\n      if (!Array.isArray(schema)) throw new Error(\"ajv implementation error\")\n      const vSchema = gen.const(\"vSchema\", schemaCode)\n      valid = or(...schema.map((_x: unknown, i: number) => equalCode(vSchema, i)))\n    }\n    cxt.pass(valid)\n\n    function loopEnum(): void {\n      gen.assign(valid, false)\n      gen.forOf(\"v\", schemaCode as Code, (v) =>\n        gen.if(_`${getEql()}(${data}, ${v})`, () => gen.assign(valid, true).break())\n      )\n    }\n\n    function equalCode(vSchema: Name, i: number): Code {\n      const sch = schema[i]\n      return typeof sch === \"object\" && sch !== null\n        ? _`${getEql()}(${data}, ${vSchema}[${i}])`\n        : _`${data} === ${sch}`\n    }\n  },\n}\n\nexport default def\n","import type {ErrorObject, Vocabulary} from \"../../types\"\nimport limitNumber, {LimitNumberError} from \"./limitNumber\"\nimport multipleOf, {MultipleOfError} from \"./multipleOf\"\nimport limitLength from \"./limitLength\"\nimport pattern, {PatternError} from \"./pattern\"\nimport limitProperties from \"./limitProperties\"\nimport required, {RequiredError} from \"./required\"\nimport limitItems from \"./limitItems\"\nimport uniqueItems, {UniqueItemsError} from \"./uniqueItems\"\nimport constKeyword, {ConstError} from \"./const\"\nimport enumKeyword, {EnumError} from \"./enum\"\n\nconst validation: Vocabulary = [\n  // number\n  limitNumber,\n  multipleOf,\n  // string\n  limitLength,\n  pattern,\n  // object\n  limitProperties,\n  required,\n  // array\n  limitItems,\n  uniqueItems,\n  // any\n  {keyword: \"type\", schemaType: [\"string\", \"array\"]},\n  {keyword: \"nullable\", schemaType: \"boolean\"},\n  constKeyword,\n  enumKeyword,\n]\n\nexport default validation\n\ntype LimitError = ErrorObject<\n  \"maxItems\" | \"minItems\" | \"minProperties\" | \"maxProperties\" | \"minLength\" | \"maxLength\",\n  {limit: number},\n  number | {$data: string}\n>\n\nexport type ValidationKeywordError =\n  | LimitError\n  | LimitNumberError\n  | MultipleOfError\n  | PatternError\n  | RequiredError\n  | UniqueItemsError\n  | ConstError\n  | EnumError\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} items`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxItems\", \"minItems\"],\n  type: \"array\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxItems\" ? operators.GT : operators.LT\n    cxt.fail$data(_`${data}.length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport ucs2length from \"../../runtime/ucs2length\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} characters`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxLength\", \"minLength\"],\n  type: \"string\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode, it} = cxt\n    const op = keyword === \"maxLength\" ? operators.GT : operators.LT\n    const len =\n      it.opts.unicode === false ? _`${data}.length` : _`${useFunc(cxt.gen, ucs2length)}(${data})`\n    cxt.fail$data(_`${len} ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators, Code} from \"../../compile/codegen\"\n\nconst ops = operators\n\ntype Kwd = \"maximum\" | \"minimum\" | \"exclusiveMaximum\" | \"exclusiveMinimum\"\n\ntype Comparison = \"<=\" | \">=\" | \"<\" | \">\"\n\nconst KWDs: {[K in Kwd]: {okStr: Comparison; ok: Code; fail: Code}} = {\n  maximum: {okStr: \"<=\", ok: ops.LTE, fail: ops.GT},\n  minimum: {okStr: \">=\", ok: ops.GTE, fail: ops.LT},\n  exclusiveMaximum: {okStr: \"<\", ok: ops.LT, fail: ops.GTE},\n  exclusiveMinimum: {okStr: \">\", ok: ops.GT, fail: ops.LTE},\n}\n\nexport type LimitNumberError = ErrorObject<\n  Kwd,\n  {limit: number; comparison: Comparison},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({keyword, schemaCode}) => str`must be ${KWDs[keyword as Kwd].okStr} ${schemaCode}`,\n  params: ({keyword, schemaCode}) =>\n    _`{comparison: ${KWDs[keyword as Kwd].okStr}, limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: Object.keys(KWDs),\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    cxt.fail$data(_`${data} ${KWDs[keyword as Kwd].fail} ${schemaCode} || isNaN(${data})`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str, operators} from \"../../compile/codegen\"\n\nconst error: KeywordErrorDefinition = {\n  message({keyword, schemaCode}) {\n    const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\"\n    return str`must NOT have ${comp} than ${schemaCode} properties`\n  },\n  params: ({schemaCode}) => _`{limit: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: [\"maxProperties\", \"minProperties\"],\n  type: \"object\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {keyword, data, schemaCode} = cxt\n    const op = keyword === \"maxProperties\" ? operators.GT : operators.LT\n    cxt.fail$data(_`Object.keys(${data}).length ${op} ${schemaCode}`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type MultipleOfError = ErrorObject<\n  \"multipleOf\",\n  {multipleOf: number},\n  number | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must be multiple of ${schemaCode}`,\n  params: ({schemaCode}) => _`{multipleOf: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"multipleOf\",\n  type: \"number\",\n  schemaType: \"number\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, schemaCode, it} = cxt\n    // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n    const prec = it.opts.multipleOfPrecision\n    const res = gen.let(\"res\")\n    const invalid = prec\n      ? _`Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n      : _`${res} !== parseInt(${res})`\n    cxt.fail$data(_`(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {usePattern} from \"../code\"\nimport {_, str} from \"../../compile/codegen\"\n\nexport type PatternError = ErrorObject<\"pattern\", {pattern: string}, string | {$data: string}>\n\nconst error: KeywordErrorDefinition = {\n  message: ({schemaCode}) => str`must match pattern \"${schemaCode}\"`,\n  params: ({schemaCode}) => _`{pattern: ${schemaCode}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"pattern\",\n  type: \"string\",\n  schemaType: \"string\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {data, $data, schema, schemaCode, it} = cxt\n    // TODO regexp should be wrapped in try/catchs\n    const u = it.opts.unicodeRegExp ? \"u\" : \"\"\n    const regExp = $data ? _`(new RegExp(${schemaCode}, ${u}))` : usePattern(cxt, schema)\n    cxt.fail$data(_`!${regExp}.test(${data})`)\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {\n  checkReportMissingProp,\n  checkMissingProp,\n  reportMissingProp,\n  propertyInData,\n  noPropertyInData,\n} from \"../code\"\nimport {_, str, nil, not, Name, Code} from \"../../compile/codegen\"\nimport {checkStrictMode} from \"../../compile/util\"\n\nexport type RequiredError = ErrorObject<\n  \"required\",\n  {missingProperty: string},\n  string[] | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {missingProperty}}) => str`must have required property '${missingProperty}'`,\n  params: ({params: {missingProperty}}) => _`{missingProperty: ${missingProperty}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"required\",\n  type: \"object\",\n  schemaType: \"array\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, schema, schemaCode, data, $data, it} = cxt\n    const {opts} = it\n    if (!$data && schema.length === 0) return\n    const useLoop = schema.length >= opts.loopRequired\n    if (it.allErrors) allErrorsMode()\n    else exitOnErrorMode()\n\n    if (opts.strictRequired) {\n      const props = cxt.parentSchema.properties\n      const {definedProperties} = cxt.it\n      for (const requiredKey of schema) {\n        if (props?.[requiredKey] === undefined && !definedProperties.has(requiredKey)) {\n          const schemaPath = it.schemaEnv.baseId + it.errSchemaPath\n          const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`\n          checkStrictMode(it, msg, it.opts.strictRequired)\n        }\n      }\n    }\n\n    function allErrorsMode(): void {\n      if (useLoop || $data) {\n        cxt.block$data(nil, loopAllRequired)\n      } else {\n        for (const prop of schema) {\n          checkReportMissingProp(cxt, prop)\n        }\n      }\n    }\n\n    function exitOnErrorMode(): void {\n      const missing = gen.let(\"missing\")\n      if (useLoop || $data) {\n        const valid = gen.let(\"valid\", true)\n        cxt.block$data(valid, () => loopUntilMissing(missing, valid))\n        cxt.ok(valid)\n      } else {\n        gen.if(checkMissingProp(cxt, schema, missing))\n        reportMissingProp(cxt, missing)\n        gen.else()\n      }\n    }\n\n    function loopAllRequired(): void {\n      gen.forOf(\"prop\", schemaCode as Code, (prop) => {\n        cxt.setParams({missingProperty: prop})\n        gen.if(noPropertyInData(gen, data, prop, opts.ownProperties), () => cxt.error())\n      })\n    }\n\n    function loopUntilMissing(missing: Name, valid: Name): void {\n      cxt.setParams({missingProperty: missing})\n      gen.forOf(\n        missing,\n        schemaCode as Code,\n        () => {\n          gen.assign(valid, propertyInData(gen, data, missing, opts.ownProperties))\n          gen.if(not(valid), () => {\n            cxt.error()\n            gen.break()\n          })\n        },\n        nil\n      )\n    }\n  },\n}\n\nexport default def\n","import type {CodeKeywordDefinition, ErrorObject, KeywordErrorDefinition} from \"../../types\"\nimport type {KeywordCxt} from \"../../compile/validate\"\nimport {checkDataTypes, getSchemaTypes, DataType} from \"../../compile/validate/dataType\"\nimport {_, str, Name} from \"../../compile/codegen\"\nimport {useFunc} from \"../../compile/util\"\nimport equal from \"../../runtime/equal\"\n\nexport type UniqueItemsError = ErrorObject<\n  \"uniqueItems\",\n  {i: number; j: number},\n  boolean | {$data: string}\n>\n\nconst error: KeywordErrorDefinition = {\n  message: ({params: {i, j}}) =>\n    str`must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n  params: ({params: {i, j}}) => _`{i: ${i}, j: ${j}}`,\n}\n\nconst def: CodeKeywordDefinition = {\n  keyword: \"uniqueItems\",\n  type: \"array\",\n  schemaType: \"boolean\",\n  $data: true,\n  error,\n  code(cxt: KeywordCxt) {\n    const {gen, data, $data, schema, parentSchema, schemaCode, it} = cxt\n    if (!$data && !schema) return\n    const valid = gen.let(\"valid\")\n    const itemTypes = parentSchema.items ? getSchemaTypes(parentSchema.items) : []\n    cxt.block$data(valid, validateUniqueItems, _`${schemaCode} === false`)\n    cxt.ok(valid)\n\n    function validateUniqueItems(): void {\n      const i = gen.let(\"i\", _`${data}.length`)\n      const j = gen.let(\"j\")\n      cxt.setParams({i, j})\n      gen.assign(valid, true)\n      gen.if(_`${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j))\n    }\n\n    function canOptimize(): boolean {\n      return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\")\n    }\n\n    function loopN(i: Name, j: Name): void {\n      const item = gen.name(\"item\")\n      const wrongType = checkDataTypes(itemTypes, item, it.opts.strictNumbers, DataType.Wrong)\n      const indices = gen.const(\"indices\", _`{}`)\n      gen.for(_`;${i}--;`, () => {\n        gen.let(item, _`${data}[${i}]`)\n        gen.if(wrongType, _`continue`)\n        if (itemTypes.length > 1) gen.if(_`typeof ${item} == \"string\"`, _`${item} += \"_\"`)\n        gen\n          .if(_`typeof ${indices}[${item}] == \"number\"`, () => {\n            gen.assign(j, _`${indices}[${item}]`)\n            cxt.error()\n            gen.assign(valid, false).break()\n          })\n          .code(_`${indices}[${item}] = ${i}`)\n      })\n    }\n\n    function loopN2(i: Name, j: Name): void {\n      const eql = useFunc(gen, equal)\n      const outer = gen.name(\"outer\")\n      gen.label(outer).for(_`;${i}--;`, () =>\n        gen.for(_`${j} = ${i}; ${j}--;`, () =>\n          gen.if(_`${eql}(${data}[${i}], ${data}[${j}])`, () => {\n            cxt.error()\n            gen.assign(valid, false).break(outer)\n          })\n        )\n      )\n    }\n  },\n}\n\nexport default def\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","'use strict';\n\n// MODULES //\n\nvar isArray = require( 'validate.io-array' ),\n\tisIntegerArray = require( 'validate.io-integer-array' ),\n\tisFunction = require( 'validate.io-function' );\n\n\n// VARIABLES //\n\nvar MAXINT = Math.pow( 2, 31 ) - 1;\n\n\n// FUNCTIONS //\n\n/**\n* FUNCTION: gcd( a, b )\n*\tComputes the greatest common divisor of two integers `a` and `b`, using the binary GCD algorithm.\n*\n* @param {Number} a - integer\n* @param {Number} b - integer\n* @returns {Number} greatest common divisor\n*/\nfunction gcd( a, b ) {\n\tvar k = 1,\n\t\tt;\n\t// Simple cases:\n\tif ( a === 0 ) {\n\t\treturn b;\n\t}\n\tif ( b === 0 ) {\n\t\treturn a;\n\t}\n\t// Reduce `a` and/or `b` to odd numbers and keep track of the greatest power of 2 dividing both `a` and `b`...\n\twhile ( a%2 === 0 && b%2 === 0 ) {\n\t\ta = a / 2; // right shift\n\t\tb = b / 2; // right shift\n\t\tk = k * 2; // left shift\n\t}\n\t// Reduce `a` to an odd number...\n\twhile ( a%2 === 0 ) {\n\t\ta = a / 2; // right shift\n\t}\n\t// Henceforth, `a` is always odd...\n\twhile ( b ) {\n\t\t// Remove all factors of 2 in `b`, as they are not common...\n\t\twhile ( b%2 === 0 ) {\n\t\t\tb = b / 2; // right shift\n\t\t}\n\t\t// `a` and `b` are both odd. Swap values such that `b` is the larger of the two values, and then set `b` to the difference (which is even)...\n\t\tif ( a > b ) {\n\t\t\tt = b;\n\t\t\tb = a;\n\t\t\ta = t;\n\t\t}\n\t\tb = b - a; // b=0 iff b=a\n\t}\n\t// Restore common factors of 2...\n\treturn k * a;\n} // end FUNCTION gcd()\n\n/**\n* FUNCTION: bitwise( a, b )\n*\tComputes the greatest common divisor of two integers `a` and `b`, using the binary GCD algorithm and bitwise operations.\n*\n* @param {Number} a - safe integer\n* @param {Number} b - safe integer\n* @returns {Number} greatest common divisor\n*/\nfunction bitwise( a, b ) {\n\tvar k = 0,\n\t\tt;\n\t// Simple cases:\n\tif ( a === 0 ) {\n\t\treturn b;\n\t}\n\tif ( b === 0 ) {\n\t\treturn a;\n\t}\n\t// Reduce `a` and/or `b` to odd numbers and keep track of the greatest power of 2 dividing both `a` and `b`...\n\twhile ( (a & 1) === 0 && (b & 1) === 0 ) {\n\t\ta >>>= 1; // right shift\n\t\tb >>>= 1; // right shift\n\t\tk++;\n\t}\n\t// Reduce `a` to an odd number...\n\twhile ( (a & 1) === 0 ) {\n\t\ta >>>= 1; // right shift\n\t}\n\t// Henceforth, `a` is always odd...\n\twhile ( b ) {\n\t\t// Remove all factors of 2 in `b`, as they are not common...\n\t\twhile ( (b & 1) === 0 ) {\n\t\t\tb >>>= 1; // right shift\n\t\t}\n\t\t// `a` and `b` are both odd. Swap values such that `b` is the larger of the two values, and then set `b` to the difference (which is even)...\n\t\tif ( a > b ) {\n\t\t\tt = b;\n\t\t\tb = a;\n\t\t\ta = t;\n\t\t}\n\t\tb = b - a; // b=0 iff b=a\n\t}\n\t// Restore common factors of 2...\n\treturn a << k;\n} // end FUNCTION bitwise()\n\n\n// GREATEST COMMON DIVISOR //\n\n/**\n* FUNCTION: compute( arr[, clbk] )\n*\tComputes the greatest common divisor.\n*\n* @param {Number[]|Number} arr - input array of integers\n* @param {Function|Number} [clbk] - accessor function for accessing array values\n* @returns {Number|Null} greatest common divisor or null\n*/\nfunction compute() {\n\tvar nargs = arguments.length,\n\t\targs,\n\t\tclbk,\n\t\tarr,\n\t\tlen,\n\t\ta, b,\n\t\ti;\n\n\t// Copy the input arguments to an array...\n\targs = new Array( nargs );\n\tfor ( i = 0; i < nargs; i++ ) {\n\t\targs[ i ] = arguments[ i ];\n\t}\n\t// Have we been provided with integer arguments?\n\tif ( isIntegerArray( args ) ) {\n\t\tif ( nargs === 2 ) {\n\t\t\ta = args[ 0 ];\n\t\t\tb = args[ 1 ];\n\t\t\tif ( a < 0 ) {\n\t\t\t\ta = -a;\n\t\t\t}\n\t\t\tif ( b < 0 ) {\n\t\t\t\tb = -b;\n\t\t\t}\n\t\t\tif ( a <= MAXINT && b <= MAXINT ) {\n\t\t\t\treturn bitwise( a, b );\n\t\t\t} else {\n\t\t\t\treturn gcd( a, b );\n\t\t\t}\n\t\t}\n\t\tarr = args;\n\t}\n\t// If not integers, ensure the first argument is an array...\n\telse if ( !isArray( args[ 0 ] ) ) {\n\t\tthrow new TypeError( 'gcd()::invalid input argument. Must provide an array of integers. Value: `' + args[ 0 ] + '`.' );\n\t}\n\t// Have we been provided with more than one argument? If so, ensure that the accessor argument is a function...\n\telse if ( nargs > 1 ) {\n\t\tarr = args[ 0 ];\n\t\tclbk = args[ 1 ];\n\t\tif ( !isFunction( clbk ) ) {\n\t\t\tthrow new TypeError( 'gcd()::invalid input argument. Accessor must be a function. Value: `' + clbk + '`.' );\n\t\t}\n\t}\n\t// We have been provided an array...\n\telse {\n\t\tarr = args[ 0 ];\n\t}\n\tlen = arr.length;\n\n\t// Check if a sufficient number of values have been provided...\n\tif ( len < 2 ) {\n\t\treturn null;\n\t}\n\t// If an accessor is provided, extract the array values...\n\tif ( clbk ) {\n\t\ta = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\ta[ i ] = clbk( arr[ i ], i );\n\t\t}\n\t\tarr = a;\n\t}\n\t// Given an input array, ensure all array values are integers...\n\tif ( nargs < 3 ) {\n\t\tif ( !isIntegerArray( arr ) ) {\n\t\t\tthrow new TypeError( 'gcd()::invalid input argument. Accessed array values must be integers. Value: `' + arr + '`.' );\n\t\t}\n\t}\n\t// Convert any negative integers to positive integers...\n\tfor ( i = 0; i < len; i++ ) {\n\t\ta = arr[ i ];\n\t\tif ( a < 0 ) {\n\t\t\tarr[ i ] = -a;\n\t\t}\n\t}\n\t// Exploit the fact that the gcd is an associative function...\n\ta = arr[ 0 ];\n\tfor ( i = 1; i < len; i++ ) {\n\t\tb = arr[ i ];\n\t\tif ( b <= MAXINT && a <= MAXINT ) {\n\t\t\ta = bitwise( a, b );\n\t\t} else {\n\t\t\ta = gcd( a, b );\n\t\t}\n\t}\n\treturn a;\n} // end FUNCTION compute()\n\n\n// EXPORTS //\n\nmodule.exports = compute;\n","'use strict';\n\n// MODULES //\n\nvar gcd = require( 'compute-gcd' ),\n\tisArray = require( 'validate.io-array' ),\n\tisIntegerArray = require( 'validate.io-integer-array' ),\n\tisFunction = require( 'validate.io-function' );\n\n\n// LEAST COMMON MULTIPLE //\n\n/**\n* FUNCTION: lcm( arr[, clbk] )\n*\tComputes the least common multiple (lcm).\n*\n* @param {Number[]|Number} arr - input array of integers\n* @param {Function|Number} [accessor] - accessor function for accessing array values\n* @returns {Number|Null} least common multiple or null\n*/\nfunction lcm() {\n\tvar nargs = arguments.length,\n\t\targs,\n\t\tclbk,\n\t\tarr,\n\t\tlen,\n\t\ta, b,\n\t\ti;\n\n\t// Copy the input arguments to an array...\n\targs = new Array( nargs );\n\tfor ( i = 0; i < nargs; i++ ) {\n\t\targs[ i ] = arguments[ i ];\n\t}\n\t// Have we been provided with integer arguments?\n\tif ( isIntegerArray( args ) ) {\n\t\tif ( nargs === 2 ) {\n\t\t\ta = args[ 0 ];\n\t\t\tb = args[ 1 ];\n\t\t\tif ( a < 0 ) {\n\t\t\t\ta = -a;\n\t\t\t}\n\t\t\tif ( b < 0 ) {\n\t\t\t\tb = -b;\n\t\t\t}\n\t\t\tif ( a === 0 || b === 0 ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn ( a/gcd(a,b) ) * b;\n\t\t}\n\t\tarr = args;\n\t}\n\t// If not integers, ensure that the first argument is an array...\n\telse if ( !isArray( args[ 0 ] ) ) {\n\t\tthrow new TypeError( 'lcm()::invalid input argument. Must provide an array of integers. Value: `' + args[ 0 ] + '`.' );\n\t}\n\t// Have we been provided with more than one argument? If so, ensure that the accessor argument is a function...\n\telse if ( nargs > 1 ) {\n\t\tarr = args[ 0 ];\n\t\tclbk = args[ 1 ];\n\t\tif ( !isFunction( clbk ) ) {\n\t\t\tthrow new TypeError( 'lcm()::invalid input argument. Accessor must be a function. Value: `' + clbk + '`.' );\n\t\t}\n\t}\n\t// We have been provided an array...\n\telse {\n\t\tarr = args[ 0 ];\n\t}\n\tlen = arr.length;\n\n\t// Check if a sufficient number of values have been provided...\n\tif ( len < 2 ) {\n\t\treturn null;\n\t}\n\t// If an accessor is provided, extract the array values...\n\tif ( clbk ) {\n\t\ta = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\ta[ i ] = clbk( arr[ i ], i );\n\t\t}\n\t\tarr = a;\n\t}\n\t// Given an input array, ensure all array values are integers...\n\tif ( nargs < 3 ) {\n\t\tif ( !isIntegerArray( arr ) ) {\n\t\t\tthrow new TypeError( 'lcm()::invalid input argument. Accessed array values must be integers. Value: `' + arr + '`.' );\n\t\t}\n\t}\n\t// Convert any negative integers to positive integers...\n\tfor ( i = 0; i < len; i++ ) {\n\t\ta = arr[ i ];\n\t\tif ( a < 0 ) {\n\t\t\tarr[ i ] = -a;\n\t\t}\n\t}\n\t// Exploit the fact that the lcm is an associative function...\n\ta = arr[ 0 ];\n\tfor ( i = 1; i < len; i++ ) {\n\t\tb = arr[ i ];\n\t\tif ( a === 0 || b === 0 ) {\n\t\t\treturn 0;\n\t\t}\n\t\ta = ( a/gcd(a,b) ) * b;\n\t}\n\treturn a;\n} // end FUNCTION lcm()\n\n\n// EXPORTS //\n\nmodule.exports = lcm;\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","var isEqual = require('lodash/isEqual')\nvar sortBy = require('lodash/sortBy')\nvar uniq = require('lodash/uniq')\nvar uniqWith = require('lodash/uniqWith')\nvar defaults = require('lodash/defaults')\nvar intersectionWith = require('lodash/intersectionWith')\nvar isPlainObject = require('lodash/isPlainObject')\nvar isBoolean = require('lodash/isBoolean')\n\nvar normalizeArray = val => Array.isArray(val)\n  ? val : [val]\nvar undef = val => val === undefined\nvar keys = obj => isPlainObject(obj) || Array.isArray(obj) ? Object.keys(obj) : []\nvar has = (obj, key) => obj.hasOwnProperty(key)\nvar stringArray = arr => sortBy(uniq(arr))\nvar undefEmpty = val => undef(val) || (Array.isArray(val) && val.length === 0)\nvar keyValEqual = (a, b, key, compare) => b && has(b, key) && a && has(a, key) && compare(a[key], b[key])\nvar undefAndZero = (a, b) => (undef(a) && b === 0) || (undef(b) && a === 0) || isEqual(a, b)\nvar falseUndefined = (a, b) => (undef(a) && b === false) || (undef(b) && a === false) || isEqual(a, b)\nvar emptySchema = schema => undef(schema) || isEqual(schema, {}) || schema === true\nvar emptyObjUndef = schema => undef(schema) || isEqual(schema, {})\nvar isSchema = val => undef(val) || isPlainObject(val) || val === true || val === false\n\nfunction undefArrayEqual(a, b) {\n  if (undefEmpty(a) && undefEmpty(b)) {\n    return true\n  } else {\n    return isEqual(stringArray(a), stringArray(b))\n  }\n}\n\nfunction unsortedNormalizedArray(a, b) {\n  a = normalizeArray(a)\n  b = normalizeArray(b)\n  return isEqual(stringArray(a), stringArray(b))\n}\n\nfunction schemaGroup(a, b, key, compare) {\n  var allProps = uniq(keys(a).concat(keys(b)))\n  if (emptyObjUndef(a) && emptyObjUndef(b)) {\n    return true\n  } else if (emptyObjUndef(a) && keys(b).length) {\n    return false\n  } else if (emptyObjUndef(b) && keys(a).length) {\n    return false\n  }\n\n  return allProps.every(function(key) {\n    var aVal = a[key]\n    var bVal = b[key]\n    if (Array.isArray(aVal) && Array.isArray(bVal)) {\n      return isEqual(stringArray(a), stringArray(b))\n    } else if (Array.isArray(aVal) && !Array.isArray(bVal)) {\n      return false\n    } else if (Array.isArray(bVal) && !Array.isArray(aVal)) {\n      return false\n    }\n    return keyValEqual(a, b, key, compare)\n  })\n}\n\nfunction items(a, b, key, compare) {\n  if (isPlainObject(a) && isPlainObject(b)) {\n    return compare(a, b)\n  } else if (Array.isArray(a) && Array.isArray(b)) {\n    return schemaGroup(a, b, key, compare)\n  } else {\n    return isEqual(a, b)\n  }\n}\n\nfunction unsortedArray(a, b, key, compare) {\n  var uniqueA = uniqWith(a, compare)\n  var uniqueB = uniqWith(b, compare)\n  var inter = intersectionWith(uniqueA, uniqueB, compare)\n  return inter.length === Math.max(uniqueA.length, uniqueB.length)\n}\n\nvar comparers = {\n  title: isEqual,\n  uniqueItems: falseUndefined,\n  minLength: undefAndZero,\n  minItems: undefAndZero,\n  minProperties: undefAndZero,\n  required: undefArrayEqual,\n  enum: undefArrayEqual,\n  type: unsortedNormalizedArray,\n  items: items,\n  anyOf: unsortedArray,\n  allOf: unsortedArray,\n  oneOf: unsortedArray,\n  properties: schemaGroup,\n  patternProperties: schemaGroup,\n  dependencies: schemaGroup\n}\n\nvar acceptsUndefined = [\n  'properties',\n  'patternProperties',\n  'dependencies',\n  'uniqueItems',\n  'minLength',\n  'minItems',\n  'minProperties',\n  'required'\n]\n\nvar schemaProps = ['additionalProperties', 'additionalItems', 'contains', 'propertyNames', 'not']\n\nfunction compare(a, b, options) {\n  options = defaults(options, {\n    ignore: []\n  })\n\n  if (emptySchema(a) && emptySchema(b)) {\n    return true\n  }\n\n  if (!isSchema(a) || !isSchema(b)) {\n    throw new Error('Either of the values are not a JSON schema.')\n  }\n  if (a === b) {\n    return true\n  }\n\n  if (isBoolean(a) && isBoolean(b)) {\n    return a === b\n  }\n\n  if ((a === undefined && b === false) || (b === undefined && a === false)) {\n    return false\n  }\n\n  if ((undef(a) && !undef(b)) || (!undef(a) && undef(b))) {\n    return false\n  }\n\n  var allKeys = uniq(Object.keys(a).concat(Object.keys(b)))\n\n  if (options.ignore.length) {\n    allKeys = allKeys.filter(k => options.ignore.indexOf(k) === -1)\n  }\n\n  if (!allKeys.length) {\n    return true\n  }\n\n  function innerCompare(a, b) {\n    return compare(a, b, options)\n  }\n\n  return allKeys.every(function(key) {\n    var aValue = a[key]\n    var bValue = b[key]\n\n    if (schemaProps.indexOf(key) !== -1) {\n      return compare(aValue, bValue, options)\n    }\n\n    var comparer = comparers[key]\n    if (!comparer) {\n      comparer = isEqual\n    }\n\n    // do simple lodash check first\n    if (isEqual(aValue, bValue)) {\n      return true\n    }\n\n    if (acceptsUndefined.indexOf(key) === -1) {\n      if ((!has(a, key) && has(b, key)) || (has(a, key) && !has(b, key))) {\n        return aValue === bValue\n      }\n    }\n\n    var result = comparer(aValue, bValue, key, innerCompare)\n    if (!isBoolean(result)) {\n      throw new Error('Comparer must return true or false')\n    }\n    return result\n  })\n}\n\nmodule.exports = compare\n","const flatten = require('lodash/flatten')\nconst flattenDeep = require('lodash/flattenDeep')\nconst isPlainObject = require('lodash/isPlainObject')\nconst uniq = require('lodash/uniq')\nconst uniqWith = require('lodash/uniqWith')\nconst without = require('lodash/without')\n\nfunction deleteUndefinedProps(returnObject) {\n  // cleanup empty\n  for (const prop in returnObject) {\n    if (has(returnObject, prop) && isEmptySchema(returnObject[prop])) {\n      delete returnObject[prop]\n    }\n  }\n  return returnObject\n}\n\nconst allUniqueKeys = (arr) => uniq(flattenDeep(arr.map(keys)))\nconst getValues = (schemas, key) => schemas.map(schema => schema && schema[key])\nconst has = (obj, propName) => Object.prototype.hasOwnProperty.call(obj, propName)\nconst keys = obj => {\n  if (isPlainObject(obj) || Array.isArray(obj)) {\n    return Object.keys(obj)\n  } else {\n    return []\n  }\n}\n\nconst notUndefined = (val) => val !== undefined\nconst isSchema = (val) => isPlainObject(val) || val === true || val === false\nconst isEmptySchema = (obj) => (!keys(obj).length) && obj !== false && obj !== true\nconst withoutArr = (arr, ...rest) => without.apply(null, [arr].concat(flatten(rest)))\n\nmodule.exports = {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  getValues,\n  has,\n  isEmptySchema,\n  isSchema,\n  keys,\n  notUndefined,\n  uniqWith,\n  withoutArr\n}\n","\nconst compare = require('json-schema-compare')\nconst forEach = require('lodash/forEach')\nconst {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  has,\n  isSchema,\n  notUndefined,\n  uniqWith\n} = require('../common')\n\nfunction removeFalseSchemasFromArray(target) {\n  forEach(target, function(schema, index) {\n    if (schema === false) {\n      target.splice(index, 1)\n    }\n  })\n}\n\nfunction getItemSchemas(subSchemas, key) {\n  return subSchemas.map(function(sub) {\n    if (!sub) {\n      return undefined\n    }\n\n    if (Array.isArray(sub.items)) {\n      const schemaAtPos = sub.items[key]\n      if (isSchema(schemaAtPos)) {\n        return schemaAtPos\n      } else if (has(sub, 'additionalItems')) {\n        return sub.additionalItems\n      }\n    } else {\n      return sub.items\n    }\n\n    return undefined\n  })\n}\n\nfunction getAdditionalSchemas(subSchemas) {\n  return subSchemas.map(function(sub) {\n    if (!sub) {\n      return undefined\n    }\n    if (Array.isArray(sub.items)) {\n      return sub.additionalItems\n    }\n    return sub.items\n  })\n}\n\n// Provide source when array\nfunction mergeItems(group, mergeSchemas, items) {\n  const allKeys = allUniqueKeys(items)\n  return allKeys.reduce(function(all, key) {\n    const schemas = getItemSchemas(group, key)\n    const compacted = uniqWith(schemas.filter(notUndefined), compare)\n    all[key] = mergeSchemas(compacted, key)\n    return all\n  }, [])\n}\n\nmodule.exports = {\n  keywords: ['items', 'additionalItems'],\n  resolver(values, parents, mergers) {\n    // const createSubMerger = groupKey => (schemas, key) => mergeSchemas(schemas, parents.concat(groupKey, key))\n    const items = values.map(s => s.items)\n    const itemsCompacted = items.filter(notUndefined)\n    const returnObject = {}\n\n    // if all items keyword values are schemas, we can merge them as simple schemas\n    // if not we need to merge them as mixed\n    if (itemsCompacted.every(isSchema)) {\n      returnObject.items = mergers.items(items)\n    } else {\n      returnObject.items = mergeItems(values, mergers.items, items)\n    }\n\n    let schemasAtLastPos\n    if (itemsCompacted.every(Array.isArray)) {\n      schemasAtLastPos = values.map(s => s.additionalItems)\n    } else if (itemsCompacted.some(Array.isArray)) {\n      schemasAtLastPos = getAdditionalSchemas(values)\n    }\n\n    if (schemasAtLastPos) {\n      returnObject.additionalItems = mergers.additionalItems(schemasAtLastPos)\n    }\n\n    if (returnObject.additionalItems === false && Array.isArray(returnObject.items)) {\n      removeFalseSchemasFromArray(returnObject.items)\n    }\n\n    return deleteUndefinedProps(returnObject)\n  }\n}\n","\nconst compare = require('json-schema-compare')\nconst forEach = require('lodash/forEach')\nconst {\n  allUniqueKeys,\n  deleteUndefinedProps,\n  getValues,\n  keys,\n  notUndefined,\n  uniqWith,\n  withoutArr\n} = require('../common')\n\nfunction removeFalseSchemas(target) {\n  forEach(target, function(schema, prop) {\n    if (schema === false) {\n      delete target[prop]\n    }\n  })\n}\n\nfunction mergeSchemaGroup(group, mergeSchemas) {\n  const allKeys = allUniqueKeys(group)\n  return allKeys.reduce(function(all, key) {\n    const schemas = getValues(group, key)\n    const compacted = uniqWith(schemas.filter(notUndefined), compare)\n    all[key] = mergeSchemas(compacted, key)\n    return all\n  }, {})\n}\n\nmodule.exports = {\n  keywords: ['properties', 'patternProperties', 'additionalProperties'],\n  resolver(values, parents, mergers, options) {\n    // first get rid of all non permitted properties\n    if (!options.ignoreAdditionalProperties) {\n      values.forEach(function(subSchema) {\n        const otherSubSchemas = values.filter(s => s !== subSchema)\n        const ownKeys = keys(subSchema.properties)\n        const ownPatternKeys = keys(subSchema.patternProperties)\n        const ownPatterns = ownPatternKeys.map(k => new RegExp(k))\n        otherSubSchemas.forEach(function(other) {\n          const allOtherKeys = keys(other.properties)\n          const keysMatchingPattern = allOtherKeys.filter(k => ownPatterns.some(pk => pk.test(k)))\n          const additionalKeys = withoutArr(allOtherKeys, ownKeys, keysMatchingPattern)\n          additionalKeys.forEach(function(key) {\n            other.properties[key] = mergers.properties([\n              other.properties[key], subSchema.additionalProperties\n            ], key)\n          })\n        })\n      })\n\n      // remove disallowed patternProperties\n      values.forEach(function(subSchema) {\n        const otherSubSchemas = values.filter(s => s !== subSchema)\n        const ownPatternKeys = keys(subSchema.patternProperties)\n        if (subSchema.additionalProperties === false) {\n          otherSubSchemas.forEach(function(other) {\n            const allOtherPatterns = keys(other.patternProperties)\n            const additionalPatternKeys = withoutArr(allOtherPatterns, ownPatternKeys)\n            additionalPatternKeys.forEach(key => delete other.patternProperties[key])\n          })\n        }\n      })\n    }\n\n    const returnObject = {\n      additionalProperties: mergers.additionalProperties(values.map(s => s.additionalProperties)),\n      patternProperties: mergeSchemaGroup(values.map(s => s.patternProperties), mergers.patternProperties),\n      properties: mergeSchemaGroup(values.map(s => s.properties), mergers.properties)\n    }\n\n    if (returnObject.additionalProperties === false) {\n      removeFalseSchemas(returnObject.properties)\n    }\n\n    return deleteUndefinedProps(returnObject)\n  }\n}\n","const cloneDeep = require('lodash/cloneDeep')\nconst compare = require('json-schema-compare')\nconst computeLcm = require('compute-lcm')\nconst defaultsDeep = require('lodash/defaultsDeep')\nconst flatten = require('lodash/flatten')\nconst flattenDeep = require('lodash/flattenDeep')\nconst intersection = require('lodash/intersection')\nconst intersectionWith = require('lodash/intersectionWith')\nconst isEqual = require('lodash/isEqual')\nconst isPlainObject = require('lodash/isPlainObject')\nconst pullAll = require('lodash/pullAll')\nconst sortBy = require('lodash/sortBy')\nconst uniq = require('lodash/uniq')\nconst uniqWith = require('lodash/uniqWith')\n\nconst propertiesResolver = require('./complex-resolvers/properties')\nconst itemsResolver = require('./complex-resolvers/items')\n\nconst contains = (arr, val) => arr.indexOf(val) !== -1\nconst isSchema = (val) => isPlainObject(val) || val === true || val === false\nconst isFalse = (val) => val === false\nconst isTrue = (val) => val === true\nconst schemaResolver = (compacted, key, mergeSchemas) => mergeSchemas(compacted)\nconst stringArray = (values) => sortBy(uniq(flattenDeep(values)))\nconst notUndefined = (val) => val !== undefined\nconst allUniqueKeys = (arr) => uniq(flattenDeep(arr.map(keys)))\n\n// resolvers\nconst first = compacted => compacted[0]\nconst required = compacted => stringArray(compacted)\nconst maximumValue = compacted => Math.max.apply(Math, compacted)\nconst minimumValue = compacted => Math.min.apply(Math, compacted)\nconst uniqueItems = compacted => compacted.some(isTrue)\nconst examples = compacted => uniqWith(flatten(compacted), isEqual)\n\nfunction compareProp(key) {\n  return function(a, b) {\n    return compare({\n      [key]: a\n    }, { [key]: b })\n  }\n}\n\nfunction getAllOf(schema) {\n  let { allOf = [], ...copy } = schema\n  copy = isPlainObject(schema) ? copy : schema // if schema is boolean\n  return [copy, ...allOf.map(getAllOf)]\n}\n\nfunction getValues(schemas, key) {\n  return schemas.map(schema => schema && schema[key])\n}\n\nfunction tryMergeSchemaGroups(schemaGroups, mergeSchemas) {\n  return schemaGroups.map(function(schemas, index) {\n    try {\n      return mergeSchemas(schemas, index)\n    } catch (e) {\n      return undefined\n    }\n  }).filter(notUndefined)\n}\n\nfunction keys(obj) {\n  if (isPlainObject(obj) || Array.isArray(obj)) {\n    return Object.keys(obj)\n  } else {\n    return []\n  }\n}\n\nfunction getAnyOfCombinations(arrOfArrays, combinations) {\n  combinations = combinations || []\n  if (!arrOfArrays.length) {\n    return combinations\n  }\n\n  const values = arrOfArrays.slice(0).shift()\n  const rest = arrOfArrays.slice(1)\n  if (combinations.length) {\n    return getAnyOfCombinations(rest, flatten(combinations.map(combination => values.map(item => ([item].concat(combination))))))\n  }\n  return getAnyOfCombinations(rest, values.map(item => (item)))\n}\n\nfunction throwIncompatible(values, paths) {\n  let asJSON\n  try {\n    asJSON = values.map(function(val) {\n      return JSON.stringify(val, null, 2)\n    }).join('\\n')\n  } catch (variable) {\n    asJSON = values.join(', ')\n  }\n  throw new Error('Could not resolve values for path:\"' + paths.join('.') + '\". They are probably incompatible. Values: \\n' + asJSON)\n}\n\nfunction callGroupResolver(complexKeywords, resolverName, schemas, mergeSchemas, options, parents) {\n  if (complexKeywords.length) {\n    const resolverConfig = options.complexResolvers[resolverName]\n    if (!resolverConfig || !resolverConfig.resolver) {\n      throw new Error('No resolver found for ' + resolverName)\n    }\n\n    // extract all keywords from all the schemas that have one or more\n    // then remove all undefined ones and not unique\n    const extractedKeywordsOnly = schemas.map(schema => complexKeywords.reduce((all, key) => {\n      if (schema[key] !== undefined) all[key] = schema[key]\n      return all\n    }, {}))\n    const unique = uniqWith(extractedKeywordsOnly, compare)\n\n    // create mergers that automatically add the path of the keyword for use in the complex resolver\n    const mergers = resolverConfig.keywords.reduce((all, key) => ({\n      ...all,\n      [key]: (schemas, extraKey = []) => mergeSchemas(schemas, null, parents.concat(key, extraKey))\n    }), {})\n\n    const result = resolverConfig.resolver(unique, parents.concat(resolverName), mergers, options)\n\n    if (!isPlainObject(result)) {\n      throwIncompatible(unique, parents.concat(resolverName))\n    }\n\n    return result\n  }\n}\n\nfunction createRequiredMetaArray(arr) {\n  return { required: arr }\n}\n\nconst schemaGroupProps = ['properties', 'patternProperties', 'definitions', 'dependencies']\nconst schemaArrays = ['anyOf', 'oneOf']\nconst schemaProps = [\n  'additionalProperties',\n  'additionalItems',\n  'contains',\n  'propertyNames',\n  'not',\n  'items'\n]\n\nconst defaultResolvers = {\n  type(compacted) {\n    if (compacted.some(Array.isArray)) {\n      const normalized = compacted.map(function(val) {\n        return Array.isArray(val)\n          ? val\n          : [val]\n      })\n      const common = intersection.apply(null, normalized)\n\n      if (common.length === 1) {\n        return common[0]\n      } else if (common.length > 1) {\n        return uniq(common)\n      }\n    }\n  },\n  dependencies(compacted, paths, mergeSchemas) {\n    const allChildren = allUniqueKeys(compacted)\n\n    return allChildren.reduce(function(all, childKey) {\n      const childSchemas = getValues(compacted, childKey)\n      let innerCompacted = uniqWith(childSchemas.filter(notUndefined), isEqual)\n\n      // to support dependencies\n      const innerArrays = innerCompacted.filter(Array.isArray)\n\n      if (innerArrays.length) {\n        if (innerArrays.length === innerCompacted.length) {\n          all[childKey] = stringArray(innerCompacted)\n        } else {\n          const innerSchemas = innerCompacted.filter(isSchema)\n          const arrayMetaScheams = innerArrays.map(createRequiredMetaArray)\n          all[childKey] = mergeSchemas(innerSchemas.concat(arrayMetaScheams), childKey)\n        }\n        return all\n      }\n\n      innerCompacted = uniqWith(innerCompacted, compare)\n\n      all[childKey] = mergeSchemas(innerCompacted, childKey)\n      return all\n    }, {})\n  },\n  oneOf(compacted, paths, mergeSchemas) {\n    const combinations = getAnyOfCombinations(cloneDeep(compacted))\n    const result = tryMergeSchemaGroups(combinations, mergeSchemas)\n    const unique = uniqWith(result, compare)\n\n    if (unique.length) {\n      return unique\n    }\n  },\n  not(compacted) {\n    return { anyOf: compacted }\n  },\n  pattern(compacted) {\n    return compacted.map(r => '(?=' + r + ')').join('')\n  },\n  multipleOf(compacted) {\n    let integers = compacted.slice(0)\n    let factor = 1\n    while (integers.some(n => !Number.isInteger(n))) {\n      integers = integers.map(n => n * 10)\n      factor = factor * 10\n    }\n    return computeLcm(integers) / factor\n  },\n  enum(compacted) {\n    const enums = intersectionWith.apply(null, compacted.concat(isEqual))\n    if (enums.length) {\n      return sortBy(enums)\n    }\n  }\n}\n\ndefaultResolvers.$id = first\ndefaultResolvers.$ref = first\ndefaultResolvers.$schema = first\ndefaultResolvers.additionalItems = schemaResolver\ndefaultResolvers.additionalProperties = schemaResolver\ndefaultResolvers.anyOf = defaultResolvers.oneOf\ndefaultResolvers.contains = schemaResolver\ndefaultResolvers.default = first\ndefaultResolvers.definitions = defaultResolvers.dependencies\ndefaultResolvers.description = first\ndefaultResolvers.examples = examples\ndefaultResolvers.exclusiveMaximum = minimumValue\ndefaultResolvers.exclusiveMinimum = maximumValue\ndefaultResolvers.items = itemsResolver\ndefaultResolvers.maximum = minimumValue\ndefaultResolvers.maxItems = minimumValue\ndefaultResolvers.maxLength = minimumValue\ndefaultResolvers.maxProperties = minimumValue\ndefaultResolvers.minimum = maximumValue\ndefaultResolvers.minItems = maximumValue\ndefaultResolvers.minLength = maximumValue\ndefaultResolvers.minProperties = maximumValue\ndefaultResolvers.properties = propertiesResolver\ndefaultResolvers.propertyNames = schemaResolver\ndefaultResolvers.required = required\ndefaultResolvers.title = first\ndefaultResolvers.uniqueItems = uniqueItems\n\nconst defaultComplexResolvers = {\n  properties: propertiesResolver,\n  items: itemsResolver\n}\n\nfunction merger(rootSchema, options, totalSchemas) {\n  totalSchemas = totalSchemas || []\n  options = defaultsDeep(options, {\n    ignoreAdditionalProperties: false,\n    resolvers: defaultResolvers,\n    complexResolvers: defaultComplexResolvers,\n    deep: true\n  })\n\n  const complexResolvers = Object.entries(options.complexResolvers)\n\n  function mergeSchemas(schemas, base, parents) {\n    schemas = cloneDeep(schemas.filter(notUndefined))\n    parents = parents || []\n    const merged = isPlainObject(base)\n      ? base\n      : {}\n\n    // return undefined, an empty schema\n    if (!schemas.length) {\n      return\n    }\n\n    if (schemas.some(isFalse)) {\n      return false\n    }\n\n    if (schemas.every(isTrue)) {\n      return true\n    }\n\n    // there are no false and we don't need the true ones as they accept everything\n    schemas = schemas.filter(isPlainObject)\n\n    const allKeys = allUniqueKeys(schemas)\n    if (options.deep && contains(allKeys, 'allOf')) {\n      return merger({\n        allOf: schemas\n      }, options, totalSchemas)\n    }\n\n    const complexKeysArr = complexResolvers.map(([mainKeyWord, resolverConf]) =>\n      allKeys.filter(k => resolverConf.keywords.includes(k)))\n\n    // remove all complex keys before simple resolvers\n    complexKeysArr.forEach(keys => pullAll(allKeys, keys))\n\n    // call all simple resolvers for relevant keywords\n    allKeys.forEach(function(key) {\n      const values = getValues(schemas, key)\n      const compacted = uniqWith(values.filter(notUndefined), compareProp(key))\n\n      // arrayprops like anyOf and oneOf must be merged first, as they contains schemas\n      // allOf is treated differently alltogether\n      if (compacted.length === 1 && contains(schemaArrays, key)) {\n        merged[key] = compacted[0].map(schema => mergeSchemas([schema], schema))\n        // prop groups must always be resolved\n      } else if (compacted.length === 1 && !contains(schemaGroupProps, key) && !contains(schemaProps, key)) {\n        merged[key] = compacted[0]\n      } else {\n        const resolver = options.resolvers[key] || options.resolvers.defaultResolver\n        if (!resolver) throw new Error('No resolver found for key ' + key + '. You can provide a resolver for this keyword in the options, or provide a default resolver.')\n\n        const merger = (schemas, extraKey = []) => mergeSchemas(schemas, null, parents.concat(key, extraKey))\n        merged[key] = resolver(compacted, parents.concat(key), merger, options)\n\n        if (merged[key] === undefined) {\n          throwIncompatible(compacted, parents.concat(key))\n        } else if (merged[key] === undefined) {\n          delete merged[key]\n        }\n      }\n    })\n\n    return complexResolvers.reduce((all, [resolverKeyword, config], index) => ({\n      ...all,\n      ...callGroupResolver(complexKeysArr[index], resolverKeyword, schemas, mergeSchemas, options, parents)\n    }), merged)\n  }\n\n  const allSchemas = flattenDeep(getAllOf(rootSchema))\n  const merged = mergeSchemas(allSchemas)\n\n  return merged\n}\n\nmerger.options = {\n  resolvers: defaultResolvers\n}\n\nmodule.exports = merger\n","var hasExcape = /~/\nvar escapeMatcher = /~[01]/g\nfunction escapeReplacer (m) {\n  switch (m) {\n    case '~1': return '/'\n    case '~0': return '~'\n  }\n  throw new Error('Invalid tilde escape: ' + m)\n}\n\nfunction untilde (str) {\n  if (!hasExcape.test(str)) return str\n  return str.replace(escapeMatcher, escapeReplacer)\n}\n\nfunction setter (obj, pointer, value) {\n  var part\n  var hasNextPart\n\n  for (var p = 1, len = pointer.length; p < len;) {\n    if (pointer[p] === 'constructor' || pointer[p] === 'prototype' || pointer[p] === '__proto__') return obj\n\n    part = untilde(pointer[p++])\n    hasNextPart = len > p\n\n    if (typeof obj[part] === 'undefined') {\n      // support setting of /-\n      if (Array.isArray(obj) && part === '-') {\n        part = obj.length\n      }\n\n      // support nested objects/array when setting values\n      if (hasNextPart) {\n        if ((pointer[p] !== '' && pointer[p] < Infinity) || pointer[p] === '-') obj[part] = []\n        else obj[part] = {}\n      }\n    }\n\n    if (!hasNextPart) break\n    obj = obj[part]\n  }\n\n  var oldValue = obj[part]\n  if (value === undefined) delete obj[part]\n  else obj[part] = value\n  return oldValue\n}\n\nfunction compilePointer (pointer) {\n  if (typeof pointer === 'string') {\n    pointer = pointer.split('/')\n    if (pointer[0] === '') return pointer\n    throw new Error('Invalid JSON pointer.')\n  } else if (Array.isArray(pointer)) {\n    for (const part of pointer) {\n      if (typeof part !== 'string' && typeof part !== 'number') {\n        throw new Error('Invalid JSON pointer. Must be of type string or number.')\n      }\n    }\n    return pointer\n  }\n\n  throw new Error('Invalid JSON pointer.')\n}\n\nfunction get (obj, pointer) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  var len = pointer.length\n  if (len === 1) return obj\n\n  for (var p = 1; p < len;) {\n    obj = obj[untilde(pointer[p++])]\n    if (len === p) return obj\n    if (typeof obj !== 'object' || obj === null) return undefined\n  }\n}\n\nfunction set (obj, pointer, value) {\n  if (typeof obj !== 'object') throw new Error('Invalid input object.')\n  pointer = compilePointer(pointer)\n  if (pointer.length === 0) throw new Error('Invalid JSON pointer for set.')\n  return setter(obj, pointer, value)\n}\n\nfunction compile (pointer) {\n  var compiled = compilePointer(pointer)\n  return {\n    get: function (object) {\n      return get(object, compiled)\n    },\n    set: function (object, value) {\n      return set(object, compiled, value)\n    }\n  }\n}\n\nexports.get = get\nexports.set = set\nexports.compile = compile\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOfWith;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var arrayMap = require('./_arrayMap'),\n    baseIndexOf = require('./_baseIndexOf'),\n    baseIndexOfWith = require('./_baseIndexOfWith'),\n    baseUnary = require('./_baseUnary'),\n    copyArray = require('./_copyArray');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAll;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var baseMerge = require('./_baseMerge'),\n    isObject = require('./isObject');\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nmodule.exports = customDefaultsMerge;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n","var apply = require('./_apply'),\n    baseRest = require('./_baseRest'),\n    customDefaultsMerge = require('./_customDefaultsMerge'),\n    mergeWith = require('./mergeWith');\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nmodule.exports = defaultsDeep;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nmodule.exports = flattenDeep;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject'),\n    last = require('./last');\n\n/**\n * This method is like `_.intersection` except that it accepts `comparator`\n * which is invoked to compare elements of `arrays`. The order and references\n * of result values are determined by the first array. The comparator is\n * invoked with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.intersectionWith(objects, others, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }]\n */\nvar intersectionWith = baseRest(function(arrays) {\n  var comparator = last(arrays),\n      mapped = arrayMap(arrays, castArrayLikeObject);\n\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  if (comparator) {\n    mapped.pop();\n  }\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped, undefined, comparator)\n    : [];\n});\n\nmodule.exports = intersectionWith;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * This method is like `_.isEqual` except that it accepts `customizer` which\n * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n * are handled by the method instead. The `customizer` is invoked with up to\n * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * function isGreeting(value) {\n *   return /^h(?:i|ello)$/.test(value);\n * }\n *\n * function customizer(objValue, othValue) {\n *   if (isGreeting(objValue) && isGreeting(othValue)) {\n *     return true;\n *   }\n * }\n *\n * var array = ['hello', 'goodbye'];\n * var other = ['hi', 'goodbye'];\n *\n * _.isEqualWith(array, other, customizer);\n * // => true\n */\nfunction isEqualWith(value, other, customizer) {\n  customizer = typeof customizer == 'function' ? customizer : undefined;\n  var result = customizer ? customizer(value, other) : undefined;\n  return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n}\n\nmodule.exports = isEqualWith;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nmodule.exports = isNil;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var basePullAll = require('./_basePullAll');\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nmodule.exports = pullAll;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var arrayMap = require('./_arrayMap'),\n    copyArray = require('./_copyArray'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol'),\n    stringToPath = require('./_stringToPath'),\n    toKey = require('./_toKey'),\n    toString = require('./toString');\n\n/**\n * Converts `value` to a property path array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Util\n * @param {*} value The value to convert.\n * @returns {Array} Returns the new property path array.\n * @example\n *\n * _.toPath('a.b.c');\n * // => ['a', 'b', 'c']\n *\n * _.toPath('a[0].b.c');\n * // => ['a', '0', 'b', 'c']\n */\nfunction toPath(value) {\n  if (isArray(value)) {\n    return arrayMap(value, toKey);\n  }\n  return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n}\n\nmodule.exports = toPath;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n","var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nmodule.exports = uniqWith;\n","var baseUnset = require('./_baseUnset');\n\n/**\n * Removes the property at `path` of `object`.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n * _.unset(object, 'a[0].b.c');\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n *\n * _.unset(object, ['a', '0', 'b', 'c']);\n * // => true\n *\n * console.log(object);\n * // => { 'a': [{ 'b': {} }] };\n */\nfunction unset(object, path) {\n  return object == null ? true : baseUnset(object, path);\n}\n\nmodule.exports = unset;\n","var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n","'use strict';\n\n/**\n* FUNCTION: isArray( value )\n*\tValidates if a value is an array.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is an array\n*/\nfunction isArray( value ) {\n\treturn Object.prototype.toString.call( value ) === '[object Array]';\n} // end FUNCTION isArray()\n\n// EXPORTS //\n\nmodule.exports = Array.isArray || isArray;\n","/**\n*\n*\tVALIDATE: function\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is a function.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n/**\n* FUNCTION: isFunction( value )\n*\tValidates if a value is a function.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is a function\n*/\nfunction isFunction( value ) {\n\treturn ( typeof value === 'function' );\n} // end FUNCTION isFunction()\n\n\n// EXPORTS //\n\nmodule.exports = isFunction;\n","/**\n*\n*\tVALIDATE: integer-array\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is an integer array.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2015. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2015.\n*\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isArray = require( 'validate.io-array' ),\n\tisInteger = require( 'validate.io-integer' );\n\n\n// IS INTEGER ARRAY //\n\n/**\n* FUNCTION: isIntegerArray( value )\n*\tValidates if a value is an integer array.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating if a value is an integer array\n*/\nfunction isIntegerArray( value ) {\n\tvar len;\n\tif ( !isArray( value ) ) {\n\t\treturn false;\n\t}\n\tlen = value.length;\n\tif ( !len ) {\n\t\treturn false;\n\t}\n\tfor ( var i = 0; i < len; i++ ) {\n\t\tif ( !isInteger( value[i] ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n} // end FUNCTION isIntegerArray()\n\n\n// EXPORTS //\n\nmodule.exports = isIntegerArray;\n","/**\n*\n*\tVALIDATE: integer\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is an integer.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isNumber = require( 'validate.io-number' );\n\n\n// ISINTEGER //\n\n/**\n* FUNCTION: isInteger( value )\n*\tValidates if a value is an integer.\n*\n* @param {Number} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is an integer\n*/\nfunction isInteger( value ) {\n\treturn isNumber( value ) && value%1 === 0;\n} // end FUNCTION isInteger()\n\n\n// EXPORTS //\n\nmodule.exports = isInteger;\n","/**\n*\n*\tVALIDATE: number\n*\n*\n*\tDESCRIPTION:\n*\t\t- Validates if a value is a number.\n*\n*\n*\tNOTES:\n*\t\t[1]\n*\n*\n*\tTODO:\n*\t\t[1]\n*\n*\n*\tLICENSE:\n*\t\tMIT\n*\n*\tCopyright (c) 2014. Athan Reines.\n*\n*\n*\tAUTHOR:\n*\t\tAthan Reines. kgryte@gmail.com. 2014.\n*\n*/\n\n'use strict';\n\n/**\n* FUNCTION: isNumber( value )\n*\tValidates if a value is a number.\n*\n* @param {*} value - value to be validated\n* @returns {Boolean} boolean indicating whether value is a number\n*/\nfunction isNumber( value ) {\n\treturn ( typeof value === 'number' || Object.prototype.toString.call( value ) === '[object Number]' ) && value.valueOf() === value.valueOf();\n} // end FUNCTION isNumber()\n\n\n// EXPORTS //\n\nmodule.exports = isNumber;\n","function _taggedTemplateLiteral(e, t) {\n  return t || (t = e.slice(0)), Object.freeze(Object.defineProperties(e, {\n    raw: {\n      value: Object.freeze(t)\n    }\n  }));\n}\nmodule.exports = _taggedTemplateLiteral, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict'\n\nconst { normalizeIPv6, normalizeIPv4, removeDotSegments, recomposeAuthority, normalizeComponentEncoding } = require('./lib/utils')\nconst SCHEMES = require('./lib/schemes')\n\nfunction normalize (uri, options) {\n  if (typeof uri === 'string') {\n    uri = serialize(parse(uri, options), options)\n  } else if (typeof uri === 'object') {\n    uri = parse(serialize(uri, options), options)\n  }\n  return uri\n}\n\nfunction resolve (baseURI, relativeURI, options) {\n  const schemelessOptions = Object.assign({ scheme: 'null' }, options)\n  const resolved = resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true)\n  return serialize(resolved, { ...schemelessOptions, skipEscape: true })\n}\n\nfunction resolveComponents (base, relative, options, skipNormalization) {\n  const target = {}\n  if (!skipNormalization) {\n    base = parse(serialize(base, options), options) // normalize base components\n    relative = parse(serialize(relative, options), options) // normalize relative components\n  }\n  options = options || {}\n\n  if (!options.tolerant && relative.scheme) {\n    target.scheme = relative.scheme\n    // target.authority = relative.authority;\n    target.userinfo = relative.userinfo\n    target.host = relative.host\n    target.port = relative.port\n    target.path = removeDotSegments(relative.path || '')\n    target.query = relative.query\n  } else {\n    if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n      // target.authority = relative.authority;\n      target.userinfo = relative.userinfo\n      target.host = relative.host\n      target.port = relative.port\n      target.path = removeDotSegments(relative.path || '')\n      target.query = relative.query\n    } else {\n      if (!relative.path) {\n        target.path = base.path\n        if (relative.query !== undefined) {\n          target.query = relative.query\n        } else {\n          target.query = base.query\n        }\n      } else {\n        if (relative.path.charAt(0) === '/') {\n          target.path = removeDotSegments(relative.path)\n        } else {\n          if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n            target.path = '/' + relative.path\n          } else if (!base.path) {\n            target.path = relative.path\n          } else {\n            target.path = base.path.slice(0, base.path.lastIndexOf('/') + 1) + relative.path\n          }\n          target.path = removeDotSegments(target.path)\n        }\n        target.query = relative.query\n      }\n      // target.authority = base.authority;\n      target.userinfo = base.userinfo\n      target.host = base.host\n      target.port = base.port\n    }\n    target.scheme = base.scheme\n  }\n\n  target.fragment = relative.fragment\n\n  return target\n}\n\nfunction equal (uriA, uriB, options) {\n  if (typeof uriA === 'string') {\n    uriA = unescape(uriA)\n    uriA = serialize(normalizeComponentEncoding(parse(uriA, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriA === 'object') {\n    uriA = serialize(normalizeComponentEncoding(uriA, true), { ...options, skipEscape: true })\n  }\n\n  if (typeof uriB === 'string') {\n    uriB = unescape(uriB)\n    uriB = serialize(normalizeComponentEncoding(parse(uriB, options), true), { ...options, skipEscape: true })\n  } else if (typeof uriB === 'object') {\n    uriB = serialize(normalizeComponentEncoding(uriB, true), { ...options, skipEscape: true })\n  }\n\n  return uriA.toLowerCase() === uriB.toLowerCase()\n}\n\nfunction serialize (cmpts, opts) {\n  const components = {\n    host: cmpts.host,\n    scheme: cmpts.scheme,\n    userinfo: cmpts.userinfo,\n    port: cmpts.port,\n    path: cmpts.path,\n    query: cmpts.query,\n    nid: cmpts.nid,\n    nss: cmpts.nss,\n    uuid: cmpts.uuid,\n    fragment: cmpts.fragment,\n    reference: cmpts.reference,\n    resourceName: cmpts.resourceName,\n    secure: cmpts.secure,\n    error: ''\n  }\n  const options = Object.assign({}, opts)\n  const uriTokens = []\n\n  // find scheme handler\n  const schemeHandler = SCHEMES[(options.scheme || components.scheme || '').toLowerCase()]\n\n  // perform scheme specific serialization\n  if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options)\n\n  if (components.path !== undefined) {\n    if (!options.skipEscape) {\n      components.path = escape(components.path)\n\n      if (components.scheme !== undefined) {\n        components.path = components.path.split('%3A').join(':')\n      }\n    } else {\n      components.path = unescape(components.path)\n    }\n  }\n\n  if (options.reference !== 'suffix' && components.scheme) {\n    uriTokens.push(components.scheme)\n    uriTokens.push(':')\n  }\n\n  const authority = recomposeAuthority(components, options)\n  if (authority !== undefined) {\n    if (options.reference !== 'suffix') {\n      uriTokens.push('//')\n    }\n\n    uriTokens.push(authority)\n\n    if (components.path && components.path.charAt(0) !== '/') {\n      uriTokens.push('/')\n    }\n  }\n  if (components.path !== undefined) {\n    let s = components.path\n\n    if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n      s = removeDotSegments(s)\n    }\n\n    if (authority === undefined) {\n      s = s.replace(/^\\/\\//u, '/%2F') // don't allow the path to start with \"//\"\n    }\n\n    uriTokens.push(s)\n  }\n\n  if (components.query !== undefined) {\n    uriTokens.push('?')\n    uriTokens.push(components.query)\n  }\n\n  if (components.fragment !== undefined) {\n    uriTokens.push('#')\n    uriTokens.push(components.fragment)\n  }\n  return uriTokens.join('')\n}\n\nconst hexLookUp = Array.from({ length: 127 }, (v, k) => /[^!\"$&'()*+,\\-.;=_`a-z{}~]/u.test(String.fromCharCode(k)))\n\nfunction nonSimpleDomain (value) {\n  let code = 0\n  for (let i = 0, len = value.length; i < len; ++i) {\n    code = value.charCodeAt(i)\n    if (code > 126 || hexLookUp[code]) {\n      return true\n    }\n  }\n  return false\n}\n\nconst URI_PARSE = /^(?:([^#/:?]+):)?(?:\\/\\/((?:([^#/?@]*)@)?(\\[[^#/?\\]]+\\]|[^#/:?]*)(?::(\\d*))?))?([^#?]*)(?:\\?([^#]*))?(?:#((?:.|[\\n\\r])*))?/u\n\nfunction parse (uri, opts) {\n  const options = Object.assign({}, opts)\n  const parsed = {\n    scheme: undefined,\n    userinfo: undefined,\n    host: '',\n    port: undefined,\n    path: '',\n    query: undefined,\n    fragment: undefined\n  }\n  const gotEncoding = uri.indexOf('%') !== -1\n  let isIP = false\n  if (options.reference === 'suffix') uri = (options.scheme ? options.scheme + ':' : '') + '//' + uri\n\n  const matches = uri.match(URI_PARSE)\n\n  if (matches) {\n    // store each component\n    parsed.scheme = matches[1]\n    parsed.userinfo = matches[3]\n    parsed.host = matches[4]\n    parsed.port = parseInt(matches[5], 10)\n    parsed.path = matches[6] || ''\n    parsed.query = matches[7]\n    parsed.fragment = matches[8]\n\n    // fix port number\n    if (isNaN(parsed.port)) {\n      parsed.port = matches[5]\n    }\n    if (parsed.host) {\n      const ipv4result = normalizeIPv4(parsed.host)\n      if (ipv4result.isIPV4 === false) {\n        const ipv6result = normalizeIPv6(ipv4result.host, { isIPV4: false })\n        parsed.host = ipv6result.host.toLowerCase()\n        isIP = ipv6result.isIPV6\n      } else {\n        parsed.host = ipv4result.host\n        isIP = true\n      }\n    }\n    if (parsed.scheme === undefined && parsed.userinfo === undefined && parsed.host === undefined && parsed.port === undefined && !parsed.path && parsed.query === undefined) {\n      parsed.reference = 'same-document'\n    } else if (parsed.scheme === undefined) {\n      parsed.reference = 'relative'\n    } else if (parsed.fragment === undefined) {\n      parsed.reference = 'absolute'\n    } else {\n      parsed.reference = 'uri'\n    }\n\n    // check for reference errors\n    if (options.reference && options.reference !== 'suffix' && options.reference !== parsed.reference) {\n      parsed.error = parsed.error || 'URI is not a ' + options.reference + ' reference.'\n    }\n\n    // find scheme handler\n    const schemeHandler = SCHEMES[(options.scheme || parsed.scheme || '').toLowerCase()]\n\n    // check if scheme can't handle IRIs\n    if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n      // if host component is a domain name\n      if (parsed.host && (options.domainHost || (schemeHandler && schemeHandler.domainHost)) && isIP === false && nonSimpleDomain(parsed.host)) {\n        // convert Unicode IDN -> ASCII IDN\n        try {\n          parsed.host = URL.domainToASCII(parsed.host.toLowerCase())\n        } catch (e) {\n          parsed.error = parsed.error || \"Host's domain name can not be converted to ASCII: \" + e\n        }\n      }\n      // convert IRI -> URI\n    }\n\n    if (!schemeHandler || (schemeHandler && !schemeHandler.skipNormalize)) {\n      if (gotEncoding && parsed.scheme !== undefined) {\n        parsed.scheme = unescape(parsed.scheme)\n      }\n      if (gotEncoding && parsed.userinfo !== undefined) {\n        parsed.userinfo = unescape(parsed.userinfo)\n      }\n      if (gotEncoding && parsed.host !== undefined) {\n        parsed.host = unescape(parsed.host)\n      }\n      if (parsed.path !== undefined && parsed.path.length) {\n        parsed.path = escape(unescape(parsed.path))\n      }\n      if (parsed.fragment !== undefined && parsed.fragment.length) {\n        parsed.fragment = encodeURI(decodeURIComponent(parsed.fragment))\n      }\n    }\n\n    // perform scheme specific parsing\n    if (schemeHandler && schemeHandler.parse) {\n      schemeHandler.parse(parsed, options)\n    }\n  } else {\n    parsed.error = parsed.error || 'URI can not be parsed.'\n  }\n  return parsed\n}\n\nconst fastUri = {\n  SCHEMES,\n  normalize,\n  resolve,\n  resolveComponents,\n  equal,\n  serialize,\n  parse\n}\n\nmodule.exports = fastUri\nmodule.exports.default = fastUri\nmodule.exports.fastUri = fastUri\n","'use strict'\n\nconst UUID_REG = /^[\\da-f]{8}\\b-[\\da-f]{4}\\b-[\\da-f]{4}\\b-[\\da-f]{4}\\b-[\\da-f]{12}$/iu\nconst URN_REG = /([\\da-z][\\d\\-a-z]{0,31}):((?:[\\w!$'()*+,\\-.:;=@]|%[\\da-f]{2})+)/iu\n\nfunction isSecure (wsComponents) {\n  return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === 'wss'\n}\n\nfunction httpParse (components) {\n  if (!components.host) {\n    components.error = components.error || 'HTTP URIs must have a host.'\n  }\n\n  return components\n}\n\nfunction httpSerialize (components) {\n  const secure = String(components.scheme).toLowerCase() === 'https'\n\n  // normalize the default port\n  if (components.port === (secure ? 443 : 80) || components.port === '') {\n    components.port = undefined\n  }\n\n  // normalize the empty path\n  if (!components.path) {\n    components.path = '/'\n  }\n\n  // NOTE: We do not parse query strings for HTTP URIs\n  // as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n  // and not the HTTP spec.\n\n  return components\n}\n\nfunction wsParse (wsComponents) {\n// indicate if the secure flag is set\n  wsComponents.secure = isSecure(wsComponents)\n\n  // construct resouce name\n  wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '')\n  wsComponents.path = undefined\n  wsComponents.query = undefined\n\n  return wsComponents\n}\n\nfunction wsSerialize (wsComponents) {\n// normalize the default port\n  if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === '') {\n    wsComponents.port = undefined\n  }\n\n  // ensure scheme matches secure flag\n  if (typeof wsComponents.secure === 'boolean') {\n    wsComponents.scheme = (wsComponents.secure ? 'wss' : 'ws')\n    wsComponents.secure = undefined\n  }\n\n  // reconstruct path from resource name\n  if (wsComponents.resourceName) {\n    const [path, query] = wsComponents.resourceName.split('?')\n    wsComponents.path = (path && path !== '/' ? path : undefined)\n    wsComponents.query = query\n    wsComponents.resourceName = undefined\n  }\n\n  // forbid fragment component\n  wsComponents.fragment = undefined\n\n  return wsComponents\n}\n\nfunction urnParse (urnComponents, options) {\n  if (!urnComponents.path) {\n    urnComponents.error = 'URN can not be parsed'\n    return urnComponents\n  }\n  const matches = urnComponents.path.match(URN_REG)\n  if (matches) {\n    const scheme = options.scheme || urnComponents.scheme || 'urn'\n    urnComponents.nid = matches[1].toLowerCase()\n    urnComponents.nss = matches[2]\n    const urnScheme = `${scheme}:${options.nid || urnComponents.nid}`\n    const schemeHandler = SCHEMES[urnScheme]\n    urnComponents.path = undefined\n\n    if (schemeHandler) {\n      urnComponents = schemeHandler.parse(urnComponents, options)\n    }\n  } else {\n    urnComponents.error = urnComponents.error || 'URN can not be parsed.'\n  }\n\n  return urnComponents\n}\n\nfunction urnSerialize (urnComponents, options) {\n  const scheme = options.scheme || urnComponents.scheme || 'urn'\n  const nid = urnComponents.nid.toLowerCase()\n  const urnScheme = `${scheme}:${options.nid || nid}`\n  const schemeHandler = SCHEMES[urnScheme]\n\n  if (schemeHandler) {\n    urnComponents = schemeHandler.serialize(urnComponents, options)\n  }\n\n  const uriComponents = urnComponents\n  const nss = urnComponents.nss\n  uriComponents.path = `${nid || options.nid}:${nss}`\n\n  options.skipEscape = true\n  return uriComponents\n}\n\nfunction urnuuidParse (urnComponents, options) {\n  const uuidComponents = urnComponents\n  uuidComponents.uuid = uuidComponents.nss\n  uuidComponents.nss = undefined\n\n  if (!options.tolerant && (!uuidComponents.uuid || !UUID_REG.test(uuidComponents.uuid))) {\n    uuidComponents.error = uuidComponents.error || 'UUID is not valid.'\n  }\n\n  return uuidComponents\n}\n\nfunction urnuuidSerialize (uuidComponents) {\n  const urnComponents = uuidComponents\n  // normalize UUID\n  urnComponents.nss = (uuidComponents.uuid || '').toLowerCase()\n  return urnComponents\n}\n\nconst http = {\n  scheme: 'http',\n  domainHost: true,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst https = {\n  scheme: 'https',\n  domainHost: http.domainHost,\n  parse: httpParse,\n  serialize: httpSerialize\n}\n\nconst ws = {\n  scheme: 'ws',\n  domainHost: true,\n  parse: wsParse,\n  serialize: wsSerialize\n}\n\nconst wss = {\n  scheme: 'wss',\n  domainHost: ws.domainHost,\n  parse: ws.parse,\n  serialize: ws.serialize\n}\n\nconst urn = {\n  scheme: 'urn',\n  parse: urnParse,\n  serialize: urnSerialize,\n  skipNormalize: true\n}\n\nconst urnuuid = {\n  scheme: 'urn:uuid',\n  parse: urnuuidParse,\n  serialize: urnuuidSerialize,\n  skipNormalize: true\n}\n\nconst SCHEMES = {\n  http,\n  https,\n  ws,\n  wss,\n  urn,\n  'urn:uuid': urnuuid\n}\n\nmodule.exports = SCHEMES\n","'use strict'\n\nconst HEX = {\n  0: 0,\n  1: 1,\n  2: 2,\n  3: 3,\n  4: 4,\n  5: 5,\n  6: 6,\n  7: 7,\n  8: 8,\n  9: 9,\n  a: 10,\n  A: 10,\n  b: 11,\n  B: 11,\n  c: 12,\n  C: 12,\n  d: 13,\n  D: 13,\n  e: 14,\n  E: 14,\n  f: 15,\n  F: 15\n}\n\nmodule.exports = {\n  HEX\n}\n","'use strict'\n\nconst { HEX } = require('./scopedChars')\n\nfunction normalizeIPv4 (host) {\n  if (findToken(host, '.') < 3) { return { host, isIPV4: false } }\n  const matches = host.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u) || []\n  const [address] = matches\n  if (address) {\n    return { host: stripLeadingZeros(address, '.'), isIPV4: true }\n  } else {\n    return { host, isIPV4: false }\n  }\n}\n\n/**\n * @param {string[]} input\n * @param {boolean} [keepZero=false]\n * @returns {string|undefined}\n */\nfunction stringArrayToHexStripped (input, keepZero = false) {\n  let acc = ''\n  let strip = true\n  for (const c of input) {\n    if (HEX[c] === undefined) return undefined\n    if (c !== '0' && strip === true) strip = false\n    if (!strip) acc += c\n  }\n  if (keepZero && acc.length === 0) acc = '0'\n  return acc\n}\n\nfunction getIPV6 (input) {\n  let tokenCount = 0\n  const output = { error: false, address: '', zone: '' }\n  const address = []\n  const buffer = []\n  let isZone = false\n  let endipv6Encountered = false\n  let endIpv6 = false\n\n  function consume () {\n    if (buffer.length) {\n      if (isZone === false) {\n        const hex = stringArrayToHexStripped(buffer)\n        if (hex !== undefined) {\n          address.push(hex)\n        } else {\n          output.error = true\n          return false\n        }\n      }\n      buffer.length = 0\n    }\n    return true\n  }\n\n  for (let i = 0; i < input.length; i++) {\n    const cursor = input[i]\n    if (cursor === '[' || cursor === ']') { continue }\n    if (cursor === ':') {\n      if (endipv6Encountered === true) {\n        endIpv6 = true\n      }\n      if (!consume()) { break }\n      tokenCount++\n      address.push(':')\n      if (tokenCount > 7) {\n        // not valid\n        output.error = true\n        break\n      }\n      if (i - 1 >= 0 && input[i - 1] === ':') {\n        endipv6Encountered = true\n      }\n      continue\n    } else if (cursor === '%') {\n      if (!consume()) { break }\n      // switch to zone detection\n      isZone = true\n    } else {\n      buffer.push(cursor)\n      continue\n    }\n  }\n  if (buffer.length) {\n    if (isZone) {\n      output.zone = buffer.join('')\n    } else if (endIpv6) {\n      address.push(buffer.join(''))\n    } else {\n      address.push(stringArrayToHexStripped(buffer))\n    }\n  }\n  output.address = address.join('')\n  return output\n}\n\nfunction normalizeIPv6 (host, opts = {}) {\n  if (findToken(host, ':') < 2) { return { host, isIPV6: false } }\n  const ipv6 = getIPV6(host)\n\n  if (!ipv6.error) {\n    let newHost = ipv6.address\n    let escapedHost = ipv6.address\n    if (ipv6.zone) {\n      newHost += '%' + ipv6.zone\n      escapedHost += '%25' + ipv6.zone\n    }\n    return { host: newHost, escapedHost, isIPV6: true }\n  } else {\n    return { host, isIPV6: false }\n  }\n}\n\nfunction stripLeadingZeros (str, token) {\n  let out = ''\n  let skip = true\n  const l = str.length\n  for (let i = 0; i < l; i++) {\n    const c = str[i]\n    if (c === '0' && skip) {\n      if ((i + 1 <= l && str[i + 1] === token) || i + 1 === l) {\n        out += c\n        skip = false\n      }\n    } else {\n      if (c === token) {\n        skip = true\n      } else {\n        skip = false\n      }\n      out += c\n    }\n  }\n  return out\n}\n\nfunction findToken (str, token) {\n  let ind = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === token) ind++\n  }\n  return ind\n}\n\nconst RDS1 = /^\\.\\.?\\//u\nconst RDS2 = /^\\/\\.(?:\\/|$)/u\nconst RDS3 = /^\\/\\.\\.(?:\\/|$)/u\nconst RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/u\n\nfunction removeDotSegments (input) {\n  const output = []\n\n  while (input.length) {\n    if (input.match(RDS1)) {\n      input = input.replace(RDS1, '')\n    } else if (input.match(RDS2)) {\n      input = input.replace(RDS2, '/')\n    } else if (input.match(RDS3)) {\n      input = input.replace(RDS3, '/')\n      output.pop()\n    } else if (input === '.' || input === '..') {\n      input = ''\n    } else {\n      const im = input.match(RDS5)\n      if (im) {\n        const s = im[0]\n        input = input.slice(s.length)\n        output.push(s)\n      } else {\n        throw new Error('Unexpected dot segment condition')\n      }\n    }\n  }\n  return output.join('')\n}\n\nfunction normalizeComponentEncoding (components, esc) {\n  const func = esc !== true ? escape : unescape\n  if (components.scheme !== undefined) {\n    components.scheme = func(components.scheme)\n  }\n  if (components.userinfo !== undefined) {\n    components.userinfo = func(components.userinfo)\n  }\n  if (components.host !== undefined) {\n    components.host = func(components.host)\n  }\n  if (components.path !== undefined) {\n    components.path = func(components.path)\n  }\n  if (components.query !== undefined) {\n    components.query = func(components.query)\n  }\n  if (components.fragment !== undefined) {\n    components.fragment = func(components.fragment)\n  }\n  return components\n}\n\nfunction recomposeAuthority (components, options) {\n  const uriTokens = []\n\n  if (components.userinfo !== undefined) {\n    uriTokens.push(components.userinfo)\n    uriTokens.push('@')\n  }\n\n  if (components.host !== undefined) {\n    let host = unescape(components.host)\n    const ipV4res = normalizeIPv4(host)\n\n    if (ipV4res.isIPV4) {\n      host = ipV4res.host\n    } else {\n      const ipV6res = normalizeIPv6(ipV4res.host, { isIPV4: false })\n      if (ipV6res.isIPV6 === true) {\n        host = `[${ipV6res.escapedHost}]`\n      } else {\n        host = components.host\n      }\n    }\n    uriTokens.push(host)\n  }\n\n  if (typeof components.port === 'number' || typeof components.port === 'string') {\n    uriTokens.push(':')\n    uriTokens.push(String(components.port))\n  }\n\n  return uriTokens.length ? uriTokens.join('') : undefined\n};\n\nmodule.exports = {\n  recomposeAuthority,\n  normalizeComponentEncoding,\n  removeDotSegments,\n  normalizeIPv4,\n  normalizeIPv6,\n  stringArrayToHexStripped\n}\n"],"names":["nanoid","size","arguments","length","undefined","crypto","getRandomValues","Uint8Array","reduce","id","byte","toString","toUpperCase","generateRowId","generateKeyedFormData","formData","Array","isArray","map","item","key","keyedToPlainFormData","keyedFormData","keyedItem","ArrayField","Component","constructor","props","super","_getNewFormDataRow","schema","registry","this","schemaUtils","itemSchema","items","isFixedItems","allowAdditionalItems","additionalItems","getDefaultFormState","onAddClick","event","_handleAddClick","onAddIndexClick","index","onCopyIndexClick","preventDefault","onChange","errorSchema","state","newErrorSchema","idx","i","parseInt","set","newKeyedFormDataRow","cloneDeep","newKeyedFormData","splice","push","setState","updatedKeyedFormData","onDropIndexClick","filter","_","onReorderClick","newIndex","currentTarget","blur","_newKeyedFormData","slice","reOrderArray","onChangeForIndex","value","newFormData","onSelectChange","idSchema","$id","getDerivedStateFromProps","nextProps","prevState","nextFormData","previousKeyedFormData","previousKeyedFormDatum","itemTitle","translateString","get","ITEMS_KEY","TranslatableString","ArrayItemTitle","isItemRequired","type","includes","canAddItem","formItems","uiSchema","addable","getUiOptions","globalUiOptions","maxItems","render","uiOptions","UnsupportedFieldTemplate","getTemplate","_jsx","reason","MissingItems","isMultiSelect","renderMultiSelect","isCustomWidget","renderCustomWidget","renderFixedArray","isFilesArray","renderFiles","renderNormalArray","name","title","disabled","readonly","autofocus","required","onBlur","onFocus","idPrefix","idSeparator","rawErrors","fieldTitle","formContext","_schemaItems","isObject","itemsSchema","retrieveSchema","canAdd","arrayProps","itemCast","itemErrorSchema","itemIdPrefix","itemIdSchema","toIdSchema","renderArrayFieldItem","concat","canMoveUp","canMoveDown","itemData","itemUiSchema","totalItems","className","Template","hideError","placeholder","widgets","widget","uiTitle","options","Widget","getWidget","label","_a","displayLabel","getDisplayLabel","multiple","hideLabel","enumOptions","optionsList","itemSchemas","additionalSchema","additional","canRemove","fields","ArraySchemaField","SchemaField","ItemSchemaField","orderable","removable","copyable","has","moveUp","moveDown","copy","remove","toolbar","Object","keys","some","children","hasCopy","hasToolbar","hasMoveUp","hasMoveDown","hasRemove","schemaTitle","yes","YesLabel","no","NoLabel","_b","oneOf","option","const","o","schemaWithEnumNames","enums","_c","enum","enumNames","every","v","AnyOfField","onOptionChange","selectedOption","retrievedOptions","intOption","newOption","oldOption","sanitizeDataForNewSchema","getFieldId","opt","getMatchingOption","componentDidUpdate","prevProps","newState","deepEquals","matchingOption","discriminator","getDiscriminatorFieldFromSchema","getClosestMatchingOption","_SchemaField","autocomplete","ERRORS_KEY","fieldErrorSchema","omit","optionSchema","mergeSchemas","optionsUiSchema","ONE_OF_KEY","console","warn","ANY_OF_KEY","optionUiSchema","translateEnum","TitleOptionPrefix","OptionPrefix","translateParams","String","_jsxs","default","isEmpty","trailingCharMatcherWithPrefix","trailingCharMatcher","initialValue","lastValue","setLastValue","useState","StringField","handleChange","useCallback","charAt","processed","match","asNumber","replace","re","RegExp","r","e","blockQuote","breakLine","breakThematic","codeBlock","codeFenced","codeInline","footnote","footnoteReference","gfmTask","heading","headingSetext","htmlBlock","htmlComment","htmlSelfClosing","image","link","linkAngleBraceStyleDetector","linkBareUrlDetector","linkMailtoDetector","newlineCoalescer","orderedList","paragraph","ref","refImage","refLink","table","tableSeparator","text","textBolded","textEmphasized","textEscaped","textMarked","textStrikethroughed","unorderedList","MAX","HIGH","MED","LOW","MIN","l","n","toLowerCase","for","amp","apos","gt","lt","nbsp","quot","c","a","s","d","u","p","f","h","m","g","y","k","x","b","$","E","w","S","C","A","O","T","L","R","z","M","I","U","j","B","N","H","D","P","F","W","G","Z","q","V","X","Q","J","K","Y","ee","ne","te","ie","le","oe","ce","ae","se","de","ue","pe","fe","he","me","ge","ye","ke","xe","ve","be","t","exec","list","inline","simple","order","parse","indexOf","ordered","start","$e","Ee","we","Se","Ce","Ae","test","Oe","inTable","trim","split","apply","forEach","trimEnd","Te","align","cells","header","Le","textAlign","Re","ze","Me","Ie","Ue","endsWith","je","decodeURIComponent","Be","Ne","He","De","Pe","_e","Fe","We","_len","_key","Boolean","join","Ge","shift","Ze","overrides","slugify","namedCodesToUnicode","createElement","_len2","_key2","forceInline","forceBlock","pop","wrapper","forceWrapper","lang","attrs","identifier","target","href","completed","checked","readOnly","enforceAtxHeadings","level","noInnerParse","tag","inAnchor","alt","src","fallbackChildren","style","disableParsingRawHTML","substring","sort","renderRule","ObjectField","_this","wasPropertyKeyModified","additionalProperties","onPropertyChange","addedByAdditionalProperties","onDropPropertyClick","copiedFormData","unset","getAvailableKey","preferredKey","duplicateKeySuffixSeparator","newKey","onKeyChange","oldValue","newKeys","keyValues","renamedObj","assign","handleAddClick","defaultValue","apSchema","REF_KEY","$ref","getDefaultValue","isRequired","NewStringDefault","rawSchema","properties","schemaProperties","templateTitle","description","_d","orderedProperties","orderProperties","err","color","Markdown","InvalidObjectField","message","JSON","stringify","templateProps","PROPERTIES_KEY","ADDITIONAL_PROPERTY_FLAG","fieldUiSchema","hidden","fieldIdSchema","content","COMPONENT_TYPES","array","boolean","integer","number","object","string","null","SchemaFieldRender","_schema","_idSchema","FieldTemplate","DescriptionFieldTemplate","FieldHelpTemplate","FieldErrorTemplate","fieldId","ID_KEY","mergeObjects","handleFieldComponentChange","FieldComponent","field","schemaType","getSchemaType","schemaId","componentName","anyOf","UnknownFieldType","getFieldComponent","uiSchemaHideError","__errors","UI_OPTIONS_KEY","richDescription","enableMarkdownInDescription","help","classNames","helpComponent","hasErrors","errorsComponent","isSelect","errors","fieldProps","descriptionId","rawDescription","rawHelp","_AnyOfField","_OneOfField","OneOfField","isReplacingAnyOrOneOf","_Fragment","shouldComponentUpdate","format","defaultWidget","hasWidget","useEffect","MultiSchemaField","BooleanField","NumberField","NullField","ArrayFieldDescriptionTemplate","ArrayFieldItemTemplate","CopyButton","MoveDownButton","MoveUpButton","RemoveButton","templates","ButtonTemplates","btnStyle","flex","paddingLeft","paddingRight","fontWeight","display","justifyContent","onClick","ArrayFieldTemplate","ArrayFieldTitleTemplate","AddButton","_ref","itemProps","TitleFieldTemplate","titleId","BaseInputTemplate","onChangeOverride","rest","log","Error","inputProps","getInputProps","inputValue","_onChange","emptyValue","_onBlur","_ref2","_onFocus","_ref3","autoFocus","examples","examplesId","ariaDescribedByIds","example","SubmitButton","submitText","norender","submitButtonProps","getSubmitButtonOptions","IconButton","iconType","icon","otherProps","DescriptionField","ErrorList","ErrorsLabel","error","stack","REQUIRED_FIELD_SYMBOL","Label","htmlFor","WrapIfAdditionalTemplate","errorId","elem","helpId","ObjectFieldTemplate","prop","canExpand","TitleField","UnsupportedField","UnsupportedFieldWithId","UnsupportedFieldWithReason","UnsupportedFieldWithIdAndReason","keyLabel","KeyLabel","border","ErrorListTemplate","DateElement","range","select","rootId","SelectWidget","dateRangeOptions","time","useReducer","action","parseDateString","stateValue","toDateString","values","readyForChange","property","handleSetNow","nextState","Date","toJSON","handleClear","getDateElementProps","yearsRange","elemProps","hideNowButton","NowLabel","hideClearButton","ClearLabel","AltDateWidget","schemaRequiresTrueValue","handleBlur","handleFocus","labelValue","enumDisabled","checkboxesValues","enumOptionsValueForIndex","enumOptionsIsSelected","itemDisabled","disabledCls","checkbox","optionId","enumOptionsSelectValue","enumOptionsDeselectValue","ColorWidget","DateWidget","DateTimeWidget","utcToLocal","localToUTC","EmailWidget","addNameToDataURL","dataURL","encodeURIComponent","processFile","file","Promise","resolve","reject","reader","window","FileReader","onerror","onload","result","readAsDataURL","FileInfoPreview","fileInfo","maxWidth","download","PreviewLabel","FilesInfo","filesInfo","preview","onRemove","handleRemove","files","all","from","then","filesInfoEvent","newValue","useMemo","acc","blob","dataURItoBlob","rmFile","accept","filePreview","PasswordWidget","radio","RangeWidget","getValue","selected","optEmptyVal","selectedIndexes","enumOptionsIndexForValue","showPlaceholderOption","TextareaWidget","_ref4","rows","defaultProps","TextWidget","TimeWidget","URLWidget","UpDownWidget","AltDateTimeWidget","CheckboxWidget","CheckboxesWidget","FileWidget","HiddenWidget","RadioWidget","Form","getUsedFormData","data","_pick","getFieldNames","pathSchema","getAllPaths","_obj","paths","newPaths","path","RJSF_ADDITIONAL_PROPERTIES_FLAG","NAME_KEY","formValue","_get","_isEmpty","val","omitExtraData","retrievedSchema","toPathSchema","fieldNames","extraErrors","liveOmit","noValidate","liveValidate","getStateFromProps","mustValidate","_retrievedSchema","schemaValidation","validate","schemaValidationErrors","schemaValidationErrorSchema","merged","validationDataMerge","toErrorList","reset","onSubmit","persist","validateFormWithFormData","status","submit","formElement","current","submitCustomEvent","CustomEvent","cancelable","dispatchEvent","requestSubmit","extraErrorsBlockSubmit","focusOnFirstError","onError","prevErrors","hasError","focusOnError","validator","createRef","getSnapshotBeforeUpdate","isSchemaChanged","isFormDataChanged","shouldUpdate","snapshot","inputFormData","edit","rootSchema","experimental_defaultFormStateBehavior","doesSchemaUtilsDiffer","createSchemaUtils","currentErrors","shouldRender","altSchemaUtils","customValidate","transformErrors","resolvedSchema","getValidator","validateFormData","renderErrors","getRegistry","customTranslateString","englishStringTranslator","UI_GLOBAL_OPTIONS_KEY","_toPath","unshift","elementId","elements","querySelector","focus","validateForm","tagName","method","autoComplete","enctype","acceptcharset","acceptCharset","noHtml5Validate","showErrorList","_internalFormWrapper","as","FormTag","SUBMIT_BTN_OPTIONS_KEY","submitOptions","submitUiSchema","encType","thing","File","Number","isNaN","ADDITIONAL_PROPERTIES_KEY","ALL_OF_KEY","CONST_KEY","DEFAULT_KEY","DEPENDENCIES_KEY","ENUM_KEY","IF_KEY","REQUIRED_KEY","ROOT_SCHEMA_PREFIX","UI_WIDGET_KEY","globalOptions","expandable","maxProperties","createErrorHandler","handler","addError","isPlainObject","formObject","isEqualWith","obj","other","splitKeyElementFromObject","findSchemaDefinitionRecursive","recurseList","decodedRef","startsWith","jsonpointer","nextRef","firstRef","restRefs","circularPath","remaining","theRef","subSchema","findSchemaDefinition","getOptionMatchingSimpleDiscriminator","discriminatorField","simpleDiscriminatorMatch","isNumber","isValid","requiresAnyOf","augmentedSchema","shallowClone","allOf","getFirstMatchingOption","maybeString","isString","guessType","find","obj1","obj2","left","right","union","retrieveSchemaInternal","getAllPermutationsOfXxxOf","listOfLists","permutations","flatMap","element","times","permutation","resolveReference","expandAllBranches","updatedSchema","resolveAllReferences","localSchema","childrenLists","updatedProps","transform","childList","merge","uniq","flattenDeep","isEqual","rawFormData","resolvedSchemas","updatedSchemas","resolveDependencies","allOfSubschema","resolveSchema","if","expression","else","otherwise","resolvedSchemaLessConditional","conditionValue","schemas","conditionalSchema","resolveCondition","restOfSchema","mergeAllOf","deep","resolvedSchemaWithoutAllOf","theSchema","aFormData","stubExistingAdditionalProperties","dependencies","remainingSchema","anyOrOneOf","resolveAnyOrOneOfSchemas","processDependencies","dependencyKey","remainingDependencies","dependencyValue","withDependentProperties","withDependentSchema","additionallyRequired","Set","dependent","dependentSchema","subschema","resolvedOneOf","validSubschemas","conditionPropertySchema","conditionSchema","dependentSubschema","withExactlyOneSubschema","JUNK_OPTION","__not_really_there__","calculateIndexScore","totalScore","score","newSchema","newScore","resolvedOptions","allValidIndexes","validList","scoreCount","bestIndex","scoreData","bestScore","add","mergeDefaultsWithFormData","defaults","mergeExtraArrayDefaults","defaultsArray","mapped","concatArrays","toMerge","altSchemas","isConstant","uniqueItems","AdditionalItemsHandling","getInnerSchemaForArrayItem","Ignore","maybeAddDefaultToObject","computedDefault","includeUndefinedValues","isParentRequired","requiredFields","emptyObjectFields","isSelfOrParentRequired","computeDefaults","parentDefaults","_recurseList","schemaToCompute","updatedRecurseList","refName","objectDefaults","additionalPropertiesSchema","formDataRequired","neverPopulate","arrayMinItems","populate","ignoreMinItemsFlagSet","isSkipEmptyDefaults","computeSkipPopulate","emptyDefault","schemaItem","Fallback","defaultsLength","minItems","defaultEntries","fillerSchema","Invert","fillerDefault","fillerEntries","fill","mergeExtraDefaults","NO_VALUE","Symbol","oldSchema","removeOldSchemaData","nestedData","oldKeyedSchema","newKeyedSchema","oldSchemaTypeForKey","newSchemaTypeForKey","newOptionDefault","oldOptionDefault","newOptionConst","oldOptionConst","oldSchemaItems","newSchemaItems","oldSchemaType","newSchemaType","aValue","itemValue","toIdSchemaInternal","findIndex","toPathSchemaInternal","xxxOf","schemaItems","schemaAdditionalItems","SchemaUtils","mergeValidationData","validationData","additionalErrorSchema","oldErrors","oldErrorSchema","dataURILike","splitted","media","base64","mime","mediaparams","decodeURI","param","binary","atob","charCodeAt","Blob","pad","num","width","stop","getFullYear","reverse","stringToTranslate","params","inputString","output","parts","partIndex","part","replaceStringParameters","valueIndex","allEnumOptions","sel","isNil","ErrorSchemaBuilder","initialSchema","resetAllErrors","ErrorSchema","getOrCreateErrorBlock","pathOfError","errorBlock","addErrors","errorOrList","errorsList","setErrors","listToAdd","clearErrors","date","yearRange","day","month","year","hour","minute","second","dayObj","monthObj","yearObj","dateElementProp","rangeSpec","spec","multipleOf","step","minimum","min","maximum","max","defaultType","autoDefaultStepAny","inputType","DEFAULT_OPTIONS","widgetMap","password","email","hostname","ipv4","ipv6","uri","textarea","datetime","updown","checkboxes","registeredWidgets","ReactIs","AWidget","MergedWidget","defaultOptions","mergeWidgetOptions","hashForSchema","allKeys","hash","hashString","idGenerator","suffix","theId","optionIndex","fallback","dateString","aSchemaDef","aSchema","toConstant","arrayToHash","arr","prev","curr","propertyHash","orderFiltered","orderHash","restIndex","lastIndexOf","complete","includeTime","getTime","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","schemaSome","component","dateObject","utcTime","UTC","fieldPath","errorList","childSchema","toErrorSchema","builder","toPath","unwrapErrorHandler","errorHandler","jsonDate","yyyy","MM","getMonth","dd","getDate","hh","getHours","mm","getMinutes","ss","getSeconds","SSS","getMilliseconds","withIdRefPrefix","schemaNode","node","withIdRefPrefixArray","realObj","withIdRefPrefixObject","$$typeof","exports","ContextConsumer","ContextProvider","Element","ForwardRef","Fragment","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","SuspenseList","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType","getModuleId","typeOf","module","AJV_CONFIG","allErrors","multipleOfPrecision","strict","verbose","COLOR_FORMAT_REGEX","DATA_URL_FORMAT_REGEX","processRawValidationErrors","validationError","invalidSchemaError","instancePath","keyword","schemaPath","parentSchema","missingProperty","currentProperty","uiSchemaTitle","parentSchemaTitle","transformRJSFValidationErrors","$schema","userErrorSchema","AJV8Validator","localizer","additionalMetaSchemas","customFormats","ajvOptionsOverrides","ajvFormatOptions","AjvClass","ajv","Ajv","addFormats","addFormat","addKeyword","addMetaSchema","formatName","createAjvInstance","removeSchema","rawValidation","compilationError","compiledValidator","getSchema","compile","handleSchemaUpdate","rootSchemaId","addSchema","schemaWithIdRefPrefix","core_1","require","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","_addVocabularies","addVocabulary","opts","_addDefaultMetaSchema","meta","metaSchema","$data","$dataMetaSchema","refs","defaultMeta","defineProperty","validate_1","enumerable","KeywordCxt","codegen_1","str","nil","Name","CodeGen","validation_error_1","ref_error_1","_CodeOrName","IDENTIFIER","emptyStr","names","_Code","code","_items","_str","_names","strs","args","addCodeArg","plus","expr","safeStringify","res","mergeExprItems","optimize","arg","c1","c2","_templateObject","_taggedTemplateLiteral","_templateObject2","rx","code_1","scope_1","code_2","strConcat","getProperty","regexpCode","scope_2","Scope","ValueScope","ValueScopeName","varKinds","GT","GTE","LT","LTE","EQ","NEQ","NOT","OR","AND","ADD","Node","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","es5","_n","var","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Break","_ref5","Throw","_ref6","AnyCode","_ref7","ParentNode","nodes","subtractNames","addNames","BlockNode","Root","Else","kind","If","condition","cond","ns","not","For","ForLoop","iteration","ForRange","to","ForIter","loop","iterable","Func","async","_async","Return","Try","catch","finally","Catch","Finally","replaceName","_templateObject4","par","extScope","_values","_blockStarts","lines","_extScope","_scope","parent","_nodes","_root","prefix","scopeName","scopeValue","prefixOrName","getScopeValue","keyOrRef","scopeRefs","scopeCode","_def","nameOrPrefix","constant","toName","_leafNode","_constant","let","operators","thenBody","elseBody","_blockNode","endIf","elseIf","_elseNode","_endBlockNode","_for","forBody","endFor","forRange","forOf","forIn","ownProperties","_templateObject3","break","return","try","tryBody","catchCode","finallyCode","_currNode","throw","block","body","nodeCount","endBlock","len","toClose","func","funcBody","endFunc","N1","N2","andCode","mappend","orCode","_templateObject5","_templateObject6","_len3","_key3","ValueError","UsedValueState","prefixes","_prefixes","_parent","_newName","ng","_nameGroup","nameStr","setValue","itemIndex","scopePath","line","scope","valueKey","vs","_name","Map","_reduceValues","usedValues","getCode","valueCode","nameSet","Started","def","Completed","util_1","names_1","gen","errObj","_templateObject14","vErrors","_templateObject15","_templateObject16","_templateObject17","returnErrors","it","errs","validateName","schemaEnv","$async","_templateObject18","ValidationError","_templateObject19","cxt","keywordError","errorPaths","overrideAllErrors","compositeRule","errorObjectCode","errsCount","schemaValue","_templateObject7","_templateObject8","_templateObject9","errorPath","_templateObject10","_templateObject11","errSchemaPath","_templateObject12","_templateObject13","propertyName","createErrors","_templateObject20","errorInstancePath","errorSchemaPath","_ref8","topSchemaRef","_templateObject24","messages","_templateObject25","extraErrorProps","errorObject","instPath","_templateObject21","getErrorPath","Type","Str","schPath","_templateObject22","_templateObject23","resolve_1","SchemaEnv","env","dynamicAnchors","root","baseId","normalizeId","localRefs","compileSchema","sch","_sch","getCompilingSchema","call","getFullPath","uriResolver","_ValidationError","schemaCxt","parentData","parentDataProperty","dataNames","dataPathArr","dataLevel","dataTypes","definedProperties","source","jtd","self","sourceCode","_compilations","validateFunctionCode","validateCode","process","Function","makeValidate","scopeValues","unevaluated","evaluated","dynamicProps","dynamicItems","logger","delete","inlineOrCompile","inlineRef","inlineRefs","schEnv","s2","s1","refPath","_getFullPath","getJsonPointer","schOrRef","schId","resolveUrl","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","fragment","partSchema","unescapeFragment","schemaHasRulesButRef","RULES","valCxt","rootData","json","jsonPos","jsonLen","jsonPart","MissingRefError","resolver","msg","missingRef","missingSchema","equal","traverse","SIMPLE_INLINED","limit","hasRef","countKeys","REF_KEYWORDS","count","Infinity","eachItem","serialize","TRAILING_SLASH_HASH","ANCHOR","baseIds","pathPrefix","schemaRefs","jsonPtr","parentJsonPtr","fullPath","innerBaseId","addRef","_resolve","ambiguos","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","jsonTypes","groups","rules","types","post","keywords","checkUnknownRules","strictSchema","checkStrictMode","schemaHasRules","escapeJsonPointer","unescapeJsonPointer","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","evaluatedPropsToName","ps","setEvaluated","xs","Math","snippets","mode","dataProp","dataPropType","jsPropertySyntax","Num","shouldUseGroup","group","rule","shouldUseRule","definition","implements","kwd","errors_1","boolError","falseSchemaError","schemaCode","reportError","valid","rules_1","applicability_1","DataType","getJSONTypes","ts","isJSONType","nullable","coerceTo","coerceTypes","COERCIBLE","coerceToTypes","checkTypes","schemaHasRulesForType","wrongType","checkDataTypes","strictNumbers","Wrong","dataType","coerced","coerceSpecificType","reportTypeError","assignParentData","coerceData","checkDataType","strictNums","correct","Correct","numCond","_templateObject26","_templateObject27","_cond","and","_templateObject28","_templateObject29","toHash","notObj","_templateObject30","_templateObject31","typeError","_templateObject32","_templateObject33","schemaRefOrVal","getTypeErrorContext","assignDefault","childData","useDefaults","ty","boolSchema_1","dataType_1","dataType_2","defaults_1","keyword_1","subschema_1","validateFunction","funcSourceUrl","dynamicRef","destructureValCxtES5","destructureValCxt","subschemaCode","isSchemaObj","checkKeywords","schemaCxtHasRules","$comment","commentKeyword","updateContext","checkAsyncSchema","typeAndKeywords","subSchemaObjCode","boolOrEmptySchema","ignoreKeywordsWithRef","checkRefsAndKeywords","schemaKeywords","getSchemaTypes","coerceAndCheckDataType","rootName","typeErrors","groupKeywords","iterateKeywords","strictTypes","includesType","strictTypesError","withTypes","narrowSchemaTypes","checkContextTypes","allowUnionTypes","checkMultipleTypes","hasApplicableType","checkKeywordTypes","checkStrictTypes","keywordCode","assignDefaults","schTs","kwdT","checkNoDefault","resetEvaluated","assignEvaluated","returnResults","topSchemaObjCode","topBoolOrEmptySchema","validateKeywordUsage","getData","validSchemaType","allowUndefined","trackErrors","successAction","failAction","failResult","pass","fail","fail$data","_templateObject34","or","invalid$data","append","errorParams","setParams","_error","reportExtraError","$dataError","keyword$DataError","resetErrorsCount","ok","block$data","$dataValid","check$data","_templateObject35","validateSchema","st","_templateObject36","wrong$DataType","validateSchemaRef","_templateObject37","invalid$DataSchema","appl","getSubschema","extendSubschemaData","extendSubschemaMode","nextContext","mergeEvaluated","mergeValidEvaluated","ruleType","funcKeywordCode","macroKeywordCode","JSON_POINTER","RELATIVE_JSON_POINTER","jsonPointer","matches","up","errorMsg","segments","segment","_templateObject38","_templateObject39","pointerType","modifyData","useKeyword","macroSchema","macro","schemaRef","checkAsyncKeyword","validateRef","assignValid","_await","passCxt","passContext","passSchema","callValidateCode","modifying","reportErrs","ruleErrs","validateAsync","validateErrs","validateSync","extendErrors","addErrs","deps","prototype","hasOwnProperty","errorsText","schemaProp","escapeFragment","dpType","dataContextProps","_nextData","jtdDiscriminator","jtdMetadata","compile_1","codegen_2","$dataRefSchema","uri_1","defaultRegExp","flags","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","unknownFormats","cache","ajvErrors","deprecatedOptions","unicode","requiredOptions","_optz","regExp","_f","_h","_g","_k","_j","strictTuples","_m","_l","strictRequired","_p","_o","loopRequired","_q","loopEnum","_r","_s","_t","_u","_v","addUsedSchema","_w","_x","validateFormats","_y","unicodeRegExp","_z","int32range","_0","formats","_loading","_cache","noLogs","getLogger","formatOpt","getRules","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","_dataRefSchema","schemaKeyRef","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","loadMetaSchema","_compileAsync","checkLoaded","loadMissingSchema","_loadSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","_removeAllSchemas","clear","cacheKey","definitions","kwdOrDef","checkKeyword","addRule","keywordMetaschema","getKeyword","removeKeyword","separator","dataVar","keywordsJsonPointers","seg","schemaOrData","regex","getSchemaRefs","_compileMetaSchema","currentOpts","checkOpts","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","before","addBeforeRule","_rule","$dataRef","ucs2length","pos","validation","validateAdditionalItems","alwaysValidSchema","validateItems","additionalProperty","removeAdditional","allSchemaProperties","patProps","patternProperties","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isOwnProperty","usePattern","isAdditional","schCxt","validateUnion","minContains","maxContains","next","validateItemsWithCount","schValid","checkLimits","_valid","depsCount","property_ies","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","validatePropertyDeps","validateSchemaDeps","missing","hasProperty","propertyInData","depProp","checkReportMissingProp","checkMissingProp","reportMissingProp","ifClause","hasThen","hasSchema","hasElse","validateIf","validateClause","additionalItems_1","prefixItems_1","items_1","items2020_1","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","patternProperties_1","not_1","anyOf_1","oneOf_1","allOf_1","if_1","thenElse_1","draft2020","applicator","validateTuple","validateArray","extraItems","schArr","fullTuple","checkStrictTuple","prefixItems","passing","util_2","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","alwaysValid","validatePatternProperties","allProps","hasDefault","applyPropertySchema","hasPropFunc","noPropertyInData","schemaMap","context","dataAndSchema","newRegExp","pattern","useFunc","validArr","notValid","id_1","ref_1","core","callRef","callRootRef","schOrEnv","resolveRef","getValidate","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","callAsyncRef","types_1","discrError","DiscrError","Tag","mapping","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","tagValue","getMapping","Mapping","validateMapping","validation_1","applicator_1","format_1","metadata_1","draft7Vocabularies","metadataVocabulary","contentVocabulary","fmts","fDef","fType","callFormat","validData","invalidFmt","validate$DataFormat","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","fmtDef","fmt","getFormat","validCondition","validateFormat","equal_1","useLoop","eql","getEql","vSchema","equalCode","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","comp","ucs2length_1","ops","KWDs","okStr","exclusiveMaximum","exclusiveMinimum","prec","invalid","loopAllRequired","allErrorsMode","loopUntilMissing","exitOnErrorMode","requiredKey","itemTypes","loopN","indices","loopN2","outer","cb","_traverse","pre","parentKeyword","keyIndex","arrayKeywords","propsKeywords","skipKeywords","contains","propertyNames","$defs","maxLength","minLength","minProperties","compare","compareDate","compareTime","dateTime","DATE_TIME_SEPARATOR","compareDateTime","duration","NOT_URI_FRAGMENT","URI","url","Z_ANCHOR","uuid","BYTE","lastIndex","int32","isInteger","MAX_INT32","MIN_INT32","int64","float","validateNumber","double","fullFormats","DATE","DAYS","isLeapYear","d1","d2","TIME","withTimeZone","timeZone","t1","t2","a1","a2","dt1","dt2","formats_1","limit_1","fullName","fastName","formatsPlugin","exportName","fastFormats","formatNames","fs","ajv_1","formatMaximum","formatMinimum","formatExclusiveMaximum","formatExclusiveMinimum","fCxt","compareCode","formatLimitDefinition","isIntegerArray","isFunction","MAXINT","pow","gcd","bitwise","clbk","nargs","TypeError","valueOf","sortBy","uniqWith","intersectionWith","isBoolean","normalizeArray","undef","stringArray","undefEmpty","keyValEqual","undefAndZero","emptySchema","emptyObjUndef","isSchema","undefArrayEqual","schemaGroup","aVal","bVal","unsortedArray","uniqueA","uniqueB","comparers","falseUndefined","acceptsUndefined","schemaProps","ignore","innerCompare","bValue","comparer","flatten","without","propName","isEmptySchema","allUniqueKeys","deleteUndefinedProps","returnObject","getValues","notUndefined","withoutArr","mergeItems","subSchemas","sub","schemaAtPos","getItemSchemas","compacted","parents","mergers","itemsCompacted","schemasAtLastPos","mergeSchemaGroup","ignoreAdditionalProperties","otherSubSchemas","ownKeys","ownPatterns","allOtherKeys","keysMatchingPattern","pk","ownPatternKeys","allOtherPatterns","computeLcm","defaultsDeep","intersection","pullAll","propertiesResolver","itemsResolver","isFalse","isTrue","schemaResolver","first","maximumValue","minimumValue","getAllOf","getAnyOfCombinations","arrOfArrays","combinations","combination","throwIncompatible","asJSON","variable","callGroupResolver","complexKeywords","resolverName","resolverConfig","complexResolvers","extractedKeywordsOnly","unique","extraKey","createRequiredMetaArray","schemaGroupProps","schemaArrays","defaultResolvers","normalized","common","childKey","childSchemas","innerCompacted","innerArrays","innerSchemas","arrayMetaScheams","schemaGroups","tryMergeSchemaGroups","integers","factor","defaultComplexResolvers","merger","totalSchemas","resolvers","entries","base","complexKeysArr","mainKeyWord","resolverConf","compareProp","defaultResolver","resolverKeyword","config","hasExcape","escapeMatcher","escapeReplacer","untilde","compilePointer","pointer","hasNextPart","setter","compiled","DataView","getNative","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","entry","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","WeakMap","thisArg","iteratee","predicate","resIndex","baseIndexOf","comparator","baseTimes","isArguments","isBuffer","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","offset","accumulator","initAccum","baseAssignValue","eq","objValue","copyObject","keysIn","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","argsTag","funcTag","objectTag","cloneableTags","baseClone","bitmask","customizer","isDeep","isFlat","isFull","isFunc","stacked","subValue","objectCreate","create","baseCreate","proto","arrayIncludes","arrayIncludesWith","arrayMap","baseUnary","cacheHas","isCommon","valuesLength","computed","valuesIndex","baseForOwn","baseEach","createBaseEach","fromIndex","fromRight","arrayPush","isFlattenable","baseFlatten","depth","isStrict","baseFor","createBaseFor","castPath","toKey","keysFunc","symbolsFunc","getRawTag","objectToString","symToStringTag","toStringTag","baseFindIndex","baseIsNaN","strictIndexOf","nativeMin","arrays","othLength","othIndex","caches","seen","baseGetTag","isObjectLike","baseIsEqualDeep","baseIsEqual","equalArrays","equalByTag","equalObjects","arrayTag","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","matchData","noCustomizer","srcValue","COMPARE_PARTIAL_FLAG","isMasked","toSource","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","isLength","typedArrayTags","baseMatches","baseMatchesProperty","identity","isPrototype","nativeKeys","nativeKeysIn","isProto","isArrayLike","collection","baseIsMatch","getMatchData","matchesStrictComparable","hasIn","isKey","isStrictComparable","assignMergeValue","baseMergeDeep","safeGet","baseMerge","srcIndex","cloneTypedArray","isArrayLikeObject","toPlainObject","mergeFunc","isTyped","baseGet","baseIteratee","baseMap","baseSortBy","compareMultiple","iteratees","orders","basePickBy","baseSet","baseIndexOfWith","eachFunc","overRest","setToString","nested","baseSetToString","end","isSymbol","symbolProto","symbolToString","baseToString","trimmedEndIndex","reTrimStart","createSet","setToArray","seenIndex","last","stringToPath","arrayBuffer","byteLength","freeExports","nodeType","freeModule","Buffer","allocUnsafe","buffer","cloneArrayBuffer","dataView","byteOffset","reFlags","regexp","symbolValueOf","symbol","typedArray","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","compareAscending","objCriteria","criteria","othCriteria","ordersLength","isNew","getSymbols","getSymbolsIn","coreJsData","baseRest","isIterateeCall","assigner","sources","guard","noop","customDefaultsMerge","arraySome","isPartial","arrLength","arrStacked","othStacked","arrValue","othValue","compared","mapToArray","convert","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","freeGlobal","global","baseGetAllKeys","isKeyable","baseIsNative","getPrototype","overArg","getPrototypeOf","nativeObjectToString","isOwn","unmasked","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","Ctor","ctorString","hasFunc","nativeCreate","input","cloneDataView","cloneRegExp","cloneSymbol","spreadableSymbol","isConcatSpreadable","reIsUint","reIsDeepProp","reIsPlainProp","maskSrcKey","uid","IE_PROTO","assocIndexOf","getMapData","memoize","freeProcess","nodeUtil","binding","nativeMax","otherArgs","baseSlice","freeSelf","shortOut","nativeNow","now","lastCalled","stamp","pairs","LARGE_ARRAY_SIZE","memoizeCapped","rePropName","reEscapeChar","quote","subString","reWhitespace","CLONE_DEEP_FLAG","propsIndex","propsLength","mergeWith","INFINITY","castFunction","baseHas","hasPath","baseHasIn","baseIntersection","castArrayLikeObject","baseIsArguments","stubFalse","baseKeys","baseIsMap","nodeIsMap","objectCtorString","baseIsSet","nodeIsSet","baseIsTypedArray","nodeIsTypedArray","arrayLikeKeys","baseKeysIn","memoized","Cache","createAssigner","baseUnset","customOmitClone","flatRest","basePick","pick","baseProperty","basePropertyDeep","basePullAll","arrayReduce","baseReduce","baseOrderBy","toInteger","MAX_ARRAY_LENGTH","toNumber","toFinite","remainder","baseTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","isArrLike","baseUniq","baseDifference","freeze","defineProperties","raw","__esModule","normalizeIPv6","normalizeIPv4","removeDotSegments","recomposeAuthority","normalizeComponentEncoding","SCHEMES","resolveComponents","relative","skipNormalization","tolerant","scheme","userinfo","host","port","query","cmpts","components","nid","nss","reference","resourceName","secure","uriTokens","schemeHandler","skipEscape","unescape","escape","authority","absolutePath","hexLookUp","fromCharCode","URI_PARSE","parsed","gotEncoding","isIP","ipv4result","isIPV4","ipv6result","isIPV6","unicodeSupport","domainHost","nonSimpleDomain","URL","domainToASCII","skipNormalize","encodeURI","fastUri","normalize","baseURI","relativeURI","schemelessOptions","uriA","uriB","UUID_REG","URN_REG","isSecure","wsComponents","httpParse","httpSerialize","http","ws","https","wss","urn","urnComponents","urnScheme","uriComponents","uuidComponents","HEX","findToken","address","stripLeadingZeros","stringArrayToHexStripped","keepZero","strip","tokenCount","zone","isZone","endipv6Encountered","endIpv6","consume","hex","cursor","getIPV6","newHost","escapedHost","token","out","skip","ind","RDS1","RDS2","RDS3","RDS5","ipV4res","ipV6res","esc","im"],"sourceRoot":""}